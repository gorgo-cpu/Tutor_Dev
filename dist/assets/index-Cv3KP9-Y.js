var Eq=Object.defineProperty;var wq=(n,e,t)=>e in n?Eq(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var bt=(n,e,t)=>wq(n,typeof e!="symbol"?e+"":e,t);function Tq(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const a=Object.getOwnPropertyDescriptor(i,r);a&&Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();var Xb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kr(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Xw={exports:{}},gn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tN;function Mq(){if(tN)return gn;tN=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function g(q){return q===null||typeof q!="object"?null:(q=p&&q[p]||q["@@iterator"],typeof q=="function"?q:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,S={};function x(q,X,oe){this.props=q,this.context=X,this.refs=S,this.updater=oe||y}x.prototype.isReactComponent={},x.prototype.setState=function(q,X){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,X,"setState")},x.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function w(){}w.prototype=x.prototype;function T(q,X,oe){this.props=q,this.context=X,this.refs=S,this.updater=oe||y}var M=T.prototype=new w;M.constructor=T,_(M,x.prototype),M.isPureReactComponent=!0;var C=Array.isArray,N={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function P(q,X,oe,ue,Z,ce){return oe=ce.ref,{$$typeof:n,type:q,key:X,ref:oe!==void 0?oe:null,props:ce}}function z(q,X){return P(q.type,X,void 0,void 0,void 0,q.props)}function I(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function L(q){var X={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(oe){return X[oe]})}var H=/\/+/g;function j(q,X){return typeof q=="object"&&q!==null&&q.key!=null?L(""+q.key):X.toString(36)}function G(){}function K(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(G,G):(q.status="pending",q.then(function(X){q.status==="pending"&&(q.status="fulfilled",q.value=X)},function(X){q.status==="pending"&&(q.status="rejected",q.reason=X)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function ee(q,X,oe,ue,Z){var ce=typeof q;(ce==="undefined"||ce==="boolean")&&(q=null);var me=!1;if(q===null)me=!0;else switch(ce){case"bigint":case"string":case"number":me=!0;break;case"object":switch(q.$$typeof){case n:case e:me=!0;break;case h:return me=q._init,ee(me(q._payload),X,oe,ue,Z)}}if(me)return Z=Z(q),me=ue===""?"."+j(q,0):ue,C(Z)?(oe="",me!=null&&(oe=me.replace(H,"$&/")+"/"),ee(Z,X,oe,"",function(We){return We})):Z!=null&&(I(Z)&&(Z=z(Z,oe+(Z.key==null||q&&q.key===Z.key?"":(""+Z.key).replace(H,"$&/")+"/")+me)),X.push(Z)),1;me=0;var de=ue===""?".":ue+":";if(C(q))for(var ve=0;ve<q.length;ve++)ue=q[ve],ce=de+j(ue,ve),me+=ee(ue,X,oe,ce,Z);else if(ve=g(q),typeof ve=="function")for(q=ve.call(q),ve=0;!(ue=q.next()).done;)ue=ue.value,ce=de+j(ue,ve++),me+=ee(ue,X,oe,ce,Z);else if(ce==="object"){if(typeof q.then=="function")return ee(K(q),X,oe,ue,Z);throw X=String(q),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return me}function Y(q,X,oe){if(q==null)return q;var ue=[],Z=0;return ee(q,ue,"","",function(ce){return X.call(oe,ce,Z++)}),ue}function re(q){if(q._status===-1){var X=q._result;X=X(),X.then(function(oe){(q._status===0||q._status===-1)&&(q._status=1,q._result=oe)},function(oe){(q._status===0||q._status===-1)&&(q._status=2,q._result=oe)}),q._status===-1&&(q._status=0,q._result=X)}if(q._status===1)return q._result.default;throw q._result}var J=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)};function se(){}return gn.Children={map:Y,forEach:function(q,X,oe){Y(q,function(){X.apply(this,arguments)},oe)},count:function(q){var X=0;return Y(q,function(){X++}),X},toArray:function(q){return Y(q,function(X){return X})||[]},only:function(q){if(!I(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},gn.Component=x,gn.Fragment=t,gn.Profiler=r,gn.PureComponent=T,gn.StrictMode=i,gn.Suspense=l,gn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,gn.act=function(){throw Error("act(...) is not supported in production builds of React.")},gn.cache=function(q){return function(){return q.apply(null,arguments)}},gn.cloneElement=function(q,X,oe){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var ue=_({},q.props),Z=q.key,ce=void 0;if(X!=null)for(me in X.ref!==void 0&&(ce=void 0),X.key!==void 0&&(Z=""+X.key),X)!D.call(X,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&X.ref===void 0||(ue[me]=X[me]);var me=arguments.length-2;if(me===1)ue.children=oe;else if(1<me){for(var de=Array(me),ve=0;ve<me;ve++)de[ve]=arguments[ve+2];ue.children=de}return P(q.type,Z,void 0,void 0,ce,ue)},gn.createContext=function(q){return q={$$typeof:s,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:a,_context:q},q},gn.createElement=function(q,X,oe){var ue,Z={},ce=null;if(X!=null)for(ue in X.key!==void 0&&(ce=""+X.key),X)D.call(X,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(Z[ue]=X[ue]);var me=arguments.length-2;if(me===1)Z.children=oe;else if(1<me){for(var de=Array(me),ve=0;ve<me;ve++)de[ve]=arguments[ve+2];Z.children=de}if(q&&q.defaultProps)for(ue in me=q.defaultProps,me)Z[ue]===void 0&&(Z[ue]=me[ue]);return P(q,ce,void 0,void 0,null,Z)},gn.createRef=function(){return{current:null}},gn.forwardRef=function(q){return{$$typeof:o,render:q}},gn.isValidElement=I,gn.lazy=function(q){return{$$typeof:h,_payload:{_status:-1,_result:q},_init:re}},gn.memo=function(q,X){return{$$typeof:u,type:q,compare:X===void 0?null:X}},gn.startTransition=function(q){var X=N.T,oe={};N.T=oe;try{var ue=q(),Z=N.S;Z!==null&&Z(oe,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(se,J)}catch(ce){J(ce)}finally{N.T=X}},gn.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},gn.use=function(q){return N.H.use(q)},gn.useActionState=function(q,X,oe){return N.H.useActionState(q,X,oe)},gn.useCallback=function(q,X){return N.H.useCallback(q,X)},gn.useContext=function(q){return N.H.useContext(q)},gn.useDebugValue=function(){},gn.useDeferredValue=function(q,X){return N.H.useDeferredValue(q,X)},gn.useEffect=function(q,X){return N.H.useEffect(q,X)},gn.useId=function(){return N.H.useId()},gn.useImperativeHandle=function(q,X,oe){return N.H.useImperativeHandle(q,X,oe)},gn.useInsertionEffect=function(q,X){return N.H.useInsertionEffect(q,X)},gn.useLayoutEffect=function(q,X){return N.H.useLayoutEffect(q,X)},gn.useMemo=function(q,X){return N.H.useMemo(q,X)},gn.useOptimistic=function(q,X){return N.H.useOptimistic(q,X)},gn.useReducer=function(q,X,oe){return N.H.useReducer(q,X,oe)},gn.useRef=function(q){return N.H.useRef(q)},gn.useState=function(q){return N.H.useState(q)},gn.useSyncExternalStore=function(q,X,oe){return N.H.useSyncExternalStore(q,X,oe)},gn.useTransition=function(){return N.H.useTransition()},gn.version="19.0.0",gn}var nN;function Pg(){return nN||(nN=1,Xw.exports=Mq()),Xw.exports}var F=Pg();const B=kr(F),tD=Tq({__proto__:null,default:B},[F]);var Kw={exports:{}},sy={},Zw={exports:{}},Qw={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iN;function Aq(){return iN||(iN=1,(function(n){function e(Y,re){var J=Y.length;Y.push(re);e:for(;0<J;){var se=J-1>>>1,q=Y[se];if(0<r(q,re))Y[se]=re,Y[J]=q,J=se;else break e}}function t(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var re=Y[0],J=Y.pop();if(J!==re){Y[0]=J;e:for(var se=0,q=Y.length,X=q>>>1;se<X;){var oe=2*(se+1)-1,ue=Y[oe],Z=oe+1,ce=Y[Z];if(0>r(ue,J))Z<q&&0>r(ce,ue)?(Y[se]=ce,Y[Z]=J,se=Z):(Y[se]=ue,Y[oe]=J,se=oe);else if(Z<q&&0>r(ce,J))Y[se]=ce,Y[Z]=J,se=Z;else break e}}return re}function r(Y,re){var J=Y.sortIndex-re.sortIndex;return J!==0?J:Y.id-re.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();n.unstable_now=function(){return s.now()-o}}var l=[],u=[],h=1,p=null,g=3,y=!1,_=!1,S=!1,x=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function M(Y){for(var re=t(u);re!==null;){if(re.callback===null)i(u);else if(re.startTime<=Y)i(u),re.sortIndex=re.expirationTime,e(l,re);else break;re=t(u)}}function C(Y){if(S=!1,M(Y),!_)if(t(l)!==null)_=!0,K();else{var re=t(u);re!==null&&ee(C,re.startTime-Y)}}var N=!1,D=-1,P=5,z=-1;function I(){return!(n.unstable_now()-z<P)}function L(){if(N){var Y=n.unstable_now();z=Y;var re=!0;try{e:{_=!1,S&&(S=!1,w(D),D=-1),y=!0;var J=g;try{t:{for(M(Y),p=t(l);p!==null&&!(p.expirationTime>Y&&I());){var se=p.callback;if(typeof se=="function"){p.callback=null,g=p.priorityLevel;var q=se(p.expirationTime<=Y);if(Y=n.unstable_now(),typeof q=="function"){p.callback=q,M(Y),re=!0;break t}p===t(l)&&i(l),M(Y)}else i(l);p=t(l)}if(p!==null)re=!0;else{var X=t(u);X!==null&&ee(C,X.startTime-Y),re=!1}}break e}finally{p=null,g=J,y=!1}re=void 0}}finally{re?H():N=!1}}}var H;if(typeof T=="function")H=function(){T(L)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,G=j.port2;j.port1.onmessage=L,H=function(){G.postMessage(null)}}else H=function(){x(L,0)};function K(){N||(N=!0,H())}function ee(Y,re){D=x(function(){Y(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_continueExecution=function(){_||y||(_=!0,K())},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(Y){switch(g){case 1:case 2:case 3:var re=3;break;default:re=g}var J=g;g=re;try{return Y()}finally{g=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Y,re){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var J=g;g=Y;try{return re()}finally{g=J}},n.unstable_scheduleCallback=function(Y,re,J){var se=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?se+J:se):J=se,Y){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=J+q,Y={id:h++,callback:re,priorityLevel:Y,startTime:J,expirationTime:q,sortIndex:-1},J>se?(Y.sortIndex=J,e(u,Y),t(l)===null&&Y===t(u)&&(S?(w(D),D=-1):S=!0,ee(C,J-se))):(Y.sortIndex=q,e(l,Y),_||y||(_=!0,K())),Y},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(Y){var re=g;return function(){var J=g;g=re;try{return Y.apply(this,arguments)}finally{g=J}}}})(Qw)),Qw}var rN;function nD(){return rN||(rN=1,Zw.exports=Aq()),Zw.exports}var Jw={exports:{}},Na={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aN;function Cq(){if(aN)return Na;aN=1;var n=Pg();function e(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(l,u,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:""+p,children:l,containerInfo:u,implementation:h}}var s=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Na.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Na.createPortal=function(l,u){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return a(l,u,null,h)},Na.flushSync=function(l){var u=s.T,h=i.p;try{if(s.T=null,i.p=2,l)return l()}finally{s.T=u,i.p=h,i.d.f()}},Na.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,i.d.C(l,u))},Na.prefetchDNS=function(l){typeof l=="string"&&i.d.D(l)},Na.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var h=u.as,p=o(h,u.crossOrigin),g=typeof u.integrity=="string"?u.integrity:void 0,y=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;h==="style"?i.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:y}):h==="script"&&i.d.X(l,{crossOrigin:p,integrity:g,fetchPriority:y,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Na.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var h=o(u.as,u.crossOrigin);i.d.M(l,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&i.d.M(l)},Na.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var h=u.as,p=o(h,u.crossOrigin);i.d.L(l,h,{crossOrigin:p,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Na.preloadModule=function(l,u){if(typeof l=="string")if(u){var h=o(u.as,u.crossOrigin);i.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else i.d.m(l)},Na.requestFormReset=function(l){i.d.r(l)},Na.unstable_batchedUpdates=function(l,u){return l(u)},Na.useFormState=function(l,u,h){return s.H.useFormState(l,u,h)},Na.useFormStatus=function(){return s.H.useHostTransitionStatus()},Na.version="19.0.0",Na}var sN;function s5(){if(sN)return Jw.exports;sN=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Jw.exports=Cq(),Jw.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oN;function Rq(){if(oN)return sy;oN=1;var n=nD(),e=Pg(),t=s5();function i(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)f+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}var a=Symbol.for("react.element"),s=Symbol.for("react.transitional.element"),o=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),g=Symbol.for("react.consumer"),y=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),M=Symbol.for("react.offscreen"),C=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function D(c){return c===null||typeof c!="object"?null:(c=N&&c[N]||c["@@iterator"],typeof c=="function"?c:null)}var P=Symbol.for("react.client.reference");function z(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===P?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case l:return"Fragment";case o:return"Portal";case h:return"Profiler";case u:return"StrictMode";case S:return"Suspense";case x:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case y:return(c.displayName||"Context")+".Provider";case g:return(c._context.displayName||"Context")+".Consumer";case _:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case w:return f=c.displayName||null,f!==null?f:z(c.type)||"Memo";case T:f=c._payload,c=c._init;try{return z(c(f))}catch{}}return null}var I=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=Object.assign,H,j;function G(c){if(H===void 0)try{throw Error()}catch(v){var f=v.stack.trim().match(/\n( *(at )?)/);H=f&&f[1]||"",j=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+H+c+j}var K=!1;function ee(c,f){if(!c||K)return"";K=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(f){var ft=function(){throw Error()};if(Object.defineProperty(ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ft,[])}catch(Qe){var He=Qe}Reflect.construct(c,[],ft)}else{try{ft.call()}catch(Qe){He=Qe}c.call(ft.prototype)}}else{try{throw Error()}catch(Qe){He=Qe}(ft=c())&&typeof ft.catch=="function"&&ft.catch(function(){})}}catch(Qe){if(Qe&&He&&typeof Qe.stack=="string")return[Qe.stack,He.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=b.DetermineComponentFrameRoot(),V=O[0],ne=O[1];if(V&&ne){var fe=V.split(`
`),Ee=ne.split(`
`);for(A=b=0;b<fe.length&&!fe[b].includes("DetermineComponentFrameRoot");)b++;for(;A<Ee.length&&!Ee[A].includes("DetermineComponentFrameRoot");)A++;if(b===fe.length||A===Ee.length)for(b=fe.length-1,A=Ee.length-1;1<=b&&0<=A&&fe[b]!==Ee[A];)A--;for(;1<=b&&0<=A;b--,A--)if(fe[b]!==Ee[A]){if(b!==1||A!==1)do if(b--,A--,0>A||fe[b]!==Ee[A]){var nt=`
`+fe[b].replace(" at new "," at ");return c.displayName&&nt.includes("<anonymous>")&&(nt=nt.replace("<anonymous>",c.displayName)),nt}while(1<=b&&0<=A);break}}}finally{K=!1,Error.prepareStackTrace=v}return(v=c?c.displayName||c.name:"")?G(v):""}function Y(c){switch(c.tag){case 26:case 27:case 5:return G(c.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 15:return c=ee(c.type,!1),c;case 11:return c=ee(c.type.render,!1),c;case 1:return c=ee(c.type,!0),c;default:return""}}function re(c){try{var f="";do f+=Y(c),c=c.return;while(c);return f}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}function J(c){var f=c,v=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,(f.flags&4098)!==0&&(v=f.return),c=f.return;while(c)}return f.tag===3?v:null}function se(c){if(c.tag===13){var f=c.memoizedState;if(f===null&&(c=c.alternate,c!==null&&(f=c.memoizedState)),f!==null)return f.dehydrated}return null}function q(c){if(J(c)!==c)throw Error(i(188))}function X(c){var f=c.alternate;if(!f){if(f=J(c),f===null)throw Error(i(188));return f!==c?null:c}for(var v=c,b=f;;){var A=v.return;if(A===null)break;var O=A.alternate;if(O===null){if(b=A.return,b!==null){v=b;continue}break}if(A.child===O.child){for(O=A.child;O;){if(O===v)return q(A),c;if(O===b)return q(A),f;O=O.sibling}throw Error(i(188))}if(v.return!==b.return)v=A,b=O;else{for(var V=!1,ne=A.child;ne;){if(ne===v){V=!0,v=A,b=O;break}if(ne===b){V=!0,b=A,v=O;break}ne=ne.sibling}if(!V){for(ne=O.child;ne;){if(ne===v){V=!0,v=O,b=A;break}if(ne===b){V=!0,b=O,v=A;break}ne=ne.sibling}if(!V)throw Error(i(189))}}if(v.alternate!==b)throw Error(i(190))}if(v.tag!==3)throw Error(i(188));return v.stateNode.current===v?c:f}function oe(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c;for(c=c.child;c!==null;){if(f=oe(c),f!==null)return f;c=c.sibling}return null}var ue=Array.isArray,Z=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},me=[],de=-1;function ve(c){return{current:c}}function We(c){0>de||(c.current=me[de],me[de]=null,de--)}function ze(c,f){de++,me[de]=c.current,c.current=f}var qe=ve(null),_e=ve(null),Ae=ve(null),te=ve(null);function ke(c,f){switch(ze(Ae,f),ze(_e,c),ze(qe,null),c=f.nodeType,c){case 9:case 11:f=(f=f.documentElement)&&(f=f.namespaceURI)?OU(f):0;break;default:if(c=c===8?f.parentNode:f,f=c.tagName,c=c.namespaceURI)c=OU(c),f=DU(c,f);else switch(f){case"svg":f=1;break;case"math":f=2;break;default:f=0}}We(qe),ze(qe,f)}function De(){We(qe),We(_e),We(Ae)}function Ie(c){c.memoizedState!==null&&ze(te,c);var f=qe.current,v=DU(f,c.type);f!==v&&(ze(_e,c),ze(qe,v))}function Te(c){_e.current===c&&(We(qe),We(_e)),te.current===c&&(We(te),ty._currentValue=ce)}var Xe=Object.prototype.hasOwnProperty,Pe=n.unstable_scheduleCallback,$=n.unstable_cancelCallback,W=n.unstable_shouldYield,ae=n.unstable_requestPaint,he=n.unstable_now,Se=n.unstable_getCurrentPriorityLevel,Oe=n.unstable_ImmediatePriority,je=n.unstable_UserBlockingPriority,Ge=n.unstable_NormalPriority,Ke=n.unstable_LowPriority,_t=n.unstable_IdlePriority,Ye=n.log,ct=n.unstable_setDisableYieldValue,it=null,Ze=null;function $e(c){if(Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(it,c,void 0,(c.current.flags&128)===128)}catch{}}function vt(c){if(typeof Ye=="function"&&ct(c),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(it,c)}catch{}}var gt=Math.clz32?Math.clz32:Je,jt=Math.log,ye=Math.LN2;function Je(c){return c>>>=0,c===0?32:31-(jt(c)/ye|0)|0}var Ue=128,et=4194304;function lt(c){var f=c&42;if(f!==0)return f;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function rt(c,f){var v=c.pendingLanes;if(v===0)return 0;var b=0,A=c.suspendedLanes,O=c.pingedLanes,V=c.warmLanes;c=c.finishedLanes!==0;var ne=v&134217727;return ne!==0?(v=ne&~A,v!==0?b=lt(v):(O&=ne,O!==0?b=lt(O):c||(V=ne&~V,V!==0&&(b=lt(V))))):(ne=v&~A,ne!==0?b=lt(ne):O!==0?b=lt(O):c||(V=v&~V,V!==0&&(b=lt(V)))),b===0?0:f!==0&&f!==b&&(f&A)===0&&(A=b&-b,V=f&-f,A>=V||A===32&&(V&4194176)!==0)?f:b}function Tt(c,f){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&f)===0}function Ft(c,f){switch(c){case 1:case 2:case 4:case 8:return f+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function At(){var c=Ue;return Ue<<=1,(Ue&4194176)===0&&(Ue=128),c}function Ut(){var c=et;return et<<=1,(et&62914560)===0&&(et=4194304),c}function Ln(c){for(var f=[],v=0;31>v;v++)f.push(c);return f}function Dn(c,f){c.pendingLanes|=f,f!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function ci(c,f,v,b,A,O){var V=c.pendingLanes;c.pendingLanes=v,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=v,c.entangledLanes&=v,c.errorRecoveryDisabledLanes&=v,c.shellSuspendCounter=0;var ne=c.entanglements,fe=c.expirationTimes,Ee=c.hiddenUpdates;for(v=V&~v;0<v;){var nt=31-gt(v),ft=1<<nt;ne[nt]=0,fe[nt]=-1;var He=Ee[nt];if(He!==null)for(Ee[nt]=null,nt=0;nt<He.length;nt++){var Qe=He[nt];Qe!==null&&(Qe.lane&=-536870913)}v&=~ft}b!==0&&dr(c,b,0),O!==0&&A===0&&c.tag!==0&&(c.suspendedLanes|=O&~(V&~f))}function dr(c,f,v){c.pendingLanes|=f,c.suspendedLanes&=~f;var b=31-gt(f);c.entangledLanes|=f,c.entanglements[b]=c.entanglements[b]|1073741824|v&4194218}function Li(c,f){var v=c.entangledLanes|=f;for(c=c.entanglements;v;){var b=31-gt(v),A=1<<b;A&f|c[b]&f&&(c[b]|=f),v&=~A}}function xi(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function ra(){var c=Z.p;return c!==0?c:(c=window.event,c===void 0?32:XU(c.type))}function pr(c,f){var v=Z.p;try{return Z.p=c,f()}finally{Z.p=v}}var zn=Math.random().toString(36).slice(2),_n="__reactFiber$"+zn,Zt="__reactProps$"+zn,_a="__reactContainer$"+zn,ps="__reactEvents$"+zn,df="__reactListeners$"+zn,tu="__reactHandles$"+zn,qo="__reactResources$"+zn,qa="__reactMarker$"+zn;function Wo(c){delete c[_n],delete c[Zt],delete c[ps],delete c[df],delete c[tu]}function ba(c){var f=c[_n];if(f)return f;for(var v=c.parentNode;v;){if(f=v[_a]||v[_n]){if(v=f.alternate,f.child!==null||v!==null&&v.child!==null)for(c=PU(c);c!==null;){if(v=c[_n])return v;c=PU(c)}return f}c=v,v=c.parentNode}return null}function Q(c){if(c=c[_n]||c[_a]){var f=c.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return c}return null}function be(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c.stateNode;throw Error(i(33))}function Ne(c){var f=c[qo];return f||(f=c[qo]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function ge(c){c[qa]=!0}var we=new Set,ut={};function mt(c,f){St(c,f),St(c+"Capture",f)}function St(c,f){for(ut[c]=f,c=0;c<f.length;c++)we.add(f[c])}var xt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ht=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),kt={},Dt={};function dn(c){return Xe.call(Dt,c)?!0:Xe.call(kt,c)?!1:Ht.test(c)?Dt[c]=!0:(kt[c]=!0,!1)}function ln(c,f,v){if(dn(f))if(v===null)c.removeAttribute(f);else{switch(typeof v){case"undefined":case"function":case"symbol":c.removeAttribute(f);return;case"boolean":var b=f.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){c.removeAttribute(f);return}}c.setAttribute(f,""+v)}}function jn(c,f,v){if(v===null)c.removeAttribute(f);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(f);return}c.setAttribute(f,""+v)}}function bn(c,f,v,b){if(b===null)c.removeAttribute(v);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(v);return}c.setAttributeNS(f,v,""+b)}}function qt(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function Nt(c){var f=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function mi(c){var f=Nt(c)?"checked":"value",v=Object.getOwnPropertyDescriptor(c.constructor.prototype,f),b=""+c[f];if(!c.hasOwnProperty(f)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var A=v.get,O=v.set;return Object.defineProperty(c,f,{configurable:!0,get:function(){return A.call(this)},set:function(V){b=""+V,O.call(this,V)}}),Object.defineProperty(c,f,{enumerable:v.enumerable}),{getValue:function(){return b},setValue:function(V){b=""+V},stopTracking:function(){c._valueTracker=null,delete c[f]}}}}function nn(c){c._valueTracker||(c._valueTracker=mi(c))}function mr(c){if(!c)return!1;var f=c._valueTracker;if(!f)return!0;var v=f.getValue(),b="";return c&&(b=Nt(c)?c.checked?"true":"false":c.value),c=b,c!==v?(f.setValue(c),!0):!1}function Rr(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var Ji=/[\n"\\]/g;function Fn(c){return c.replace(Ji,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function kn(c,f,v,b,A,O,V,ne){c.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?c.type=V:c.removeAttribute("type"),f!=null?V==="number"?(f===0&&c.value===""||c.value!=f)&&(c.value=""+qt(f)):c.value!==""+qt(f)&&(c.value=""+qt(f)):V!=="submit"&&V!=="reset"||c.removeAttribute("value"),f!=null?Ei(c,V,qt(f)):v!=null?Ei(c,V,qt(v)):b!=null&&c.removeAttribute("value"),A==null&&O!=null&&(c.defaultChecked=!!O),A!=null&&(c.checked=A&&typeof A!="function"&&typeof A!="symbol"),ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"?c.name=""+qt(ne):c.removeAttribute("name")}function Ii(c,f,v,b,A,O,V,ne){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(c.type=O),f!=null||v!=null){if(!(O!=="submit"&&O!=="reset"||f!=null))return;v=v!=null?""+qt(v):"",f=f!=null?""+qt(f):v,ne||f===c.value||(c.value=f),c.defaultValue=f}b=b??A,b=typeof b!="function"&&typeof b!="symbol"&&!!b,c.checked=ne?c.checked:!!b,c.defaultChecked=!!b,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(c.name=V)}function Ei(c,f,v){f==="number"&&Rr(c.ownerDocument)===c||c.defaultValue===""+v||(c.defaultValue=""+v)}function ui(c,f,v,b){if(c=c.options,f){f={};for(var A=0;A<v.length;A++)f["$"+v[A]]=!0;for(v=0;v<c.length;v++)A=f.hasOwnProperty("$"+c[v].value),c[v].selected!==A&&(c[v].selected=A),A&&b&&(c[v].defaultSelected=!0)}else{for(v=""+qt(v),f=null,A=0;A<c.length;A++){if(c[A].value===v){c[A].selected=!0,b&&(c[A].defaultSelected=!0);return}f!==null||c[A].disabled||(f=c[A])}f!==null&&(f.selected=!0)}}function wi(c,f,v){if(f!=null&&(f=""+qt(f),f!==c.value&&(c.value=f),v==null)){c.defaultValue!==f&&(c.defaultValue=f);return}c.defaultValue=v!=null?""+qt(v):""}function Vr(c,f,v,b){if(f==null){if(b!=null){if(v!=null)throw Error(i(92));if(ue(b)){if(1<b.length)throw Error(i(93));b=b[0]}v=b}v==null&&(v=""),f=v}v=qt(f),c.defaultValue=v,b=c.textContent,b===v&&b!==""&&b!==null&&(c.value=b)}function gr(c,f){if(f){var v=c.firstChild;if(v&&v===c.lastChild&&v.nodeType===3){v.nodeValue=f;return}}c.textContent=f}var nu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zl(c,f,v){var b=f.indexOf("--")===0;v==null||typeof v=="boolean"||v===""?b?c.setProperty(f,""):f==="float"?c.cssFloat="":c[f]="":b?c.setProperty(f,v):typeof v!="number"||v===0||nu.has(f)?f==="float"?c.cssFloat=v:c[f]=(""+v).trim():c[f]=v+"px"}function iu(c,f,v){if(f!=null&&typeof f!="object")throw Error(i(62));if(c=c.style,v!=null){for(var b in v)!v.hasOwnProperty(b)||f!=null&&f.hasOwnProperty(b)||(b.indexOf("--")===0?c.setProperty(b,""):b==="float"?c.cssFloat="":c[b]="");for(var A in f)b=f[A],f.hasOwnProperty(A)&&v[A]!==b&&Zl(c,A,b)}else for(var O in f)f.hasOwnProperty(O)&&Zl(c,O,f[O])}function qs(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ru=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ms(c){return ru.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var Ws=null;function Ys(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var vo=null,Wa=null;function Ql(c){var f=Q(c);if(f&&(c=f.stateNode)){var v=c[Zt]||null;e:switch(c=f.stateNode,f.type){case"input":if(kn(c,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name),f=v.name,v.type==="radio"&&f!=null){for(v=c;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll('input[name="'+Fn(""+f)+'"][type="radio"]'),f=0;f<v.length;f++){var b=v[f];if(b!==c&&b.form===c.form){var A=b[Zt]||null;if(!A)throw Error(i(90));kn(b,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(f=0;f<v.length;f++)b=v[f],b.form===c.form&&mr(b)}break e;case"textarea":wi(c,v.value,v.defaultValue);break e;case"select":f=v.value,f!=null&&ui(c,!!v.multiple,f,!1)}}}var Jl=!1;function pf(c,f,v){if(Jl)return c(f,v);Jl=!0;try{var b=c(f);return b}finally{if(Jl=!1,(vo!==null||Wa!==null)&&(Ru(),vo&&(f=vo,c=Wa,Wa=vo=null,Ql(f),c)))for(f=0;f<c.length;f++)Ql(c[f])}}function $s(c,f){var v=c.stateNode;if(v===null)return null;var b=v[Zt]||null;if(b===null)return null;v=b[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(c=c.type,b=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!b;break e;default:c=!1}if(c)return null;if(v&&typeof v!="function")throw Error(i(231,f,typeof v));return v}var Yo=!1;if(xt)try{var $o={};Object.defineProperty($o,"passive",{get:function(){Yo=!0}}),window.addEventListener("test",$o,$o),window.removeEventListener("test",$o,$o)}catch{Yo=!1}var Bi=null,au=null,su=null;function mf(){if(su)return su;var c,f=au,v=f.length,b,A="value"in Bi?Bi.value:Bi.textContent,O=A.length;for(c=0;c<v&&f[c]===A[c];c++);var V=v-c;for(b=1;b<=V&&f[v-b]===A[O-b];b++);return su=A.slice(c,1<b?1-b:void 0)}function gs(c){var f=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&f===13&&(c=13)):c=f,c===10&&(c=13),32<=c||c===13?c:0}function Xo(){return!0}function ec(){return!1}function zi(c){function f(v,b,A,O,V){this._reactName=v,this._targetInst=A,this.type=b,this.nativeEvent=O,this.target=V,this.currentTarget=null;for(var ne in c)c.hasOwnProperty(ne)&&(v=c[ne],this[ne]=v?v(O):O[ne]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?Xo:ec,this.isPropagationStopped=ec,this}return L(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=Xo)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=Xo)},persist:function(){},isPersistent:Xo}),f}var Sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},aa=zi(Sa),Ko=L({},Sa,{view:0,detail:0}),gf=zi(Ko),Ya,vs,Zo,ys=L({},Ko,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uh,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Zo&&(Zo&&c.type==="mousemove"?(Ya=c.screenX-Zo.screenX,vs=c.screenY-Zo.screenY):vs=Ya=0,Zo=c),Ya)},movementY:function(c){return"movementY"in c?c.movementY:vs}}),ou=zi(ys),Gr=L({},ys,{dataTransfer:0}),Jg=zi(Gr),Ci=L({},Ko,{relatedTarget:0}),Qo=zi(Ci),Oh=L({},Sa,{animationName:0,elapsedTime:0,pseudoElement:0}),Ap=zi(Oh),Or=L({},Sa,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),xa=zi(Or),er=L({},Sa,{data:0}),$a=zi(er),Dh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},R_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},O_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ev(c){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(c):(c=O_[c])?!!f[c]:!1}function Uh(){return ev}var D_=L({},Ko,{key:function(c){if(c.key){var f=Dh[c.key]||c.key;if(f!=="Unidentified")return f}return c.type==="keypress"?(c=gs(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?R_[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uh,charCode:function(c){return c.type==="keypress"?gs(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?gs(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),tv=zi(D_),nv=L({},ys,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cp=zi(nv),U_=L({},Ko,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uh}),iv=zi(U_),N_=L({},Sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jo=zi(N_),rv=L({},ys,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),mw=zi(rv),P_=L({},Sa,{newState:0,oldState:0}),tc=zi(P_),el=[9,13,27,32],Nh=xt&&"CompositionEvent"in window,lu=null;xt&&"documentMode"in document&&(lu=document.documentMode);var Ph=xt&&"TextEvent"in window&&!lu,Lh=xt&&(!Nh||lu&&8<lu&&11>=lu),nc=" ",Dr=!1;function Ih(c,f){switch(c){case"keyup":return el.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function av(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var ic=!1;function Bh(c,f){switch(c){case"compositionend":return av(f);case"keypress":return f.which!==32?null:(Dr=!0,nc);case"textInput":return c=f.data,c===nc&&Dr?null:c;default:return null}}function sv(c,f){if(ic)return c==="compositionend"||!Nh&&Ih(c,f)?(c=mf(),su=au=Bi=null,ic=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return Lh&&f.locale!=="ko"?null:f.data;default:return null}}var Rp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ov(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f==="input"?!!Rp[c.type]:f==="textarea"}function Ea(c,f,v,b){vo?Wa?Wa.push(b):Wa=[b]:vo=b,f=Pb(f,"onChange"),0<f.length&&(v=new aa("onChange","change",null,v,b),c.push({event:v,listeners:f}))}var vf=null,cu=null;function L_(c){TU(c,0)}function zh(c){var f=be(c);if(mr(f))return c}function Op(c,f){if(c==="change")return f}var Dp=!1;if(xt){var Up;if(xt){var yf="oninput"in document;if(!yf){var _f=document.createElement("div");_f.setAttribute("oninput","return;"),yf=typeof _f.oninput=="function"}Up=yf}else Up=!1;Dp=Up&&(!document.documentMode||9<document.documentMode)}function gi(){vf&&(vf.detachEvent("onpropertychange",I_),cu=vf=null)}function I_(c){if(c.propertyName==="value"&&zh(cu)){var f=[];Ea(f,cu,c,Ys(c)),pf(L_,f)}}function gw(c,f,v){c==="focusin"?(gi(),vf=f,cu=v,vf.attachEvent("onpropertychange",I_)):c==="focusout"&&gi()}function B_(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return zh(cu)}function kh(c,f){if(c==="click")return zh(f)}function rc(c,f){if(c==="input"||c==="change")return zh(f)}function z_(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var wa=typeof Object.is=="function"?Object.is:z_;function Xs(c,f){if(wa(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var v=Object.keys(c),b=Object.keys(f);if(v.length!==b.length)return!1;for(b=0;b<v.length;b++){var A=v[b];if(!Xe.call(f,A)||!wa(c[A],f[A]))return!1}return!0}function Ta(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function lv(c,f){var v=Ta(c);c=0;for(var b;v;){if(v.nodeType===3){if(b=c+v.textContent.length,c<=f&&b>=f)return{node:v,offset:f-c};c=b}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=Ta(v)}}function cv(c,f){return c&&f?c===f?!0:c&&c.nodeType===3?!1:f&&f.nodeType===3?cv(c,f.parentNode):"contains"in c?c.contains(f):c.compareDocumentPosition?!!(c.compareDocumentPosition(f)&16):!1:!1}function uv(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var f=Rr(c.document);f instanceof c.HTMLIFrameElement;){try{var v=typeof f.contentWindow.location.href=="string"}catch{v=!1}if(v)c=f.contentWindow;else break;f=Rr(c.document)}return f}function Fh(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f&&(f==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||f==="textarea"||c.contentEditable==="true")}function fv(c,f){var v=uv(f);f=c.focusedElem;var b=c.selectionRange;if(v!==f&&f&&f.ownerDocument&&cv(f.ownerDocument.documentElement,f)){if(b!==null&&Fh(f)){if(c=b.start,v=b.end,v===void 0&&(v=c),"selectionStart"in f)f.selectionStart=c,f.selectionEnd=Math.min(v,f.value.length);else if(v=(c=f.ownerDocument||document)&&c.defaultView||window,v.getSelection){v=v.getSelection();var A=f.textContent.length,O=Math.min(b.start,A);b=b.end===void 0?O:Math.min(b.end,A),!v.extend&&O>b&&(A=b,b=O,O=A),A=lv(f,O);var V=lv(f,b);A&&V&&(v.rangeCount!==1||v.anchorNode!==A.node||v.anchorOffset!==A.offset||v.focusNode!==V.node||v.focusOffset!==V.offset)&&(c=c.createRange(),c.setStart(A.node,A.offset),v.removeAllRanges(),O>b?(v.addRange(c),v.extend(V.node,V.offset)):(c.setEnd(V.node,V.offset),v.addRange(c)))}}for(c=[],v=f;v=v.parentNode;)v.nodeType===1&&c.push({element:v,left:v.scrollLeft,top:v.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<c.length;f++)v=c[f],v.element.scrollLeft=v.left,v.element.scrollTop=v.top}}var Np=xt&&"documentMode"in document&&11>=document.documentMode,uu=null,hv=null,bf=null,Pp=!1;function _s(c,f,v){var b=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;Pp||uu==null||uu!==Rr(b)||(b=uu,"selectionStart"in b&&Fh(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),bf&&Xs(bf,b)||(bf=b,b=Pb(hv,"onSelect"),0<b.length&&(f=new aa("onSelect","select",null,f,v),c.push({event:f,listeners:b}),f.target=uu)))}function tl(c,f){var v={};return v[c.toLowerCase()]=f.toLowerCase(),v["Webkit"+c]="webkit"+f,v["Moz"+c]="moz"+f,v}var fu={animationend:tl("Animation","AnimationEnd"),animationiteration:tl("Animation","AnimationIteration"),animationstart:tl("Animation","AnimationStart"),transitionrun:tl("Transition","TransitionRun"),transitionstart:tl("Transition","TransitionStart"),transitioncancel:tl("Transition","TransitionCancel"),transitionend:tl("Transition","TransitionEnd")},dv={},Lp={};xt&&(Lp=document.createElement("div").style,"AnimationEvent"in window||(delete fu.animationend.animation,delete fu.animationiteration.animation,delete fu.animationstart.animation),"TransitionEvent"in window||delete fu.transitionend.transition);function tr(c){if(dv[c])return dv[c];if(!fu[c])return c;var f=fu[c],v;for(v in f)if(f.hasOwnProperty(v)&&v in Lp)return dv[c]=f[v];return c}var pv=tr("animationend"),Ma=tr("animationiteration"),mv=tr("animationstart"),nl=tr("transitionrun"),Sf=tr("transitionstart"),ac=tr("transitioncancel"),Ip=tr("transitionend"),Bp=new Map,il="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function bs(c,f){Bp.set(c,f),mt(f,[c])}var Ur=[],yo=0,rl=0;function Hh(){for(var c=yo,f=rl=yo=0;f<c;){var v=Ur[f];Ur[f++]=null;var b=Ur[f];Ur[f++]=null;var A=Ur[f];Ur[f++]=null;var O=Ur[f];if(Ur[f++]=null,b!==null&&A!==null){var V=b.pending;V===null?A.next=A:(A.next=V.next,V.next=A),b.pending=A}O!==0&&Gh(v,A,O)}}function Vh(c,f,v,b){Ur[yo++]=c,Ur[yo++]=f,Ur[yo++]=v,Ur[yo++]=b,rl|=b,c.lanes|=b,c=c.alternate,c!==null&&(c.lanes|=b)}function hu(c,f,v,b){return Vh(c,f,v,b),jh(c)}function al(c,f){return Vh(c,null,null,f),jh(c)}function Gh(c,f,v){c.lanes|=v;var b=c.alternate;b!==null&&(b.lanes|=v);for(var A=!1,O=c.return;O!==null;)O.childLanes|=v,b=O.alternate,b!==null&&(b.childLanes|=v),O.tag===22&&(c=O.stateNode,c===null||c._visibility&1||(A=!0)),c=O,O=O.return;A&&f!==null&&c.tag===3&&(O=c.stateNode,A=31-gt(v),O=O.hiddenUpdates,c=O[A],c===null?O[A]=[f]:c.push(f),f.lane=v|536870912)}function jh(c){if(50<Os)throw Os=0,Ml=null,Error(i(185));for(var f=c.return;f!==null;)c=f,f=c.return;return c.tag===3?c.stateNode:null}var sc={},zp=new WeakMap;function Aa(c,f){if(typeof c=="object"&&c!==null){var v=zp.get(c);return v!==void 0?v:(f={value:c,source:f,stack:re(f)},zp.set(c,f),f)}return{value:c,source:f,stack:re(f)}}var du=[],oc=0,jr=null,qh=0,ii=[],Xa=0,sl=null,_o=1,ol="";function sa(c,f){du[oc++]=qh,du[oc++]=jr,jr=c,qh=f}function gv(c,f,v){ii[Xa++]=_o,ii[Xa++]=ol,ii[Xa++]=sl,sl=c;var b=_o;c=ol;var A=32-gt(b)-1;b&=~(1<<A),v+=1;var O=32-gt(f)+A;if(30<O){var V=A-A%5;O=(b&(1<<V)-1).toString(32),b>>=V,A-=V,_o=1<<32-gt(f)+A|v<<A|b,ol=O+c}else _o=1<<O|v<<A|b,ol=c}function Wh(c){c.return!==null&&(sa(c,1),gv(c,1,0))}function lc(c){for(;c===jr;)jr=du[--oc],du[oc]=null,qh=du[--oc],du[oc]=null;for(;c===sl;)sl=ii[--Xa],ii[Xa]=null,ol=ii[--Xa],ii[Xa]=null,_o=ii[--Xa],ii[Xa]=null}var qr=null,xr=null,Un=!1,Ss=null,xs=!1,Yh=Error(i(519));function pu(c){var f=Error(i(418,""));throw bo(Aa(f,c)),Yh}function k_(c){var f=c.stateNode,v=c.type,b=c.memoizedProps;switch(f[_n]=c,f[Zt]=b,v){case"dialog":Pn("cancel",f),Pn("close",f);break;case"iframe":case"object":case"embed":Pn("load",f);break;case"video":case"audio":for(v=0;v<Kv.length;v++)Pn(Kv[v],f);break;case"source":Pn("error",f);break;case"img":case"image":case"link":Pn("error",f),Pn("load",f);break;case"details":Pn("toggle",f);break;case"input":Pn("invalid",f),Ii(f,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0),nn(f);break;case"select":Pn("invalid",f);break;case"textarea":Pn("invalid",f),Vr(f,b.value,b.defaultValue,b.children),nn(f)}v=b.children,typeof v!="string"&&typeof v!="number"&&typeof v!="bigint"||f.textContent===""+v||b.suppressHydrationWarning===!0||RU(f.textContent,v)?(b.popover!=null&&(Pn("beforetoggle",f),Pn("toggle",f)),b.onScroll!=null&&Pn("scroll",f),b.onScrollEnd!=null&&Pn("scrollend",f),b.onClick!=null&&(f.onclick=Lb),f=!0):f=!1,f||pu(c)}function F_(c){for(qr=c.return;qr;)switch(qr.tag){case 3:case 27:xs=!0;return;case 5:case 13:xs=!1;return;default:qr=qr.return}}function xf(c){if(c!==qr)return!1;if(!Un)return F_(c),Un=!0,!1;var f=!1,v;if((v=c.tag!==3&&c.tag!==27)&&((v=c.tag===5)&&(v=c.type,v=!(v!=="form"&&v!=="button")||Iw(c.type,c.memoizedProps)),v=!v),v&&(f=!0),f&&xr&&pu(c),F_(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(i(317));e:{for(c=c.nextSibling,f=0;c;){if(c.nodeType===8)if(v=c.data,v==="/$"){if(f===0){xr=Cl(c.nextSibling);break e}f--}else v!=="$"&&v!=="$!"&&v!=="$?"||f++;c=c.nextSibling}xr=null}}else xr=qr?Cl(c.stateNode.nextSibling):null;return!0}function Ef(){xr=qr=null,Un=!1}function bo(c){Ss===null?Ss=[c]:Ss.push(c)}var cc=Error(i(460)),vv=Error(i(474)),kp={then:function(){}};function H_(c){return c=c.status,c==="fulfilled"||c==="rejected"}function $h(){}function uc(c,f,v){switch(v=c[v],v===void 0?c.push(f):v!==f&&(f.then($h,$h),f=v),f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,c===cc?Error(i(483)):c;default:if(typeof f.status=="string")f.then($h,$h);else{if(c=$n,c!==null&&100<c.shellSuspendCounter)throw Error(i(482));c=f,c.status="pending",c.then(function(b){if(f.status==="pending"){var A=f;A.status="fulfilled",A.value=b}},function(b){if(f.status==="pending"){var A=f;A.status="rejected",A.reason=b}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,c===cc?Error(i(483)):c}throw wf=f,cc}}var wf=null;function Hn(){if(wf===null)throw Error(i(459));var c=wf;return wf=null,c}var fc=null,Xh=0;function Kh(c){var f=Xh;return Xh+=1,fc===null&&(fc=[]),uc(fc,c,f)}function Zh(c,f){f=f.props.ref,c.ref=f!==void 0?f:null}function Fp(c,f){throw f.$$typeof===a?Error(i(525)):(c=Object.prototype.toString.call(f),Error(i(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c)))}function V_(c){var f=c._init;return f(c._payload)}function G_(c){function f(Ce,xe){if(c){var Le=Ce.deletions;Le===null?(Ce.deletions=[xe],Ce.flags|=16):Le.push(xe)}}function v(Ce,xe){if(!c)return null;for(;xe!==null;)f(Ce,xe),xe=xe.sibling;return null}function b(Ce){for(var xe=new Map;Ce!==null;)Ce.key!==null?xe.set(Ce.key,Ce):xe.set(Ce.index,Ce),Ce=Ce.sibling;return xe}function A(Ce,xe){return Ce=ua(Ce,xe),Ce.index=0,Ce.sibling=null,Ce}function O(Ce,xe,Le){return Ce.index=Le,c?(Le=Ce.alternate,Le!==null?(Le=Le.index,Le<xe?(Ce.flags|=33554434,xe):Le):(Ce.flags|=33554434,xe)):(Ce.flags|=1048576,xe)}function V(Ce){return c&&Ce.alternate===null&&(Ce.flags|=33554434),Ce}function ne(Ce,xe,Le,ot){return xe===null||xe.tag!==6?(xe=ar(Le,Ce.mode,ot),xe.return=Ce,xe):(xe=A(xe,Le),xe.return=Ce,xe)}function fe(Ce,xe,Le,ot){var Ot=Le.type;return Ot===l?nt(Ce,xe,Le.props.children,ot,Le.key):xe!==null&&(xe.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===T&&V_(Ot)===xe.type)?(xe=A(xe,Le.props),Zh(xe,Le),xe.return=Ce,xe):(xe=kf(Le.type,Le.key,Le.props,null,Ce.mode,ot),Zh(xe,Le),xe.return=Ce,xe)}function Ee(Ce,xe,Le,ot){return xe===null||xe.tag!==4||xe.stateNode.containerInfo!==Le.containerInfo||xe.stateNode.implementation!==Le.implementation?(xe=cd(Le,Ce.mode,ot),xe.return=Ce,xe):(xe=A(xe,Le.children||[]),xe.return=Ce,xe)}function nt(Ce,xe,Le,ot,Ot){return xe===null||xe.tag!==7?(xe=Oc(Le,Ce.mode,ot,Ot),xe.return=Ce,xe):(xe=A(xe,Le),xe.return=Ce,xe)}function ft(Ce,xe,Le){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return xe=ar(""+xe,Ce.mode,Le),xe.return=Ce,xe;if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case s:return Le=kf(xe.type,xe.key,xe.props,null,Ce.mode,Le),Zh(Le,xe),Le.return=Ce,Le;case o:return xe=cd(xe,Ce.mode,Le),xe.return=Ce,xe;case T:var ot=xe._init;return xe=ot(xe._payload),ft(Ce,xe,Le)}if(ue(xe)||D(xe))return xe=Oc(xe,Ce.mode,Le,null),xe.return=Ce,xe;if(typeof xe.then=="function")return ft(Ce,Kh(xe),Le);if(xe.$$typeof===y)return ft(Ce,im(Ce,xe),Le);Fp(Ce,xe)}return null}function He(Ce,xe,Le,ot){var Ot=xe!==null?xe.key:null;if(typeof Le=="string"&&Le!==""||typeof Le=="number"||typeof Le=="bigint")return Ot!==null?null:ne(Ce,xe,""+Le,ot);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case s:return Le.key===Ot?fe(Ce,xe,Le,ot):null;case o:return Le.key===Ot?Ee(Ce,xe,Le,ot):null;case T:return Ot=Le._init,Le=Ot(Le._payload),He(Ce,xe,Le,ot)}if(ue(Le)||D(Le))return Ot!==null?null:nt(Ce,xe,Le,ot,null);if(typeof Le.then=="function")return He(Ce,xe,Kh(Le),ot);if(Le.$$typeof===y)return He(Ce,xe,im(Ce,Le),ot);Fp(Ce,Le)}return null}function Qe(Ce,xe,Le,ot,Ot){if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return Ce=Ce.get(Le)||null,ne(xe,Ce,""+ot,Ot);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case s:return Ce=Ce.get(ot.key===null?Le:ot.key)||null,fe(xe,Ce,ot,Ot);case o:return Ce=Ce.get(ot.key===null?Le:ot.key)||null,Ee(xe,Ce,ot,Ot);case T:var Cn=ot._init;return ot=Cn(ot._payload),Qe(Ce,xe,Le,ot,Ot)}if(ue(ot)||D(ot))return Ce=Ce.get(Le)||null,nt(xe,Ce,ot,Ot,null);if(typeof ot.then=="function")return Qe(Ce,xe,Le,Kh(ot),Ot);if(ot.$$typeof===y)return Qe(Ce,xe,Le,im(xe,ot),Ot);Fp(xe,ot)}return null}function It(Ce,xe,Le,ot){for(var Ot=null,Cn=null,zt=xe,$t=xe=0,Qr=null;zt!==null&&$t<Le.length;$t++){zt.index>$t?(Qr=zt,zt=null):Qr=zt.sibling;var Vn=He(Ce,zt,Le[$t],ot);if(Vn===null){zt===null&&(zt=Qr);break}c&&zt&&Vn.alternate===null&&f(Ce,zt),xe=O(Vn,xe,$t),Cn===null?Ot=Vn:Cn.sibling=Vn,Cn=Vn,zt=Qr}if($t===Le.length)return v(Ce,zt),Un&&sa(Ce,$t),Ot;if(zt===null){for(;$t<Le.length;$t++)zt=ft(Ce,Le[$t],ot),zt!==null&&(xe=O(zt,xe,$t),Cn===null?Ot=zt:Cn.sibling=zt,Cn=zt);return Un&&sa(Ce,$t),Ot}for(zt=b(zt);$t<Le.length;$t++)Qr=Qe(zt,Ce,$t,Le[$t],ot),Qr!==null&&(c&&Qr.alternate!==null&&zt.delete(Qr.key===null?$t:Qr.key),xe=O(Qr,xe,$t),Cn===null?Ot=Qr:Cn.sibling=Qr,Cn=Qr);return c&&zt.forEach(function($f){return f(Ce,$f)}),Un&&sa(Ce,$t),Ot}function an(Ce,xe,Le,ot){if(Le==null)throw Error(i(151));for(var Ot=null,Cn=null,zt=xe,$t=xe=0,Qr=null,Vn=Le.next();zt!==null&&!Vn.done;$t++,Vn=Le.next()){zt.index>$t?(Qr=zt,zt=null):Qr=zt.sibling;var $f=He(Ce,zt,Vn.value,ot);if($f===null){zt===null&&(zt=Qr);break}c&&zt&&$f.alternate===null&&f(Ce,zt),xe=O($f,xe,$t),Cn===null?Ot=$f:Cn.sibling=$f,Cn=$f,zt=Qr}if(Vn.done)return v(Ce,zt),Un&&sa(Ce,$t),Ot;if(zt===null){for(;!Vn.done;$t++,Vn=Le.next())Vn=ft(Ce,Vn.value,ot),Vn!==null&&(xe=O(Vn,xe,$t),Cn===null?Ot=Vn:Cn.sibling=Vn,Cn=Vn);return Un&&sa(Ce,$t),Ot}for(zt=b(zt);!Vn.done;$t++,Vn=Le.next())Vn=Qe(zt,Ce,$t,Vn.value,ot),Vn!==null&&(c&&Vn.alternate!==null&&zt.delete(Vn.key===null?$t:Vn.key),xe=O(Vn,xe,$t),Cn===null?Ot=Vn:Cn.sibling=Vn,Cn=Vn);return c&&zt.forEach(function(xq){return f(Ce,xq)}),Un&&sa(Ce,$t),Ot}function lr(Ce,xe,Le,ot){if(typeof Le=="object"&&Le!==null&&Le.type===l&&Le.key===null&&(Le=Le.props.children),typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case s:e:{for(var Ot=Le.key;xe!==null;){if(xe.key===Ot){if(Ot=Le.type,Ot===l){if(xe.tag===7){v(Ce,xe.sibling),ot=A(xe,Le.props.children),ot.return=Ce,Ce=ot;break e}}else if(xe.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===T&&V_(Ot)===xe.type){v(Ce,xe.sibling),ot=A(xe,Le.props),Zh(ot,Le),ot.return=Ce,Ce=ot;break e}v(Ce,xe);break}else f(Ce,xe);xe=xe.sibling}Le.type===l?(ot=Oc(Le.props.children,Ce.mode,ot,Le.key),ot.return=Ce,Ce=ot):(ot=kf(Le.type,Le.key,Le.props,null,Ce.mode,ot),Zh(ot,Le),ot.return=Ce,Ce=ot)}return V(Ce);case o:e:{for(Ot=Le.key;xe!==null;){if(xe.key===Ot)if(xe.tag===4&&xe.stateNode.containerInfo===Le.containerInfo&&xe.stateNode.implementation===Le.implementation){v(Ce,xe.sibling),ot=A(xe,Le.children||[]),ot.return=Ce,Ce=ot;break e}else{v(Ce,xe);break}else f(Ce,xe);xe=xe.sibling}ot=cd(Le,Ce.mode,ot),ot.return=Ce,Ce=ot}return V(Ce);case T:return Ot=Le._init,Le=Ot(Le._payload),lr(Ce,xe,Le,ot)}if(ue(Le))return It(Ce,xe,Le,ot);if(D(Le)){if(Ot=D(Le),typeof Ot!="function")throw Error(i(150));return Le=Ot.call(Le),an(Ce,xe,Le,ot)}if(typeof Le.then=="function")return lr(Ce,xe,Kh(Le),ot);if(Le.$$typeof===y)return lr(Ce,xe,im(Ce,Le),ot);Fp(Ce,Le)}return typeof Le=="string"&&Le!==""||typeof Le=="number"||typeof Le=="bigint"?(Le=""+Le,xe!==null&&xe.tag===6?(v(Ce,xe.sibling),ot=A(xe,Le),ot.return=Ce,Ce=ot):(v(Ce,xe),ot=ar(Le,Ce.mode,ot),ot.return=Ce,Ce=ot),V(Ce)):v(Ce,xe)}return function(Ce,xe,Le,ot){try{Xh=0;var Ot=lr(Ce,xe,Le,ot);return fc=null,Ot}catch(zt){if(zt===cc)throw zt;var Cn=qi(29,zt,null,Ce.mode);return Cn.lanes=ot,Cn.return=Ce,Cn}finally{}}}var ll=G_(!0),cl=G_(!1),mu=ve(null),gu=ve(0);function hc(c,f){c=Tl,ze(gu,c),ze(mu,f),Tl=c|f.baseLanes}function Hp(){ze(gu,Tl),ze(mu,mu.current)}function Qh(){Tl=gu.current,We(mu),We(gu)}var Ca=ve(null),So=null;function ul(c){var f=c.alternate;ze(nr,nr.current&1),ze(Ca,c),So===null&&(f===null||mu.current!==null||f.memoizedState!==null)&&(So=c)}function yv(c){if(c.tag===22){if(ze(nr,nr.current),ze(Ca,c),So===null){var f=c.alternate;f!==null&&f.memoizedState!==null&&(So=c)}}else fl()}function fl(){ze(nr,nr.current),ze(Ca,Ca.current)}function xo(c){We(Ca),So===c&&(So=null),We(nr)}var nr=ve(0);function Tf(c){for(var f=c;f!==null;){if(f.tag===13){var v=f.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||v.data==="$!"))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var En=typeof AbortController<"u"?AbortController:function(){var c=[],f=this.signal={aborted:!1,addEventListener:function(v,b){c.push(b)}};this.abort=function(){f.aborted=!0,c.forEach(function(v){return v()})}},vw=n.unstable_scheduleCallback,Ka=n.unstable_NormalPriority,ki={$$typeof:y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _v(){return{controller:new En,data:new Map,refCount:0}}function dc(c){c.refCount--,c.refCount===0&&vw(Ka,function(){c.controller.abort()})}var Eo=null,pc=0,vu=0,mc=null;function yw(c,f){if(Eo===null){var v=Eo=[];pc=0,vu=Aw(),mc={status:"pending",value:void 0,then:function(b){v.push(b)}}}return pc++,f.then(bv,bv),f}function bv(){if(--pc===0&&Eo!==null){mc!==null&&(mc.status="fulfilled");var c=Eo;Eo=null,vu=0,mc=null;for(var f=0;f<c.length;f++)(0,c[f])()}}function gc(c,f){var v=[],b={status:"pending",value:null,reason:null,then:function(A){v.push(A)}};return c.then(function(){b.status="fulfilled",b.value=f;for(var A=0;A<v.length;A++)(0,v[A])(f)},function(A){for(b.status="rejected",b.reason=A,A=0;A<v.length;A++)(0,v[A])(void 0)}),b}var Vp=I.S;I.S=function(c,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&yw(c,f),Vp!==null&&Vp(c,f)};var hl=ve(null);function Jh(){var c=hl.current;return c!==null?c:$n.pooledCache}function Mf(c,f){f===null?ze(hl,hl.current):ze(hl,f.pool)}function dl(){var c=Jh();return c===null?null:{parent:ki._currentValue,pool:c}}var pl=0,pn=null,qn=null,ir=null,Yt=!1,vc=!1,yc=!1,Af=0,_c=0,Cf=null,_w=0;function Ri(){throw Error(i(321))}function yu(c,f){if(f===null)return!1;for(var v=0;v<f.length&&v<c.length;v++)if(!wa(c[v],f[v]))return!1;return!0}function Sv(c,f,v,b,A,O){return pl=O,pn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,I.H=c===null||c.memoizedState===null?Sc:gl,yc=!1,O=v(b,A),yc=!1,vc&&(O=q_(f,v,b,A)),j_(c),O}function j_(c){I.H=To;var f=qn!==null&&qn.next!==null;if(pl=0,ir=qn=pn=null,Yt=!1,_c=0,Cf=null,f)throw Error(i(300));c===null||vr||(c=c.dependencies,c!==null&&Nf(c)&&(vr=!0))}function q_(c,f,v,b){pn=c;var A=0;do{if(vc&&(Cf=null),_c=0,vc=!1,25<=A)throw Error(i(301));if(A+=1,ir=qn=null,c.updateQueue!=null){var O=c.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}I.H=Su,O=f(v,b)}while(vc);return O}function bw(){var c=I.H,f=c.useState()[0];return f=typeof f.then=="function"?td(f):f,c=c.useState()[0],(qn!==null?qn.memoizedState:null)!==c&&(pn.flags|=1024),f}function xv(){var c=Af!==0;return Af=0,c}function ed(c,f,v){f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~v}function Gp(c){if(Yt){for(c=c.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}Yt=!1}pl=0,ir=qn=pn=null,vc=!1,_c=Af=0,Cf=null}function Nr(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ir===null?pn.memoizedState=ir=c:ir=ir.next=c,ir}function Fi(){if(qn===null){var c=pn.alternate;c=c!==null?c.memoizedState:null}else c=qn.next;var f=ir===null?pn.memoizedState:ir.next;if(f!==null)ir=f,qn=c;else{if(c===null)throw pn.alternate===null?Error(i(467)):Error(i(310));qn=c,c={memoizedState:qn.memoizedState,baseState:qn.baseState,baseQueue:qn.baseQueue,queue:qn.queue,next:null},ir===null?pn.memoizedState=ir=c:ir=ir.next=c}return ir}var jp;jp=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function td(c){var f=_c;return _c+=1,Cf===null&&(Cf=[]),c=uc(Cf,c,f),f=pn,(ir===null?f.memoizedState:ir.next)===null&&(f=f.alternate,I.H=f===null||f.memoizedState===null?Sc:gl),c}function Rf(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return td(c);if(c.$$typeof===y)return Wr(c)}throw Error(i(438,String(c)))}function Ks(c){var f=null,v=pn.updateQueue;if(v!==null&&(f=v.memoCache),f==null){var b=pn.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(f={data:b.data.map(function(A){return A.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),v===null&&(v=jp(),pn.updateQueue=v),v.memoCache=f,v=f.data[f.index],v===void 0)for(v=f.data[f.index]=Array(c),b=0;b<c;b++)v[b]=C;return f.index++,v}function vi(c,f){return typeof f=="function"?f(c):f}function Zs(c){var f=Fi();return Ra(f,qn,c)}function Ra(c,f,v){var b=c.queue;if(b===null)throw Error(i(311));b.lastRenderedReducer=v;var A=c.baseQueue,O=b.pending;if(O!==null){if(A!==null){var V=A.next;A.next=O.next,O.next=V}f.baseQueue=A=O,b.pending=null}if(O=c.baseState,A===null)c.memoizedState=O;else{f=A.next;var ne=V=null,fe=null,Ee=f,nt=!1;do{var ft=Ee.lane&-536870913;if(ft!==Ee.lane?(Vt&ft)===ft:(pl&ft)===ft){var He=Ee.revertLane;if(He===0)fe!==null&&(fe=fe.next={lane:0,revertLane:0,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),ft===vu&&(nt=!0);else if((pl&He)===He){Ee=Ee.next,He===vu&&(nt=!0);continue}else ft={lane:0,revertLane:Ee.revertLane,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},fe===null?(ne=fe=ft,V=O):fe=fe.next=ft,pn.lanes|=He,ro|=He;ft=Ee.action,yc&&v(O,ft),O=Ee.hasEagerState?Ee.eagerState:v(O,ft)}else He={lane:ft,revertLane:Ee.revertLane,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},fe===null?(ne=fe=He,V=O):fe=fe.next=He,pn.lanes|=ft,ro|=ft;Ee=Ee.next}while(Ee!==null&&Ee!==f);if(fe===null?V=O:fe.next=ne,!wa(O,c.memoizedState)&&(vr=!0,nt&&(v=mc,v!==null)))throw v;c.memoizedState=O,c.baseState=V,c.baseQueue=fe,b.lastRenderedState=O}return A===null&&(b.lanes=0),[c.memoizedState,b.dispatch]}function qp(c){var f=Fi(),v=f.queue;if(v===null)throw Error(i(311));v.lastRenderedReducer=c;var b=v.dispatch,A=v.pending,O=f.memoizedState;if(A!==null){v.pending=null;var V=A=A.next;do O=c(O,V.action),V=V.next;while(V!==A);wa(O,f.memoizedState)||(vr=!0),f.memoizedState=O,f.baseQueue===null&&(f.baseState=O),v.lastRenderedState=O}return[O,b]}function W_(c,f,v){var b=pn,A=Fi(),O=Un;if(O){if(v===void 0)throw Error(i(407));v=v()}else v=f();var V=!wa((qn||A).memoizedState,v);if(V&&(A.memoizedState=v,vr=!0),A=A.queue,Mv(Y_.bind(null,b,A,c),[c]),A.getSnapshot!==f||V||ir!==null&&ir.memoizedState.tag&1){if(b.flags|=2048,wo(9,bc.bind(null,b,A,v,f),{destroy:void 0},null),$n===null)throw Error(i(349));O||(pl&60)!==0||oa(b,f,v)}return v}function oa(c,f,v){c.flags|=16384,c={getSnapshot:f,value:v},f=pn.updateQueue,f===null?(f=jp(),pn.updateQueue=f,f.stores=[c]):(v=f.stores,v===null?f.stores=[c]:v.push(c))}function bc(c,f,v,b){f.value=v,f.getSnapshot=b,$_(f)&&X_(c)}function Y_(c,f,v){return v(function(){$_(f)&&X_(c)})}function $_(c){var f=c.getSnapshot;c=c.value;try{var v=f();return!wa(c,v)}catch{return!0}}function X_(c){var f=al(c,2);f!==null&&or(f,c,2)}function Ev(c){var f=Nr();if(typeof c=="function"){var v=c;if(c=v(),yc){vt(!0);try{v()}finally{vt(!1)}}}return f.memoizedState=f.baseState=c,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:c},f}function wv(c,f,v,b){return c.baseState=v,Ra(c,qn,typeof b=="function"?b:vi)}function Sw(c,f,v,b,A){if(Kp(c))throw Error(i(485));if(c=f.action,c!==null){var O={payload:A,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){O.listeners.push(V)}};I.T!==null?v(!0):O.isTransition=!1,b(O),v=f.pending,v===null?(O.next=f.pending=O,Tv(f,O)):(O.next=v.next,f.pending=v.next=O)}}function Tv(c,f){var v=f.action,b=f.payload,A=c.state;if(f.isTransition){var O=I.T,V={};I.T=V;try{var ne=v(A,b),fe=I.S;fe!==null&&fe(V,ne),K_(c,f,ne)}catch(Ee){ml(c,f,Ee)}finally{I.T=O}}else try{O=v(A,b),K_(c,f,O)}catch(Ee){ml(c,f,Ee)}}function K_(c,f,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function(b){_u(c,f,b)},function(b){return ml(c,f,b)}):_u(c,f,v)}function _u(c,f,v){f.status="fulfilled",f.value=v,Z_(f),c.state=v,f=c.pending,f!==null&&(v=f.next,v===f?c.pending=null:(v=v.next,f.next=v,Tv(c,v)))}function ml(c,f,v){var b=c.pending;if(c.pending=null,b!==null){b=b.next;do f.status="rejected",f.reason=v,Z_(f),f=f.next;while(f!==b)}c.action=null}function Z_(c){c=c.listeners;for(var f=0;f<c.length;f++)(0,c[f])()}function Q_(c,f){return f}function J_(c,f){if(Un){var v=$n.formState;if(v!==null){e:{var b=pn;if(Un){if(xr){t:{for(var A=xr,O=xs;A.nodeType!==8;){if(!O){A=null;break t}if(A=Cl(A.nextSibling),A===null){A=null;break t}}O=A.data,A=O==="F!"||O==="F"?A:null}if(A){xr=Cl(A.nextSibling),b=A.data==="F!";break e}}pu(b)}b=!1}b&&(f=v[0])}}return v=Nr(),v.memoizedState=v.baseState=f,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Q_,lastRenderedState:f},v.queue=b,v=Ov.bind(null,pn,b),b.dispatch=v,b=Ev(!1),O=nd.bind(null,pn,!1,b.queue),b=Nr(),A={state:f,dispatch:null,action:c,pending:null},b.queue=A,v=Sw.bind(null,pn,A,O,v),A.dispatch=v,b.memoizedState=c,[f,v,!1]}function Of(c){var f=Fi();return eb(f,qn,c)}function eb(c,f,v){f=Ra(c,f,Q_)[0],c=Zs(vi)[0],f=typeof f=="object"&&f!==null&&typeof f.then=="function"?td(f):f;var b=Fi(),A=b.queue,O=A.dispatch;return v!==b.memoizedState&&(pn.flags|=2048,wo(9,xw.bind(null,A,v),{destroy:void 0},null)),[f,O,c]}function xw(c,f){c.action=f}function tb(c){var f=Fi(),v=qn;if(v!==null)return eb(f,v,c);Fi(),f=f.memoizedState,v=Fi();var b=v.queue.dispatch;return v.memoizedState=c,[f,b,!1]}function wo(c,f,v,b){return c={tag:c,create:f,inst:v,deps:b,next:null},f=pn.updateQueue,f===null&&(f=jp(),pn.updateQueue=f),v=f.lastEffect,v===null?f.lastEffect=c.next=c:(b=v.next,v.next=c,c.next=b,f.lastEffect=c),c}function nb(){return Fi().memoizedState}function Wp(c,f,v,b){var A=Nr();pn.flags|=c,A.memoizedState=wo(1|f,v,{destroy:void 0},b===void 0?null:b)}function Yp(c,f,v,b){var A=Fi();b=b===void 0?null:b;var O=A.memoizedState.inst;qn!==null&&b!==null&&yu(b,qn.memoizedState.deps)?A.memoizedState=wo(f,v,O,b):(pn.flags|=c,A.memoizedState=wo(1|f,v,O,b))}function ib(c,f){Wp(8390656,8,c,f)}function Mv(c,f){Yp(2048,8,c,f)}function rb(c,f){return Yp(4,2,c,f)}function ab(c,f){return Yp(4,4,c,f)}function sb(c,f){if(typeof f=="function"){c=c();var v=f(c);return function(){typeof v=="function"?v():f(null)}}if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function ob(c,f,v){v=v!=null?v.concat([c]):null,Yp(4,4,sb.bind(null,f,c),v)}function Av(){}function lb(c,f){var v=Fi();f=f===void 0?null:f;var b=v.memoizedState;return f!==null&&yu(f,b[1])?b[0]:(v.memoizedState=[c,f],c)}function cb(c,f){var v=Fi();f=f===void 0?null:f;var b=v.memoizedState;if(f!==null&&yu(f,b[1]))return b[0];if(b=c(),yc){vt(!0);try{c()}finally{vt(!1)}}return v.memoizedState=[b,f],b}function $p(c,f,v){return v===void 0||(pl&1073741824)!==0?c.memoizedState=f:(c.memoizedState=v,c=ts(),pn.lanes|=c,ro|=c,v)}function ub(c,f,v,b){return wa(v,f)?v:mu.current!==null?(c=$p(c,v,b),wa(c,f)||(vr=!0),c):(pl&42)===0?(vr=!0,c.memoizedState=v):(c=ts(),pn.lanes|=c,ro|=c,f)}function fb(c,f,v,b,A){var O=Z.p;Z.p=O!==0&&8>O?O:8;var V=I.T,ne={};I.T=ne,nd(c,!1,f,v);try{var fe=A(),Ee=I.S;if(Ee!==null&&Ee(ne,fe),fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var nt=gc(fe,b);bu(c,f,nt,ha(c))}else bu(c,f,b,ha(c))}catch(ft){bu(c,f,{then:function(){},status:"rejected",reason:ft},ha())}finally{Z.p=O,I.T=V}}function Ew(){}function Cv(c,f,v,b){if(c.tag!==5)throw Error(i(476));var A=hb(c).queue;fb(c,A,f,ce,v===null?Ew:function(){return db(c),v(b)})}function hb(c){var f=c.memoizedState;if(f!==null)return f;f={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:ce},next:null};var v={};return f.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:v},next:null},c.memoizedState=f,c=c.alternate,c!==null&&(c.memoizedState=f),f}function db(c){var f=hb(c).next.queue;bu(c,f,{},ha())}function Xp(){return Wr(ty)}function Rv(){return Fi().memoizedState}function pb(){return Fi().memoizedState}function mb(c){for(var f=c.return;f!==null;){switch(f.tag){case 24:case 3:var v=ha();c=Ja(v);var b=es(f,c,v);b!==null&&(or(b,f,v),wc(b,f,v)),f={cache:_v()},c.payload=f;return}f=f.return}}function gb(c,f,v){var b=ha();v={lane:b,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null},Kp(c)?vb(f,v):(v=hu(c,f,v,b),v!==null&&(or(v,c,b),yb(v,f,b)))}function Ov(c,f,v){var b=ha();bu(c,f,v,b)}function bu(c,f,v,b){var A={lane:b,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null};if(Kp(c))vb(f,A);else{var O=c.alternate;if(c.lanes===0&&(O===null||O.lanes===0)&&(O=f.lastRenderedReducer,O!==null))try{var V=f.lastRenderedState,ne=O(V,v);if(A.hasEagerState=!0,A.eagerState=ne,wa(ne,V))return Vh(c,f,A,0),$n===null&&Hh(),!1}catch{}finally{}if(v=hu(c,f,A,b),v!==null)return or(v,c,b),yb(v,f,b),!0}return!1}function nd(c,f,v,b){if(b={lane:2,revertLane:Aw(),action:b,hasEagerState:!1,eagerState:null,next:null},Kp(c)){if(f)throw Error(i(479))}else f=hu(c,v,b,2),f!==null&&or(f,c,2)}function Kp(c){var f=c.alternate;return c===pn||f!==null&&f===pn}function vb(c,f){vc=Yt=!0;var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}function yb(c,f,v){if((v&4194176)!==0){var b=f.lanes;b&=c.pendingLanes,v|=b,f.lanes=v,Li(c,v)}}var To={readContext:Wr,use:Rf,useCallback:Ri,useContext:Ri,useEffect:Ri,useImperativeHandle:Ri,useLayoutEffect:Ri,useInsertionEffect:Ri,useMemo:Ri,useReducer:Ri,useRef:Ri,useState:Ri,useDebugValue:Ri,useDeferredValue:Ri,useTransition:Ri,useSyncExternalStore:Ri,useId:Ri};To.useCacheRefresh=Ri,To.useMemoCache=Ri,To.useHostTransitionStatus=Ri,To.useFormState=Ri,To.useActionState=Ri,To.useOptimistic=Ri;var Sc={readContext:Wr,use:Rf,useCallback:function(c,f){return Nr().memoizedState=[c,f===void 0?null:f],c},useContext:Wr,useEffect:ib,useImperativeHandle:function(c,f,v){v=v!=null?v.concat([c]):null,Wp(4194308,4,sb.bind(null,f,c),v)},useLayoutEffect:function(c,f){return Wp(4194308,4,c,f)},useInsertionEffect:function(c,f){Wp(4,2,c,f)},useMemo:function(c,f){var v=Nr();f=f===void 0?null:f;var b=c();if(yc){vt(!0);try{c()}finally{vt(!1)}}return v.memoizedState=[b,f],b},useReducer:function(c,f,v){var b=Nr();if(v!==void 0){var A=v(f);if(yc){vt(!0);try{v(f)}finally{vt(!1)}}}else A=f;return b.memoizedState=b.baseState=A,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:A},b.queue=c,c=c.dispatch=gb.bind(null,pn,c),[b.memoizedState,c]},useRef:function(c){var f=Nr();return c={current:c},f.memoizedState=c},useState:function(c){c=Ev(c);var f=c.queue,v=Ov.bind(null,pn,f);return f.dispatch=v,[c.memoizedState,v]},useDebugValue:Av,useDeferredValue:function(c,f){var v=Nr();return $p(v,c,f)},useTransition:function(){var c=Ev(!1);return c=fb.bind(null,pn,c.queue,!0,!1),Nr().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,f,v){var b=pn,A=Nr();if(Un){if(v===void 0)throw Error(i(407));v=v()}else{if(v=f(),$n===null)throw Error(i(349));(Vt&60)!==0||oa(b,f,v)}A.memoizedState=v;var O={value:v,getSnapshot:f};return A.queue=O,ib(Y_.bind(null,b,O,c),[c]),b.flags|=2048,wo(9,bc.bind(null,b,O,v,f),{destroy:void 0},null),v},useId:function(){var c=Nr(),f=$n.identifierPrefix;if(Un){var v=ol,b=_o;v=(b&~(1<<32-gt(b)-1)).toString(32)+v,f=":"+f+"R"+v,v=Af++,0<v&&(f+="H"+v.toString(32)),f+=":"}else v=_w++,f=":"+f+"r"+v.toString(32)+":";return c.memoizedState=f},useCacheRefresh:function(){return Nr().memoizedState=mb.bind(null,pn)}};Sc.useMemoCache=Ks,Sc.useHostTransitionStatus=Xp,Sc.useFormState=J_,Sc.useActionState=J_,Sc.useOptimistic=function(c){var f=Nr();f.memoizedState=f.baseState=c;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=v,f=nd.bind(null,pn,!0,v),v.dispatch=f,[c,f]};var gl={readContext:Wr,use:Rf,useCallback:lb,useContext:Wr,useEffect:Mv,useImperativeHandle:ob,useInsertionEffect:rb,useLayoutEffect:ab,useMemo:cb,useReducer:Zs,useRef:nb,useState:function(){return Zs(vi)},useDebugValue:Av,useDeferredValue:function(c,f){var v=Fi();return ub(v,qn.memoizedState,c,f)},useTransition:function(){var c=Zs(vi)[0],f=Fi().memoizedState;return[typeof c=="boolean"?c:td(c),f]},useSyncExternalStore:W_,useId:Rv};gl.useCacheRefresh=pb,gl.useMemoCache=Ks,gl.useHostTransitionStatus=Xp,gl.useFormState=Of,gl.useActionState=Of,gl.useOptimistic=function(c,f){var v=Fi();return wv(v,qn,c,f)};var Su={readContext:Wr,use:Rf,useCallback:lb,useContext:Wr,useEffect:Mv,useImperativeHandle:ob,useInsertionEffect:rb,useLayoutEffect:ab,useMemo:cb,useReducer:qp,useRef:nb,useState:function(){return qp(vi)},useDebugValue:Av,useDeferredValue:function(c,f){var v=Fi();return qn===null?$p(v,c,f):ub(v,qn.memoizedState,c,f)},useTransition:function(){var c=qp(vi)[0],f=Fi().memoizedState;return[typeof c=="boolean"?c:td(c),f]},useSyncExternalStore:W_,useId:Rv};Su.useCacheRefresh=pb,Su.useMemoCache=Ks,Su.useHostTransitionStatus=Xp,Su.useFormState=tb,Su.useActionState=tb,Su.useOptimistic=function(c,f){var v=Fi();return qn!==null?wv(v,qn,c,f):(v.baseState=c,[c,v.queue.dispatch])};function Dv(c,f,v,b){f=c.memoizedState,v=v(b,f),v=v==null?f:L({},f,v),c.memoizedState=v,c.lanes===0&&(c.updateQueue.baseState=v)}var Uv={isMounted:function(c){return(c=c._reactInternals)?J(c)===c:!1},enqueueSetState:function(c,f,v){c=c._reactInternals;var b=ha(),A=Ja(b);A.payload=f,v!=null&&(A.callback=v),f=es(c,A,b),f!==null&&(or(f,c,b),wc(f,c,b))},enqueueReplaceState:function(c,f,v){c=c._reactInternals;var b=ha(),A=Ja(b);A.tag=1,A.payload=f,v!=null&&(A.callback=v),f=es(c,A,b),f!==null&&(or(f,c,b),wc(f,c,b))},enqueueForceUpdate:function(c,f){c=c._reactInternals;var v=ha(),b=Ja(v);b.tag=2,f!=null&&(b.callback=f),f=es(c,b,v),f!==null&&(or(f,c,v),wc(f,c,v))}};function _b(c,f,v,b,A,O,V){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(b,O,V):f.prototype&&f.prototype.isPureReactComponent?!Xs(v,b)||!Xs(A,O):!0}function bb(c,f,v,b){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(v,b),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(v,b),f.state!==c&&Uv.enqueueReplaceState(f,f.state,null)}function xu(c,f){var v=f;if("ref"in f){v={};for(var b in f)b!=="ref"&&(v[b]=f[b])}if(c=c.defaultProps){v===f&&(v=L({},v));for(var A in c)v[A]===void 0&&(v[A]=c[A])}return v}var Zp=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)};function Sb(c){Zp(c)}function xb(c){console.error(c)}function Eb(c){Zp(c)}function Qp(c,f){try{var v=c.onUncaughtError;v(f.value,{componentStack:f.stack})}catch(b){setTimeout(function(){throw b})}}function wb(c,f,v){try{var b=c.onCaughtError;b(v.value,{componentStack:v.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function Nv(c,f,v){return v=Ja(v),v.tag=3,v.payload={element:null},v.callback=function(){Qp(c,f)},v}function Pv(c){return c=Ja(c),c.tag=3,c}function Tb(c,f,v,b){var A=v.type.getDerivedStateFromError;if(typeof A=="function"){var O=b.value;c.payload=function(){return A(O)},c.callback=function(){wb(f,v,b)}}var V=v.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(c.callback=function(){wb(f,v,b),typeof A!="function"&&(sr===null?sr=new Set([this]):sr.add(this));var ne=b.stack;this.componentDidCatch(b.value,{componentStack:ne!==null?ne:""})})}function ww(c,f,v,b,A){if(v.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(f=v.alternate,f!==null&&rd(f,v,A,!0),v=Ca.current,v!==null){switch(v.tag){case 13:return So===null?hd():v.alternate===null&&di===0&&(di=3),v.flags&=-257,v.flags|=65536,v.lanes=A,b===kp?v.flags|=16384:(f=v.updateQueue,f===null?v.updateQueue=new Set([b]):f.add(b),tn(c,b,A)),!1;case 22:return v.flags|=65536,b===kp?v.flags|=16384:(f=v.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([b])},v.updateQueue=f):(v=f.retryQueue,v===null?f.retryQueue=new Set([b]):v.add(b)),tn(c,b,A)),!1}throw Error(i(435,v.tag))}return tn(c,b,A),hd(),!1}if(Un)return f=Ca.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=A,b!==Yh&&(c=Error(i(422),{cause:b}),bo(Aa(c,v)))):(b!==Yh&&(f=Error(i(423),{cause:b}),bo(Aa(f,v))),c=c.current.alternate,c.flags|=65536,A&=-A,c.lanes|=A,b=Aa(b,v),A=Nv(c.stateNode,b,A),Lf(c,A),di!==4&&(di=2)),!1;var O=Error(i(520),{cause:b});if(O=Aa(O,v),fd===null?fd=[O]:fd.push(O),di!==4&&(di=2),f===null)return!0;b=Aa(b,v),v=f;do{switch(v.tag){case 3:return v.flags|=65536,c=A&-A,v.lanes|=c,c=Nv(v.stateNode,b,c),Lf(v,c),!1;case 1:if(f=v.type,O=v.stateNode,(v.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(sr===null||!sr.has(O))))return v.flags|=65536,A&=-A,v.lanes|=A,A=Pv(A),Tb(A,c,v,b),Lf(v,A),!1}v=v.return}while(v!==null);return!1}var Za=Error(i(461)),vr=!1;function yr(c,f,v,b){f.child=c===null?cl(f,null,v,b):ll(f,c.child,v,b)}function Lv(c,f,v,b,A){v=v.render;var O=f.ref;if("ref"in b){var V={};for(var ne in b)ne!=="ref"&&(V[ne]=b[ne])}else V=b;return wu(f),b=Sv(c,f,v,V,O,A),ne=xv(),c!==null&&!vr?(ed(c,f,A),Hi(c,f,A)):(Un&&ne&&Wh(f),f.flags|=1,yr(c,f,b,A),f.child)}function Iv(c,f,v,b,A){if(c===null){var O=v.type;return typeof O=="function"&&!El(O)&&O.defaultProps===void 0&&v.compare===null?(f.tag=15,f.type=O,Bv(c,f,O,b,A)):(c=kf(v.type,null,b,f,f.mode,A),c.ref=f.ref,c.return=f,f.child=c)}if(O=c.child,!jv(c,A)){var V=O.memoizedProps;if(v=v.compare,v=v!==null?v:Xs,v(V,b)&&c.ref===f.ref)return Hi(c,f,A)}return f.flags|=1,c=ua(O,b),c.ref=f.ref,c.return=f,f.child=c}function Bv(c,f,v,b,A){if(c!==null){var O=c.memoizedProps;if(Xs(O,b)&&c.ref===f.ref)if(vr=!1,f.pendingProps=b=O,jv(c,A))(c.flags&131072)!==0&&(vr=!0);else return f.lanes=c.lanes,Hi(c,f,A)}return kv(c,f,v,b,A)}function Mb(c,f,v){var b=f.pendingProps,A=b.children,O=(f.stateNode._pendingVisibility&2)!==0,V=c!==null?c.memoizedState:null;if(Df(c,f),b.mode==="hidden"||O){if((f.flags&128)!==0){if(b=V!==null?V.baseLanes|v:v,c!==null){for(A=f.child=c.child,O=0;A!==null;)O=O|A.lanes|A.childLanes,A=A.sibling;f.childLanes=O&~b}else f.childLanes=0,f.child=null;return zv(c,f,b,v)}if((v&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},c!==null&&Mf(f,V!==null?V.cachePool:null),V!==null?hc(f,V):Hp(),yv(f);else return f.lanes=f.childLanes=536870912,zv(c,f,V!==null?V.baseLanes|v:v,v)}else V!==null?(Mf(f,V.cachePool),hc(f,V),fl(),f.memoizedState=null):(c!==null&&Mf(f,null),Hp(),fl());return yr(c,f,A,v),f.child}function zv(c,f,v,b){var A=Jh();return A=A===null?null:{parent:ki._currentValue,pool:A},f.memoizedState={baseLanes:v,cachePool:A},c!==null&&Mf(f,null),Hp(),yv(f),c!==null&&rd(c,f,b,!0),null}function Df(c,f){var v=f.ref;if(v===null)c!==null&&c.ref!==null&&(f.flags|=2097664);else{if(typeof v!="function"&&typeof v!="object")throw Error(i(284));(c===null||c.ref!==v)&&(f.flags|=2097664)}}function kv(c,f,v,b,A){return wu(f),v=Sv(c,f,v,b,void 0,A),b=xv(),c!==null&&!vr?(ed(c,f,A),Hi(c,f,A)):(Un&&b&&Wh(f),f.flags|=1,yr(c,f,v,A),f.child)}function Ab(c,f,v,b,A,O){return wu(f),f.updateQueue=null,v=q_(f,b,v,A),j_(c),b=xv(),c!==null&&!vr?(ed(c,f,O),Hi(c,f,O)):(Un&&b&&Wh(f),f.flags|=1,yr(c,f,v,O),f.child)}function Cb(c,f,v,b,A){if(wu(f),f.stateNode===null){var O=sc,V=v.contextType;typeof V=="object"&&V!==null&&(O=Wr(V)),O=new v(b,O),f.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=Uv,f.stateNode=O,O._reactInternals=f,O=f.stateNode,O.props=b,O.state=f.memoizedState,O.refs={},la(f),V=v.contextType,O.context=typeof V=="object"&&V!==null?Wr(V):sc,O.state=f.memoizedState,V=v.getDerivedStateFromProps,typeof V=="function"&&(Dv(f,v,V,b),O.state=f.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(V=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),V!==O.state&&Uv.enqueueReplaceState(O,O.state,null),Js(f,b,O,A),Yr(),O.state=f.memoizedState),typeof O.componentDidMount=="function"&&(f.flags|=4194308),b=!0}else if(c===null){O=f.stateNode;var ne=f.memoizedProps,fe=xu(v,ne);O.props=fe;var Ee=O.context,nt=v.contextType;V=sc,typeof nt=="object"&&nt!==null&&(V=Wr(nt));var ft=v.getDerivedStateFromProps;nt=typeof ft=="function"||typeof O.getSnapshotBeforeUpdate=="function",ne=f.pendingProps!==ne,nt||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(ne||Ee!==V)&&bb(f,O,b,V),rr=!1;var He=f.memoizedState;O.state=He,Js(f,b,O,A),Yr(),Ee=f.memoizedState,ne||He!==Ee||rr?(typeof ft=="function"&&(Dv(f,v,ft,b),Ee=f.memoizedState),(fe=rr||_b(f,v,fe,b,He,Ee,V))?(nt||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(f.flags|=4194308)):(typeof O.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=b,f.memoizedState=Ee),O.props=b,O.state=Ee,O.context=V,b=fe):(typeof O.componentDidMount=="function"&&(f.flags|=4194308),b=!1)}else{O=f.stateNode,rm(c,f),V=f.memoizedProps,nt=xu(v,V),O.props=nt,ft=f.pendingProps,He=O.context,Ee=v.contextType,fe=sc,typeof Ee=="object"&&Ee!==null&&(fe=Wr(Ee)),ne=v.getDerivedStateFromProps,(Ee=typeof ne=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(V!==ft||He!==fe)&&bb(f,O,b,fe),rr=!1,He=f.memoizedState,O.state=He,Js(f,b,O,A),Yr();var Qe=f.memoizedState;V!==ft||He!==Qe||rr||c!==null&&c.dependencies!==null&&Nf(c.dependencies)?(typeof ne=="function"&&(Dv(f,v,ne,b),Qe=f.memoizedState),(nt=rr||_b(f,v,nt,b,He,Qe,fe)||c!==null&&c.dependencies!==null&&Nf(c.dependencies))?(Ee||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(b,Qe,fe),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(b,Qe,fe)),typeof O.componentDidUpdate=="function"&&(f.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof O.componentDidUpdate!="function"||V===c.memoizedProps&&He===c.memoizedState||(f.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||V===c.memoizedProps&&He===c.memoizedState||(f.flags|=1024),f.memoizedProps=b,f.memoizedState=Qe),O.props=b,O.state=Qe,O.context=fe,b=nt):(typeof O.componentDidUpdate!="function"||V===c.memoizedProps&&He===c.memoizedState||(f.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||V===c.memoizedProps&&He===c.memoizedState||(f.flags|=1024),b=!1)}return O=b,Df(c,f),b=(f.flags&128)!==0,O||b?(O=f.stateNode,v=b&&typeof v.getDerivedStateFromError!="function"?null:O.render(),f.flags|=1,c!==null&&b?(f.child=ll(f,c.child,null,A),f.child=ll(f,null,v,A)):yr(c,f,v,A),f.memoizedState=O.state,c=f.child):c=Hi(c,f,A),c}function Fv(c,f,v,b){return Ef(),f.flags|=256,yr(c,f,v,b),f.child}var Hv={dehydrated:null,treeContext:null,retryLane:0};function Er(c){return{baseLanes:c,cachePool:dl()}}function Jp(c,f,v){return c=c!==null?c.childLanes&~v:0,f&&(c|=fa),c}function Rb(c,f,v){var b=f.pendingProps,A=!1,O=(f.flags&128)!==0,V;if((V=O)||(V=c!==null&&c.memoizedState===null?!1:(nr.current&2)!==0),V&&(A=!0,f.flags&=-129),V=(f.flags&32)!==0,f.flags&=-33,c===null){if(Un){if(A?ul(f):fl(),Un){var ne=xr,fe;if(fe=ne){e:{for(fe=ne,ne=xs;fe.nodeType!==8;){if(!ne){ne=null;break e}if(fe=Cl(fe.nextSibling),fe===null){ne=null;break e}}ne=fe}ne!==null?(f.memoizedState={dehydrated:ne,treeContext:sl!==null?{id:_o,overflow:ol}:null,retryLane:536870912},fe=qi(18,null,null,0),fe.stateNode=ne,fe.return=f,f.child=fe,qr=f,xr=null,fe=!0):fe=!1}fe||pu(f)}if(ne=f.memoizedState,ne!==null&&(ne=ne.dehydrated,ne!==null))return ne.data==="$!"?f.lanes=16:f.lanes=536870912,null;xo(f)}return ne=b.children,b=b.fallback,A?(fl(),A=f.mode,ne=Gv({mode:"hidden",children:ne},A),b=Oc(b,A,v,null),ne.return=f,b.return=f,ne.sibling=b,f.child=ne,A=f.child,A.memoizedState=Er(v),A.childLanes=Jp(c,V,v),f.memoizedState=Hv,b):(ul(f),Vv(f,ne))}if(fe=c.memoizedState,fe!==null&&(ne=fe.dehydrated,ne!==null)){if(O)f.flags&256?(ul(f),f.flags&=-257,f=em(c,f,v)):f.memoizedState!==null?(fl(),f.child=c.child,f.flags|=128,f=null):(fl(),A=b.fallback,ne=f.mode,b=Gv({mode:"visible",children:b.children},ne),A=Oc(A,ne,v,null),A.flags|=2,b.return=f,A.return=f,b.sibling=A,f.child=b,ll(f,c.child,null,v),b=f.child,b.memoizedState=Er(v),b.childLanes=Jp(c,V,v),f.memoizedState=Hv,f=A);else if(ul(f),ne.data==="$!"){if(V=ne.nextSibling&&ne.nextSibling.dataset,V)var Ee=V.dgst;V=Ee,b=Error(i(419)),b.stack="",b.digest=V,bo({value:b,source:null,stack:null}),f=em(c,f,v)}else if(vr||rd(c,f,v,!1),V=(v&c.childLanes)!==0,vr||V){if(V=$n,V!==null){if(b=v&-v,(b&42)!==0)b=1;else switch(b){case 2:b=1;break;case 8:b=4;break;case 32:b=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:b=64;break;case 268435456:b=134217728;break;default:b=0}if(b=(b&(V.suspendedLanes|v))!==0?0:b,b!==0&&b!==fe.retryLane)throw fe.retryLane=b,al(c,b),or(V,c,b),Za}ne.data==="$?"||hd(),f=em(c,f,v)}else ne.data==="$?"?(f.flags|=128,f.child=c.child,f=Du.bind(null,c),ne._reactRetry=f,f=null):(c=fe.treeContext,xr=Cl(ne.nextSibling),qr=f,Un=!0,Ss=null,xs=!1,c!==null&&(ii[Xa++]=_o,ii[Xa++]=ol,ii[Xa++]=sl,_o=c.id,ol=c.overflow,sl=f),f=Vv(f,b.children),f.flags|=4096);return f}return A?(fl(),A=b.fallback,ne=f.mode,fe=c.child,Ee=fe.sibling,b=ua(fe,{mode:"hidden",children:b.children}),b.subtreeFlags=fe.subtreeFlags&31457280,Ee!==null?A=ua(Ee,A):(A=Oc(A,ne,v,null),A.flags|=2),A.return=f,b.return=f,b.sibling=A,f.child=b,b=A,A=f.child,ne=c.child.memoizedState,ne===null?ne=Er(v):(fe=ne.cachePool,fe!==null?(Ee=ki._currentValue,fe=fe.parent!==Ee?{parent:Ee,pool:Ee}:fe):fe=dl(),ne={baseLanes:ne.baseLanes|v,cachePool:fe}),A.memoizedState=ne,A.childLanes=Jp(c,V,v),f.memoizedState=Hv,b):(ul(f),v=c.child,c=v.sibling,v=ua(v,{mode:"visible",children:b.children}),v.return=f,v.sibling=null,c!==null&&(V=f.deletions,V===null?(f.deletions=[c],f.flags|=16):V.push(c)),f.child=v,f.memoizedState=null,v)}function Vv(c,f){return f=Gv({mode:"visible",children:f},c.mode),f.return=c,c.child=f}function Gv(c,f){return Wv(c,f,0,null)}function em(c,f,v){return ll(f,c.child,null,v),c=Vv(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function tm(c,f,v){c.lanes|=f;var b=c.alternate;b!==null&&(b.lanes|=f),Qa(c.return,f,v)}function xc(c,f,v,b,A){var O=c.memoizedState;O===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:b,tail:v,tailMode:A}:(O.isBackwards=f,O.rendering=null,O.renderingStartTime=0,O.last=b,O.tail=v,O.tailMode=A)}function Eu(c,f,v){var b=f.pendingProps,A=b.revealOrder,O=b.tail;if(yr(c,f,b.children,v),b=nr.current,(b&2)!==0)b=b&1|2,f.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&tm(c,v,f);else if(c.tag===19)tm(c,v,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}b&=1}switch(ze(nr,b),A){case"forwards":for(v=f.child,A=null;v!==null;)c=v.alternate,c!==null&&Tf(c)===null&&(A=v),v=v.sibling;v=A,v===null?(A=f.child,f.child=null):(A=v.sibling,v.sibling=null),xc(f,!1,A,v,O);break;case"backwards":for(v=null,A=f.child,f.child=null;A!==null;){if(c=A.alternate,c!==null&&Tf(c)===null){f.child=A;break}c=A.sibling,A.sibling=v,v=A,A=c}xc(f,!0,v,null,O);break;case"together":xc(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Hi(c,f,v){if(c!==null&&(f.dependencies=c.dependencies),ro|=f.lanes,(v&f.childLanes)===0)if(c!==null){if(rd(c,f,v,!1),(v&f.childLanes)===0)return null}else return null;if(c!==null&&f.child!==c.child)throw Error(i(153));if(f.child!==null){for(c=f.child,v=ua(c,c.pendingProps),f.child=v,v.return=f;c.sibling!==null;)c=c.sibling,v=v.sibling=ua(c,c.pendingProps),v.return=f;v.sibling=null}return f.child}function jv(c,f){return(c.lanes&f)!==0?!0:(c=c.dependencies,!!(c!==null&&Nf(c)))}function Tw(c,f,v){switch(f.tag){case 3:ke(f,f.stateNode.containerInfo),Ec(f,ki,c.memoizedState.cache),Ef();break;case 27:case 5:Ie(f);break;case 4:ke(f,f.stateNode.containerInfo);break;case 10:Ec(f,f.type,f.memoizedProps.value);break;case 13:var b=f.memoizedState;if(b!==null)return b.dehydrated!==null?(ul(f),f.flags|=128,null):(v&f.child.childLanes)!==0?Rb(c,f,v):(ul(f),c=Hi(c,f,v),c!==null?c.sibling:null);ul(f);break;case 19:var A=(c.flags&128)!==0;if(b=(v&f.childLanes)!==0,b||(rd(c,f,v,!1),b=(v&f.childLanes)!==0),A){if(b)return Eu(c,f,v);f.flags|=128}if(A=f.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),ze(nr,nr.current),b)break;return null;case 22:case 23:return f.lanes=0,Mb(c,f,v);case 24:Ec(f,ki,c.memoizedState.cache)}return Hi(c,f,v)}function id(c,f,v){if(c!==null)if(c.memoizedProps!==f.pendingProps)vr=!0;else{if(!jv(c,v)&&(f.flags&128)===0)return vr=!1,Tw(c,f,v);vr=(c.flags&131072)!==0}else vr=!1,Un&&(f.flags&1048576)!==0&&gv(f,qh,f.index);switch(f.lanes=0,f.tag){case 16:e:{c=f.pendingProps;var b=f.elementType,A=b._init;if(b=A(b._payload),f.type=b,typeof b=="function")El(b)?(c=xu(b,c),f.tag=1,f=Cb(null,f,b,c,v)):(f.tag=0,f=kv(null,f,b,c,v));else{if(b!=null){if(A=b.$$typeof,A===_){f.tag=11,f=Lv(null,f,b,c,v);break e}else if(A===w){f.tag=14,f=Iv(null,f,b,c,v);break e}}throw f=z(b)||b,Error(i(306,f,""))}}return f;case 0:return kv(c,f,f.type,f.pendingProps,v);case 1:return b=f.type,A=xu(b,f.pendingProps),Cb(c,f,b,A,v);case 3:e:{if(ke(f,f.stateNode.containerInfo),c===null)throw Error(i(387));var O=f.pendingProps;A=f.memoizedState,b=A.element,rm(c,f),Js(f,O,null,v);var V=f.memoizedState;if(O=V.cache,Ec(f,ki,O),O!==A.cache&&nm(f,[ki],v,!0),Yr(),O=V.element,A.isDehydrated)if(A={element:O,isDehydrated:!1,cache:V.cache},f.updateQueue.baseState=A,f.memoizedState=A,f.flags&256){f=Fv(c,f,O,v);break e}else if(O!==b){b=Aa(Error(i(424)),f),bo(b),f=Fv(c,f,O,v);break e}else for(xr=Cl(f.stateNode.containerInfo.firstChild),qr=f,Un=!0,Ss=null,xs=!0,v=cl(f,null,O,v),f.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(Ef(),O===b){f=Hi(c,f,v);break e}yr(c,f,O,v)}f=f.child}return f;case 26:return Df(c,f),c===null?(v=zU(f.type,null,f.pendingProps,null))?f.memoizedState=v:Un||(v=f.type,c=f.pendingProps,b=Ib(Ae.current).createElement(v),b[_n]=f,b[Zt]=c,da(b,v,c),ge(b),f.stateNode=b):f.memoizedState=zU(f.type,c.memoizedProps,f.pendingProps,c.memoizedState),null;case 27:return Ie(f),c===null&&Un&&(b=f.stateNode=LU(f.type,f.pendingProps,Ae.current),qr=f,xs=!0,xr=Cl(b.firstChild)),b=f.pendingProps.children,c!==null||Un?yr(c,f,b,v):f.child=ll(f,null,b,v),Df(c,f),f.child;case 5:return c===null&&Un&&((A=b=xr)&&(b=Qj(b,f.type,f.pendingProps,xs),b!==null?(f.stateNode=b,qr=f,xr=Cl(b.firstChild),xs=!1,A=!0):A=!1),A||pu(f)),Ie(f),A=f.type,O=f.pendingProps,V=c!==null?c.memoizedProps:null,b=O.children,Iw(A,O)?b=null:V!==null&&Iw(A,V)&&(f.flags|=32),f.memoizedState!==null&&(A=Sv(c,f,bw,null,null,v),ty._currentValue=A),Df(c,f),yr(c,f,b,v),f.child;case 6:return c===null&&Un&&((c=v=xr)&&(v=Jj(v,f.pendingProps,xs),v!==null?(f.stateNode=v,qr=f,xr=null,c=!0):c=!1),c||pu(f)),null;case 13:return Rb(c,f,v);case 4:return ke(f,f.stateNode.containerInfo),b=f.pendingProps,c===null?f.child=ll(f,null,b,v):yr(c,f,b,v),f.child;case 11:return Lv(c,f,f.type,f.pendingProps,v);case 7:return yr(c,f,f.pendingProps,v),f.child;case 8:return yr(c,f,f.pendingProps.children,v),f.child;case 12:return yr(c,f,f.pendingProps.children,v),f.child;case 10:return b=f.pendingProps,Ec(f,f.type,b.value),yr(c,f,b.children,v),f.child;case 9:return A=f.type._context,b=f.pendingProps.children,wu(f),A=Wr(A),b=b(A),f.flags|=1,yr(c,f,b,v),f.child;case 14:return Iv(c,f,f.type,f.pendingProps,v);case 15:return Bv(c,f,f.type,f.pendingProps,v);case 19:return Eu(c,f,v);case 22:return Mb(c,f,v);case 24:return wu(f),b=Wr(ki),c===null?(A=Jh(),A===null&&(A=$n,O=_v(),A.pooledCache=O,O.refCount++,O!==null&&(A.pooledCacheLanes|=v),A=O),f.memoizedState={parent:b,cache:A},la(f),Ec(f,ki,A)):((c.lanes&v)!==0&&(rm(c,f),Js(f,null,null,v),Yr()),A=c.memoizedState,O=f.memoizedState,A.parent!==b?(A={parent:b,cache:b},f.memoizedState=A,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=A),Ec(f,ki,b)):(b=O.cache,Ec(f,ki,b),b!==A.cache&&nm(f,[ki],v,!0))),yr(c,f,f.pendingProps.children,v),f.child;case 29:throw f.pendingProps}throw Error(i(156,f.tag))}var Uf=ve(null),Mo=null,Qs=null;function Ec(c,f,v){ze(Uf,f._currentValue),f._currentValue=v}function vl(c){c._currentValue=Uf.current,We(Uf)}function Qa(c,f,v){for(;c!==null;){var b=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,b!==null&&(b.childLanes|=f)):b!==null&&(b.childLanes&f)!==f&&(b.childLanes|=f),c===v)break;c=c.return}}function nm(c,f,v,b){var A=c.child;for(A!==null&&(A.return=c);A!==null;){var O=A.dependencies;if(O!==null){var V=A.child;O=O.firstContext;e:for(;O!==null;){var ne=O;O=A;for(var fe=0;fe<f.length;fe++)if(ne.context===f[fe]){O.lanes|=v,ne=O.alternate,ne!==null&&(ne.lanes|=v),Qa(O.return,v,c),b||(V=null);break e}O=ne.next}}else if(A.tag===18){if(V=A.return,V===null)throw Error(i(341));V.lanes|=v,O=V.alternate,O!==null&&(O.lanes|=v),Qa(V,v,c),V=null}else V=A.child;if(V!==null)V.return=A;else for(V=A;V!==null;){if(V===c){V=null;break}if(A=V.sibling,A!==null){A.return=V.return,V=A;break}V=V.return}A=V}}function rd(c,f,v,b){c=null;for(var A=f,O=!1;A!==null;){if(!O){if((A.flags&524288)!==0)O=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var V=A.alternate;if(V===null)throw Error(i(387));if(V=V.memoizedProps,V!==null){var ne=A.type;wa(A.pendingProps.value,V.value)||(c!==null?c.push(ne):c=[ne])}}else if(A===te.current){if(V=A.alternate,V===null)throw Error(i(387));V.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(c!==null?c.push(ty):c=[ty])}A=A.return}c!==null&&nm(f,c,v,b),f.flags|=262144}function Nf(c){for(c=c.firstContext;c!==null;){if(!wa(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function wu(c){Mo=c,Qs=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function Wr(c){return Pf(Mo,c)}function im(c,f){return Mo===null&&wu(c),Pf(c,f)}function Pf(c,f){var v=f._currentValue;if(f={context:f,memoizedValue:v,next:null},Qs===null){if(c===null)throw Error(i(308));Qs=f,c.dependencies={lanes:0,firstContext:f},c.flags|=524288}else Qs=Qs.next=f;return v}var rr=!1;function la(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rm(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function Ja(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function es(c,f,v){var b=c.updateQueue;if(b===null)return null;if(b=b.shared,(en&2)!==0){var A=b.pending;return A===null?f.next=f:(f.next=A.next,A.next=f),b.pending=f,f=jh(c),Gh(c,null,v),f}return Vh(c,b,f,v),jh(c)}function wc(c,f,v){if(f=f.updateQueue,f!==null&&(f=f.shared,(v&4194176)!==0)){var b=f.lanes;b&=c.pendingLanes,v|=b,f.lanes=v,Li(c,v)}}function Lf(c,f){var v=c.updateQueue,b=c.alternate;if(b!==null&&(b=b.updateQueue,v===b)){var A=null,O=null;if(v=v.firstBaseUpdate,v!==null){do{var V={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};O===null?A=O=V:O=O.next=V,v=v.next}while(v!==null);O===null?A=O=f:O=O.next=f}else A=O=f;v={baseState:b.baseState,firstBaseUpdate:A,lastBaseUpdate:O,shared:b.shared,callbacks:b.callbacks},c.updateQueue=v;return}c=v.lastBaseUpdate,c===null?v.firstBaseUpdate=f:c.next=f,v.lastBaseUpdate=f}var Oa=!1;function Yr(){if(Oa){var c=mc;if(c!==null)throw c}}function Js(c,f,v,b){Oa=!1;var A=c.updateQueue;rr=!1;var O=A.firstBaseUpdate,V=A.lastBaseUpdate,ne=A.shared.pending;if(ne!==null){A.shared.pending=null;var fe=ne,Ee=fe.next;fe.next=null,V===null?O=Ee:V.next=Ee,V=fe;var nt=c.alternate;nt!==null&&(nt=nt.updateQueue,ne=nt.lastBaseUpdate,ne!==V&&(ne===null?nt.firstBaseUpdate=Ee:ne.next=Ee,nt.lastBaseUpdate=fe))}if(O!==null){var ft=A.baseState;V=0,nt=Ee=fe=null,ne=O;do{var He=ne.lane&-536870913,Qe=He!==ne.lane;if(Qe?(Vt&He)===He:(b&He)===He){He!==0&&He===vu&&(Oa=!0),nt!==null&&(nt=nt.next={lane:0,tag:ne.tag,payload:ne.payload,callback:null,next:null});e:{var It=c,an=ne;He=f;var lr=v;switch(an.tag){case 1:if(It=an.payload,typeof It=="function"){ft=It.call(lr,ft,He);break e}ft=It;break e;case 3:It.flags=It.flags&-65537|128;case 0:if(It=an.payload,He=typeof It=="function"?It.call(lr,ft,He):It,He==null)break e;ft=L({},ft,He);break e;case 2:rr=!0}}He=ne.callback,He!==null&&(c.flags|=64,Qe&&(c.flags|=8192),Qe=A.callbacks,Qe===null?A.callbacks=[He]:Qe.push(He))}else Qe={lane:He,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null},nt===null?(Ee=nt=Qe,fe=ft):nt=nt.next=Qe,V|=He;if(ne=ne.next,ne===null){if(ne=A.shared.pending,ne===null)break;Qe=ne,ne=Qe.next,Qe.next=null,A.lastBaseUpdate=Qe,A.shared.pending=null}}while(!0);nt===null&&(fe=ft),A.baseState=fe,A.firstBaseUpdate=Ee,A.lastBaseUpdate=nt,O===null&&(A.shared.lanes=0),ro|=V,c.lanes=V,c.memoizedState=ft}}function Ao(c,f){if(typeof c!="function")throw Error(i(191,c));c.call(f)}function Co(c,f){var v=c.callbacks;if(v!==null)for(c.callbacks=null,c=0;c<v.length;c++)Ao(v[c],f)}function Vi(c,f){try{var v=f.updateQueue,b=v!==null?v.lastEffect:null;if(b!==null){var A=b.next;v=A;do{if((v.tag&c)===c){b=void 0;var O=v.create,V=v.inst;b=O(),V.destroy=b}v=v.next}while(v!==A)}}catch(ne){dt(f,f.return,ne)}}function Es(c,f,v){try{var b=f.updateQueue,A=b!==null?b.lastEffect:null;if(A!==null){var O=A.next;b=O;do{if((b.tag&c)===c){var V=b.inst,ne=V.destroy;if(ne!==void 0){V.destroy=void 0,A=f;var fe=v;try{ne()}catch(Ee){dt(A,fe,Ee)}}}b=b.next}while(b!==O)}}catch(Ee){dt(f,f.return,Ee)}}function yl(c){var f=c.updateQueue;if(f!==null){var v=c.stateNode;try{Co(f,v)}catch(b){dt(c,c.return,b)}}}function ad(c,f,v){v.props=xu(c.type,c.memoizedProps),v.state=c.memoizedState;try{v.componentWillUnmount()}catch(b){dt(c,f,b)}}function Gi(c,f){try{var v=c.ref;if(v!==null){var b=c.stateNode;switch(c.tag){case 26:case 27:case 5:var A=b;break;default:A=b}typeof v=="function"?c.refCleanup=v(A):v.current=A}}catch(O){dt(c,f,O)}}function Yn(c,f){var v=c.ref,b=c.refCleanup;if(v!==null)if(typeof b=="function")try{b()}catch(A){dt(c,f,A)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(A){dt(c,f,A)}else v.current=null}function Nn(c){var f=c.type,v=c.memoizedProps,b=c.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":v.autoFocus&&b.focus();break e;case"img":v.src?b.src=v.src:v.srcSet&&(b.srcset=v.srcSet)}}catch(A){dt(c,c.return,A)}}function ws(c,f,v){try{var b=c.stateNode;Yj(b,c.type,v,f),b[Zt]=f}catch(A){dt(c,c.return,A)}}function eo(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27||c.tag===4}function sd(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||eo(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==27&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Da(c,f,v){var b=c.tag;if(b===5||b===6)c=c.stateNode,f?v.nodeType===8?v.parentNode.insertBefore(c,f):v.insertBefore(c,f):(v.nodeType===8?(f=v.parentNode,f.insertBefore(c,v)):(f=v,f.appendChild(c)),v=v._reactRootContainer,v!=null||f.onclick!==null||(f.onclick=Lb));else if(b!==4&&b!==27&&(c=c.child,c!==null))for(Da(c,f,v),c=c.sibling;c!==null;)Da(c,f,v),c=c.sibling}function _l(c,f,v){var b=c.tag;if(b===5||b===6)c=c.stateNode,f?v.insertBefore(c,f):v.appendChild(c);else if(b!==4&&b!==27&&(c=c.child,c!==null))for(_l(c,f,v),c=c.sibling;c!==null;)_l(c,f,v),c=c.sibling}var to=!1,fi=!1,Tc=!1,am=typeof WeakSet=="function"?WeakSet:Set,ji=null,sm=!1;function If(c,f){if(c=c.containerInfo,Pw=Vb,c=uv(c),Fh(c)){if("selectionStart"in c)var v={start:c.selectionStart,end:c.selectionEnd};else e:{v=(v=c.ownerDocument)&&v.defaultView||window;var b=v.getSelection&&v.getSelection();if(b&&b.rangeCount!==0){v=b.anchorNode;var A=b.anchorOffset,O=b.focusNode;b=b.focusOffset;try{v.nodeType,O.nodeType}catch{v=null;break e}var V=0,ne=-1,fe=-1,Ee=0,nt=0,ft=c,He=null;t:for(;;){for(var Qe;ft!==v||A!==0&&ft.nodeType!==3||(ne=V+A),ft!==O||b!==0&&ft.nodeType!==3||(fe=V+b),ft.nodeType===3&&(V+=ft.nodeValue.length),(Qe=ft.firstChild)!==null;)He=ft,ft=Qe;for(;;){if(ft===c)break t;if(He===v&&++Ee===A&&(ne=V),He===O&&++nt===b&&(fe=V),(Qe=ft.nextSibling)!==null)break;ft=He,He=ft.parentNode}ft=Qe}v=ne===-1||fe===-1?null:{start:ne,end:fe}}else v=null}v=v||{start:0,end:0}}else v=null;for(Lw={focusedElem:c,selectionRange:v},Vb=!1,ji=f;ji!==null;)if(f=ji,c=f.child,(f.subtreeFlags&1028)!==0&&c!==null)c.return=f,ji=c;else for(;ji!==null;){switch(f=ji,O=f.alternate,c=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&O!==null){c=void 0,v=f,A=O.memoizedProps,O=O.memoizedState,b=v.stateNode;try{var It=xu(v.type,A,v.elementType===v.type);c=b.getSnapshotBeforeUpdate(It,O),b.__reactInternalSnapshotBeforeUpdate=c}catch(an){dt(v,v.return,an)}}break;case 3:if((c&1024)!==0){if(c=f.stateNode.containerInfo,v=c.nodeType,v===9)kw(c);else if(v===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":kw(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(i(163))}if(c=f.sibling,c!==null){c.return=f.return,ji=c;break}ji=f.return}return It=sm,sm=!1,It}function Bf(c,f,v){var b=v.flags;switch(v.tag){case 0:case 11:case 15:Ro(c,v),b&4&&Vi(5,v);break;case 1:if(Ro(c,v),b&4)if(c=v.stateNode,f===null)try{c.componentDidMount()}catch(ne){dt(v,v.return,ne)}else{var A=xu(v.type,f.memoizedProps);f=f.memoizedState;try{c.componentDidUpdate(A,f,c.__reactInternalSnapshotBeforeUpdate)}catch(ne){dt(v,v.return,ne)}}b&64&&yl(v),b&512&&Gi(v,v.return);break;case 3:if(Ro(c,v),b&64&&(b=v.updateQueue,b!==null)){if(c=null,v.child!==null)switch(v.child.tag){case 27:case 5:c=v.child.stateNode;break;case 1:c=v.child.stateNode}try{Co(b,c)}catch(ne){dt(v,v.return,ne)}}break;case 26:Ro(c,v),b&512&&Gi(v,v.return);break;case 27:case 5:Ro(c,v),f===null&&b&4&&Nn(v),b&512&&Gi(v,v.return);break;case 12:Ro(c,v);break;case 13:Ro(c,v),b&4&&Ob(c,v);break;case 22:if(A=v.memoizedState!==null||to,!A){f=f!==null&&f.memoizedState!==null||fi;var O=to,V=fi;to=A,(fi=f)&&!V?io(c,v,(v.subtreeFlags&8772)!==0):Ro(c,v),to=O,fi=V}b&512&&(v.memoizedProps.mode==="manual"?Gi(v,v.return):Yn(v,v.return));break;default:Ro(c,v)}}function om(c){var f=c.alternate;f!==null&&(c.alternate=null,om(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&Wo(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var hi=null,wr=!1;function $r(c,f,v){for(v=v.child;v!==null;)lm(c,f,v),v=v.sibling}function lm(c,f,v){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(it,v)}catch{}switch(v.tag){case 26:fi||Yn(v,f),$r(c,f,v),v.memoizedState?v.memoizedState.count--:v.stateNode&&(v=v.stateNode,v.parentNode.removeChild(v));break;case 27:fi||Yn(v,f);var b=hi,A=wr;for(hi=v.stateNode,$r(c,f,v),v=v.stateNode,f=v.attributes;f.length;)v.removeAttributeNode(f[0]);Wo(v),hi=b,wr=A;break;case 5:fi||Yn(v,f);case 6:A=hi;var O=wr;if(hi=null,$r(c,f,v),hi=A,wr=O,hi!==null)if(wr)try{c=hi,b=v.stateNode,c.nodeType===8?c.parentNode.removeChild(b):c.removeChild(b)}catch(V){dt(v,f,V)}else try{hi.removeChild(v.stateNode)}catch(V){dt(v,f,V)}break;case 18:hi!==null&&(wr?(f=hi,v=v.stateNode,f.nodeType===8?zw(f.parentNode,v):f.nodeType===1&&zw(f,v),ay(f)):zw(hi,v.stateNode));break;case 4:b=hi,A=wr,hi=v.stateNode.containerInfo,wr=!0,$r(c,f,v),hi=b,wr=A;break;case 0:case 11:case 14:case 15:fi||Es(2,v,f),fi||Es(4,v,f),$r(c,f,v);break;case 1:fi||(Yn(v,f),b=v.stateNode,typeof b.componentWillUnmount=="function"&&ad(v,f,b)),$r(c,f,v);break;case 21:$r(c,f,v);break;case 22:fi||Yn(v,f),fi=(b=fi)||v.memoizedState!==null,$r(c,f,v),fi=b;break;default:$r(c,f,v)}}function Ob(c,f){if(f.memoizedState===null&&(c=f.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{ay(c)}catch(v){dt(f,f.return,v)}}function od(c){switch(c.tag){case 13:case 19:var f=c.stateNode;return f===null&&(f=c.stateNode=new am),f;case 22:return c=c.stateNode,f=c._retryCache,f===null&&(f=c._retryCache=new am),f;default:throw Error(i(435,c.tag))}}function ld(c,f){var v=od(c);f.forEach(function(b){var A=Be.bind(null,c,b);v.has(b)||(v.add(b),b.then(A,A))})}function ca(c,f){var v=f.deletions;if(v!==null)for(var b=0;b<v.length;b++){var A=v[b],O=c,V=f,ne=V;e:for(;ne!==null;){switch(ne.tag){case 27:case 5:hi=ne.stateNode,wr=!1;break e;case 3:hi=ne.stateNode.containerInfo,wr=!0;break e;case 4:hi=ne.stateNode.containerInfo,wr=!0;break e}ne=ne.return}if(hi===null)throw Error(i(160));lm(O,V,A),hi=null,wr=!1,O=A.alternate,O!==null&&(O.return=null),A.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)Tu(f,c),f=f.sibling}var Xr=null;function Tu(c,f){var v=c.alternate,b=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:ca(f,c),Kr(c),b&4&&(Es(3,c,c.return),Vi(3,c),Es(5,c,c.return));break;case 1:ca(f,c),Kr(c),b&512&&(fi||v===null||Yn(v,v.return)),b&64&&to&&(c=c.updateQueue,c!==null&&(b=c.callbacks,b!==null&&(v=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=v===null?b:v.concat(b))));break;case 26:var A=Xr;if(ca(f,c),Kr(c),b&512&&(fi||v===null||Yn(v,v.return)),b&4){var O=v!==null?v.memoizedState:null;if(b=c.memoizedState,v===null)if(b===null)if(c.stateNode===null){e:{b=c.type,v=c.memoizedProps,A=A.ownerDocument||A;t:switch(b){case"title":O=A.getElementsByTagName("title")[0],(!O||O[qa]||O[_n]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=A.createElement(b),A.head.insertBefore(O,A.querySelector("head > title"))),da(O,b,v),O[_n]=c,ge(O),b=O;break e;case"link":var V=HU("link","href",A).get(b+(v.href||""));if(V){for(var ne=0;ne<V.length;ne++)if(O=V[ne],O.getAttribute("href")===(v.href==null?null:v.href)&&O.getAttribute("rel")===(v.rel==null?null:v.rel)&&O.getAttribute("title")===(v.title==null?null:v.title)&&O.getAttribute("crossorigin")===(v.crossOrigin==null?null:v.crossOrigin)){V.splice(ne,1);break t}}O=A.createElement(b),da(O,b,v),A.head.appendChild(O);break;case"meta":if(V=HU("meta","content",A).get(b+(v.content||""))){for(ne=0;ne<V.length;ne++)if(O=V[ne],O.getAttribute("content")===(v.content==null?null:""+v.content)&&O.getAttribute("name")===(v.name==null?null:v.name)&&O.getAttribute("property")===(v.property==null?null:v.property)&&O.getAttribute("http-equiv")===(v.httpEquiv==null?null:v.httpEquiv)&&O.getAttribute("charset")===(v.charSet==null?null:v.charSet)){V.splice(ne,1);break t}}O=A.createElement(b),da(O,b,v),A.head.appendChild(O);break;default:throw Error(i(468,b))}O[_n]=c,ge(O),b=O}c.stateNode=b}else VU(A,c.type,c.stateNode);else c.stateNode=FU(A,b,c.memoizedProps);else O!==b?(O===null?v.stateNode!==null&&(v=v.stateNode,v.parentNode.removeChild(v)):O.count--,b===null?VU(A,c.type,c.stateNode):FU(A,b,c.memoizedProps)):b===null&&c.stateNode!==null&&ws(c,c.memoizedProps,v.memoizedProps)}break;case 27:if(b&4&&c.alternate===null){A=c.stateNode,O=c.memoizedProps;try{for(var fe=A.firstChild;fe;){var Ee=fe.nextSibling,nt=fe.nodeName;fe[qa]||nt==="HEAD"||nt==="BODY"||nt==="SCRIPT"||nt==="STYLE"||nt==="LINK"&&fe.rel.toLowerCase()==="stylesheet"||A.removeChild(fe),fe=Ee}for(var ft=c.type,He=A.attributes;He.length;)A.removeAttributeNode(He[0]);da(A,ft,O),A[_n]=c,A[Zt]=O}catch(It){dt(c,c.return,It)}}case 5:if(ca(f,c),Kr(c),b&512&&(fi||v===null||Yn(v,v.return)),c.flags&32){A=c.stateNode;try{gr(A,"")}catch(It){dt(c,c.return,It)}}b&4&&c.stateNode!=null&&(A=c.memoizedProps,ws(c,A,v!==null?v.memoizedProps:A)),b&1024&&(Tc=!0);break;case 6:if(ca(f,c),Kr(c),b&4){if(c.stateNode===null)throw Error(i(162));b=c.memoizedProps,v=c.stateNode;try{v.nodeValue=b}catch(It){dt(c,c.return,It)}}break;case 3:if(kb=null,A=Xr,Xr=Bb(f.containerInfo),ca(f,c),Xr=A,Kr(c),b&4&&v!==null&&v.memoizedState.isDehydrated)try{ay(f.containerInfo)}catch(It){dt(c,c.return,It)}Tc&&(Tc=!1,Mc(c));break;case 4:b=Xr,Xr=Bb(c.stateNode.containerInfo),ca(f,c),Kr(c),Xr=b;break;case 12:ca(f,c),Kr(c);break;case 13:ca(f,c),Kr(c),c.child.flags&8192&&c.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(mn=he()),b&4&&(b=c.updateQueue,b!==null&&(c.updateQueue=null,ld(c,b)));break;case 22:if(b&512&&(fi||v===null||Yn(v,v.return)),fe=c.memoizedState!==null,Ee=v!==null&&v.memoizedState!==null,nt=to,ft=fi,to=nt||fe,fi=ft||Ee,ca(f,c),fi=ft,to=nt,Kr(c),f=c.stateNode,f._current=c,f._visibility&=-3,f._visibility|=f._pendingVisibility&2,b&8192&&(f._visibility=fe?f._visibility&-2:f._visibility|1,fe&&(f=to||fi,v===null||Ee||f||no(c)),c.memoizedProps===null||c.memoizedProps.mode!=="manual"))e:for(v=null,f=c;;){if(f.tag===5||f.tag===26||f.tag===27){if(v===null){Ee=v=f;try{if(A=Ee.stateNode,fe)O=A.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{V=Ee.stateNode,ne=Ee.memoizedProps.style;var Qe=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;V.style.display=Qe==null||typeof Qe=="boolean"?"":(""+Qe).trim()}}catch(It){dt(Ee,Ee.return,It)}}}else if(f.tag===6){if(v===null){Ee=f;try{Ee.stateNode.nodeValue=fe?"":Ee.memoizedProps}catch(It){dt(Ee,Ee.return,It)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===c)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break e;for(;f.sibling===null;){if(f.return===null||f.return===c)break e;v===f&&(v=null),f=f.return}v===f&&(v=null),f.sibling.return=f.return,f=f.sibling}b&4&&(b=c.updateQueue,b!==null&&(v=b.retryQueue,v!==null&&(b.retryQueue=null,ld(c,v))));break;case 19:ca(f,c),Kr(c),b&4&&(b=c.updateQueue,b!==null&&(c.updateQueue=null,ld(c,b)));break;case 21:break;default:ca(f,c),Kr(c)}}function Kr(c){var f=c.flags;if(f&2){try{if(c.tag!==27){e:{for(var v=c.return;v!==null;){if(eo(v)){var b=v;break e}v=v.return}throw Error(i(160))}switch(b.tag){case 27:var A=b.stateNode,O=sd(c);_l(c,O,A);break;case 5:var V=b.stateNode;b.flags&32&&(gr(V,""),b.flags&=-33);var ne=sd(c);_l(c,ne,V);break;case 3:case 4:var fe=b.stateNode.containerInfo,Ee=sd(c);Da(c,Ee,fe);break;default:throw Error(i(161))}}}catch(nt){dt(c,c.return,nt)}c.flags&=-3}f&4096&&(c.flags&=-4097)}function Mc(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var f=c;Mc(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),c=c.sibling}}function Ro(c,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)Bf(c,f.alternate,f),f=f.sibling}function no(c){for(c=c.child;c!==null;){var f=c;switch(f.tag){case 0:case 11:case 14:case 15:Es(4,f,f.return),no(f);break;case 1:Yn(f,f.return);var v=f.stateNode;typeof v.componentWillUnmount=="function"&&ad(f,f.return,v),no(f);break;case 26:case 27:case 5:Yn(f,f.return),no(f);break;case 22:Yn(f,f.return),f.memoizedState===null&&no(f);break;default:no(f)}c=c.sibling}}function io(c,f,v){for(v=v&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var b=f.alternate,A=c,O=f,V=O.flags;switch(O.tag){case 0:case 11:case 15:io(A,O,v),Vi(4,O);break;case 1:if(io(A,O,v),b=O,A=b.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(Ee){dt(b,b.return,Ee)}if(b=O,A=b.updateQueue,A!==null){var ne=b.stateNode;try{var fe=A.shared.hiddenCallbacks;if(fe!==null)for(A.shared.hiddenCallbacks=null,A=0;A<fe.length;A++)Ao(fe[A],ne)}catch(Ee){dt(b,b.return,Ee)}}v&&V&64&&yl(O),Gi(O,O.return);break;case 26:case 27:case 5:io(A,O,v),v&&b===null&&V&4&&Nn(O),Gi(O,O.return);break;case 12:io(A,O,v);break;case 13:io(A,O,v),v&&V&4&&Ob(A,O);break;case 22:O.memoizedState===null&&io(A,O,v),Gi(O,O.return);break;default:io(A,O,v)}f=f.sibling}}function Ua(c,f){var v=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),c=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(c=f.memoizedState.cachePool.pool),c!==v&&(c!=null&&c.refCount++,v!=null&&dc(v))}function Ts(c,f){c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&dc(c))}function ri(c,f,v,b){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)bl(c,f,v,b),f=f.sibling}function bl(c,f,v,b){var A=f.flags;switch(f.tag){case 0:case 11:case 15:ri(c,f,v,b),A&2048&&Vi(9,f);break;case 3:ri(c,f,v,b),A&2048&&(c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&dc(c)));break;case 12:if(A&2048){ri(c,f,v,b),c=f.stateNode;try{var O=f.memoizedProps,V=O.id,ne=O.onPostCommit;typeof ne=="function"&&ne(V,f.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(fe){dt(f,f.return,fe)}}else ri(c,f,v,b);break;case 23:break;case 22:O=f.stateNode,f.memoizedState!==null?O._visibility&4?ri(c,f,v,b):In(c,f):O._visibility&4?ri(c,f,v,b):(O._visibility|=4,Jt(c,f,v,b,(f.subtreeFlags&10256)!==0)),A&2048&&Ua(f.alternate,f);break;case 24:ri(c,f,v,b),A&2048&&Ts(f.alternate,f);break;default:ri(c,f,v,b)}}function Jt(c,f,v,b,A){for(A=A&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var O=c,V=f,ne=v,fe=b,Ee=V.flags;switch(V.tag){case 0:case 11:case 15:Jt(O,V,ne,fe,A),Vi(8,V);break;case 23:break;case 22:var nt=V.stateNode;V.memoizedState!==null?nt._visibility&4?Jt(O,V,ne,fe,A):In(O,V):(nt._visibility|=4,Jt(O,V,ne,fe,A)),A&&Ee&2048&&Ua(V.alternate,V);break;case 24:Jt(O,V,ne,fe,A),A&&Ee&2048&&Ts(V.alternate,V);break;default:Jt(O,V,ne,fe,A)}f=f.sibling}}function In(c,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var v=c,b=f,A=b.flags;switch(b.tag){case 22:In(v,b),A&2048&&Ua(b.alternate,b);break;case 24:In(v,b),A&2048&&Ts(b.alternate,b);break;default:In(v,b)}f=f.sibling}}var yi=8192;function Sl(c){if(c.subtreeFlags&yi)for(c=c.child;c!==null;)Mu(c),c=c.sibling}function Mu(c){switch(c.tag){case 26:Sl(c),c.flags&yi&&c.memoizedState!==null&&hq(Xr,c.memoizedState,c.memoizedProps);break;case 5:Sl(c);break;case 3:case 4:var f=Xr;Xr=Bb(c.stateNode.containerInfo),Sl(c),Xr=f;break;case 22:c.memoizedState===null&&(f=c.alternate,f!==null&&f.memoizedState!==null?(f=yi,yi=16777216,Sl(c),yi=f):Sl(c));break;default:Sl(c)}}function Ac(c){var f=c.alternate;if(f!==null&&(c=f.child,c!==null)){f.child=null;do f=c.sibling,c.sibling=null,c=f;while(c!==null)}}function Cc(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var v=0;v<f.length;v++){var b=f[v];ji=b,Db(b,c)}Ac(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)zf(c),c=c.sibling}function zf(c){switch(c.tag){case 0:case 11:case 15:Cc(c),c.flags&2048&&Es(9,c,c.return);break;case 3:Cc(c);break;case 12:Cc(c);break;case 22:var f=c.stateNode;c.memoizedState!==null&&f._visibility&4&&(c.return===null||c.return.tag!==13)?(f._visibility&=-5,xl(c)):Cc(c);break;default:Cc(c)}}function xl(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var v=0;v<f.length;v++){var b=f[v];ji=b,Db(b,c)}Ac(c)}for(c=c.child;c!==null;){switch(f=c,f.tag){case 0:case 11:case 15:Es(8,f,f.return),xl(f);break;case 22:v=f.stateNode,v._visibility&4&&(v._visibility&=-5,xl(f));break;default:xl(f)}c=c.sibling}}function Db(c,f){for(;ji!==null;){var v=ji;switch(v.tag){case 0:case 11:case 15:Es(8,v,f);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var b=v.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:dc(v.memoizedState.cache)}if(b=v.child,b!==null)b.return=v,ji=b;else e:for(v=c;ji!==null;){b=ji;var A=b.sibling,O=b.return;if(om(b),b===v){ji=null;break e}if(A!==null){A.return=O,ji=A;break e}ji=O}}}function qv(c,f,v,b){this.tag=c,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qi(c,f,v,b){return new qv(c,f,v,b)}function El(c){return c=c.prototype,!(!c||!c.isReactComponent)}function ua(c,f){var v=c.alternate;return v===null?(v=qi(c.tag,f,c.key,c.mode),v.elementType=c.elementType,v.type=c.type,v.stateNode=c.stateNode,v.alternate=c,c.alternate=v):(v.pendingProps=f,v.type=c.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=c.flags&31457280,v.childLanes=c.childLanes,v.lanes=c.lanes,v.child=c.child,v.memoizedProps=c.memoizedProps,v.memoizedState=c.memoizedState,v.updateQueue=c.updateQueue,f=c.dependencies,v.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},v.sibling=c.sibling,v.index=c.index,v.ref=c.ref,v.refCleanup=c.refCleanup,v}function Rc(c,f){c.flags&=31457282;var v=c.alternate;return v===null?(c.childLanes=0,c.lanes=f,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=v.childLanes,c.lanes=v.lanes,c.child=v.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=v.memoizedProps,c.memoizedState=v.memoizedState,c.updateQueue=v.updateQueue,c.type=v.type,f=v.dependencies,c.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),c}function kf(c,f,v,b,A,O){var V=0;if(b=c,typeof c=="function")El(c)&&(V=1);else if(typeof c=="string")V=uq(c,v,qe.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case l:return Oc(v.children,A,O,f);case u:V=8,A|=24;break;case h:return c=qi(12,v,f,A|2),c.elementType=h,c.lanes=O,c;case S:return c=qi(13,v,f,A),c.elementType=S,c.lanes=O,c;case x:return c=qi(19,v,f,A),c.elementType=x,c.lanes=O,c;case M:return Wv(v,A,O,f);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case p:case y:V=10;break e;case g:V=9;break e;case _:V=11;break e;case w:V=14;break e;case T:V=16,b=null;break e}V=29,v=Error(i(130,c===null?"null":typeof c,"")),b=null}return f=qi(V,v,f,A),f.elementType=c,f.type=b,f.lanes=O,f}function Oc(c,f,v,b){return c=qi(7,c,b,f),c.lanes=v,c}function Wv(c,f,v,b){c=qi(22,c,b,f),c.elementType=M,c.lanes=v;var A={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var O=A._current;if(O===null)throw Error(i(456));if((A._pendingVisibility&2)===0){var V=al(O,2);V!==null&&(A._pendingVisibility|=2,or(V,O,2))}},attach:function(){var O=A._current;if(O===null)throw Error(i(456));if((A._pendingVisibility&2)!==0){var V=al(O,2);V!==null&&(A._pendingVisibility&=-3,or(V,O,2))}}};return c.stateNode=A,c}function ar(c,f,v){return c=qi(6,c,null,f),c.lanes=v,c}function cd(c,f,v){return f=qi(4,c.children!==null?c.children:[],c.key,f),f.lanes=v,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}function Ms(c){c.flags|=4}function Dc(c,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!GU(f)){if(f=Ca.current,f!==null&&((Vt&4194176)===Vt?So!==null:(Vt&62914560)!==Vt&&(Vt&536870912)===0||f!==So))throw wf=kp,vv;c.flags|=8192}}function As(c,f){f!==null&&(c.flags|=4),c.flags&16384&&(f=c.tag!==22?Ut():536870912,c.lanes|=f,Do|=f)}function ud(c,f){if(!Un)switch(c.tailMode){case"hidden":f=c.tail;for(var v=null;f!==null;)f.alternate!==null&&(v=f),f=f.sibling;v===null?c.tail=null:v.sibling=null;break;case"collapsed":v=c.tail;for(var b=null;v!==null;)v.alternate!==null&&(b=v),v=v.sibling;b===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:b.sibling=null}}function Ti(c){var f=c.alternate!==null&&c.alternate.child===c.child,v=0,b=0;if(f)for(var A=c.child;A!==null;)v|=A.lanes|A.childLanes,b|=A.subtreeFlags&31457280,b|=A.flags&31457280,A.return=c,A=A.sibling;else for(A=c.child;A!==null;)v|=A.lanes|A.childLanes,b|=A.subtreeFlags,b|=A.flags,A.return=c,A=A.sibling;return c.subtreeFlags|=b,c.childLanes=v,f}function Mw(c,f,v){var b=f.pendingProps;switch(lc(f),f.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ti(f),null;case 1:return Ti(f),null;case 3:return v=f.stateNode,b=null,c!==null&&(b=c.memoizedState.cache),f.memoizedState.cache!==b&&(f.flags|=2048),vl(ki),De(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(c===null||c.child===null)&&(xf(f)?Ms(f):c===null||c.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,Ss!==null&&(Ds(Ss),Ss=null))),Ti(f),null;case 26:return v=f.memoizedState,c===null?(Ms(f),v!==null?(Ti(f),Dc(f,v)):(Ti(f),f.flags&=-16777217)):v?v!==c.memoizedState?(Ms(f),Ti(f),Dc(f,v)):(Ti(f),f.flags&=-16777217):(c.memoizedProps!==b&&Ms(f),Ti(f),f.flags&=-16777217),null;case 27:Te(f),v=Ae.current;var A=f.type;if(c!==null&&f.stateNode!=null)c.memoizedProps!==b&&Ms(f);else{if(!b){if(f.stateNode===null)throw Error(i(166));return Ti(f),null}c=qe.current,xf(f)?k_(f):(c=LU(A,b,v),f.stateNode=c,Ms(f))}return Ti(f),null;case 5:if(Te(f),v=f.type,c!==null&&f.stateNode!=null)c.memoizedProps!==b&&Ms(f);else{if(!b){if(f.stateNode===null)throw Error(i(166));return Ti(f),null}if(c=qe.current,xf(f))k_(f);else{switch(A=Ib(Ae.current),c){case 1:c=A.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:c=A.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":c=A.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":c=A.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":c=A.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof b.is=="string"?A.createElement("select",{is:b.is}):A.createElement("select"),b.multiple?c.multiple=!0:b.size&&(c.size=b.size);break;default:c=typeof b.is=="string"?A.createElement(v,{is:b.is}):A.createElement(v)}}c[_n]=f,c[Zt]=b;e:for(A=f.child;A!==null;){if(A.tag===5||A.tag===6)c.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===f)break e;for(;A.sibling===null;){if(A.return===null||A.return===f)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}f.stateNode=c;e:switch(da(c,v,b),v){case"button":case"input":case"select":case"textarea":c=!!b.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Ms(f)}}return Ti(f),f.flags&=-16777217,null;case 6:if(c&&f.stateNode!=null)c.memoizedProps!==b&&Ms(f);else{if(typeof b!="string"&&f.stateNode===null)throw Error(i(166));if(c=Ae.current,xf(f)){if(c=f.stateNode,v=f.memoizedProps,b=null,A=qr,A!==null)switch(A.tag){case 27:case 5:b=A.memoizedProps}c[_n]=f,c=!!(c.nodeValue===v||b!==null&&b.suppressHydrationWarning===!0||RU(c.nodeValue,v)),c||pu(f)}else c=Ib(c).createTextNode(b),c[_n]=f,f.stateNode=c}return Ti(f),null;case 13:if(b=f.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(A=xf(f),b!==null&&b.dehydrated!==null){if(c===null){if(!A)throw Error(i(318));if(A=f.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(i(317));A[_n]=f}else Ef(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Ti(f),A=!1}else Ss!==null&&(Ds(Ss),Ss=null),A=!0;if(!A)return f.flags&256?(xo(f),f):(xo(f),null)}if(xo(f),(f.flags&128)!==0)return f.lanes=v,f;if(v=b!==null,c=c!==null&&c.memoizedState!==null,v){b=f.child,A=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(A=b.alternate.memoizedState.cachePool.pool);var O=null;b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(O=b.memoizedState.cachePool.pool),O!==A&&(b.flags|=2048)}return v!==c&&v&&(f.child.flags|=8192),As(f,f.updateQueue),Ti(f),null;case 4:return De(),c===null&&Dw(f.stateNode.containerInfo),Ti(f),null;case 10:return vl(f.type),Ti(f),null;case 19:if(We(nr),A=f.memoizedState,A===null)return Ti(f),null;if(b=(f.flags&128)!==0,O=A.rendering,O===null)if(b)ud(A,!1);else{if(di!==0||c!==null&&(c.flags&128)!==0)for(c=f.child;c!==null;){if(O=Tf(c),O!==null){for(f.flags|=128,ud(A,!1),c=O.updateQueue,f.updateQueue=c,As(f,c),f.subtreeFlags=0,c=v,v=f.child;v!==null;)Rc(v,c),v=v.sibling;return ze(nr,nr.current&1|2),f.child}c=c.sibling}A.tail!==null&&he()>Tn&&(f.flags|=128,b=!0,ud(A,!1),f.lanes=4194304)}else{if(!b)if(c=Tf(O),c!==null){if(f.flags|=128,b=!0,c=c.updateQueue,f.updateQueue=c,As(f,c),ud(A,!0),A.tail===null&&A.tailMode==="hidden"&&!O.alternate&&!Un)return Ti(f),null}else 2*he()-A.renderingStartTime>Tn&&v!==536870912&&(f.flags|=128,b=!0,ud(A,!1),f.lanes=4194304);A.isBackwards?(O.sibling=f.child,f.child=O):(c=A.last,c!==null?c.sibling=O:f.child=O,A.last=O)}return A.tail!==null?(f=A.tail,A.rendering=f,A.tail=f.sibling,A.renderingStartTime=he(),f.sibling=null,c=nr.current,ze(nr,b?c&1|2:c&1),f):(Ti(f),null);case 22:case 23:return xo(f),Qh(),b=f.memoizedState!==null,c!==null?c.memoizedState!==null!==b&&(f.flags|=8192):b&&(f.flags|=8192),b?(v&536870912)!==0&&(f.flags&128)===0&&(Ti(f),f.subtreeFlags&6&&(f.flags|=8192)):Ti(f),v=f.updateQueue,v!==null&&As(f,v.retryQueue),v=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),b=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==v&&(f.flags|=2048),c!==null&&We(hl),null;case 24:return v=null,c!==null&&(v=c.memoizedState.cache),f.memoizedState.cache!==v&&(f.flags|=2048),vl(ki),Ti(f),null;case 25:return null}throw Error(i(156,f.tag))}function Oi(c,f){switch(lc(f),f.tag){case 1:return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return vl(ki),De(),c=f.flags,(c&65536)!==0&&(c&128)===0?(f.flags=c&-65537|128,f):null;case 26:case 27:case 5:return Te(f),null;case 13:if(xo(f),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(i(340));Ef()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return We(nr),null;case 4:return De(),null;case 10:return vl(f.type),null;case 22:case 23:return xo(f),Qh(),c!==null&&We(hl),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 24:return vl(ki),null;case 25:return null;default:return null}}function Yv(c,f){switch(lc(f),f.tag){case 3:vl(ki),De();break;case 26:case 27:case 5:Te(f);break;case 4:De();break;case 13:xo(f);break;case 19:We(nr);break;case 10:vl(f.type);break;case 22:case 23:xo(f),Qh(),c!==null&&We(hl);break;case 24:vl(ki)}}var Au={getCacheForType:function(c){var f=Wr(ki),v=f.data.get(c);return v===void 0&&(v=c(),f.data.set(c,v)),v}},wl=typeof WeakMap=="function"?WeakMap:Map,en=0,$n=null,Sn=null,Vt=0,Qn=0,Bn=null,Wi=!1,Zr=!1,Uc=!1,Tl=0,di=0,ro=0,Oo=0,Ff=0,fa=0,Do=0,fd=null,wn=null,Xn=!1,mn=0,Tn=1/0,Wn=null,sr=null,Cs=!1,Rs=null,Cu=0,ao=0,_i=null,Os=0,Ml=null;function ha(){if((en&2)!==0&&Vt!==0)return Vt&-Vt;if(I.T!==null){var c=vu;return c!==0?c:Aw()}return ra()}function ts(){fa===0&&(fa=(Vt&536870912)===0||Un?At():536870912);var c=Ca.current;return c!==null&&(c.flags|=32),fa}function or(c,f,v){(c===$n&&Qn===2||c.cancelPendingCommit!==null)&&(Al(c,0),ns(c,Vt,fa,!1)),Dn(c,v),((en&2)===0||c!==$n)&&(c===$n&&((en&2)===0&&(Oo|=v),di===4&&ns(c,Vt,fa,!1)),Jn(c))}function Hf(c,f,v){if((en&6)!==0)throw Error(i(327));var b=!v&&(f&60)===0&&(f&c.expiredLanes)===0||Tt(c,f),A=b?d(c,f):Ou(c,f,!0),O=b;do{if(A===0){Zr&&!b&&ns(c,f,0,!1);break}else if(A===6)ns(c,f,0,!Wi);else{if(v=c.current.alternate,O&&!$v(v)){A=Ou(c,f,!1),O=!1;continue}if(A===2){if(O=f,c.errorRecoveryDisabledLanes&O)var V=0;else V=c.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){f=V;e:{var ne=c;A=fd;var fe=ne.current.memoizedState.isDehydrated;if(fe&&(Al(ne,V).flags|=256),V=Ou(ne,V,!1),V!==2){if(Uc&&!fe){ne.errorRecoveryDisabledLanes|=O,Oo|=O,A=4;break e}O=wn,wn=A,O!==null&&Ds(O)}A=V}if(O=!1,A!==2)continue}}if(A===1){Al(c,0),ns(c,f,0,!0);break}e:{switch(b=c,A){case 0:case 1:throw Error(i(345));case 4:if((f&4194176)===f){ns(b,f,fa,!Wi);break e}break;case 2:wn=null;break;case 3:case 5:break;default:throw Error(i(329))}if(b.finishedWork=v,b.finishedLanes=f,(f&62914560)===f&&(O=mn+300-he(),10<O)){if(ns(b,f,fa,!Wi),rt(b,0)!==0)break e;b.timeoutHandle=UU(cm.bind(null,b,v,wn,Wn,Xn,f,fa,Oo,Do,Wi,2,-0,0),O);break e}cm(b,v,wn,Wn,Xn,f,fa,Oo,Do,Wi,0,-0,0)}}break}while(!0);Jn(c)}function Ds(c){wn===null?wn=c:wn.push.apply(wn,c)}function cm(c,f,v,b,A,O,V,ne,fe,Ee,nt,ft,He){var Qe=f.subtreeFlags;if((Qe&8192||(Qe&16785408)===16785408)&&(ey={stylesheets:null,count:0,unsuspend:fq},Mu(f),f=dq(),f!==null)){c.cancelPendingCommit=f(pe.bind(null,c,v,b,A,V,ne,fe,1,ft,He)),ns(c,O,V,!Ee);return}pe(c,v,b,A,V,ne,fe,nt,ft,He)}function $v(c){for(var f=c;;){var v=f.tag;if((v===0||v===11||v===15)&&f.flags&16384&&(v=f.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var b=0;b<v.length;b++){var A=v[b],O=A.getSnapshot;A=A.value;try{if(!wa(O(),A))return!1}catch{return!1}}if(v=f.child,f.subtreeFlags&16384&&v!==null)v.return=f,f=v;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function ns(c,f,v,b){f&=~Ff,f&=~Oo,c.suspendedLanes|=f,c.pingedLanes&=~f,b&&(c.warmLanes|=f),b=c.expirationTimes;for(var A=f;0<A;){var O=31-gt(A),V=1<<O;b[O]=-1,A&=~V}v!==0&&dr(c,v,f)}function Ru(){return(en&6)===0?(An(0),!1):!0}function Uo(){if(Sn!==null){if(Qn===0)var c=Sn.return;else c=Sn,Qs=Mo=null,Gp(c),fc=null,Xh=0,c=Sn;for(;c!==null;)Yv(c.alternate,c),c=c.return;Sn=null}}function Al(c,f){c.finishedWork=null,c.finishedLanes=0;var v=c.timeoutHandle;v!==-1&&(c.timeoutHandle=-1,Xj(v)),v=c.cancelPendingCommit,v!==null&&(c.cancelPendingCommit=null,v()),Uo(),$n=c,Sn=v=ua(c.current,null),Vt=f,Qn=0,Bn=null,Wi=!1,Zr=Tt(c,f),Uc=!1,Do=fa=Ff=Oo=ro=di=0,wn=fd=null,Xn=!1,(f&8)!==0&&(f|=f&32);var b=c.entangledLanes;if(b!==0)for(c=c.entanglements,b&=f;0<b;){var A=31-gt(b),O=1<<A;f|=c[A],b&=~O}return Tl=f,Hh(),v}function Nc(c,f){pn=null,I.H=To,f===cc?(f=Hn(),Qn=3):f===vv?(f=Hn(),Qn=4):Qn=f===Za?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Bn=f,Sn===null&&(di=1,Qp(c,Aa(f,c.current)))}function Vf(){var c=I.H;return I.H=To,c===null?To:c}function um(){var c=I.A;return I.A=Au,c}function hd(){di=4,Wi||(Vt&4194176)!==Vt&&Ca.current!==null||(Zr=!0),(ro&134217727)===0&&(Oo&134217727)===0||$n===null||ns($n,Vt,fa,!1)}function Ou(c,f,v){var b=en;en|=2;var A=Vf(),O=um();($n!==c||Vt!==f)&&(Wn=null,Al(c,f)),f=!1;var V=di;e:do try{if(Qn!==0&&Sn!==null){var ne=Sn,fe=Bn;switch(Qn){case 8:Uo(),V=6;break e;case 3:case 2:case 6:Ca.current===null&&(f=!0);var Ee=Qn;if(Qn=0,Bn=null,U(c,ne,fe,Ee),v&&Zr){V=0;break e}break;default:Ee=Qn,Qn=0,Bn=null,U(c,ne,fe,Ee)}}Xv(),V=di;break}catch(nt){Nc(c,nt)}while(!0);return f&&c.shellSuspendCounter++,Qs=Mo=null,en=b,I.H=A,I.A=O,Sn===null&&($n=null,Vt=0,Hh()),V}function Xv(){for(;Sn!==null;)E(Sn)}function d(c,f){var v=en;en|=2;var b=Vf(),A=um();$n!==c||Vt!==f?(Wn=null,Tn=he()+500,Al(c,f)):Zr=Tt(c,f);e:do try{if(Qn!==0&&Sn!==null){f=Sn;var O=Bn;t:switch(Qn){case 1:Qn=0,Bn=null,U(c,f,O,1);break;case 2:if(H_(O)){Qn=0,Bn=null,R(f);break}f=function(){Qn===2&&$n===c&&(Qn=7),Jn(c)},O.then(f,f);break e;case 3:Qn=7;break e;case 4:Qn=5;break e;case 7:H_(O)?(Qn=0,Bn=null,R(f)):(Qn=0,Bn=null,U(c,f,O,7));break;case 5:var V=null;switch(Sn.tag){case 26:V=Sn.memoizedState;case 5:case 27:var ne=Sn;if(!V||GU(V)){Qn=0,Bn=null;var fe=ne.sibling;if(fe!==null)Sn=fe;else{var Ee=ne.return;Ee!==null?(Sn=Ee,k(Ee)):Sn=null}break t}}Qn=0,Bn=null,U(c,f,O,5);break;case 6:Qn=0,Bn=null,U(c,f,O,6);break;case 8:Uo(),di=6;break e;default:throw Error(i(462))}}m();break}catch(nt){Nc(c,nt)}while(!0);return Qs=Mo=null,I.H=b,I.A=A,en=v,Sn!==null?0:($n=null,Vt=0,Hh(),di)}function m(){for(;Sn!==null&&!W();)E(Sn)}function E(c){var f=id(c.alternate,c,Tl);c.memoizedProps=c.pendingProps,f===null?k(c):Sn=f}function R(c){var f=c,v=f.alternate;switch(f.tag){case 15:case 0:f=Ab(v,f,f.pendingProps,f.type,void 0,Vt);break;case 11:f=Ab(v,f,f.pendingProps,f.type.render,f.ref,Vt);break;case 5:Gp(f);default:Yv(v,f),f=Sn=Rc(f,Tl),f=id(v,f,Tl)}c.memoizedProps=c.pendingProps,f===null?k(c):Sn=f}function U(c,f,v,b){Qs=Mo=null,Gp(f),fc=null,Xh=0;var A=f.return;try{if(ww(c,A,f,v,Vt)){di=1,Qp(c,Aa(v,c.current)),Sn=null;return}}catch(O){if(A!==null)throw Sn=A,O;di=1,Qp(c,Aa(v,c.current)),Sn=null;return}f.flags&32768?(Un||b===1?c=!0:Zr||(Vt&536870912)!==0?c=!1:(Wi=c=!0,(b===2||b===3||b===6)&&(b=Ca.current,b!==null&&b.tag===13&&(b.flags|=16384))),ie(f,c)):k(f)}function k(c){var f=c;do{if((f.flags&32768)!==0){ie(f,Wi);return}c=f.return;var v=Mw(f.alternate,f,Tl);if(v!==null){Sn=v;return}if(f=f.sibling,f!==null){Sn=f;return}Sn=f=c}while(f!==null);di===0&&(di=5)}function ie(c,f){do{var v=Oi(c.alternate,c);if(v!==null){v.flags&=32767,Sn=v;return}if(v=c.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!f&&(c=c.sibling,c!==null)){Sn=c;return}Sn=c=v}while(c!==null);di=6,Sn=null}function pe(c,f,v,b,A,O,V,ne,fe,Ee){var nt=I.T,ft=Z.p;try{Z.p=2,I.T=null,Re(c,f,v,b,ft,A,O,V,ne,fe,Ee)}finally{I.T=nt,Z.p=ft}}function Re(c,f,v,b,A,O,V,ne){do pt();while(Rs!==null);if((en&6)!==0)throw Error(i(327));var fe=c.finishedWork;if(b=c.finishedLanes,fe===null)return null;if(c.finishedWork=null,c.finishedLanes=0,fe===c.current)throw Error(i(177));c.callbackNode=null,c.callbackPriority=0,c.cancelPendingCommit=null;var Ee=fe.lanes|fe.childLanes;if(Ee|=rl,ci(c,b,Ee,O,V,ne),c===$n&&(Sn=$n=null,Vt=0),(fe.subtreeFlags&10256)===0&&(fe.flags&10256)===0||Cs||(Cs=!0,ao=Ee,_i=v,Me(Ge,function(){return pt(),null})),v=(fe.flags&15990)!==0,(fe.subtreeFlags&15990)!==0||v?(v=I.T,I.T=null,O=Z.p,Z.p=2,V=en,en|=4,If(c,fe),Tu(fe,c),fv(Lw,c.containerInfo),Vb=!!Pw,Lw=Pw=null,c.current=fe,Bf(c,fe.alternate,fe),ae(),en=V,Z.p=O,I.T=v):c.current=fe,Cs?(Cs=!1,Rs=c,Cu=b):tt(c,Ee),Ee=c.pendingLanes,Ee===0&&(sr=null),$e(fe.stateNode),Jn(c),f!==null)for(A=c.onRecoverableError,fe=0;fe<f.length;fe++)Ee=f[fe],A(Ee.value,{componentStack:Ee.stack});return(Cu&3)!==0&&pt(),Ee=c.pendingLanes,(b&4194218)!==0&&(Ee&42)!==0?c===Ml?Os++:(Os=0,Ml=c):Os=0,An(0),null}function tt(c,f){(c.pooledCacheLanes&=f)===0&&(f=c.pooledCache,f!=null&&(c.pooledCache=null,dc(f)))}function pt(){if(Rs!==null){var c=Rs,f=ao;ao=0;var v=xi(Cu),b=I.T,A=Z.p;try{if(Z.p=32>v?32:v,I.T=null,Rs===null)var O=!1;else{v=_i,_i=null;var V=Rs,ne=Cu;if(Rs=null,Cu=0,(en&6)!==0)throw Error(i(331));var fe=en;if(en|=4,zf(V.current),bl(V,V.current,ne,v),en=fe,An(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(it,V)}catch{}O=!0}return O}finally{Z.p=A,I.T=b,tt(c,f)}}return!1}function Et(c,f,v){f=Aa(v,f),f=Nv(c.stateNode,f,2),c=es(c,f,2),c!==null&&(Dn(c,2),Jn(c))}function dt(c,f,v){if(c.tag===3)Et(c,c,v);else for(;f!==null;){if(f.tag===3){Et(f,c,v);break}else if(f.tag===1){var b=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(sr===null||!sr.has(b))){c=Aa(v,c),v=Pv(2),b=es(f,v,2),b!==null&&(Tb(v,b,f,c),Dn(b,2),Jn(b));break}}f=f.return}}function tn(c,f,v){var b=c.pingCache;if(b===null){b=c.pingCache=new wl;var A=new Set;b.set(f,A)}else A=b.get(f),A===void 0&&(A=new Set,b.set(f,A));A.has(v)||(Uc=!0,A.add(v),c=Us.bind(null,c,f,v),f.then(c,c))}function Us(c,f,v){var b=c.pingCache;b!==null&&b.delete(f),c.pingedLanes|=c.suspendedLanes&v,c.warmLanes&=~v,$n===c&&(Vt&v)===v&&(di===4||di===3&&(Vt&62914560)===Vt&&300>he()-mn?(en&2)===0&&Al(c,0):Ff|=v,Do===Vt&&(Do=0)),Jn(c)}function Gf(c,f){f===0&&(f=Ut()),c=al(c,f),c!==null&&(Dn(c,f),Jn(c))}function Du(c){var f=c.memoizedState,v=0;f!==null&&(v=f.retryLane),Gf(c,v)}function Be(c,f){var v=0;switch(c.tag){case 13:var b=c.stateNode,A=c.memoizedState;A!==null&&(v=A.retryLane);break;case 19:b=c.stateNode;break;case 22:b=c.stateNode._retryCache;break;default:throw Error(i(314))}b!==null&&b.delete(f),Gf(c,v)}function Me(c,f){return Pe(c,f)}var Ve=null,ht=null,Lt=!1,Kn=!1,Wt=!1,xn=0;function Jn(c){c!==ht&&c.next===null&&(ht===null?Ve=ht=c:ht=ht.next=c),Kn=!0,Lt||(Lt=!0,Fj(Pc))}function An(c,f){if(!Wt&&Kn){Wt=!0;do for(var v=!1,b=Ve;b!==null;){if(c!==0){var A=b.pendingLanes;if(A===0)var O=0;else{var V=b.suspendedLanes,ne=b.pingedLanes;O=(1<<31-gt(42|c)+1)-1,O&=A&~(V&~ne),O=O&201326677?O&201326677|1:O?O|2:0}O!==0&&(v=!0,xU(b,O))}else O=Vt,O=rt(b,b===$n?O:0),(O&3)===0||Tt(b,O)||(v=!0,xU(b,O));b=b.next}while(v);Wt=!1}}function Pc(){Kn=Lt=!1;var c=0;xn!==0&&($j()&&(c=xn),xn=0);for(var f=he(),v=null,b=Ve;b!==null;){var A=b.next,O=Ub(b,f);O===0?(b.next=null,v===null?Ve=A:v.next=A,A===null&&(ht=v)):(v=b,(c!==0||(O&3)!==0)&&(Kn=!0)),b=A}An(c)}function Ub(c,f){for(var v=c.suspendedLanes,b=c.pingedLanes,A=c.expirationTimes,O=c.pendingLanes&-62914561;0<O;){var V=31-gt(O),ne=1<<V,fe=A[V];fe===-1?((ne&v)===0||(ne&b)!==0)&&(A[V]=Ft(ne,f)):fe<=f&&(c.expiredLanes|=ne),O&=~ne}if(f=$n,v=Vt,v=rt(c,c===f?v:0),b=c.callbackNode,v===0||c===f&&Qn===2||c.cancelPendingCommit!==null)return b!==null&&b!==null&&$(b),c.callbackNode=null,c.callbackPriority=0;if((v&3)===0||Tt(c,v)){if(f=v&-v,f===c.callbackPriority)return f;switch(b!==null&&$(b),xi(v)){case 2:case 8:v=je;break;case 32:v=Ge;break;case 268435456:v=_t;break;default:v=Ge}return b=SU.bind(null,c),v=Pe(v,b),c.callbackPriority=f,c.callbackNode=v,f}return b!==null&&b!==null&&$(b),c.callbackPriority=2,c.callbackNode=null,2}function SU(c,f){var v=c.callbackNode;if(pt()&&c.callbackNode!==v)return null;var b=Vt;return b=rt(c,c===$n?b:0),b===0?null:(Hf(c,b,f),Ub(c,he()),c.callbackNode!=null&&c.callbackNode===v?SU.bind(null,c):null)}function xU(c,f){if(pt())return null;Hf(c,f,!0)}function Fj(c){Kj(function(){(en&6)!==0?Pe(Oe,c):c()})}function Aw(){return xn===0&&(xn=At()),xn}function EU(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:ms(""+c)}function wU(c,f){var v=f.ownerDocument.createElement("input");return v.name=f.name,v.value=f.value,c.id&&v.setAttribute("form",c.id),f.parentNode.insertBefore(v,f),c=new FormData(c),v.parentNode.removeChild(v),c}function Hj(c,f,v,b,A){if(f==="submit"&&v&&v.stateNode===A){var O=EU((A[Zt]||null).action),V=b.submitter;V&&(f=(f=V[Zt]||null)?EU(f.formAction):V.getAttribute("formAction"),f!==null&&(O=f,V=null));var ne=new aa("action","action",null,b,A);c.push({event:ne,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(xn!==0){var fe=V?wU(A,V):new FormData(A);Cv(v,{pending:!0,data:fe,method:A.method,action:O},null,fe)}}else typeof O=="function"&&(ne.preventDefault(),fe=V?wU(A,V):new FormData(A),Cv(v,{pending:!0,data:fe,method:A.method,action:O},O,fe))},currentTarget:A}]})}}for(var Cw=0;Cw<il.length;Cw++){var Rw=il[Cw],Vj=Rw.toLowerCase(),Gj=Rw[0].toUpperCase()+Rw.slice(1);bs(Vj,"on"+Gj)}bs(pv,"onAnimationEnd"),bs(Ma,"onAnimationIteration"),bs(mv,"onAnimationStart"),bs("dblclick","onDoubleClick"),bs("focusin","onFocus"),bs("focusout","onBlur"),bs(nl,"onTransitionRun"),bs(Sf,"onTransitionStart"),bs(ac,"onTransitionCancel"),bs(Ip,"onTransitionEnd"),St("onMouseEnter",["mouseout","mouseover"]),St("onMouseLeave",["mouseout","mouseover"]),St("onPointerEnter",["pointerout","pointerover"]),St("onPointerLeave",["pointerout","pointerover"]),mt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mt("onBeforeInput",["compositionend","keypress","textInput","paste"]),mt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kv));function TU(c,f){f=(f&4)!==0;for(var v=0;v<c.length;v++){var b=c[v],A=b.event;b=b.listeners;e:{var O=void 0;if(f)for(var V=b.length-1;0<=V;V--){var ne=b[V],fe=ne.instance,Ee=ne.currentTarget;if(ne=ne.listener,fe!==O&&A.isPropagationStopped())break e;O=ne,A.currentTarget=Ee;try{O(A)}catch(nt){Zp(nt)}A.currentTarget=null,O=fe}else for(V=0;V<b.length;V++){if(ne=b[V],fe=ne.instance,Ee=ne.currentTarget,ne=ne.listener,fe!==O&&A.isPropagationStopped())break e;O=ne,A.currentTarget=Ee;try{O(A)}catch(nt){Zp(nt)}A.currentTarget=null,O=fe}}}}function Pn(c,f){var v=f[ps];v===void 0&&(v=f[ps]=new Set);var b=c+"__bubble";v.has(b)||(MU(f,c,2,!1),v.add(b))}function Ow(c,f,v){var b=0;f&&(b|=4),MU(v,c,b,f)}var Nb="_reactListening"+Math.random().toString(36).slice(2);function Dw(c){if(!c[Nb]){c[Nb]=!0,we.forEach(function(v){v!=="selectionchange"&&(jj.has(v)||Ow(v,!1,c),Ow(v,!0,c))});var f=c.nodeType===9?c:c.ownerDocument;f===null||f[Nb]||(f[Nb]=!0,Ow("selectionchange",!1,f))}}function MU(c,f,v,b){switch(XU(f)){case 2:var A=gq;break;case 8:A=vq;break;default:A=jw}v=A.bind(null,f,v,c),A=void 0,!Yo||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(A=!0),b?A!==void 0?c.addEventListener(f,v,{capture:!0,passive:A}):c.addEventListener(f,v,!0):A!==void 0?c.addEventListener(f,v,{passive:A}):c.addEventListener(f,v,!1)}function Uw(c,f,v,b,A){var O=b;if((f&1)===0&&(f&2)===0&&b!==null)e:for(;;){if(b===null)return;var V=b.tag;if(V===3||V===4){var ne=b.stateNode.containerInfo;if(ne===A||ne.nodeType===8&&ne.parentNode===A)break;if(V===4)for(V=b.return;V!==null;){var fe=V.tag;if((fe===3||fe===4)&&(fe=V.stateNode.containerInfo,fe===A||fe.nodeType===8&&fe.parentNode===A))return;V=V.return}for(;ne!==null;){if(V=ba(ne),V===null)return;if(fe=V.tag,fe===5||fe===6||fe===26||fe===27){b=O=V;continue e}ne=ne.parentNode}}b=b.return}pf(function(){var Ee=O,nt=Ys(v),ft=[];e:{var He=Bp.get(c);if(He!==void 0){var Qe=aa,It=c;switch(c){case"keypress":if(gs(v)===0)break e;case"keydown":case"keyup":Qe=tv;break;case"focusin":It="focus",Qe=Qo;break;case"focusout":It="blur",Qe=Qo;break;case"beforeblur":case"afterblur":Qe=Qo;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Qe=ou;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Qe=Jg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Qe=iv;break;case pv:case Ma:case mv:Qe=Ap;break;case Ip:Qe=Jo;break;case"scroll":case"scrollend":Qe=gf;break;case"wheel":Qe=mw;break;case"copy":case"cut":case"paste":Qe=xa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Qe=Cp;break;case"toggle":case"beforetoggle":Qe=tc}var an=(f&4)!==0,lr=!an&&(c==="scroll"||c==="scrollend"),Ce=an?He!==null?He+"Capture":null:He;an=[];for(var xe=Ee,Le;xe!==null;){var ot=xe;if(Le=ot.stateNode,ot=ot.tag,ot!==5&&ot!==26&&ot!==27||Le===null||Ce===null||(ot=$s(xe,Ce),ot!=null&&an.push(Zv(xe,ot,Le))),lr)break;xe=xe.return}0<an.length&&(He=new Qe(He,It,null,v,nt),ft.push({event:He,listeners:an}))}}if((f&7)===0){e:{if(He=c==="mouseover"||c==="pointerover",Qe=c==="mouseout"||c==="pointerout",He&&v!==Ws&&(It=v.relatedTarget||v.fromElement)&&(ba(It)||It[_a]))break e;if((Qe||He)&&(He=nt.window===nt?nt:(He=nt.ownerDocument)?He.defaultView||He.parentWindow:window,Qe?(It=v.relatedTarget||v.toElement,Qe=Ee,It=It?ba(It):null,It!==null&&(lr=J(It),an=It.tag,It!==lr||an!==5&&an!==27&&an!==6)&&(It=null)):(Qe=null,It=Ee),Qe!==It)){if(an=ou,ot="onMouseLeave",Ce="onMouseEnter",xe="mouse",(c==="pointerout"||c==="pointerover")&&(an=Cp,ot="onPointerLeave",Ce="onPointerEnter",xe="pointer"),lr=Qe==null?He:be(Qe),Le=It==null?He:be(It),He=new an(ot,xe+"leave",Qe,v,nt),He.target=lr,He.relatedTarget=Le,ot=null,ba(nt)===Ee&&(an=new an(Ce,xe+"enter",It,v,nt),an.target=Le,an.relatedTarget=lr,ot=an),lr=ot,Qe&&It)t:{for(an=Qe,Ce=It,xe=0,Le=an;Le;Le=fm(Le))xe++;for(Le=0,ot=Ce;ot;ot=fm(ot))Le++;for(;0<xe-Le;)an=fm(an),xe--;for(;0<Le-xe;)Ce=fm(Ce),Le--;for(;xe--;){if(an===Ce||Ce!==null&&an===Ce.alternate)break t;an=fm(an),Ce=fm(Ce)}an=null}else an=null;Qe!==null&&AU(ft,He,Qe,an,!1),It!==null&&lr!==null&&AU(ft,lr,It,an,!0)}}e:{if(He=Ee?be(Ee):window,Qe=He.nodeName&&He.nodeName.toLowerCase(),Qe==="select"||Qe==="input"&&He.type==="file")var Ot=Op;else if(ov(He))if(Dp)Ot=rc;else{Ot=B_;var Cn=gw}else Qe=He.nodeName,!Qe||Qe.toLowerCase()!=="input"||He.type!=="checkbox"&&He.type!=="radio"?Ee&&qs(Ee.elementType)&&(Ot=Op):Ot=kh;if(Ot&&(Ot=Ot(c,Ee))){Ea(ft,Ot,v,nt);break e}Cn&&Cn(c,He,Ee),c==="focusout"&&Ee&&He.type==="number"&&Ee.memoizedProps.value!=null&&Ei(He,"number",He.value)}switch(Cn=Ee?be(Ee):window,c){case"focusin":(ov(Cn)||Cn.contentEditable==="true")&&(uu=Cn,hv=Ee,bf=null);break;case"focusout":bf=hv=uu=null;break;case"mousedown":Pp=!0;break;case"contextmenu":case"mouseup":case"dragend":Pp=!1,_s(ft,v,nt);break;case"selectionchange":if(Np)break;case"keydown":case"keyup":_s(ft,v,nt)}var zt;if(Nh)e:{switch(c){case"compositionstart":var $t="onCompositionStart";break e;case"compositionend":$t="onCompositionEnd";break e;case"compositionupdate":$t="onCompositionUpdate";break e}$t=void 0}else ic?Ih(c,v)&&($t="onCompositionEnd"):c==="keydown"&&v.keyCode===229&&($t="onCompositionStart");$t&&(Lh&&v.locale!=="ko"&&(ic||$t!=="onCompositionStart"?$t==="onCompositionEnd"&&ic&&(zt=mf()):(Bi=nt,au="value"in Bi?Bi.value:Bi.textContent,ic=!0)),Cn=Pb(Ee,$t),0<Cn.length&&($t=new $a($t,c,null,v,nt),ft.push({event:$t,listeners:Cn}),zt?$t.data=zt:(zt=av(v),zt!==null&&($t.data=zt)))),(zt=Ph?Bh(c,v):sv(c,v))&&($t=Pb(Ee,"onBeforeInput"),0<$t.length&&(Cn=new $a("onBeforeInput","beforeinput",null,v,nt),ft.push({event:Cn,listeners:$t}),Cn.data=zt)),Hj(ft,c,Ee,v,nt)}TU(ft,f)})}function Zv(c,f,v){return{instance:c,listener:f,currentTarget:v}}function Pb(c,f){for(var v=f+"Capture",b=[];c!==null;){var A=c,O=A.stateNode;A=A.tag,A!==5&&A!==26&&A!==27||O===null||(A=$s(c,v),A!=null&&b.unshift(Zv(c,A,O)),A=$s(c,f),A!=null&&b.push(Zv(c,A,O))),c=c.return}return b}function fm(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function AU(c,f,v,b,A){for(var O=f._reactName,V=[];v!==null&&v!==b;){var ne=v,fe=ne.alternate,Ee=ne.stateNode;if(ne=ne.tag,fe!==null&&fe===b)break;ne!==5&&ne!==26&&ne!==27||Ee===null||(fe=Ee,A?(Ee=$s(v,O),Ee!=null&&V.unshift(Zv(v,Ee,fe))):A||(Ee=$s(v,O),Ee!=null&&V.push(Zv(v,Ee,fe)))),v=v.return}V.length!==0&&c.push({event:f,listeners:V})}var qj=/\r\n?/g,Wj=/\u0000|\uFFFD/g;function CU(c){return(typeof c=="string"?c:""+c).replace(qj,`
`).replace(Wj,"")}function RU(c,f){return f=CU(f),CU(c)===f}function Lb(){}function ai(c,f,v,b,A,O){switch(v){case"children":typeof b=="string"?f==="body"||f==="textarea"&&b===""||gr(c,b):(typeof b=="number"||typeof b=="bigint")&&f!=="body"&&gr(c,""+b);break;case"className":jn(c,"class",b);break;case"tabIndex":jn(c,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":jn(c,v,b);break;case"style":iu(c,b,O);break;case"data":if(f!=="object"){jn(c,"data",b);break}case"src":case"href":if(b===""&&(f!=="a"||v!=="href")){c.removeAttribute(v);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){c.removeAttribute(v);break}b=ms(""+b),c.setAttribute(v,b);break;case"action":case"formAction":if(typeof b=="function"){c.setAttribute(v,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(v==="formAction"?(f!=="input"&&ai(c,f,"name",A.name,A,null),ai(c,f,"formEncType",A.formEncType,A,null),ai(c,f,"formMethod",A.formMethod,A,null),ai(c,f,"formTarget",A.formTarget,A,null)):(ai(c,f,"encType",A.encType,A,null),ai(c,f,"method",A.method,A,null),ai(c,f,"target",A.target,A,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){c.removeAttribute(v);break}b=ms(""+b),c.setAttribute(v,b);break;case"onClick":b!=null&&(c.onclick=Lb);break;case"onScroll":b!=null&&Pn("scroll",c);break;case"onScrollEnd":b!=null&&Pn("scrollend",c);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(i(61));if(v=b.__html,v!=null){if(A.children!=null)throw Error(i(60));c.innerHTML=v}}break;case"multiple":c.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":c.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){c.removeAttribute("xlink:href");break}v=ms(""+b),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?c.setAttribute(v,""+b):c.removeAttribute(v);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?c.setAttribute(v,""):c.removeAttribute(v);break;case"capture":case"download":b===!0?c.setAttribute(v,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?c.setAttribute(v,b):c.removeAttribute(v);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?c.setAttribute(v,b):c.removeAttribute(v);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?c.removeAttribute(v):c.setAttribute(v,b);break;case"popover":Pn("beforetoggle",c),Pn("toggle",c),ln(c,"popover",b);break;case"xlinkActuate":bn(c,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":bn(c,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":bn(c,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":bn(c,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":bn(c,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":bn(c,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":bn(c,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":bn(c,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":bn(c,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":ln(c,"is",b);break;case"innerText":case"textContent":break;default:(!(2<v.length)||v[0]!=="o"&&v[0]!=="O"||v[1]!=="n"&&v[1]!=="N")&&(v=Rh.get(v)||v,ln(c,v,b))}}function Nw(c,f,v,b,A,O){switch(v){case"style":iu(c,b,O);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(i(61));if(v=b.__html,v!=null){if(A.children!=null)throw Error(i(60));c.innerHTML=v}}break;case"children":typeof b=="string"?gr(c,b):(typeof b=="number"||typeof b=="bigint")&&gr(c,""+b);break;case"onScroll":b!=null&&Pn("scroll",c);break;case"onScrollEnd":b!=null&&Pn("scrollend",c);break;case"onClick":b!=null&&(c.onclick=Lb);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ut.hasOwnProperty(v))e:{if(v[0]==="o"&&v[1]==="n"&&(A=v.endsWith("Capture"),f=v.slice(2,A?v.length-7:void 0),O=c[Zt]||null,O=O!=null?O[v]:null,typeof O=="function"&&c.removeEventListener(f,O,A),typeof b=="function")){typeof O!="function"&&O!==null&&(v in c?c[v]=null:c.hasAttribute(v)&&c.removeAttribute(v)),c.addEventListener(f,b,A);break e}v in c?c[v]=b:b===!0?c.setAttribute(v,""):ln(c,v,b)}}}function da(c,f,v){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pn("error",c),Pn("load",c);var b=!1,A=!1,O;for(O in v)if(v.hasOwnProperty(O)){var V=v[O];if(V!=null)switch(O){case"src":b=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,f));default:ai(c,f,O,V,v,null)}}A&&ai(c,f,"srcSet",v.srcSet,v,null),b&&ai(c,f,"src",v.src,v,null);return;case"input":Pn("invalid",c);var ne=O=V=A=null,fe=null,Ee=null;for(b in v)if(v.hasOwnProperty(b)){var nt=v[b];if(nt!=null)switch(b){case"name":A=nt;break;case"type":V=nt;break;case"checked":fe=nt;break;case"defaultChecked":Ee=nt;break;case"value":O=nt;break;case"defaultValue":ne=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(i(137,f));break;default:ai(c,f,b,nt,v,null)}}Ii(c,O,ne,fe,Ee,V,A,!1),nn(c);return;case"select":Pn("invalid",c),b=V=O=null;for(A in v)if(v.hasOwnProperty(A)&&(ne=v[A],ne!=null))switch(A){case"value":O=ne;break;case"defaultValue":V=ne;break;case"multiple":b=ne;default:ai(c,f,A,ne,v,null)}f=O,v=V,c.multiple=!!b,f!=null?ui(c,!!b,f,!1):v!=null&&ui(c,!!b,v,!0);return;case"textarea":Pn("invalid",c),O=A=b=null;for(V in v)if(v.hasOwnProperty(V)&&(ne=v[V],ne!=null))switch(V){case"value":b=ne;break;case"defaultValue":A=ne;break;case"children":O=ne;break;case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(91));break;default:ai(c,f,V,ne,v,null)}Vr(c,b,A,O),nn(c);return;case"option":for(fe in v)if(v.hasOwnProperty(fe)&&(b=v[fe],b!=null))switch(fe){case"selected":c.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:ai(c,f,fe,b,v,null)}return;case"dialog":Pn("cancel",c),Pn("close",c);break;case"iframe":case"object":Pn("load",c);break;case"video":case"audio":for(b=0;b<Kv.length;b++)Pn(Kv[b],c);break;case"image":Pn("error",c),Pn("load",c);break;case"details":Pn("toggle",c);break;case"embed":case"source":case"link":Pn("error",c),Pn("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ee in v)if(v.hasOwnProperty(Ee)&&(b=v[Ee],b!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,f));default:ai(c,f,Ee,b,v,null)}return;default:if(qs(f)){for(nt in v)v.hasOwnProperty(nt)&&(b=v[nt],b!==void 0&&Nw(c,f,nt,b,v,void 0));return}}for(ne in v)v.hasOwnProperty(ne)&&(b=v[ne],b!=null&&ai(c,f,ne,b,v,null))}function Yj(c,f,v,b){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,O=null,V=null,ne=null,fe=null,Ee=null,nt=null;for(Qe in v){var ft=v[Qe];if(v.hasOwnProperty(Qe)&&ft!=null)switch(Qe){case"checked":break;case"value":break;case"defaultValue":fe=ft;default:b.hasOwnProperty(Qe)||ai(c,f,Qe,null,b,ft)}}for(var He in b){var Qe=b[He];if(ft=v[He],b.hasOwnProperty(He)&&(Qe!=null||ft!=null))switch(He){case"type":O=Qe;break;case"name":A=Qe;break;case"checked":Ee=Qe;break;case"defaultChecked":nt=Qe;break;case"value":V=Qe;break;case"defaultValue":ne=Qe;break;case"children":case"dangerouslySetInnerHTML":if(Qe!=null)throw Error(i(137,f));break;default:Qe!==ft&&ai(c,f,He,Qe,b,ft)}}kn(c,V,ne,fe,Ee,nt,O,A);return;case"select":Qe=V=ne=He=null;for(O in v)if(fe=v[O],v.hasOwnProperty(O)&&fe!=null)switch(O){case"value":break;case"multiple":Qe=fe;default:b.hasOwnProperty(O)||ai(c,f,O,null,b,fe)}for(A in b)if(O=b[A],fe=v[A],b.hasOwnProperty(A)&&(O!=null||fe!=null))switch(A){case"value":He=O;break;case"defaultValue":ne=O;break;case"multiple":V=O;default:O!==fe&&ai(c,f,A,O,b,fe)}f=ne,v=V,b=Qe,He!=null?ui(c,!!v,He,!1):!!b!=!!v&&(f!=null?ui(c,!!v,f,!0):ui(c,!!v,v?[]:"",!1));return;case"textarea":Qe=He=null;for(ne in v)if(A=v[ne],v.hasOwnProperty(ne)&&A!=null&&!b.hasOwnProperty(ne))switch(ne){case"value":break;case"children":break;default:ai(c,f,ne,null,b,A)}for(V in b)if(A=b[V],O=v[V],b.hasOwnProperty(V)&&(A!=null||O!=null))switch(V){case"value":He=A;break;case"defaultValue":Qe=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:A!==O&&ai(c,f,V,A,b,O)}wi(c,He,Qe);return;case"option":for(var It in v)if(He=v[It],v.hasOwnProperty(It)&&He!=null&&!b.hasOwnProperty(It))switch(It){case"selected":c.selected=!1;break;default:ai(c,f,It,null,b,He)}for(fe in b)if(He=b[fe],Qe=v[fe],b.hasOwnProperty(fe)&&He!==Qe&&(He!=null||Qe!=null))switch(fe){case"selected":c.selected=He&&typeof He!="function"&&typeof He!="symbol";break;default:ai(c,f,fe,He,b,Qe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var an in v)He=v[an],v.hasOwnProperty(an)&&He!=null&&!b.hasOwnProperty(an)&&ai(c,f,an,null,b,He);for(Ee in b)if(He=b[Ee],Qe=v[Ee],b.hasOwnProperty(Ee)&&He!==Qe&&(He!=null||Qe!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(i(137,f));break;default:ai(c,f,Ee,He,b,Qe)}return;default:if(qs(f)){for(var lr in v)He=v[lr],v.hasOwnProperty(lr)&&He!==void 0&&!b.hasOwnProperty(lr)&&Nw(c,f,lr,void 0,b,He);for(nt in b)He=b[nt],Qe=v[nt],!b.hasOwnProperty(nt)||He===Qe||He===void 0&&Qe===void 0||Nw(c,f,nt,He,b,Qe);return}}for(var Ce in v)He=v[Ce],v.hasOwnProperty(Ce)&&He!=null&&!b.hasOwnProperty(Ce)&&ai(c,f,Ce,null,b,He);for(ft in b)He=b[ft],Qe=v[ft],!b.hasOwnProperty(ft)||He===Qe||He==null&&Qe==null||ai(c,f,ft,He,b,Qe)}var Pw=null,Lw=null;function Ib(c){return c.nodeType===9?c:c.ownerDocument}function OU(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function DU(c,f){if(c===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&f==="foreignObject"?0:c}function Iw(c,f){return c==="textarea"||c==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var Bw=null;function $j(){var c=window.event;return c&&c.type==="popstate"?c===Bw?!1:(Bw=c,!0):(Bw=null,!1)}var UU=typeof setTimeout=="function"?setTimeout:void 0,Xj=typeof clearTimeout=="function"?clearTimeout:void 0,NU=typeof Promise=="function"?Promise:void 0,Kj=typeof queueMicrotask=="function"?queueMicrotask:typeof NU<"u"?function(c){return NU.resolve(null).then(c).catch(Zj)}:UU;function Zj(c){setTimeout(function(){throw c})}function zw(c,f){var v=f,b=0;do{var A=v.nextSibling;if(c.removeChild(v),A&&A.nodeType===8)if(v=A.data,v==="/$"){if(b===0){c.removeChild(A),ay(f);return}b--}else v!=="$"&&v!=="$?"&&v!=="$!"||b++;v=A}while(v);ay(f)}function kw(c){var f=c.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var v=f;switch(f=f.nextSibling,v.nodeName){case"HTML":case"HEAD":case"BODY":kw(v),Wo(v);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(v.rel.toLowerCase()==="stylesheet")continue}c.removeChild(v)}}function Qj(c,f,v,b){for(;c.nodeType===1;){var A=v;if(c.nodeName.toLowerCase()!==f.toLowerCase()){if(!b&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(b){if(!c[qa])switch(f){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(O=c.getAttribute("rel"),O==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(O!==A.rel||c.getAttribute("href")!==(A.href==null?null:A.href)||c.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||c.getAttribute("title")!==(A.title==null?null:A.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(O=c.getAttribute("src"),(O!==(A.src==null?null:A.src)||c.getAttribute("type")!==(A.type==null?null:A.type)||c.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&O&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(f==="input"&&c.type==="hidden"){var O=A.name==null?null:""+A.name;if(A.type==="hidden"&&c.getAttribute("name")===O)return c}else return c;if(c=Cl(c.nextSibling),c===null)break}return null}function Jj(c,f,v){if(f==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!v||(c=Cl(c.nextSibling),c===null))return null;return c}function Cl(c){for(;c!=null;c=c.nextSibling){var f=c.nodeType;if(f===1||f===3)break;if(f===8){if(f=c.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return c}function PU(c){c=c.previousSibling;for(var f=0;c;){if(c.nodeType===8){var v=c.data;if(v==="$"||v==="$!"||v==="$?"){if(f===0)return c;f--}else v==="/$"&&f++}c=c.previousSibling}return null}function LU(c,f,v){switch(f=Ib(v),c){case"html":if(c=f.documentElement,!c)throw Error(i(452));return c;case"head":if(c=f.head,!c)throw Error(i(453));return c;case"body":if(c=f.body,!c)throw Error(i(454));return c;default:throw Error(i(451))}}var No=new Map,IU=new Set;function Bb(c){return typeof c.getRootNode=="function"?c.getRootNode():c.ownerDocument}var Uu=Z.d;Z.d={f:eq,r:tq,D:nq,C:iq,L:rq,m:aq,X:oq,S:sq,M:lq};function eq(){var c=Uu.f(),f=Ru();return c||f}function tq(c){var f=Q(c);f!==null&&f.tag===5&&f.type==="form"?db(f):Uu.r(c)}var hm=typeof document>"u"?null:document;function BU(c,f,v){var b=hm;if(b&&typeof f=="string"&&f){var A=Fn(f);A='link[rel="'+c+'"][href="'+A+'"]',typeof v=="string"&&(A+='[crossorigin="'+v+'"]'),IU.has(A)||(IU.add(A),c={rel:c,crossOrigin:v,href:f},b.querySelector(A)===null&&(f=b.createElement("link"),da(f,"link",c),ge(f),b.head.appendChild(f)))}}function nq(c){Uu.D(c),BU("dns-prefetch",c,null)}function iq(c,f){Uu.C(c,f),BU("preconnect",c,f)}function rq(c,f,v){Uu.L(c,f,v);var b=hm;if(b&&c&&f){var A='link[rel="preload"][as="'+Fn(f)+'"]';f==="image"&&v&&v.imageSrcSet?(A+='[imagesrcset="'+Fn(v.imageSrcSet)+'"]',typeof v.imageSizes=="string"&&(A+='[imagesizes="'+Fn(v.imageSizes)+'"]')):A+='[href="'+Fn(c)+'"]';var O=A;switch(f){case"style":O=dm(c);break;case"script":O=pm(c)}No.has(O)||(c=L({rel:"preload",href:f==="image"&&v&&v.imageSrcSet?void 0:c,as:f},v),No.set(O,c),b.querySelector(A)!==null||f==="style"&&b.querySelector(Qv(O))||f==="script"&&b.querySelector(Jv(O))||(f=b.createElement("link"),da(f,"link",c),ge(f),b.head.appendChild(f)))}}function aq(c,f){Uu.m(c,f);var v=hm;if(v&&c){var b=f&&typeof f.as=="string"?f.as:"script",A='link[rel="modulepreload"][as="'+Fn(b)+'"][href="'+Fn(c)+'"]',O=A;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=pm(c)}if(!No.has(O)&&(c=L({rel:"modulepreload",href:c},f),No.set(O,c),v.querySelector(A)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(v.querySelector(Jv(O)))return}b=v.createElement("link"),da(b,"link",c),ge(b),v.head.appendChild(b)}}}function sq(c,f,v){Uu.S(c,f,v);var b=hm;if(b&&c){var A=Ne(b).hoistableStyles,O=dm(c);f=f||"default";var V=A.get(O);if(!V){var ne={loading:0,preload:null};if(V=b.querySelector(Qv(O)))ne.loading=5;else{c=L({rel:"stylesheet",href:c,"data-precedence":f},v),(v=No.get(O))&&Fw(c,v);var fe=V=b.createElement("link");ge(fe),da(fe,"link",c),fe._p=new Promise(function(Ee,nt){fe.onload=Ee,fe.onerror=nt}),fe.addEventListener("load",function(){ne.loading|=1}),fe.addEventListener("error",function(){ne.loading|=2}),ne.loading|=4,zb(V,f,b)}V={type:"stylesheet",instance:V,count:1,state:ne},A.set(O,V)}}}function oq(c,f){Uu.X(c,f);var v=hm;if(v&&c){var b=Ne(v).hoistableScripts,A=pm(c),O=b.get(A);O||(O=v.querySelector(Jv(A)),O||(c=L({src:c,async:!0},f),(f=No.get(A))&&Hw(c,f),O=v.createElement("script"),ge(O),da(O,"link",c),v.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},b.set(A,O))}}function lq(c,f){Uu.M(c,f);var v=hm;if(v&&c){var b=Ne(v).hoistableScripts,A=pm(c),O=b.get(A);O||(O=v.querySelector(Jv(A)),O||(c=L({src:c,async:!0,type:"module"},f),(f=No.get(A))&&Hw(c,f),O=v.createElement("script"),ge(O),da(O,"link",c),v.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},b.set(A,O))}}function zU(c,f,v,b){var A=(A=Ae.current)?Bb(A):null;if(!A)throw Error(i(446));switch(c){case"meta":case"title":return null;case"style":return typeof v.precedence=="string"&&typeof v.href=="string"?(f=dm(v.href),v=Ne(A).hoistableStyles,b=v.get(f),b||(b={type:"style",instance:null,count:0,state:null},v.set(f,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(v.rel==="stylesheet"&&typeof v.href=="string"&&typeof v.precedence=="string"){c=dm(v.href);var O=Ne(A).hoistableStyles,V=O.get(c);if(V||(A=A.ownerDocument||A,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(c,V),(O=A.querySelector(Qv(c)))&&!O._p&&(V.instance=O,V.state.loading=5),No.has(c)||(v={rel:"preload",as:"style",href:v.href,crossOrigin:v.crossOrigin,integrity:v.integrity,media:v.media,hrefLang:v.hrefLang,referrerPolicy:v.referrerPolicy},No.set(c,v),O||cq(A,c,v,V.state))),f&&b===null)throw Error(i(528,""));return V}if(f&&b!==null)throw Error(i(529,""));return null;case"script":return f=v.async,v=v.src,typeof v=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=pm(v),v=Ne(A).hoistableScripts,b=v.get(f),b||(b={type:"script",instance:null,count:0,state:null},v.set(f,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,c))}}function dm(c){return'href="'+Fn(c)+'"'}function Qv(c){return'link[rel="stylesheet"]['+c+"]"}function kU(c){return L({},c,{"data-precedence":c.precedence,precedence:null})}function cq(c,f,v,b){c.querySelector('link[rel="preload"][as="style"]['+f+"]")?b.loading=1:(f=c.createElement("link"),b.preload=f,f.addEventListener("load",function(){return b.loading|=1}),f.addEventListener("error",function(){return b.loading|=2}),da(f,"link",v),ge(f),c.head.appendChild(f))}function pm(c){return'[src="'+Fn(c)+'"]'}function Jv(c){return"script[async]"+c}function FU(c,f,v){if(f.count++,f.instance===null)switch(f.type){case"style":var b=c.querySelector('style[data-href~="'+Fn(v.href)+'"]');if(b)return f.instance=b,ge(b),b;var A=L({},v,{"data-href":v.href,"data-precedence":v.precedence,href:null,precedence:null});return b=(c.ownerDocument||c).createElement("style"),ge(b),da(b,"style",A),zb(b,v.precedence,c),f.instance=b;case"stylesheet":A=dm(v.href);var O=c.querySelector(Qv(A));if(O)return f.state.loading|=4,f.instance=O,ge(O),O;b=kU(v),(A=No.get(A))&&Fw(b,A),O=(c.ownerDocument||c).createElement("link"),ge(O);var V=O;return V._p=new Promise(function(ne,fe){V.onload=ne,V.onerror=fe}),da(O,"link",b),f.state.loading|=4,zb(O,v.precedence,c),f.instance=O;case"script":return O=pm(v.src),(A=c.querySelector(Jv(O)))?(f.instance=A,ge(A),A):(b=v,(A=No.get(O))&&(b=L({},v),Hw(b,A)),c=c.ownerDocument||c,A=c.createElement("script"),ge(A),da(A,"link",b),c.head.appendChild(A),f.instance=A);case"void":return null;default:throw Error(i(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(b=f.instance,f.state.loading|=4,zb(b,v.precedence,c));return f.instance}function zb(c,f,v){for(var b=v.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=b.length?b[b.length-1]:null,O=A,V=0;V<b.length;V++){var ne=b[V];if(ne.dataset.precedence===f)O=ne;else if(O!==A)break}O?O.parentNode.insertBefore(c,O.nextSibling):(f=v.nodeType===9?v.head:v,f.insertBefore(c,f.firstChild))}function Fw(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.title==null&&(c.title=f.title)}function Hw(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.integrity==null&&(c.integrity=f.integrity)}var kb=null;function HU(c,f,v){if(kb===null){var b=new Map,A=kb=new Map;A.set(v,b)}else A=kb,b=A.get(v),b||(b=new Map,A.set(v,b));if(b.has(c))return b;for(b.set(c,null),v=v.getElementsByTagName(c),A=0;A<v.length;A++){var O=v[A];if(!(O[qa]||O[_n]||c==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var V=O.getAttribute(f)||"";V=c+V;var ne=b.get(V);ne?ne.push(O):b.set(V,[O])}}return b}function VU(c,f,v){c=c.ownerDocument||c,c.head.insertBefore(v,f==="title"?c.querySelector("head > title"):null)}function uq(c,f,v){if(v===1||f.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return c=f.disabled,typeof f.precedence=="string"&&c==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function GU(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var ey=null;function fq(){}function hq(c,f,v){if(ey===null)throw Error(i(475));var b=ey;if(f.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var A=dm(v.href),O=c.querySelector(Qv(A));if(O){c=O._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(b.count++,b=Fb.bind(b),c.then(b,b)),f.state.loading|=4,f.instance=O,ge(O);return}O=c.ownerDocument||c,v=kU(v),(A=No.get(A))&&Fw(v,A),O=O.createElement("link"),ge(O);var V=O;V._p=new Promise(function(ne,fe){V.onload=ne,V.onerror=fe}),da(O,"link",v),f.instance=O}b.stylesheets===null&&(b.stylesheets=new Map),b.stylesheets.set(f,c),(c=f.state.preload)&&(f.state.loading&3)===0&&(b.count++,f=Fb.bind(b),c.addEventListener("load",f),c.addEventListener("error",f))}}function dq(){if(ey===null)throw Error(i(475));var c=ey;return c.stylesheets&&c.count===0&&Vw(c,c.stylesheets),0<c.count?function(f){var v=setTimeout(function(){if(c.stylesheets&&Vw(c,c.stylesheets),c.unsuspend){var b=c.unsuspend;c.unsuspend=null,b()}},6e4);return c.unsuspend=f,function(){c.unsuspend=null,clearTimeout(v)}}:null}function Fb(){if(this.count--,this.count===0){if(this.stylesheets)Vw(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var Hb=null;function Vw(c,f){c.stylesheets=null,c.unsuspend!==null&&(c.count++,Hb=new Map,f.forEach(pq,c),Hb=null,Fb.call(c))}function pq(c,f){if(!(f.state.loading&4)){var v=Hb.get(c);if(v)var b=v.get(null);else{v=new Map,Hb.set(c,v);for(var A=c.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<A.length;O++){var V=A[O];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(v.set(V.dataset.precedence,V),b=V)}b&&v.set(null,b)}A=f.instance,V=A.getAttribute("data-precedence"),O=v.get(V)||b,O===b&&v.set(null,A),v.set(V,A),this.count++,b=Fb.bind(this),A.addEventListener("load",b),A.addEventListener("error",b),O?O.parentNode.insertBefore(A,O.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(A,c.firstChild)),f.state.loading|=4}}var ty={$$typeof:y,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function mq(c,f,v,b,A,O,V,ne){this.tag=1,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ln(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ln(0),this.hiddenUpdates=Ln(null),this.identifierPrefix=b,this.onUncaughtError=A,this.onCaughtError=O,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ne,this.incompleteTransitions=new Map}function jU(c,f,v,b,A,O,V,ne,fe,Ee,nt,ft){return c=new mq(c,f,v,V,ne,fe,Ee,ft),f=1,O===!0&&(f|=24),O=qi(3,null,null,f),c.current=O,O.stateNode=c,f=_v(),f.refCount++,c.pooledCache=f,f.refCount++,O.memoizedState={element:b,isDehydrated:v,cache:f},la(O),c}function qU(c){return c?(c=sc,c):sc}function WU(c,f,v,b,A,O){A=qU(A),b.context===null?b.context=A:b.pendingContext=A,b=Ja(f),b.payload={element:v},O=O===void 0?null:O,O!==null&&(b.callback=O),v=es(c,b,f),v!==null&&(or(v,c,f),wc(v,c,f))}function YU(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var v=c.retryLane;c.retryLane=v!==0&&v<f?v:f}}function Gw(c,f){YU(c,f),(c=c.alternate)&&YU(c,f)}function $U(c){if(c.tag===13){var f=al(c,67108864);f!==null&&or(f,c,67108864),Gw(c,67108864)}}var Vb=!0;function gq(c,f,v,b){var A=I.T;I.T=null;var O=Z.p;try{Z.p=2,jw(c,f,v,b)}finally{Z.p=O,I.T=A}}function vq(c,f,v,b){var A=I.T;I.T=null;var O=Z.p;try{Z.p=8,jw(c,f,v,b)}finally{Z.p=O,I.T=A}}function jw(c,f,v,b){if(Vb){var A=qw(b);if(A===null)Uw(c,f,b,Gb,v),KU(c,b);else if(_q(A,c,f,v,b))b.stopPropagation();else if(KU(c,b),f&4&&-1<yq.indexOf(c)){for(;A!==null;){var O=Q(A);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var V=lt(O.pendingLanes);if(V!==0){var ne=O;for(ne.pendingLanes|=2,ne.entangledLanes|=2;V;){var fe=1<<31-gt(V);ne.entanglements[1]|=fe,V&=~fe}Jn(O),(en&6)===0&&(Tn=he()+500,An(0))}}break;case 13:ne=al(O,2),ne!==null&&or(ne,O,2),Ru(),Gw(O,2)}if(O=qw(b),O===null&&Uw(c,f,b,Gb,v),O===A)break;A=O}A!==null&&b.stopPropagation()}else Uw(c,f,b,null,v)}}function qw(c){return c=Ys(c),Ww(c)}var Gb=null;function Ww(c){if(Gb=null,c=ba(c),c!==null){var f=J(c);if(f===null)c=null;else{var v=f.tag;if(v===13){if(c=se(f),c!==null)return c;c=null}else if(v===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;c=null}else f!==c&&(c=null)}}return Gb=c,null}function XU(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Se()){case Oe:return 2;case je:return 8;case Ge:case Ke:return 32;case _t:return 268435456;default:return 32}default:return 32}}var Yw=!1,jf=null,qf=null,Wf=null,ny=new Map,iy=new Map,Yf=[],yq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function KU(c,f){switch(c){case"focusin":case"focusout":jf=null;break;case"dragenter":case"dragleave":qf=null;break;case"mouseover":case"mouseout":Wf=null;break;case"pointerover":case"pointerout":ny.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":iy.delete(f.pointerId)}}function ry(c,f,v,b,A,O){return c===null||c.nativeEvent!==O?(c={blockedOn:f,domEventName:v,eventSystemFlags:b,nativeEvent:O,targetContainers:[A]},f!==null&&(f=Q(f),f!==null&&$U(f)),c):(c.eventSystemFlags|=b,f=c.targetContainers,A!==null&&f.indexOf(A)===-1&&f.push(A),c)}function _q(c,f,v,b,A){switch(f){case"focusin":return jf=ry(jf,c,f,v,b,A),!0;case"dragenter":return qf=ry(qf,c,f,v,b,A),!0;case"mouseover":return Wf=ry(Wf,c,f,v,b,A),!0;case"pointerover":var O=A.pointerId;return ny.set(O,ry(ny.get(O)||null,c,f,v,b,A)),!0;case"gotpointercapture":return O=A.pointerId,iy.set(O,ry(iy.get(O)||null,c,f,v,b,A)),!0}return!1}function ZU(c){var f=ba(c.target);if(f!==null){var v=J(f);if(v!==null){if(f=v.tag,f===13){if(f=se(v),f!==null){c.blockedOn=f,pr(c.priority,function(){if(v.tag===13){var b=ha(),A=al(v,b);A!==null&&or(A,v,b),Gw(v,b)}});return}}else if(f===3&&v.stateNode.current.memoizedState.isDehydrated){c.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}c.blockedOn=null}function jb(c){if(c.blockedOn!==null)return!1;for(var f=c.targetContainers;0<f.length;){var v=qw(c.nativeEvent);if(v===null){v=c.nativeEvent;var b=new v.constructor(v.type,v);Ws=b,v.target.dispatchEvent(b),Ws=null}else return f=Q(v),f!==null&&$U(f),c.blockedOn=v,!1;f.shift()}return!0}function QU(c,f,v){jb(c)&&v.delete(f)}function bq(){Yw=!1,jf!==null&&jb(jf)&&(jf=null),qf!==null&&jb(qf)&&(qf=null),Wf!==null&&jb(Wf)&&(Wf=null),ny.forEach(QU),iy.forEach(QU)}function qb(c,f){c.blockedOn===f&&(c.blockedOn=null,Yw||(Yw=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,bq)))}var Wb=null;function JU(c){Wb!==c&&(Wb=c,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Wb===c&&(Wb=null);for(var f=0;f<c.length;f+=3){var v=c[f],b=c[f+1],A=c[f+2];if(typeof b!="function"){if(Ww(b||v)===null)continue;break}var O=Q(v);O!==null&&(c.splice(f,3),f-=3,Cv(O,{pending:!0,data:A,method:v.method,action:b},b,A))}}))}function ay(c){function f(fe){return qb(fe,c)}jf!==null&&qb(jf,c),qf!==null&&qb(qf,c),Wf!==null&&qb(Wf,c),ny.forEach(f),iy.forEach(f);for(var v=0;v<Yf.length;v++){var b=Yf[v];b.blockedOn===c&&(b.blockedOn=null)}for(;0<Yf.length&&(v=Yf[0],v.blockedOn===null);)ZU(v),v.blockedOn===null&&Yf.shift();if(v=(c.ownerDocument||c).$$reactFormReplay,v!=null)for(b=0;b<v.length;b+=3){var A=v[b],O=v[b+1],V=A[Zt]||null;if(typeof O=="function")V||JU(v);else if(V){var ne=null;if(O&&O.hasAttribute("formAction")){if(A=O,V=O[Zt]||null)ne=V.formAction;else if(Ww(A)!==null)continue}else ne=V.action;typeof ne=="function"?v[b+1]=ne:(v.splice(b,3),b-=3),JU(v)}}}function $w(c){this._internalRoot=c}Yb.prototype.render=$w.prototype.render=function(c){var f=this._internalRoot;if(f===null)throw Error(i(409));var v=f.current,b=ha();WU(v,b,c,f,null,null)},Yb.prototype.unmount=$w.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var f=c.containerInfo;c.tag===0&&pt(),WU(c.current,2,null,c,null,null),Ru(),f[_a]=null}};function Yb(c){this._internalRoot=c}Yb.prototype.unstable_scheduleHydration=function(c){if(c){var f=ra();c={blockedOn:null,target:c,priority:f};for(var v=0;v<Yf.length&&f!==0&&f<Yf[v].priority;v++);Yf.splice(v,0,c),v===0&&ZU(c)}};var eN=e.version;if(eN!=="19.0.0")throw Error(i(527,eN,"19.0.0"));Z.findDOMNode=function(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(i(188)):(c=Object.keys(c).join(","),Error(i(268,c)));return c=X(f),c=c!==null?oe(c):null,c=c===null?null:c.stateNode,c};var Sq={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:I,findFiberByHostInstance:ba,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$b.isDisabled&&$b.supportsFiber)try{it=$b.inject(Sq),Ze=$b}catch{}}return sy.createRoot=function(c,f){if(!r(c))throw Error(i(299));var v=!1,b="",A=Sb,O=xb,V=Eb,ne=null;return f!=null&&(f.unstable_strictMode===!0&&(v=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onUncaughtError!==void 0&&(A=f.onUncaughtError),f.onCaughtError!==void 0&&(O=f.onCaughtError),f.onRecoverableError!==void 0&&(V=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(ne=f.unstable_transitionCallbacks)),f=jU(c,1,!1,null,null,v,b,A,O,V,ne,null),c[_a]=f.current,Dw(c.nodeType===8?c.parentNode:c),new $w(f)},sy.hydrateRoot=function(c,f,v){if(!r(c))throw Error(i(299));var b=!1,A="",O=Sb,V=xb,ne=Eb,fe=null,Ee=null;return v!=null&&(v.unstable_strictMode===!0&&(b=!0),v.identifierPrefix!==void 0&&(A=v.identifierPrefix),v.onUncaughtError!==void 0&&(O=v.onUncaughtError),v.onCaughtError!==void 0&&(V=v.onCaughtError),v.onRecoverableError!==void 0&&(ne=v.onRecoverableError),v.unstable_transitionCallbacks!==void 0&&(fe=v.unstable_transitionCallbacks),v.formState!==void 0&&(Ee=v.formState)),f=jU(c,1,!0,f,v??null,b,A,O,V,ne,fe,Ee),f.context=qU(null),v=f.current,b=ha(),A=Ja(b),A.callback=null,es(v,A,b),f.current.lanes=b,Dn(f,b),Jn(f),c[_a]=f.current,Dw(c),new Yb(f)},sy.version="19.0.0",sy}var lN;function Oq(){if(lN)return Kw.exports;lN=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Kw.exports=Rq(),Kw.exports}var Dq=Oq();const Uq=kr(Dq);var eT={exports:{}},Nu={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cN;function Nq(){return cN||(cN=1,Nu.ConcurrentRoot=1,Nu.ContinuousEventPriority=8,Nu.DefaultEventPriority=32,Nu.DiscreteEventPriority=2,Nu.IdleEventPriority=268435456,Nu.LegacyRoot=0,Nu.NoEventPriority=0),Nu}var uN;function Pq(){return uN||(uN=1,eT.exports=Nq()),eT.exports}var fx=Pq();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const X1="174",Lq={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Iq={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},o5=0,LR=1,l5=2,Bq=3,c5=0,K1=1,Hy=2,Ll=3,Zu=0,ds=1,Fl=2,$u=0,qd=1,IR=2,BR=3,zR=4,u5=5,lh=100,f5=101,h5=102,d5=103,p5=104,m5=200,g5=201,v5=202,y5=203,Ux=204,Nx=205,_5=206,b5=207,S5=208,x5=209,E5=210,w5=211,T5=212,M5=213,A5=214,Px=0,Lx=1,Ix=2,ep=3,Bx=4,zx=5,kx=6,Fx=7,X0=0,C5=1,R5=2,Vc=0,O5=1,D5=2,U5=3,iD=4,N5=5,P5=6,L5=7,kR="attached",I5="detached",Z1=300,Qu=301,ph=302,mg=303,l0=304,Lg=306,tp=1e3,ks=1001,c0=1002,va=1003,rD=1004,zq=1004,ig=1005,kq=1005,Sr=1006,Vy=1007,Fq=1007,Fc=1008,Hq=1008,Gl=1009,aD=1010,sD=1011,gg=1012,Q1=1013,Ju=1014,Fs=1015,Ig=1016,J1=1017,eE=1018,np=1020,oD=35902,lD=1021,cD=1022,za=1023,uD=1024,fD=1025,Wd=1026,ip=1027,tE=1028,K0=1029,hD=1030,nE=1031,Vq=1032,iE=1033,Gy=33776,jy=33777,qy=33778,Wy=33779,Hx=35840,Vx=35841,Gx=35842,jx=35843,qx=36196,Wx=37492,Yx=37496,$x=37808,Xx=37809,Kx=37810,Zx=37811,Qx=37812,Jx=37813,e1=37814,t1=37815,n1=37816,i1=37817,r1=37818,a1=37819,s1=37820,o1=37821,Yy=36492,l1=36494,c1=36495,dD=36283,u1=36284,f1=36285,h1=36286,B5=2200,z5=2201,k5=2202,u0=2300,d1=2301,hx=2302,Fd=2400,Hd=2401,f0=2402,rE=2500,pD=2501,Gq=0,jq=1,qq=2,F5=3200,mD=3201,Wq=3202,Yq=3203,Eh=0,H5=1,ju="",ni="srgb",mh="srgb-linear",h0="linear",ei="srgb",$q=0,Dd=7680,Xq=7681,Kq=7682,Zq=7683,Qq=34055,Jq=34056,eW=5386,tW=512,nW=513,iW=514,rW=515,aW=516,sW=517,oW=518,FR=519,V5=512,G5=513,j5=514,gD=515,q5=516,W5=517,Y5=518,$5=519,d0=35044,lW=35048,cW=35040,uW=35045,fW=35049,hW=35041,dW=35046,pW=35050,mW=35042,gW="100",HR="300 es",Hl=2e3,p0=2001,vW={COMPUTE:"compute",RENDER:"render"};let Zc=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,s=r.length;a<s;a++)r[a].call(this,e);e.target=null}}};const Pa=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let fN=1234567;const Yd=Math.PI/180,vg=180/Math.PI;function po(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Pa[n&255]+Pa[n>>8&255]+Pa[n>>16&255]+Pa[n>>24&255]+"-"+Pa[e&255]+Pa[e>>8&255]+"-"+Pa[e>>16&15|64]+Pa[e>>24&255]+"-"+Pa[t&63|128]+Pa[t>>8&255]+"-"+Pa[t>>16&255]+Pa[t>>24&255]+Pa[i&255]+Pa[i>>8&255]+Pa[i>>16&255]+Pa[i>>24&255]).toLowerCase()}function sn(n,e,t){return Math.max(e,Math.min(t,n))}function vD(n,e){return(n%e+e)%e}function yW(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function _W(n,e,t){return n!==e?(t-n)/(e-n):0}function $y(n,e,t){return(1-t)*n+t*e}function bW(n,e,t,i){return $y(n,e,1-Math.exp(-t*i))}function SW(n,e=1){return e-Math.abs(vD(n,e*2)-e)}function xW(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function EW(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function wW(n,e){return n+Math.floor(Math.random()*(e-n+1))}function TW(n,e){return n+Math.random()*(e-n)}function MW(n){return n*(.5-Math.random())}function AW(n){n!==void 0&&(fN=n);let e=fN+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function CW(n){return n*Yd}function RW(n){return n*vg}function OW(n){return(n&n-1)===0&&n!==0}function DW(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function UW(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function NW(n,e,t,i,r){const a=Math.cos,s=Math.sin,o=a(t/2),l=s(t/2),u=a((e+i)/2),h=s((e+i)/2),p=a((e-i)/2),g=s((e-i)/2),y=a((i-e)/2),_=s((i-e)/2);switch(r){case"XYX":n.set(o*h,l*p,l*g,o*u);break;case"YZY":n.set(l*g,o*h,l*p,o*u);break;case"ZXZ":n.set(l*p,l*g,o*h,o*u);break;case"XZX":n.set(o*h,l*_,l*y,o*u);break;case"YXY":n.set(l*y,o*h,l*_,o*u);break;case"ZYZ":n.set(l*_,l*y,o*h,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function fs(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function hn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Lr={DEG2RAD:Yd,RAD2DEG:vg,generateUUID:po,clamp:sn,euclideanModulo:vD,mapLinear:yW,inverseLerp:_W,lerp:$y,damp:bW,pingpong:SW,smoothstep:xW,smootherstep:EW,randInt:wW,randFloat:TW,randFloatSpread:MW,seededRandom:AW,degToRad:CW,radToDeg:RW,isPowerOfTwo:OW,ceilPowerOfTwo:DW,floorPowerOfTwo:UW,setQuaternionFromProperEuler:NW,normalize:hn,denormalize:fs};class st{constructor(e=0,t=0){st.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=sn(this.x,e.x,t.x),this.y=sn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=sn(this.x,e,t),this.y=sn(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(sn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(sn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),a=this.x-e.x,s=this.y-e.y;return this.x=a*i-s*r+e.x,this.y=a*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class rn{constructor(e,t,i,r,a,s,o,l,u){rn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,a,s,o,l,u)}set(e,t,i,r,a,s,o,l,u){const h=this.elements;return h[0]=e,h[1]=r,h[2]=o,h[3]=t,h[4]=a,h[5]=l,h[6]=i,h[7]=s,h[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,a=this.elements,s=i[0],o=i[3],l=i[6],u=i[1],h=i[4],p=i[7],g=i[2],y=i[5],_=i[8],S=r[0],x=r[3],w=r[6],T=r[1],M=r[4],C=r[7],N=r[2],D=r[5],P=r[8];return a[0]=s*S+o*T+l*N,a[3]=s*x+o*M+l*D,a[6]=s*w+o*C+l*P,a[1]=u*S+h*T+p*N,a[4]=u*x+h*M+p*D,a[7]=u*w+h*C+p*P,a[2]=g*S+y*T+_*N,a[5]=g*x+y*M+_*D,a[8]=g*w+y*C+_*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],h=e[8];return t*s*h-t*o*u-i*a*h+i*o*l+r*a*u-r*s*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],h=e[8],p=h*s-o*u,g=o*l-h*a,y=u*a-s*l,_=t*p+i*g+r*y;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);const S=1/_;return e[0]=p*S,e[1]=(r*u-h*i)*S,e[2]=(o*i-r*s)*S,e[3]=g*S,e[4]=(h*t-r*l)*S,e[5]=(r*a-o*t)*S,e[6]=y*S,e[7]=(i*l-u*t)*S,e[8]=(s*t-i*a)*S,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,a,s,o){const l=Math.cos(a),u=Math.sin(a);return this.set(i*l,i*u,-i*(l*s+u*o)+s+e,-r*u,r*l,-r*(-u*s+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(tT.makeScale(e,t)),this}rotate(e){return this.premultiply(tT.makeRotation(-e)),this}translate(e,t){return this.premultiply(tT.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const tT=new rn;function X5(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const PW={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function rg(n,e){return new PW[n](e)}function m0(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function K5(){const n=m0("canvas");return n.style.display="block",n}const hN={};function Ud(n){n in hN||(hN[n]=!0,console.warn(n))}function LW(n,e,t){return new Promise(function(i,r){function a(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(a,t);break;default:i()}}setTimeout(a,t)})}function IW(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function BW(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const dN=new rn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),pN=new rn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function zW(){const n={enabled:!0,workingColorSpace:mh,spaces:{},convert:function(r,a,s){return this.enabled===!1||a===s||!a||!s||(this.spaces[a].transfer===ei&&(r.r=Xu(r.r),r.g=Xu(r.g),r.b=Xu(r.b)),this.spaces[a].primaries!==this.spaces[s].primaries&&(r.applyMatrix3(this.spaces[a].toXYZ),r.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===ei&&(r.r=fg(r.r),r.g=fg(r.g),r.b=fg(r.b))),r},fromWorkingColorSpace:function(r,a){return this.convert(r,this.workingColorSpace,a)},toWorkingColorSpace:function(r,a){return this.convert(r,a,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===ju?h0:this.spaces[r].transfer},getLuminanceCoefficients:function(r,a=this.workingColorSpace){return r.fromArray(this.spaces[a].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,a,s){return r.copy(this.spaces[a].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[mh]:{primaries:e,whitePoint:i,transfer:h0,toXYZ:dN,fromXYZ:pN,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:ni},outputColorSpaceConfig:{drawingBufferColorSpace:ni}},[ni]:{primaries:e,whitePoint:i,transfer:ei,toXYZ:dN,fromXYZ:pN,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:ni}}}),n}const cn=zW();function Xu(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function fg(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let mm;class Z5{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{mm===void 0&&(mm=m0("canvas")),mm.width=e.width,mm.height=e.height;const i=mm.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=mm}return t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=m0("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),a=r.data;for(let s=0;s<a.length;s++)a[s]=Xu(a[s]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Xu(t[i]/255)*255):t[i]=Xu(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let kW=0;class fh{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:kW++}),this.uuid=po(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let a;if(Array.isArray(r)){a=[];for(let s=0,o=r.length;s<o;s++)r[s].isDataTexture?a.push(nT(r[s].image)):a.push(nT(r[s]))}else a=nT(r);i.url=a}return t||(e.images[this.uuid]=i),i}}function nT(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Z5.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let FW=0;class Pi extends Zc{constructor(e=Pi.DEFAULT_IMAGE,t=Pi.DEFAULT_MAPPING,i=ks,r=ks,a=Sr,s=Fc,o=za,l=Gl,u=Pi.DEFAULT_ANISOTROPY,h=ju){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:FW++}),this.uuid=po(),this.name="",this.source=new fh(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=a,this.minFilter=s,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=l,this.offset=new st(0,0),this.repeat=new st(1,1),this.center=new st(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new rn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Z1)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case tp:e.x=e.x-Math.floor(e.x);break;case ks:e.x=e.x<0?0:1;break;case c0:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case tp:e.y=e.y-Math.floor(e.y);break;case ks:e.y=e.y<0?0:1;break;case c0:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Pi.DEFAULT_IMAGE=null;Pi.DEFAULT_MAPPING=Z1;Pi.DEFAULT_ANISOTROPY=1;class yn{constructor(e=0,t=0,i=0,r=1){yn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,a=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12]*a,this.y=s[1]*t+s[5]*i+s[9]*r+s[13]*a,this.z=s[2]*t+s[6]*i+s[10]*r+s[14]*a,this.w=s[3]*t+s[7]*i+s[11]*r+s[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,a;const l=e.elements,u=l[0],h=l[4],p=l[8],g=l[1],y=l[5],_=l[9],S=l[2],x=l[6],w=l[10];if(Math.abs(h-g)<.01&&Math.abs(p-S)<.01&&Math.abs(_-x)<.01){if(Math.abs(h+g)<.1&&Math.abs(p+S)<.1&&Math.abs(_+x)<.1&&Math.abs(u+y+w-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const M=(u+1)/2,C=(y+1)/2,N=(w+1)/2,D=(h+g)/4,P=(p+S)/4,z=(_+x)/4;return M>C&&M>N?M<.01?(i=0,r=.707106781,a=.707106781):(i=Math.sqrt(M),r=D/i,a=P/i):C>N?C<.01?(i=.707106781,r=0,a=.707106781):(r=Math.sqrt(C),i=D/r,a=z/r):N<.01?(i=.707106781,r=.707106781,a=0):(a=Math.sqrt(N),i=P/a,r=z/a),this.set(i,r,a,t),this}let T=Math.sqrt((x-_)*(x-_)+(p-S)*(p-S)+(g-h)*(g-h));return Math.abs(T)<.001&&(T=1),this.x=(x-_)/T,this.y=(p-S)/T,this.z=(g-h)/T,this.w=Math.acos((u+y+w-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=sn(this.x,e.x,t.x),this.y=sn(this.y,e.y,t.y),this.z=sn(this.z,e.z,t.z),this.w=sn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=sn(this.x,e,t),this.y=sn(this.y,e,t),this.z=sn(this.z,e,t),this.w=sn(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(sn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class aE extends Zc{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new yn(0,0,e,t),this.scissorTest=!1,this.viewport=new yn(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Sr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const a=new Pi(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);a.flipY=!1,a.generateMipmaps=i.generateMipmaps,a.internalFormat=i.internalFormat,this.textures=[];const s=i.count;for(let o=0;o<s;o++)this.textures[o]=a.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,a=this.textures.length;r<a;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new fh(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Yc extends aE{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Z0 extends Pi{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=va,this.minFilter=va,this.wrapR=ks,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class HW extends Yc{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Z0(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class sE extends Pi{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=va,this.minFilter=va,this.wrapR=ks,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class VW extends Yc{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new sE(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Ki{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,a,s,o){let l=i[r+0],u=i[r+1],h=i[r+2],p=i[r+3];const g=a[s+0],y=a[s+1],_=a[s+2],S=a[s+3];if(o===0){e[t+0]=l,e[t+1]=u,e[t+2]=h,e[t+3]=p;return}if(o===1){e[t+0]=g,e[t+1]=y,e[t+2]=_,e[t+3]=S;return}if(p!==S||l!==g||u!==y||h!==_){let x=1-o;const w=l*g+u*y+h*_+p*S,T=w>=0?1:-1,M=1-w*w;if(M>Number.EPSILON){const N=Math.sqrt(M),D=Math.atan2(N,w*T);x=Math.sin(x*D)/N,o=Math.sin(o*D)/N}const C=o*T;if(l=l*x+g*C,u=u*x+y*C,h=h*x+_*C,p=p*x+S*C,x===1-o){const N=1/Math.sqrt(l*l+u*u+h*h+p*p);l*=N,u*=N,h*=N,p*=N}}e[t]=l,e[t+1]=u,e[t+2]=h,e[t+3]=p}static multiplyQuaternionsFlat(e,t,i,r,a,s){const o=i[r],l=i[r+1],u=i[r+2],h=i[r+3],p=a[s],g=a[s+1],y=a[s+2],_=a[s+3];return e[t]=o*_+h*p+l*y-u*g,e[t+1]=l*_+h*g+u*p-o*y,e[t+2]=u*_+h*y+o*g-l*p,e[t+3]=h*_-o*p-l*g-u*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,a=e._z,s=e._order,o=Math.cos,l=Math.sin,u=o(i/2),h=o(r/2),p=o(a/2),g=l(i/2),y=l(r/2),_=l(a/2);switch(s){case"XYZ":this._x=g*h*p+u*y*_,this._y=u*y*p-g*h*_,this._z=u*h*_+g*y*p,this._w=u*h*p-g*y*_;break;case"YXZ":this._x=g*h*p+u*y*_,this._y=u*y*p-g*h*_,this._z=u*h*_-g*y*p,this._w=u*h*p+g*y*_;break;case"ZXY":this._x=g*h*p-u*y*_,this._y=u*y*p+g*h*_,this._z=u*h*_+g*y*p,this._w=u*h*p-g*y*_;break;case"ZYX":this._x=g*h*p-u*y*_,this._y=u*y*p+g*h*_,this._z=u*h*_-g*y*p,this._w=u*h*p+g*y*_;break;case"YZX":this._x=g*h*p+u*y*_,this._y=u*y*p+g*h*_,this._z=u*h*_-g*y*p,this._w=u*h*p-g*y*_;break;case"XZY":this._x=g*h*p-u*y*_,this._y=u*y*p-g*h*_,this._z=u*h*_+g*y*p,this._w=u*h*p+g*y*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],a=t[8],s=t[1],o=t[5],l=t[9],u=t[2],h=t[6],p=t[10],g=i+o+p;if(g>0){const y=.5/Math.sqrt(g+1);this._w=.25/y,this._x=(h-l)*y,this._y=(a-u)*y,this._z=(s-r)*y}else if(i>o&&i>p){const y=2*Math.sqrt(1+i-o-p);this._w=(h-l)/y,this._x=.25*y,this._y=(r+s)/y,this._z=(a+u)/y}else if(o>p){const y=2*Math.sqrt(1+o-i-p);this._w=(a-u)/y,this._x=(r+s)/y,this._y=.25*y,this._z=(l+h)/y}else{const y=2*Math.sqrt(1+p-i-o);this._w=(s-r)/y,this._x=(a+u)/y,this._y=(l+h)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(sn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,a=e._z,s=e._w,o=t._x,l=t._y,u=t._z,h=t._w;return this._x=i*h+s*o+r*u-a*l,this._y=r*h+s*l+a*o-i*u,this._z=a*h+s*u+i*l-r*o,this._w=s*h-i*o-r*l-a*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,a=this._z,s=this._w;let o=s*e._w+i*e._x+r*e._y+a*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=i,this._y=r,this._z=a,this;const l=1-o*o;if(l<=Number.EPSILON){const y=1-t;return this._w=y*s+t*this._w,this._x=y*i+t*this._x,this._y=y*r+t*this._y,this._z=y*a+t*this._z,this.normalize(),this}const u=Math.sqrt(l),h=Math.atan2(u,o),p=Math.sin((1-t)*h)/u,g=Math.sin(t*h)/u;return this._w=s*p+this._w*g,this._x=i*p+this._x*g,this._y=r*p+this._y*g,this._z=a*p+this._z*g,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),a=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),a*Math.sin(t),a*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class le{constructor(e=0,t=0,i=0){le.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(mN.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(mN.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[3]*i+a[6]*r,this.y=a[1]*t+a[4]*i+a[7]*r,this.z=a[2]*t+a[5]*i+a[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,a=e.elements,s=1/(a[3]*t+a[7]*i+a[11]*r+a[15]);return this.x=(a[0]*t+a[4]*i+a[8]*r+a[12])*s,this.y=(a[1]*t+a[5]*i+a[9]*r+a[13])*s,this.z=(a[2]*t+a[6]*i+a[10]*r+a[14])*s,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,a=e.x,s=e.y,o=e.z,l=e.w,u=2*(s*r-o*i),h=2*(o*t-a*r),p=2*(a*i-s*t);return this.x=t+l*u+s*p-o*h,this.y=i+l*h+o*u-a*p,this.z=r+l*p+a*h-s*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r,this.y=a[1]*t+a[5]*i+a[9]*r,this.z=a[2]*t+a[6]*i+a[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=sn(this.x,e.x,t.x),this.y=sn(this.y,e.y,t.y),this.z=sn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=sn(this.x,e,t),this.y=sn(this.y,e,t),this.z=sn(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(sn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,a=e.z,s=t.x,o=t.y,l=t.z;return this.x=r*l-a*o,this.y=a*s-i*l,this.z=i*o-r*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return iT.copy(this).projectOnVector(e),this.sub(iT)}reflect(e){return this.sub(iT.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(sn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const iT=new le,mN=new Ki;class ta{constructor(e=new le(1/0,1/0,1/0),t=new le(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Rl.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Rl.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Rl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const a=i.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let s=0,o=a.count;s<o;s++)e.isMesh===!0?e.getVertexPosition(s,Rl):Rl.fromBufferAttribute(a,s),Rl.applyMatrix4(e.matrixWorld),this.expandByPoint(Rl);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Kb.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Kb.copy(i.boundingBox)),Kb.applyMatrix4(e.matrixWorld),this.union(Kb)}const r=e.children;for(let a=0,s=r.length;a<s;a++)this.expandByObject(r[a],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Rl),Rl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(oy),Zb.subVectors(this.max,oy),gm.subVectors(e.a,oy),vm.subVectors(e.b,oy),ym.subVectors(e.c,oy),Xf.subVectors(vm,gm),Kf.subVectors(ym,vm),dd.subVectors(gm,ym);let t=[0,-Xf.z,Xf.y,0,-Kf.z,Kf.y,0,-dd.z,dd.y,Xf.z,0,-Xf.x,Kf.z,0,-Kf.x,dd.z,0,-dd.x,-Xf.y,Xf.x,0,-Kf.y,Kf.x,0,-dd.y,dd.x,0];return!rT(t,gm,vm,ym,Zb)||(t=[1,0,0,0,1,0,0,0,1],!rT(t,gm,vm,ym,Zb))?!1:(Qb.crossVectors(Xf,Kf),t=[Qb.x,Qb.y,Qb.z],rT(t,gm,vm,ym,Zb))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Rl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Rl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Pu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Pu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Pu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Pu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Pu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Pu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Pu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Pu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Pu),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Pu=[new le,new le,new le,new le,new le,new le,new le,new le],Rl=new le,Kb=new ta,gm=new le,vm=new le,ym=new le,Xf=new le,Kf=new le,dd=new le,oy=new le,Zb=new le,Qb=new le,pd=new le;function rT(n,e,t,i,r){for(let a=0,s=n.length-3;a<=s;a+=3){pd.fromArray(n,a);const o=r.x*Math.abs(pd.x)+r.y*Math.abs(pd.y)+r.z*Math.abs(pd.z),l=e.dot(pd),u=t.dot(pd),h=i.dot(pd);if(Math.max(-Math.max(l,u,h),Math.min(l,u,h))>o)return!1}return!0}const GW=new ta,ly=new le,aT=new le;class na{constructor(e=new le,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):GW.setFromPoints(e).getCenter(i);let r=0;for(let a=0,s=e.length;a<s;a++)r=Math.max(r,i.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ly.subVectors(e,this.center);const t=ly.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(ly,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(aT.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ly.copy(e.center).add(aT)),this.expandByPoint(ly.copy(e.center).sub(aT))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Lu=new le,sT=new le,Jb=new le,Zf=new le,oT=new le,eS=new le,lT=new le;class Bg{constructor(e=new le,t=new le(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Lu)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Lu.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Lu.copy(this.origin).addScaledVector(this.direction,t),Lu.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){sT.copy(e).add(t).multiplyScalar(.5),Jb.copy(t).sub(e).normalize(),Zf.copy(this.origin).sub(sT);const a=e.distanceTo(t)*.5,s=-this.direction.dot(Jb),o=Zf.dot(this.direction),l=-Zf.dot(Jb),u=Zf.lengthSq(),h=Math.abs(1-s*s);let p,g,y,_;if(h>0)if(p=s*l-o,g=s*o-l,_=a*h,p>=0)if(g>=-_)if(g<=_){const S=1/h;p*=S,g*=S,y=p*(p+s*g+2*o)+g*(s*p+g+2*l)+u}else g=a,p=Math.max(0,-(s*g+o)),y=-p*p+g*(g+2*l)+u;else g=-a,p=Math.max(0,-(s*g+o)),y=-p*p+g*(g+2*l)+u;else g<=-_?(p=Math.max(0,-(-s*a+o)),g=p>0?-a:Math.min(Math.max(-a,-l),a),y=-p*p+g*(g+2*l)+u):g<=_?(p=0,g=Math.min(Math.max(-a,-l),a),y=g*(g+2*l)+u):(p=Math.max(0,-(s*a+o)),g=p>0?a:Math.min(Math.max(-a,-l),a),y=-p*p+g*(g+2*l)+u);else g=s>0?-a:a,p=Math.max(0,-(s*g+o)),y=-p*p+g*(g+2*l)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,p),r&&r.copy(sT).addScaledVector(Jb,g),y}intersectSphere(e,t){Lu.subVectors(e.center,this.origin);const i=Lu.dot(this.direction),r=Lu.dot(Lu)-i*i,a=e.radius*e.radius;if(r>a)return null;const s=Math.sqrt(a-r),o=i-s,l=i+s;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,a,s,o,l;const u=1/this.direction.x,h=1/this.direction.y,p=1/this.direction.z,g=this.origin;return u>=0?(i=(e.min.x-g.x)*u,r=(e.max.x-g.x)*u):(i=(e.max.x-g.x)*u,r=(e.min.x-g.x)*u),h>=0?(a=(e.min.y-g.y)*h,s=(e.max.y-g.y)*h):(a=(e.max.y-g.y)*h,s=(e.min.y-g.y)*h),i>s||a>r||((a>i||isNaN(i))&&(i=a),(s<r||isNaN(r))&&(r=s),p>=0?(o=(e.min.z-g.z)*p,l=(e.max.z-g.z)*p):(o=(e.max.z-g.z)*p,l=(e.min.z-g.z)*p),i>l||o>r)||((o>i||i!==i)&&(i=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Lu)!==null}intersectTriangle(e,t,i,r,a){oT.subVectors(t,e),eS.subVectors(i,e),lT.crossVectors(oT,eS);let s=this.direction.dot(lT),o;if(s>0){if(r)return null;o=1}else if(s<0)o=-1,s=-s;else return null;Zf.subVectors(this.origin,e);const l=o*this.direction.dot(eS.crossVectors(Zf,eS));if(l<0)return null;const u=o*this.direction.dot(oT.cross(Zf));if(u<0||l+u>s)return null;const h=-o*Zf.dot(lT);return h<0?null:this.at(h/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Mt{constructor(e,t,i,r,a,s,o,l,u,h,p,g,y,_,S,x){Mt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,a,s,o,l,u,h,p,g,y,_,S,x)}set(e,t,i,r,a,s,o,l,u,h,p,g,y,_,S,x){const w=this.elements;return w[0]=e,w[4]=t,w[8]=i,w[12]=r,w[1]=a,w[5]=s,w[9]=o,w[13]=l,w[2]=u,w[6]=h,w[10]=p,w[14]=g,w[3]=y,w[7]=_,w[11]=S,w[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Mt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/_m.setFromMatrixColumn(e,0).length(),a=1/_m.setFromMatrixColumn(e,1).length(),s=1/_m.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*a,t[5]=i[5]*a,t[6]=i[6]*a,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,a=e.z,s=Math.cos(i),o=Math.sin(i),l=Math.cos(r),u=Math.sin(r),h=Math.cos(a),p=Math.sin(a);if(e.order==="XYZ"){const g=s*h,y=s*p,_=o*h,S=o*p;t[0]=l*h,t[4]=-l*p,t[8]=u,t[1]=y+_*u,t[5]=g-S*u,t[9]=-o*l,t[2]=S-g*u,t[6]=_+y*u,t[10]=s*l}else if(e.order==="YXZ"){const g=l*h,y=l*p,_=u*h,S=u*p;t[0]=g+S*o,t[4]=_*o-y,t[8]=s*u,t[1]=s*p,t[5]=s*h,t[9]=-o,t[2]=y*o-_,t[6]=S+g*o,t[10]=s*l}else if(e.order==="ZXY"){const g=l*h,y=l*p,_=u*h,S=u*p;t[0]=g-S*o,t[4]=-s*p,t[8]=_+y*o,t[1]=y+_*o,t[5]=s*h,t[9]=S-g*o,t[2]=-s*u,t[6]=o,t[10]=s*l}else if(e.order==="ZYX"){const g=s*h,y=s*p,_=o*h,S=o*p;t[0]=l*h,t[4]=_*u-y,t[8]=g*u+S,t[1]=l*p,t[5]=S*u+g,t[9]=y*u-_,t[2]=-u,t[6]=o*l,t[10]=s*l}else if(e.order==="YZX"){const g=s*l,y=s*u,_=o*l,S=o*u;t[0]=l*h,t[4]=S-g*p,t[8]=_*p+y,t[1]=p,t[5]=s*h,t[9]=-o*h,t[2]=-u*h,t[6]=y*p+_,t[10]=g-S*p}else if(e.order==="XZY"){const g=s*l,y=s*u,_=o*l,S=o*u;t[0]=l*h,t[4]=-p,t[8]=u*h,t[1]=g*p+S,t[5]=s*h,t[9]=y*p-_,t[2]=_*p-y,t[6]=o*h,t[10]=S*p+g}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(jW,e,qW)}lookAt(e,t,i){const r=this.elements;return so.subVectors(e,t),so.lengthSq()===0&&(so.z=1),so.normalize(),Qf.crossVectors(i,so),Qf.lengthSq()===0&&(Math.abs(i.z)===1?so.x+=1e-4:so.z+=1e-4,so.normalize(),Qf.crossVectors(i,so)),Qf.normalize(),tS.crossVectors(so,Qf),r[0]=Qf.x,r[4]=tS.x,r[8]=so.x,r[1]=Qf.y,r[5]=tS.y,r[9]=so.y,r[2]=Qf.z,r[6]=tS.z,r[10]=so.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,a=this.elements,s=i[0],o=i[4],l=i[8],u=i[12],h=i[1],p=i[5],g=i[9],y=i[13],_=i[2],S=i[6],x=i[10],w=i[14],T=i[3],M=i[7],C=i[11],N=i[15],D=r[0],P=r[4],z=r[8],I=r[12],L=r[1],H=r[5],j=r[9],G=r[13],K=r[2],ee=r[6],Y=r[10],re=r[14],J=r[3],se=r[7],q=r[11],X=r[15];return a[0]=s*D+o*L+l*K+u*J,a[4]=s*P+o*H+l*ee+u*se,a[8]=s*z+o*j+l*Y+u*q,a[12]=s*I+o*G+l*re+u*X,a[1]=h*D+p*L+g*K+y*J,a[5]=h*P+p*H+g*ee+y*se,a[9]=h*z+p*j+g*Y+y*q,a[13]=h*I+p*G+g*re+y*X,a[2]=_*D+S*L+x*K+w*J,a[6]=_*P+S*H+x*ee+w*se,a[10]=_*z+S*j+x*Y+w*q,a[14]=_*I+S*G+x*re+w*X,a[3]=T*D+M*L+C*K+N*J,a[7]=T*P+M*H+C*ee+N*se,a[11]=T*z+M*j+C*Y+N*q,a[15]=T*I+M*G+C*re+N*X,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],a=e[12],s=e[1],o=e[5],l=e[9],u=e[13],h=e[2],p=e[6],g=e[10],y=e[14],_=e[3],S=e[7],x=e[11],w=e[15];return _*(+a*l*p-r*u*p-a*o*g+i*u*g+r*o*y-i*l*y)+S*(+t*l*y-t*u*g+a*s*g-r*s*y+r*u*h-a*l*h)+x*(+t*u*p-t*o*y-a*s*p+i*s*y+a*o*h-i*u*h)+w*(-r*o*h-t*l*p+t*o*g+r*s*p-i*s*g+i*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],h=e[8],p=e[9],g=e[10],y=e[11],_=e[12],S=e[13],x=e[14],w=e[15],T=p*x*u-S*g*u+S*l*y-o*x*y-p*l*w+o*g*w,M=_*g*u-h*x*u-_*l*y+s*x*y+h*l*w-s*g*w,C=h*S*u-_*p*u+_*o*y-s*S*y-h*o*w+s*p*w,N=_*p*l-h*S*l-_*o*g+s*S*g+h*o*x-s*p*x,D=t*T+i*M+r*C+a*N;if(D===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/D;return e[0]=T*P,e[1]=(S*g*a-p*x*a-S*r*y+i*x*y+p*r*w-i*g*w)*P,e[2]=(o*x*a-S*l*a+S*r*u-i*x*u-o*r*w+i*l*w)*P,e[3]=(p*l*a-o*g*a-p*r*u+i*g*u+o*r*y-i*l*y)*P,e[4]=M*P,e[5]=(h*x*a-_*g*a+_*r*y-t*x*y-h*r*w+t*g*w)*P,e[6]=(_*l*a-s*x*a-_*r*u+t*x*u+s*r*w-t*l*w)*P,e[7]=(s*g*a-h*l*a+h*r*u-t*g*u-s*r*y+t*l*y)*P,e[8]=C*P,e[9]=(_*p*a-h*S*a-_*i*y+t*S*y+h*i*w-t*p*w)*P,e[10]=(s*S*a-_*o*a+_*i*u-t*S*u-s*i*w+t*o*w)*P,e[11]=(h*o*a-s*p*a-h*i*u+t*p*u+s*i*y-t*o*y)*P,e[12]=N*P,e[13]=(h*S*r-_*p*r+_*i*g-t*S*g-h*i*x+t*p*x)*P,e[14]=(_*o*r-s*S*r-_*i*l+t*S*l+s*i*x-t*o*x)*P,e[15]=(s*p*r-h*o*r+h*i*l-t*p*l-s*i*g+t*o*g)*P,this}scale(e){const t=this.elements,i=e.x,r=e.y,a=e.z;return t[0]*=i,t[4]*=r,t[8]*=a,t[1]*=i,t[5]*=r,t[9]*=a,t[2]*=i,t[6]*=r,t[10]*=a,t[3]*=i,t[7]*=r,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),a=1-i,s=e.x,o=e.y,l=e.z,u=a*s,h=a*o;return this.set(u*s+i,u*o-r*l,u*l+r*o,0,u*o+r*l,h*o+i,h*l-r*s,0,u*l-r*o,h*l+r*s,a*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,a,s){return this.set(1,i,a,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,a=t._x,s=t._y,o=t._z,l=t._w,u=a+a,h=s+s,p=o+o,g=a*u,y=a*h,_=a*p,S=s*h,x=s*p,w=o*p,T=l*u,M=l*h,C=l*p,N=i.x,D=i.y,P=i.z;return r[0]=(1-(S+w))*N,r[1]=(y+C)*N,r[2]=(_-M)*N,r[3]=0,r[4]=(y-C)*D,r[5]=(1-(g+w))*D,r[6]=(x+T)*D,r[7]=0,r[8]=(_+M)*P,r[9]=(x-T)*P,r[10]=(1-(g+S))*P,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let a=_m.set(r[0],r[1],r[2]).length();const s=_m.set(r[4],r[5],r[6]).length(),o=_m.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),e.x=r[12],e.y=r[13],e.z=r[14],Ol.copy(this);const u=1/a,h=1/s,p=1/o;return Ol.elements[0]*=u,Ol.elements[1]*=u,Ol.elements[2]*=u,Ol.elements[4]*=h,Ol.elements[5]*=h,Ol.elements[6]*=h,Ol.elements[8]*=p,Ol.elements[9]*=p,Ol.elements[10]*=p,t.setFromRotationMatrix(Ol),i.x=a,i.y=s,i.z=o,this}makePerspective(e,t,i,r,a,s,o=Hl){const l=this.elements,u=2*a/(t-e),h=2*a/(i-r),p=(t+e)/(t-e),g=(i+r)/(i-r);let y,_;if(o===Hl)y=-(s+a)/(s-a),_=-2*s*a/(s-a);else if(o===p0)y=-s/(s-a),_=-s*a/(s-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=u,l[4]=0,l[8]=p,l[12]=0,l[1]=0,l[5]=h,l[9]=g,l[13]=0,l[2]=0,l[6]=0,l[10]=y,l[14]=_,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,a,s,o=Hl){const l=this.elements,u=1/(t-e),h=1/(i-r),p=1/(s-a),g=(t+e)*u,y=(i+r)*h;let _,S;if(o===Hl)_=(s+a)*p,S=-2*p;else if(o===p0)_=a*p,S=-1*p;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-g,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-y,l[2]=0,l[6]=0,l[10]=S,l[14]=-_,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const _m=new le,Ol=new Mt,jW=new le(0,0,0),qW=new le(1,1,1),Qf=new le,tS=new le,so=new le,gN=new Mt,vN=new Ki;class Cr{constructor(e=0,t=0,i=0,r=Cr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,a=r[0],s=r[4],o=r[8],l=r[1],u=r[5],h=r[9],p=r[2],g=r[6],y=r[10];switch(t){case"XYZ":this._y=Math.asin(sn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,y),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(g,u),this._z=0);break;case"YXZ":this._x=Math.asin(-sn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(o,y),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-p,a),this._z=0);break;case"ZXY":this._x=Math.asin(sn(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-p,y),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-sn(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(g,y),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-s,u));break;case"YZX":this._z=Math.asin(sn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-p,a)):(this._x=0,this._y=Math.atan2(o,y));break;case"XZY":this._z=Math.asin(-sn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(g,u),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-h,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return gN.makeRotationFromQuaternion(e),this.setFromRotationMatrix(gN,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return vN.setFromEuler(this),this.setFromQuaternion(vN,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Cr.DEFAULT_ORDER="XYZ";class yg{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let WW=0;const yN=new le,bm=new Ki,Iu=new Mt,nS=new le,cy=new le,YW=new le,$W=new Ki,_N=new le(1,0,0),bN=new le(0,1,0),SN=new le(0,0,1),xN={type:"added"},XW={type:"removed"},Sm={type:"childadded",child:null},cT={type:"childremoved",child:null};class On extends Zc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:WW++}),this.uuid=po(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=On.DEFAULT_UP.clone();const e=new le,t=new Cr,i=new Ki,r=new le(1,1,1);function a(){i.setFromEuler(t,!1)}function s(){t.setFromQuaternion(i,void 0,!1)}t._onChange(a),i._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Mt},normalMatrix:{value:new rn}}),this.matrix=new Mt,this.matrixWorld=new Mt,this.matrixAutoUpdate=On.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=On.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new yg,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return bm.setFromAxisAngle(e,t),this.quaternion.multiply(bm),this}rotateOnWorldAxis(e,t){return bm.setFromAxisAngle(e,t),this.quaternion.premultiply(bm),this}rotateX(e){return this.rotateOnAxis(_N,e)}rotateY(e){return this.rotateOnAxis(bN,e)}rotateZ(e){return this.rotateOnAxis(SN,e)}translateOnAxis(e,t){return yN.copy(e).applyQuaternion(this.quaternion),this.position.add(yN.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(_N,e)}translateY(e){return this.translateOnAxis(bN,e)}translateZ(e){return this.translateOnAxis(SN,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Iu.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?nS.copy(e):nS.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),cy.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Iu.lookAt(cy,nS,this.up):Iu.lookAt(nS,cy,this.up),this.quaternion.setFromRotationMatrix(Iu),r&&(Iu.extractRotation(r.matrixWorld),bm.setFromRotationMatrix(Iu),this.quaternion.premultiply(bm.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(xN),Sm.child=e,this.dispatchEvent(Sm),Sm.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(XW),cT.child=e,this.dispatchEvent(cT),cT.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Iu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Iu.multiply(e.parent.matrixWorld)),e.applyMatrix4(Iu),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(xN),Sm.child=e,this.dispatchEvent(Sm),Sm.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const s=this.children[i].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let a=0,s=r.length;a<s;a++)r[a].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(cy,e,YW),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(cy,$W,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let a=0,s=r.length;a<s;a++)r[a].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function a(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=a(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let u=0,h=l.length;u<h;u++){const p=l[u];a(e.shapes,p)}else a(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,u=this.material.length;l<u;l++)o.push(a(e.materials,this.material[l]));r.material=o}else r.material=a(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];r.animations.push(a(e.animations,l))}}if(t){const o=s(e.geometries),l=s(e.materials),u=s(e.textures),h=s(e.images),p=s(e.shapes),g=s(e.skeletons),y=s(e.animations),_=s(e.nodes);o.length>0&&(i.geometries=o),l.length>0&&(i.materials=l),u.length>0&&(i.textures=u),h.length>0&&(i.images=h),p.length>0&&(i.shapes=p),g.length>0&&(i.skeletons=g),y.length>0&&(i.animations=y),_.length>0&&(i.nodes=_)}return i.object=r,i;function s(o){const l=[];for(const u in o){const h=o[u];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}On.DEFAULT_UP=new le(0,1,0);On.DEFAULT_MATRIX_AUTO_UPDATE=!0;On.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Dl=new le,Bu=new le,uT=new le,zu=new le,xm=new le,Em=new le,EN=new le,fT=new le,hT=new le,dT=new le,pT=new yn,mT=new yn,gT=new yn;class zs{constructor(e=new le,t=new le,i=new le){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Dl.subVectors(e,t),r.cross(Dl);const a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}static getBarycoord(e,t,i,r,a){Dl.subVectors(r,t),Bu.subVectors(i,t),uT.subVectors(e,t);const s=Dl.dot(Dl),o=Dl.dot(Bu),l=Dl.dot(uT),u=Bu.dot(Bu),h=Bu.dot(uT),p=s*u-o*o;if(p===0)return a.set(0,0,0),null;const g=1/p,y=(u*l-o*h)*g,_=(s*h-o*l)*g;return a.set(1-y-_,_,y)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,zu)===null?!1:zu.x>=0&&zu.y>=0&&zu.x+zu.y<=1}static getInterpolation(e,t,i,r,a,s,o,l){return this.getBarycoord(e,t,i,r,zu)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(a,zu.x),l.addScaledVector(s,zu.y),l.addScaledVector(o,zu.z),l)}static getInterpolatedAttribute(e,t,i,r,a,s){return pT.setScalar(0),mT.setScalar(0),gT.setScalar(0),pT.fromBufferAttribute(e,t),mT.fromBufferAttribute(e,i),gT.fromBufferAttribute(e,r),s.setScalar(0),s.addScaledVector(pT,a.x),s.addScaledVector(mT,a.y),s.addScaledVector(gT,a.z),s}static isFrontFacing(e,t,i,r){return Dl.subVectors(i,t),Bu.subVectors(e,t),Dl.cross(Bu).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Dl.subVectors(this.c,this.b),Bu.subVectors(this.a,this.b),Dl.cross(Bu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return zs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return zs.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,a){return zs.getInterpolation(e,this.a,this.b,this.c,t,i,r,a)}containsPoint(e){return zs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return zs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,a=this.c;let s,o;xm.subVectors(r,i),Em.subVectors(a,i),fT.subVectors(e,i);const l=xm.dot(fT),u=Em.dot(fT);if(l<=0&&u<=0)return t.copy(i);hT.subVectors(e,r);const h=xm.dot(hT),p=Em.dot(hT);if(h>=0&&p<=h)return t.copy(r);const g=l*p-h*u;if(g<=0&&l>=0&&h<=0)return s=l/(l-h),t.copy(i).addScaledVector(xm,s);dT.subVectors(e,a);const y=xm.dot(dT),_=Em.dot(dT);if(_>=0&&y<=_)return t.copy(a);const S=y*u-l*_;if(S<=0&&u>=0&&_<=0)return o=u/(u-_),t.copy(i).addScaledVector(Em,o);const x=h*_-y*p;if(x<=0&&p-h>=0&&y-_>=0)return EN.subVectors(a,r),o=(p-h)/(p-h+(y-_)),t.copy(r).addScaledVector(EN,o);const w=1/(x+S+g);return s=S*w,o=g*w,t.copy(i).addScaledVector(xm,s).addScaledVector(Em,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Q5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Jf={h:0,s:0,l:0},iS={h:0,s:0,l:0};function vT(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let yt=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ni){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,cn.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=cn.workingColorSpace){return this.r=e,this.g=t,this.b=i,cn.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=cn.workingColorSpace){if(e=vD(e,1),t=sn(t,0,1),i=sn(i,0,1),t===0)this.r=this.g=this.b=i;else{const a=i<=.5?i*(1+t):i+t-i*t,s=2*i-a;this.r=vT(s,a,e+1/3),this.g=vT(s,a,e),this.b=vT(s,a,e-1/3)}return cn.toWorkingColorSpace(this,r),this}setStyle(e,t=ni){function i(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const s=r[1],o=r[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=r[1],s=a.length;if(s===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(a,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ni){const i=Q5[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Xu(e.r),this.g=Xu(e.g),this.b=Xu(e.b),this}copyLinearToSRGB(e){return this.r=fg(e.r),this.g=fg(e.g),this.b=fg(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ni){return cn.fromWorkingColorSpace(La.copy(this),e),Math.round(sn(La.r*255,0,255))*65536+Math.round(sn(La.g*255,0,255))*256+Math.round(sn(La.b*255,0,255))}getHexString(e=ni){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=cn.workingColorSpace){cn.fromWorkingColorSpace(La.copy(this),t);const i=La.r,r=La.g,a=La.b,s=Math.max(i,r,a),o=Math.min(i,r,a);let l,u;const h=(o+s)/2;if(o===s)l=0,u=0;else{const p=s-o;switch(u=h<=.5?p/(s+o):p/(2-s-o),s){case i:l=(r-a)/p+(r<a?6:0);break;case r:l=(a-i)/p+2;break;case a:l=(i-r)/p+4;break}l/=6}return e.h=l,e.s=u,e.l=h,e}getRGB(e,t=cn.workingColorSpace){return cn.fromWorkingColorSpace(La.copy(this),t),e.r=La.r,e.g=La.g,e.b=La.b,e}getStyle(e=ni){cn.fromWorkingColorSpace(La.copy(this),e);const t=La.r,i=La.g,r=La.b;return e!==ni?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Jf),this.setHSL(Jf.h+e,Jf.s+t,Jf.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Jf),e.getHSL(iS);const i=$y(Jf.h,iS.h,t),r=$y(Jf.s,iS.s,t),a=$y(Jf.l,iS.l,t);return this.setHSL(i,r,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,a=e.elements;return this.r=a[0]*t+a[3]*i+a[6]*r,this.g=a[1]*t+a[4]*i+a[7]*r,this.b=a[2]*t+a[5]*i+a[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const La=new yt;yt.NAMES=Q5;let KW=0;class Fa extends Zc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:KW++}),this.uuid=po(),this.name="",this.type="Material",this.blending=qd,this.side=Zu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Ux,this.blendDst=Nx,this.blendEquation=lh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new yt(0,0,0),this.blendAlpha=0,this.depthFunc=ep,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=FR,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Dd,this.stencilZFail=Dd,this.stencilZPass=Dd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==qd&&(i.blending=this.blending),this.side!==Zu&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Ux&&(i.blendSrc=this.blendSrc),this.blendDst!==Nx&&(i.blendDst=this.blendDst),this.blendEquation!==lh&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==ep&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==FR&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Dd&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Dd&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Dd&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(a){const s=[];for(const o in a){const l=a[o];delete l.metadata,s.push(l)}return s}if(t){const a=r(e.textures),s=r(e.images);a.length>0&&(i.textures=a),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let a=0;a!==r;++a)i[a]=t[a].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class of extends Fa{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new yt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Cr,this.combine=X0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const qu=ZW();function ZW(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):u<-14?(i[l]=1024>>-u-14,i[l|256]=1024>>-u-14|32768,r[l]=-u-1,r[l|256]=-u-1):u<=15?(i[l]=u+15<<10,i[l|256]=u+15<<10|32768,r[l]=13,r[l|256]=13):u<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,h=0;for(;(u&8388608)===0;)u<<=1,h-=8388608;u&=-8388609,h+=947912704,a[l]=u|h}for(let l=1024;l<2048;++l)a[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:a,exponentTable:s,offsetTable:o}}function Ls(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=sn(n,-65504,65504),qu.floatView[0]=n;const e=qu.uint32View[0],t=e>>23&511;return qu.baseTable[t]+((e&8388607)>>qu.shiftTable[t])}function Uy(n){const e=n>>10;return qu.uint32View[0]=qu.mantissaTable[qu.offsetTable[e]+(n&1023)]+qu.exponentTable[e],qu.floatView[0]}class QW{static toHalfFloat(e){return Ls(e)}static fromHalfFloat(e){return Uy(e)}}const Tr=new le,rS=new st;let JW=0;class oi{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:JW++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=d0,this.updateRanges=[],this.gpuType=Fs,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,a=this.itemSize;r<a;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)rS.fromBufferAttribute(this,t),rS.applyMatrix3(e),this.setXY(t,rS.x,rS.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Tr.fromBufferAttribute(this,t),Tr.applyMatrix3(e),this.setXYZ(t,Tr.x,Tr.y,Tr.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Tr.fromBufferAttribute(this,t),Tr.applyMatrix4(e),this.setXYZ(t,Tr.x,Tr.y,Tr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Tr.fromBufferAttribute(this,t),Tr.applyNormalMatrix(e),this.setXYZ(t,Tr.x,Tr.y,Tr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Tr.fromBufferAttribute(this,t),Tr.transformDirection(e),this.setXYZ(t,Tr.x,Tr.y,Tr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=fs(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=hn(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=fs(t,this.array)),t}setX(e,t){return this.normalized&&(t=hn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=fs(t,this.array)),t}setY(e,t){return this.normalized&&(t=hn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=fs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=hn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=fs(t,this.array)),t}setW(e,t){return this.normalized&&(t=hn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=hn(t,this.array),i=hn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=hn(t,this.array),i=hn(i,this.array),r=hn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,a){return e*=this.itemSize,this.normalized&&(t=hn(t,this.array),i=hn(i,this.array),r=hn(r,this.array),a=hn(a,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==d0&&(e.usage=this.usage),e}}class e7 extends oi{constructor(e,t,i){super(new Int8Array(e),t,i)}}class t7 extends oi{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class n7 extends oi{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class i7 extends oi{constructor(e,t,i){super(new Int16Array(e),t,i)}}class oE extends oi{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class r7 extends oi{constructor(e,t,i){super(new Int32Array(e),t,i)}}class yD extends oi{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class a7 extends oi{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Uy(this.array[e*this.itemSize]);return this.normalized&&(t=fs(t,this.array)),t}setX(e,t){return this.normalized&&(t=hn(t,this.array)),this.array[e*this.itemSize]=Ls(t),this}getY(e){let t=Uy(this.array[e*this.itemSize+1]);return this.normalized&&(t=fs(t,this.array)),t}setY(e,t){return this.normalized&&(t=hn(t,this.array)),this.array[e*this.itemSize+1]=Ls(t),this}getZ(e){let t=Uy(this.array[e*this.itemSize+2]);return this.normalized&&(t=fs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=hn(t,this.array)),this.array[e*this.itemSize+2]=Ls(t),this}getW(e){let t=Uy(this.array[e*this.itemSize+3]);return this.normalized&&(t=fs(t,this.array)),t}setW(e,t){return this.normalized&&(t=hn(t,this.array)),this.array[e*this.itemSize+3]=Ls(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=hn(t,this.array),i=hn(i,this.array)),this.array[e+0]=Ls(t),this.array[e+1]=Ls(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=hn(t,this.array),i=hn(i,this.array),r=hn(r,this.array)),this.array[e+0]=Ls(t),this.array[e+1]=Ls(i),this.array[e+2]=Ls(r),this}setXYZW(e,t,i,r,a){return e*=this.itemSize,this.normalized&&(t=hn(t,this.array),i=hn(i,this.array),r=hn(r,this.array),a=hn(a,this.array)),this.array[e+0]=Ls(t),this.array[e+1]=Ls(i),this.array[e+2]=Ls(r),this.array[e+3]=Ls(a),this}}class Ct extends oi{constructor(e,t,i){super(new Float32Array(e),t,i)}}let s7=0;const Po=new Mt,yT=new On,wm=new le,oo=new ta,uy=new ta,Jr=new le;class on extends Zc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:s7++}),this.uuid=po(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(X5(e)?yD:oE)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const a=new rn().getNormalMatrix(e);i.applyNormalMatrix(a),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Po.makeRotationFromQuaternion(e),this.applyMatrix4(Po),this}rotateX(e){return Po.makeRotationX(e),this.applyMatrix4(Po),this}rotateY(e){return Po.makeRotationY(e),this.applyMatrix4(Po),this}rotateZ(e){return Po.makeRotationZ(e),this.applyMatrix4(Po),this}translate(e,t,i){return Po.makeTranslation(e,t,i),this.applyMatrix4(Po),this}scale(e,t,i){return Po.makeScale(e,t,i),this.applyMatrix4(Po),this}lookAt(e){return yT.lookAt(e),yT.updateMatrix(),this.applyMatrix4(yT.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(wm).negate(),this.translate(wm.x,wm.y,wm.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,a=e.length;r<a;r++){const s=e[r];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new Ct(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const a=e[r];t.setXYZ(r,a.x,a.y,a.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ta);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new le(-1/0,-1/0,-1/0),new le(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const a=t[i];oo.setFromBufferAttribute(a),this.morphTargetsRelative?(Jr.addVectors(this.boundingBox.min,oo.min),this.boundingBox.expandByPoint(Jr),Jr.addVectors(this.boundingBox.max,oo.max),this.boundingBox.expandByPoint(Jr)):(this.boundingBox.expandByPoint(oo.min),this.boundingBox.expandByPoint(oo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new na);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new le,1/0);return}if(e){const i=this.boundingSphere.center;if(oo.setFromBufferAttribute(e),t)for(let a=0,s=t.length;a<s;a++){const o=t[a];uy.setFromBufferAttribute(o),this.morphTargetsRelative?(Jr.addVectors(oo.min,uy.min),oo.expandByPoint(Jr),Jr.addVectors(oo.max,uy.max),oo.expandByPoint(Jr)):(oo.expandByPoint(uy.min),oo.expandByPoint(uy.max))}oo.getCenter(i);let r=0;for(let a=0,s=e.count;a<s;a++)Jr.fromBufferAttribute(e,a),r=Math.max(r,i.distanceToSquared(Jr));if(t)for(let a=0,s=t.length;a<s;a++){const o=t[a],l=this.morphTargetsRelative;for(let u=0,h=o.count;u<h;u++)Jr.fromBufferAttribute(o,u),l&&(wm.fromBufferAttribute(e,u),Jr.add(wm)),r=Math.max(r,i.distanceToSquared(Jr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,a=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new oi(new Float32Array(4*i.count),4));const s=this.getAttribute("tangent"),o=[],l=[];for(let z=0;z<i.count;z++)o[z]=new le,l[z]=new le;const u=new le,h=new le,p=new le,g=new st,y=new st,_=new st,S=new le,x=new le;function w(z,I,L){u.fromBufferAttribute(i,z),h.fromBufferAttribute(i,I),p.fromBufferAttribute(i,L),g.fromBufferAttribute(a,z),y.fromBufferAttribute(a,I),_.fromBufferAttribute(a,L),h.sub(u),p.sub(u),y.sub(g),_.sub(g);const H=1/(y.x*_.y-_.x*y.y);isFinite(H)&&(S.copy(h).multiplyScalar(_.y).addScaledVector(p,-y.y).multiplyScalar(H),x.copy(p).multiplyScalar(y.x).addScaledVector(h,-_.x).multiplyScalar(H),o[z].add(S),o[I].add(S),o[L].add(S),l[z].add(x),l[I].add(x),l[L].add(x))}let T=this.groups;T.length===0&&(T=[{start:0,count:e.count}]);for(let z=0,I=T.length;z<I;++z){const L=T[z],H=L.start,j=L.count;for(let G=H,K=H+j;G<K;G+=3)w(e.getX(G+0),e.getX(G+1),e.getX(G+2))}const M=new le,C=new le,N=new le,D=new le;function P(z){N.fromBufferAttribute(r,z),D.copy(N);const I=o[z];M.copy(I),M.sub(N.multiplyScalar(N.dot(I))).normalize(),C.crossVectors(D,I);const H=C.dot(l[z])<0?-1:1;s.setXYZW(z,M.x,M.y,M.z,H)}for(let z=0,I=T.length;z<I;++z){const L=T[z],H=L.start,j=L.count;for(let G=H,K=H+j;G<K;G+=3)P(e.getX(G+0)),P(e.getX(G+1)),P(e.getX(G+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new oi(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let g=0,y=i.count;g<y;g++)i.setXYZ(g,0,0,0);const r=new le,a=new le,s=new le,o=new le,l=new le,u=new le,h=new le,p=new le;if(e)for(let g=0,y=e.count;g<y;g+=3){const _=e.getX(g+0),S=e.getX(g+1),x=e.getX(g+2);r.fromBufferAttribute(t,_),a.fromBufferAttribute(t,S),s.fromBufferAttribute(t,x),h.subVectors(s,a),p.subVectors(r,a),h.cross(p),o.fromBufferAttribute(i,_),l.fromBufferAttribute(i,S),u.fromBufferAttribute(i,x),o.add(h),l.add(h),u.add(h),i.setXYZ(_,o.x,o.y,o.z),i.setXYZ(S,l.x,l.y,l.z),i.setXYZ(x,u.x,u.y,u.z)}else for(let g=0,y=t.count;g<y;g+=3)r.fromBufferAttribute(t,g+0),a.fromBufferAttribute(t,g+1),s.fromBufferAttribute(t,g+2),h.subVectors(s,a),p.subVectors(r,a),h.cross(p),i.setXYZ(g+0,h.x,h.y,h.z),i.setXYZ(g+1,h.x,h.y,h.z),i.setXYZ(g+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Jr.fromBufferAttribute(e,t),Jr.normalize(),e.setXYZ(t,Jr.x,Jr.y,Jr.z)}toNonIndexed(){function e(o,l){const u=o.array,h=o.itemSize,p=o.normalized,g=new u.constructor(l.length*h);let y=0,_=0;for(let S=0,x=l.length;S<x;S++){o.isInterleavedBufferAttribute?y=l[S]*o.data.stride+o.offset:y=l[S]*h;for(let w=0;w<h;w++)g[_++]=u[y++]}return new oi(g,h,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new on,i=this.index.array,r=this.attributes;for(const o in r){const l=r[o],u=e(l,i);t.setAttribute(o,u)}const a=this.morphAttributes;for(const o in a){const l=[],u=a[o];for(let h=0,p=u.length;h<p;h++){const g=u[h],y=e(g,i);l.push(y)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,l=s.length;o<l;o++){const u=s[o];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const u=i[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let a=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],h=[];for(let p=0,g=u.length;p<g;p++){const y=u[p];h.push(y.toJSON(e.data))}h.length>0&&(r[l]=h,a=!0)}a&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const u in r){const h=r[u];this.setAttribute(u,h.clone(t))}const a=e.morphAttributes;for(const u in a){const h=[],p=a[u];for(let g=0,y=p.length;g<y;g++)h.push(p[g].clone(t));this.morphAttributes[u]=h}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let u=0,h=s.length;u<h;u++){const p=s[u];this.addGroup(p.start,p.count,p.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const wN=new Mt,md=new Bg,aS=new na,TN=new le,sS=new le,oS=new le,lS=new le,_T=new le,cS=new le,MN=new le,uS=new le;class Ni extends On{constructor(e=new on,t=new of){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,a=i.morphAttributes.position,s=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(a&&o){cS.set(0,0,0);for(let l=0,u=a.length;l<u;l++){const h=o[l],p=a[l];h!==0&&(_T.fromBufferAttribute(p,e),s?cS.addScaledVector(_T,h):cS.addScaledVector(_T.sub(t),h))}t.add(cS)}return t}raycast(e,t){const i=this.geometry,r=this.material,a=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),aS.copy(i.boundingSphere),aS.applyMatrix4(a),md.copy(e.ray).recast(e.near),!(aS.containsPoint(md.origin)===!1&&(md.intersectSphere(aS,TN)===null||md.origin.distanceToSquared(TN)>(e.far-e.near)**2))&&(wN.copy(a).invert(),md.copy(e.ray).applyMatrix4(wN),!(i.boundingBox!==null&&md.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,md)))}_computeIntersections(e,t,i){let r;const a=this.geometry,s=this.material,o=a.index,l=a.attributes.position,u=a.attributes.uv,h=a.attributes.uv1,p=a.attributes.normal,g=a.groups,y=a.drawRange;if(o!==null)if(Array.isArray(s))for(let _=0,S=g.length;_<S;_++){const x=g[_],w=s[x.materialIndex],T=Math.max(x.start,y.start),M=Math.min(o.count,Math.min(x.start+x.count,y.start+y.count));for(let C=T,N=M;C<N;C+=3){const D=o.getX(C),P=o.getX(C+1),z=o.getX(C+2);r=fS(this,w,e,i,u,h,p,D,P,z),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=x.materialIndex,t.push(r))}}else{const _=Math.max(0,y.start),S=Math.min(o.count,y.start+y.count);for(let x=_,w=S;x<w;x+=3){const T=o.getX(x),M=o.getX(x+1),C=o.getX(x+2);r=fS(this,s,e,i,u,h,p,T,M,C),r&&(r.faceIndex=Math.floor(x/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(s))for(let _=0,S=g.length;_<S;_++){const x=g[_],w=s[x.materialIndex],T=Math.max(x.start,y.start),M=Math.min(l.count,Math.min(x.start+x.count,y.start+y.count));for(let C=T,N=M;C<N;C+=3){const D=C,P=C+1,z=C+2;r=fS(this,w,e,i,u,h,p,D,P,z),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=x.materialIndex,t.push(r))}}else{const _=Math.max(0,y.start),S=Math.min(l.count,y.start+y.count);for(let x=_,w=S;x<w;x+=3){const T=x,M=x+1,C=x+2;r=fS(this,s,e,i,u,h,p,T,M,C),r&&(r.faceIndex=Math.floor(x/3),t.push(r))}}}}function o7(n,e,t,i,r,a,s,o){let l;if(e.side===ds?l=i.intersectTriangle(s,a,r,!0,o):l=i.intersectTriangle(r,a,s,e.side===Zu,o),l===null)return null;uS.copy(o),uS.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(uS);return u<t.near||u>t.far?null:{distance:u,point:uS.clone(),object:n}}function fS(n,e,t,i,r,a,s,o,l,u){n.getVertexPosition(o,sS),n.getVertexPosition(l,oS),n.getVertexPosition(u,lS);const h=o7(n,e,t,i,sS,oS,lS,MN);if(h){const p=new le;zs.getBarycoord(MN,sS,oS,lS,p),r&&(h.uv=zs.getInterpolatedAttribute(r,o,l,u,p,new st)),a&&(h.uv1=zs.getInterpolatedAttribute(a,o,l,u,p,new st)),s&&(h.normal=zs.getInterpolatedAttribute(s,o,l,u,p,new le),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const g={a:o,b:l,c:u,normal:new le,materialIndex:0};zs.getNormal(sS,oS,lS,g.normal),h.face=g,h.barycoord=p}return h}class _p extends on{constructor(e=1,t=1,i=1,r=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:a,depthSegments:s};const o=this;r=Math.floor(r),a=Math.floor(a),s=Math.floor(s);const l=[],u=[],h=[],p=[];let g=0,y=0;_("z","y","x",-1,-1,i,t,e,s,a,0),_("z","y","x",1,-1,i,t,-e,s,a,1),_("x","z","y",1,1,e,i,t,r,s,2),_("x","z","y",1,-1,e,i,-t,r,s,3),_("x","y","z",1,-1,e,t,i,r,a,4),_("x","y","z",-1,-1,e,t,-i,r,a,5),this.setIndex(l),this.setAttribute("position",new Ct(u,3)),this.setAttribute("normal",new Ct(h,3)),this.setAttribute("uv",new Ct(p,2));function _(S,x,w,T,M,C,N,D,P,z,I){const L=C/P,H=N/z,j=C/2,G=N/2,K=D/2,ee=P+1,Y=z+1;let re=0,J=0;const se=new le;for(let q=0;q<Y;q++){const X=q*H-G;for(let oe=0;oe<ee;oe++){const ue=oe*L-j;se[S]=ue*T,se[x]=X*M,se[w]=K,u.push(se.x,se.y,se.z),se[S]=0,se[x]=0,se[w]=D>0?1:-1,h.push(se.x,se.y,se.z),p.push(oe/P),p.push(1-q/z),re+=1}}for(let q=0;q<z;q++)for(let X=0;X<P;X++){const oe=g+X+ee*q,ue=g+X+ee*(q+1),Z=g+(X+1)+ee*(q+1),ce=g+(X+1)+ee*q;l.push(oe,ue,ce),l.push(ue,Z,ce),J+=6}o.addGroup(y,J,I),y+=J,g+=re}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _p(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function _g(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function as(n){const e={};for(let t=0;t<n.length;t++){const i=_g(n[t]);for(const r in i)e[r]=i[r]}return e}function l7(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function J5(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:cn.workingColorSpace}const _D={clone:_g,merge:as};var c7=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,u7=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class jl extends Fa{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=c7,this.fragmentShader=u7,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=_g(e.uniforms),this.uniformsGroups=l7(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const s=this.uniforms[r].value;s&&s.isTexture?t.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[r]={type:"m4",value:s.toArray()}:t.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class lE extends On{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Mt,this.projectionMatrix=new Mt,this.projectionMatrixInverse=new Mt,this.coordinateSystem=Hl}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const eh=new le,AN=new st,CN=new st;class Ir extends lE{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=vg*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Yd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return vg*2*Math.atan(Math.tan(Yd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){eh.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(eh.x,eh.y).multiplyScalar(-e/eh.z),eh.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(eh.x,eh.y).multiplyScalar(-e/eh.z)}getViewSize(e,t){return this.getViewBounds(e,AN,CN),t.subVectors(CN,AN)}setViewOffset(e,t,i,r,a,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Yd*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,a=-.5*r;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,u=s.fullHeight;a+=s.offsetX*r/l,t-=s.offsetY*i/u,r*=s.width/l,i*=s.height/u}const o=this.filmOffset;o!==0&&(a+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Tm=-90,Mm=1;class eH extends On{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Ir(Tm,Mm,e,t);r.layers=this.layers,this.add(r);const a=new Ir(Tm,Mm,e,t);a.layers=this.layers,this.add(a);const s=new Ir(Tm,Mm,e,t);s.layers=this.layers,this.add(s);const o=new Ir(Tm,Mm,e,t);o.layers=this.layers,this.add(o);const l=new Ir(Tm,Mm,e,t);l.layers=this.layers,this.add(l);const u=new Ir(Tm,Mm,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,a,s,o,l]=t;for(const u of t)this.remove(u);if(e===Hl)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===p0)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,s,o,l,u,h]=this.children,p=e.getRenderTarget(),g=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),_=e.xr.enabled;e.xr.enabled=!1;const S=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,a),e.setRenderTarget(i,1,r),e.render(t,s),e.setRenderTarget(i,2,r),e.render(t,o),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,u),i.texture.generateMipmaps=S,e.setRenderTarget(i,5,r),e.render(t,h),e.setRenderTarget(p,g,y),e.xr.enabled=_,i.texture.needsPMREMUpdate=!0}}class Q0 extends Pi{constructor(e,t,i,r,a,s,o,l,u,h){e=e!==void 0?e:[],t=t!==void 0?t:Qu,super(e,t,i,r,a,s,o,l,u,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class tH extends Yc{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Q0(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Sr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new _p(5,5,5),a=new jl({name:"CubemapFromEquirect",uniforms:_g(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ds,blending:$u});a.uniforms.tEquirect.value=t;const s=new Ni(r,a),o=t.minFilter;return t.minFilter===Fc&&(t.minFilter=Sr),new eH(1,10,this).update(e,s),t.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,i,r){const a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,r);e.setRenderTarget(a)}}class hh extends On{constructor(){super(),this.isGroup=!0,this.type="Group"}}const f7={type:"move"};class dx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new hh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new hh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new le,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new le),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new hh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new le,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new le),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,a=null,s=null;const o=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){s=!0;for(const S of e.hand.values()){const x=t.getJointPose(S,i),w=this._getHandJoint(u,S);x!==null&&(w.matrix.fromArray(x.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),w.matrixWorldNeedsUpdate=!0,w.jointRadius=x.radius),w.visible=x!==null}const h=u.joints["index-finger-tip"],p=u.joints["thumb-tip"],g=h.position.distanceTo(p.position),y=.02,_=.005;u.inputState.pinching&&g>y+_?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&g<=y-_&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,i),a!==null&&(l.matrix.fromArray(a.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,a.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(a.linearVelocity)):l.hasLinearVelocity=!1,a.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(a.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&a!==null&&(r=a),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(f7)))}return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=a!==null),u!==null&&(u.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new hh;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class cE{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new yt(e),this.density=t}clone(){return new cE(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class uE{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new yt(e),this.near=t,this.far=i}clone(){return new uE(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class bD extends On{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Cr,this.environmentIntensity=1,this.environmentRotation=new Cr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class fE{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=d0,this.updateRanges=[],this.version=0,this.uuid=po()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,a=this.stride;r<a;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=po()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=po()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const is=new le;class rp{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)is.fromBufferAttribute(this,t),is.applyMatrix4(e),this.setXYZ(t,is.x,is.y,is.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)is.fromBufferAttribute(this,t),is.applyNormalMatrix(e),this.setXYZ(t,is.x,is.y,is.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)is.fromBufferAttribute(this,t),is.transformDirection(e),this.setXYZ(t,is.x,is.y,is.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=fs(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=hn(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=hn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=hn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=hn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=hn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=fs(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=fs(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=fs(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=fs(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=hn(t,this.array),i=hn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=hn(t,this.array),i=hn(i,this.array),r=hn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=hn(t,this.array),i=hn(i,this.array),r=hn(r,this.array),a=hn(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[r+a])}return new oi(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new rp(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[r+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class SD extends Fa{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new yt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Am;const fy=new le,Cm=new le,Rm=new le,Om=new st,hy=new st,nH=new Mt,hS=new le,dy=new le,dS=new le,RN=new st,bT=new st,ON=new st;class iH extends On{constructor(e=new SD){if(super(),this.isSprite=!0,this.type="Sprite",Am===void 0){Am=new on;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new fE(t,5);Am.setIndex([0,1,2,0,2,3]),Am.setAttribute("position",new rp(i,3,0,!1)),Am.setAttribute("uv",new rp(i,2,3,!1))}this.geometry=Am,this.material=e,this.center=new st(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Cm.setFromMatrixScale(this.matrixWorld),nH.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Rm.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Cm.multiplyScalar(-Rm.z);const i=this.material.rotation;let r,a;i!==0&&(a=Math.cos(i),r=Math.sin(i));const s=this.center;pS(hS.set(-.5,-.5,0),Rm,s,Cm,r,a),pS(dy.set(.5,-.5,0),Rm,s,Cm,r,a),pS(dS.set(.5,.5,0),Rm,s,Cm,r,a),RN.set(0,0),bT.set(1,0),ON.set(1,1);let o=e.ray.intersectTriangle(hS,dy,dS,!1,fy);if(o===null&&(pS(dy.set(-.5,.5,0),Rm,s,Cm,r,a),bT.set(0,1),o=e.ray.intersectTriangle(hS,dS,dy,!1,fy),o===null))return;const l=e.ray.origin.distanceTo(fy);l<e.near||l>e.far||t.push({distance:l,point:fy.clone(),uv:zs.getInterpolation(fy,hS,dy,dS,RN,bT,ON,new st),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function pS(n,e,t,i,r,a){Om.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(hy.x=a*Om.x-r*Om.y,hy.y=r*Om.x+a*Om.y):hy.copy(Om),n.copy(e),n.x+=hy.x,n.y+=hy.y,n.applyMatrix4(nH)}const mS=new le,DN=new le;class rH extends On{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const a=t[i];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let a;for(a=0;a<r.length&&!(t<r[a].distance);a++);return r.splice(a,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let a=t[i].distance;if(t[i].object.visible&&(a-=a*t[i].hysteresis),e<a)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){mS.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(mS);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){mS.setFromMatrixPosition(e.matrixWorld),DN.setFromMatrixPosition(this.matrixWorld);const i=mS.distanceTo(DN)/e.zoom;t[0].object.visible=!0;let r,a;for(r=1,a=t.length;r<a;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),i>=s)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<a;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,a=i.length;r<a;r++){const s=i[r];t.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return t}}const UN=new le,NN=new yn,PN=new yn,h7=new le,LN=new Mt,gS=new le,ST=new na,IN=new Mt,xT=new Bg;class xD extends Ni{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=kR,this.bindMatrix=new Mt,this.bindMatrixInverse=new Mt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ta),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,gS),this.boundingBox.expandByPoint(gS)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new na),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,gS),this.boundingSphere.expandByPoint(gS)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),ST.copy(this.boundingSphere),ST.applyMatrix4(r),e.ray.intersectsSphere(ST)!==!1&&(IN.copy(r).invert(),xT.copy(e.ray).applyMatrix4(IN),!(this.boundingBox!==null&&xT.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,xT)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new yn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===kR?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===I5?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;NN.fromBufferAttribute(r.attributes.skinIndex,e),PN.fromBufferAttribute(r.attributes.skinWeight,e),UN.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const s=PN.getComponent(a);if(s!==0){const o=NN.getComponent(a);LN.multiplyMatrices(i.bones[o].matrixWorld,i.boneInverses[o]),t.addScaledVector(h7.copy(UN).applyMatrix4(LN),s)}}return t.applyMatrix4(this.bindMatrixInverse)}}class g0 extends On{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Gc extends Pi{constructor(e=null,t=1,i=1,r,a,s,o,l,u=va,h=va,p,g){super(null,s,o,l,u,h,r,a,p,g),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const BN=new Mt,d7=new Mt;class J0{constructor(e=[],t=[]){this.uuid=po(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Mt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Mt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let a=0,s=e.length;a<s;a++){const o=e[a]?e[a].matrixWorld:d7;BN.multiplyMatrices(o,t[a]),BN.toArray(i,a*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new J0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Gc(t,e,e,za,Fs);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const a=e.bones[i];let s=t[a];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),s=new g0),this.bones.push(s),this.boneInverses.push(new Mt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,a=t.length;r<a;r++){const s=t[r];e.bones.push(s.uuid);const o=i[r];e.boneInverses.push(o.toArray())}return e}}class ap extends oi{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Dm=new Mt,zN=new Mt,vS=[],kN=new ta,p7=new Mt,py=new Ni,my=new na;class aH extends Ni{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new ap(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,p7)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new ta),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Dm),kN.copy(e.boundingBox).applyMatrix4(Dm),this.boundingBox.union(kN)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new na),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Dm),my.copy(e.boundingSphere).applyMatrix4(Dm),this.boundingSphere.union(my)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,a=i.length+1,s=e*a+1;for(let o=0;o<i.length;o++)i[o]=r[s+o]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(py.geometry=this.geometry,py.material=this.material,py.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),my.copy(this.boundingSphere),my.applyMatrix4(i),e.ray.intersectsSphere(my)!==!1))for(let a=0;a<r;a++){this.getMatrixAt(a,Dm),zN.multiplyMatrices(i,Dm),py.matrixWorld=zN,py.raycast(e,vS);for(let s=0,o=vS.length;s<o;s++){const l=vS[s];l.instanceId=a,l.object=this,t.push(l)}vS.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new ap(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Gc(new Float32Array(r*this.count),r,this.count,tE,Fs));const a=this.morphTexture.source.data.data;let s=0;for(let u=0;u<i.length;u++)s+=i[u];const o=this.geometry.morphTargetsRelative?1:1-s,l=r*e;a[l]=o,a.set(i,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const ET=new le,m7=new le,g7=new rn;class sh{constructor(e=new le(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=ET.subVectors(i,t).cross(m7.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(ET),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:t.copy(e.start).addScaledVector(i,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||g7.getNormalMatrix(e),r=this.coplanarPoint(ET).applyMatrix4(e),a=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const gd=new na,yS=new le;class e_{constructor(e=new sh,t=new sh,i=new sh,r=new sh,a=new sh,s=new sh){this.planes=[e,t,i,r,a,s]}set(e,t,i,r,a,s){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(a),o[5].copy(s),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Hl){const i=this.planes,r=e.elements,a=r[0],s=r[1],o=r[2],l=r[3],u=r[4],h=r[5],p=r[6],g=r[7],y=r[8],_=r[9],S=r[10],x=r[11],w=r[12],T=r[13],M=r[14],C=r[15];if(i[0].setComponents(l-a,g-u,x-y,C-w).normalize(),i[1].setComponents(l+a,g+u,x+y,C+w).normalize(),i[2].setComponents(l+s,g+h,x+_,C+T).normalize(),i[3].setComponents(l-s,g-h,x-_,C-T).normalize(),i[4].setComponents(l-o,g-p,x-S,C-M).normalize(),t===Hl)i[5].setComponents(l+o,g+p,x+S,C+M).normalize();else if(t===p0)i[5].setComponents(o,p,S,M).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),gd.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),gd.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(gd)}intersectsSprite(e){return gd.center.set(0,0,0),gd.radius=.7071067811865476,gd.applyMatrix4(e.matrixWorld),this.intersectsSphere(gd)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(yS.x=r.normal.x>0?e.max.x:e.min.x,yS.y=r.normal.y>0?e.max.y:e.min.y,yS.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(yS)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function wT(n,e){return n-e}function v7(n,e){return n.z-e.z}function y7(n,e){return e.z-n.z}class _7{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const a=this.pool,s=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const o=a[this.index];s.push(o),this.index++,o.start=e,o.count=t,o.z=i,o.index=r}reset(){this.list.length=0,this.index=0}}const Ns=new Mt,b7=new yt(1,1,1),TT=new e_,_S=new ta,vd=new na,gy=new le,FN=new le,S7=new le,MT=new _7,Ia=new Ni,bS=[];function x7(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let a=0;a<r;a++)for(let s=0;s<i;s++)e.setComponent(a+t,s,n.getComponent(a,s))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function yd(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class sH extends Ni{constructor(e,t,i=t*2,r){super(new on,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Gc(t,e,e,za,Fs);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new Gc(t,e,e,K0,Ju);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new Gc(t,e,e,za,Fs);i.colorSpace=cn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const s=e.getAttribute(a),{array:o,itemSize:l,normalized:u}=s,h=new o.constructor(i*l),p=new oi(h,l,u);t.setAttribute(a,p)}if(e.getIndex()!==null){const a=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new oi(a,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),a=t.getAttribute(i);if(r.itemSize!==a.itemSize||r.normalized!==a.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ta);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const a=t[i].geometryIndex;this.getMatrixAt(i,Ns),this.getBoundingBoxAt(a,_S).applyMatrix4(Ns),e.union(_S)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new na);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const a=t[i].geometryIndex;this.getMatrixAt(i,Ns),this.getBoundingSphereAt(a,vd).applyMatrix4(Ns),e.union(vd)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(wT),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const a=this._matricesTexture;Ns.identity().toArray(a.image.data,r*16),a.needsUpdate=!0;const s=this._colorsTexture;return s&&(b7.toArray(s.image.data,r*4),s.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const s=e.getIndex();if(s!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?s.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(wT),l=this._availableGeometryIds.shift(),a[l]=r):(l=this._geometryCount,this._geometryCount++,a.push(r)),this.setGeometryAt(l,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,a=i.getIndex(),s=t.getIndex(),o=this._geometryInfo[e];if(r&&s.count>o.reservedIndexCount||t.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=o.vertexStart,u=o.reservedVertexCount;o.vertexCount=t.getAttribute("position").count;for(const h in i.attributes){const p=t.getAttribute(h),g=i.getAttribute(h);x7(p,g,l);const y=p.itemSize;for(let _=p.count,S=u;_<S;_++){const x=l+_;for(let w=0;w<y;w++)g.setComponent(x,w,0)}g.needsUpdate=!0,g.addUpdateRange(l*y,u*y)}if(r){const h=o.indexStart,p=o.reservedIndexCount;o.indexCount=t.getIndex().count;for(let g=0;g<s.count;g++)a.setX(h+g,l+s.getX(g));for(let g=s.count,y=p;g<y;g++)a.setX(h+g,l);a.needsUpdate=!0,a.addUpdateRange(h,o.reservedIndexCount)}return o.start=r?o.indexStart:o.vertexStart,o.count=r?o.indexCount:o.vertexCount,o.boundingBox=null,t.boundingBox!==null&&(o.boundingBox=t.boundingBox.clone()),o.boundingSphere=null,t.boundingSphere!==null&&(o.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,a=i.length;r<a;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((s,o)=>o).sort((s,o)=>i[s].vertexStart-i[o].vertexStart),a=this.geometry;for(let s=0,o=i.length;s<o;s++){const l=r[s],u=i[l];if(u.active!==!1){if(a.index!==null){if(u.indexStart!==t){const{indexStart:h,vertexStart:p,reservedIndexCount:g}=u,y=a.index,_=y.array,S=e-p;for(let x=h;x<h+g;x++)_[x]=_[x]+S;y.array.copyWithin(t,h,h+g),y.addUpdateRange(t,g),u.indexStart=t}t+=u.reservedIndexCount}if(u.vertexStart!==e){const{vertexStart:h,reservedVertexCount:p}=u,g=a.attributes;for(const y in g){const _=g[y],{array:S,itemSize:x}=_;S.copyWithin(e*x,h*x,(h+p)*x),_.addUpdateRange(e*x,p*x)}u.vertexStart=e}e+=u.reservedVertexCount,u.start=a.index?u.indexStart:u.vertexStart,this._nextIndexStart=a.index?u.indexStart+u.reservedIndexCount:0,this._nextVertexStart=u.vertexStart+u.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const a=new ta,s=i.index,o=i.attributes.position;for(let l=r.start,u=r.start+r.count;l<u;l++){let h=l;s&&(h=s.getX(h)),a.expandByPoint(gy.fromBufferAttribute(o,h))}r.boundingBox=a}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const a=new na;this.getBoundingBoxAt(e,_S),_S.getCenter(a.center);const s=i.index,o=i.attributes.position;let l=0;for(let u=r.start,h=r.start+r.count;u<h;u++){let p=u;s&&(p=s.getX(p)),gy.fromBufferAttribute(o,p),l=Math.max(l,a.center.distanceToSquared(gy))}a.radius=Math.sqrt(l),r.boundingSphere=a}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(wT);t[t.length-1]===i.length;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),a=new Int32Array(e);yd(this._multiDrawCounts,r),yd(this._multiDrawStarts,a),this._multiDrawCounts=r,this._multiDrawStarts=a,this._maxInstanceCount=e;const s=this._indirectTexture,o=this._matricesTexture,l=this._colorsTexture;s.dispose(),this._initIndirectTexture(),yd(s.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),yd(o.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),yd(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(o=>o.active);if(Math.max(...i.map(o=>o.vertexStart+o.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new on,this._initializeGeometry(a));const s=this.geometry;a.index&&yd(a.index.array,s.index.array);for(const o in a.attributes)yd(a.attributes[o].array,s.attributes[o].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,a=this.matrixWorld,s=this.geometry;Ia.material=this.material,Ia.geometry.index=s.index,Ia.geometry.attributes=s.attributes,Ia.geometry.boundingBox===null&&(Ia.geometry.boundingBox=new ta),Ia.geometry.boundingSphere===null&&(Ia.geometry.boundingSphere=new na);for(let o=0,l=i.length;o<l;o++){if(!i[o].visible||!i[o].active)continue;const u=i[o].geometryIndex,h=r[u];Ia.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(o,Ia.matrixWorld).premultiply(a),this.getBoundingBoxAt(u,Ia.geometry.boundingBox),this.getBoundingSphereAt(u,Ia.geometry.boundingSphere),Ia.raycast(e,bS);for(let p=0,g=bS.length;p<g;p++){const y=bS[p];y.object=this,y.batchId=o,t.push(y)}bS.length=0}Ia.material=null,Ia.geometry.index=null,Ia.geometry.attributes={},Ia.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,r,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=r.getIndex(),o=s===null?1:s.array.BYTES_PER_ELEMENT,l=this._instanceInfo,u=this._multiDrawStarts,h=this._multiDrawCounts,p=this._geometryInfo,g=this.perObjectFrustumCulled,y=this._indirectTexture,_=y.image.data;g&&(Ns.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),TT.setFromProjectionMatrix(Ns,e.coordinateSystem));let S=0;if(this.sortObjects){Ns.copy(this.matrixWorld).invert(),gy.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Ns),FN.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Ns);for(let T=0,M=l.length;T<M;T++)if(l[T].visible&&l[T].active){const C=l[T].geometryIndex;this.getMatrixAt(T,Ns),this.getBoundingSphereAt(C,vd).applyMatrix4(Ns);let N=!1;if(g&&(N=!TT.intersectsSphere(vd)),!N){const D=p[C],P=S7.subVectors(vd.center,gy).dot(FN);MT.push(D.start,D.count,P,T)}}const x=MT.list,w=this.customSort;w===null?x.sort(a.transparent?y7:v7):w.call(this,x,i);for(let T=0,M=x.length;T<M;T++){const C=x[T];u[S]=C.start*o,h[S]=C.count,_[S]=C.index,S++}MT.reset()}else for(let x=0,w=l.length;x<w;x++)if(l[x].visible&&l[x].active){const T=l[x].geometryIndex;let M=!1;if(g&&(this.getMatrixAt(x,Ns),this.getBoundingSphereAt(T,vd).applyMatrix4(Ns),M=!TT.intersectsSphere(vd)),!M){const C=p[T];u[S]=C.start*o,h[S]=C.count,_[S]=x,S++}}y.needsUpdate=!0,this._multiDrawCount=S,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,a,s){this.onBeforeRender(e,null,r,a,s)}}class Ha extends Fa{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new yt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const p1=new le,m1=new le,HN=new Mt,vy=new Bg,SS=new na,AT=new le,VN=new le;class ef extends On{constructor(e=new on,t=new Ha){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,a=t.count;r<a;r++)p1.fromBufferAttribute(t,r-1),m1.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=p1.distanceTo(m1);e.setAttribute("lineDistance",new Ct(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,a=e.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),SS.copy(i.boundingSphere),SS.applyMatrix4(r),SS.radius+=a,e.ray.intersectsSphere(SS)===!1)return;HN.copy(r).invert(),vy.copy(e.ray).applyMatrix4(HN);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=this.isLineSegments?2:1,h=i.index,g=i.attributes.position;if(h!==null){const y=Math.max(0,s.start),_=Math.min(h.count,s.start+s.count);for(let S=y,x=_-1;S<x;S+=u){const w=h.getX(S),T=h.getX(S+1),M=xS(this,e,vy,l,w,T,S);M&&t.push(M)}if(this.isLineLoop){const S=h.getX(_-1),x=h.getX(y),w=xS(this,e,vy,l,S,x,_-1);w&&t.push(w)}}else{const y=Math.max(0,s.start),_=Math.min(g.count,s.start+s.count);for(let S=y,x=_-1;S<x;S+=u){const w=xS(this,e,vy,l,S,S+1,S);w&&t.push(w)}if(this.isLineLoop){const S=xS(this,e,vy,l,_-1,y,_-1);S&&t.push(S)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}function xS(n,e,t,i,r,a,s){const o=n.geometry.attributes.position;if(p1.fromBufferAttribute(o,r),m1.fromBufferAttribute(o,a),t.distanceSqToSegment(p1,m1,AT,VN)>i)return;AT.applyMatrix4(n.matrixWorld);const u=e.ray.origin.distanceTo(AT);if(!(u<e.near||u>e.far))return{distance:u,point:VN.clone().applyMatrix4(n.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:n}}const GN=new le,jN=new le;class Qc extends ef{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,a=t.count;r<a;r+=2)GN.fromBufferAttribute(t,r),jN.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+GN.distanceTo(jN);e.setAttribute("lineDistance",new Ct(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class oH extends ef{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class ED extends Fa{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new yt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const qN=new Mt,VR=new Bg,ES=new na,wS=new le;class lH extends On{constructor(e=new on,t=new ED){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,a=e.params.Points.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),ES.copy(i.boundingSphere),ES.applyMatrix4(r),ES.radius+=a,e.ray.intersectsSphere(ES)===!1)return;qN.copy(r).invert(),VR.copy(e.ray).applyMatrix4(qN);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=i.index,p=i.attributes.position;if(u!==null){const g=Math.max(0,s.start),y=Math.min(u.count,s.start+s.count);for(let _=g,S=y;_<S;_++){const x=u.getX(_);wS.fromBufferAttribute(p,x),WN(wS,x,l,r,e,t,this)}}else{const g=Math.max(0,s.start),y=Math.min(p.count,s.start+s.count);for(let _=g,S=y;_<S;_++)wS.fromBufferAttribute(p,_),WN(wS,_,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}function WN(n,e,t,i,r,a,s){const o=VR.distanceSqToPoint(n);if(o<t){const l=new le;VR.closestPointToPoint(n,l),l.applyMatrix4(i);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;a.push({distance:u,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:s})}}class cH extends Pi{constructor(e,t,i,r,a,s,o,l,u){super(e,t,i,r,a,s,o,l,u),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:Sr,this.magFilter=a!==void 0?a:Sr,this.generateMipmaps=!1;const h=this;function p(){h.needsUpdate=!0,e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class E7 extends cH{constructor(e,t,i,r,a,s,o,l){super({},e,t,i,r,a,s,o,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class w7 extends Pi{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=va,this.minFilter=va,this.generateMipmaps=!1,this.needsUpdate=!0}}class hE extends Pi{constructor(e,t,i,r,a,s,o,l,u,h,p,g){super(null,s,o,l,u,h,r,a,p,g),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class T7 extends hE{constructor(e,t,i,r,a,s){super(e,t,i,a,s),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=ks,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class M7 extends hE{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Qu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class A7 extends Pi{constructor(e,t,i,r,a,s,o,l,u){super(e,t,i,r,a,s,o,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class wD extends Pi{constructor(e,t,i,r,a,s,o,l,u,h=Wd){if(h!==Wd&&h!==ip)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&h===Wd&&(i=Ju),i===void 0&&h===ip&&(i=np),super(null,r,a,s,o,l,h,i,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:va,this.minFilter=l!==void 0?l:va,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new fh(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class Ho{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),a=0;t.push(0);for(let s=1;s<=e;s++)i=this.getPoint(s/e),a+=i.distanceTo(r),t.push(a),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let r=0;const a=i.length;let s;t?s=t:s=e*i[a-1];let o=0,l=a-1,u;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),u=i[r]-s,u<0)o=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,i[r]===s)return r/(a-1);const h=i[r],g=i[r+1]-h,y=(s-h)/g;return(r+y)/(a-1)}getTangent(e,t){let r=e-1e-4,a=e+1e-4;r<0&&(r=0),a>1&&(a=1);const s=this.getPoint(r),o=this.getPoint(a),l=t||(s.isVector2?new st:new le);return l.copy(o).sub(s).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new le,r=[],a=[],s=[],o=new le,l=new Mt;for(let y=0;y<=e;y++){const _=y/e;r[y]=this.getTangentAt(_,new le)}a[0]=new le,s[0]=new le;let u=Number.MAX_VALUE;const h=Math.abs(r[0].x),p=Math.abs(r[0].y),g=Math.abs(r[0].z);h<=u&&(u=h,i.set(1,0,0)),p<=u&&(u=p,i.set(0,1,0)),g<=u&&i.set(0,0,1),o.crossVectors(r[0],i).normalize(),a[0].crossVectors(r[0],o),s[0].crossVectors(r[0],a[0]);for(let y=1;y<=e;y++){if(a[y]=a[y-1].clone(),s[y]=s[y-1].clone(),o.crossVectors(r[y-1],r[y]),o.length()>Number.EPSILON){o.normalize();const _=Math.acos(sn(r[y-1].dot(r[y]),-1,1));a[y].applyMatrix4(l.makeRotationAxis(o,_))}s[y].crossVectors(r[y],a[y])}if(t===!0){let y=Math.acos(sn(a[0].dot(a[e]),-1,1));y/=e,r[0].dot(o.crossVectors(a[0],a[e]))>0&&(y=-y);for(let _=1;_<=e;_++)a[_].applyMatrix4(l.makeRotationAxis(r[_],y*_)),s[_].crossVectors(r[_],a[_])}return{tangents:r,normals:a,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class dE extends Ho{constructor(e=0,t=0,i=1,r=1,a=0,s=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=a,this.aEndAngle=s,this.aClockwise=o,this.aRotation=l}getPoint(e,t=new st){const i=t,r=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const s=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=r;for(;a>r;)a-=r;a<Number.EPSILON&&(s?a=0:a=r),this.aClockwise===!0&&!s&&(a===r?a=-r:a=a-r);const o=this.aStartAngle+e*a;let l=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const h=Math.cos(this.aRotation),p=Math.sin(this.aRotation),g=l-this.aX,y=u-this.aY;l=g*h-y*p+this.aX,u=g*p+y*h+this.aY}return i.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class uH extends dE{constructor(e,t,i,r,a,s){super(e,t,i,i,r,a,s),this.isArcCurve=!0,this.type="ArcCurve"}}function TD(){let n=0,e=0,t=0,i=0;function r(a,s,o,l){n=a,e=o,t=-3*a+3*s-2*o-l,i=2*a-2*s+o+l}return{initCatmullRom:function(a,s,o,l,u){r(s,o,u*(o-a),u*(l-s))},initNonuniformCatmullRom:function(a,s,o,l,u,h,p){let g=(s-a)/u-(o-a)/(u+h)+(o-s)/h,y=(o-s)/h-(l-s)/(h+p)+(l-o)/p;g*=h,y*=h,r(s,o,g,y)},calc:function(a){const s=a*a,o=s*a;return n+e*a+t*s+i*o}}}const TS=new le,CT=new TD,RT=new TD,OT=new TD;class fH extends Ho{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new le){const i=t,r=this.points,a=r.length,s=(a-(this.closed?0:1))*e;let o=Math.floor(s),l=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/a)+1)*a:l===0&&o===a-1&&(o=a-2,l=1);let u,h;this.closed||o>0?u=r[(o-1)%a]:(TS.subVectors(r[0],r[1]).add(r[0]),u=TS);const p=r[o%a],g=r[(o+1)%a];if(this.closed||o+2<a?h=r[(o+2)%a]:(TS.subVectors(r[a-1],r[a-2]).add(r[a-1]),h=TS),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let _=Math.pow(u.distanceToSquared(p),y),S=Math.pow(p.distanceToSquared(g),y),x=Math.pow(g.distanceToSquared(h),y);S<1e-4&&(S=1),_<1e-4&&(_=S),x<1e-4&&(x=S),CT.initNonuniformCatmullRom(u.x,p.x,g.x,h.x,_,S,x),RT.initNonuniformCatmullRom(u.y,p.y,g.y,h.y,_,S,x),OT.initNonuniformCatmullRom(u.z,p.z,g.z,h.z,_,S,x)}else this.curveType==="catmullrom"&&(CT.initCatmullRom(u.x,p.x,g.x,h.x,this.tension),RT.initCatmullRom(u.y,p.y,g.y,h.y,this.tension),OT.initCatmullRom(u.z,p.z,g.z,h.z,this.tension));return i.set(CT.calc(l),RT.calc(l),OT.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new le().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function YN(n,e,t,i,r){const a=(i-e)*.5,s=(r-t)*.5,o=n*n,l=n*o;return(2*t-2*i+a+s)*l+(-3*t+3*i-2*a-s)*o+a*n+t}function C7(n,e){const t=1-n;return t*t*e}function R7(n,e){return 2*(1-n)*n*e}function O7(n,e){return n*n*e}function Xy(n,e,t,i){return C7(n,e)+R7(n,t)+O7(n,i)}function D7(n,e){const t=1-n;return t*t*t*e}function U7(n,e){const t=1-n;return 3*t*t*n*e}function N7(n,e){return 3*(1-n)*n*n*e}function P7(n,e){return n*n*n*e}function Ky(n,e,t,i,r){return D7(n,e)+U7(n,t)+N7(n,i)+P7(n,r)}class MD extends Ho{constructor(e=new st,t=new st,i=new st,r=new st){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new st){const i=t,r=this.v0,a=this.v1,s=this.v2,o=this.v3;return i.set(Ky(e,r.x,a.x,s.x,o.x),Ky(e,r.y,a.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class hH extends Ho{constructor(e=new le,t=new le,i=new le,r=new le){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new le){const i=t,r=this.v0,a=this.v1,s=this.v2,o=this.v3;return i.set(Ky(e,r.x,a.x,s.x,o.x),Ky(e,r.y,a.y,s.y,o.y),Ky(e,r.z,a.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class AD extends Ho{constructor(e=new st,t=new st){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new st){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new st){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class dH extends Ho{constructor(e=new le,t=new le){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new le){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new le){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class CD extends Ho{constructor(e=new st,t=new st,i=new st){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new st){const i=t,r=this.v0,a=this.v1,s=this.v2;return i.set(Xy(e,r.x,a.x,s.x),Xy(e,r.y,a.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class RD extends Ho{constructor(e=new le,t=new le,i=new le){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new le){const i=t,r=this.v0,a=this.v1,s=this.v2;return i.set(Xy(e,r.x,a.x,s.x),Xy(e,r.y,a.y,s.y),Xy(e,r.z,a.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class OD extends Ho{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new st){const i=t,r=this.points,a=(r.length-1)*e,s=Math.floor(a),o=a-s,l=r[s===0?s:s-1],u=r[s],h=r[s>r.length-2?r.length-1:s+1],p=r[s>r.length-3?r.length-1:s+2];return i.set(YN(o,l.x,u.x,h.x,p.x),YN(o,l.y,u.y,h.y,p.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new st().fromArray(r))}return this}}var g1=Object.freeze({__proto__:null,ArcCurve:uH,CatmullRomCurve3:fH,CubicBezierCurve:MD,CubicBezierCurve3:hH,EllipseCurve:dE,LineCurve:AD,LineCurve3:dH,QuadraticBezierCurve:CD,QuadraticBezierCurve3:RD,SplineCurve:OD});class pH extends Ho{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new g1[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let a=0;for(;a<r.length;){if(r[a]>=i){const s=r[a]-i,o=this.curves[a],l=o.getLength(),u=l===0?0:1-s/l;return o.getPointAt(u,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,a=this.curves;r<a.length;r++){const s=a[r],o=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(o);for(let u=0;u<l.length;u++){const h=l[u];i&&i.equals(h)||(t.push(h),i=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new g1[r.type]().fromJSON(r))}return this}}class v0 extends pH{constructor(e){super(),this.type="Path",this.currentPoint=new st,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new AD(this.currentPoint.clone(),new st(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const a=new CD(this.currentPoint.clone(),new st(e,t),new st(i,r));return this.curves.push(a),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,a,s){const o=new MD(this.currentPoint.clone(),new st(e,t),new st(i,r),new st(a,s));return this.curves.push(o),this.currentPoint.set(a,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new OD(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,a,s){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,i,r,a,s),this}absarc(e,t,i,r,a,s){return this.absellipse(e,t,i,i,r,a,s),this}ellipse(e,t,i,r,a,s,o,l){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+u,t+h,i,r,a,s,o,l),this}absellipse(e,t,i,r,a,s,o,l){const u=new dE(e,t,i,r,a,s,o,l);if(this.curves.length>0){const p=u.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(u);const h=u.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class t_ extends on{constructor(e=[new st(0,-.5),new st(.5,0),new st(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=sn(r,0,Math.PI*2);const a=[],s=[],o=[],l=[],u=[],h=1/t,p=new le,g=new st,y=new le,_=new le,S=new le;let x=0,w=0;for(let T=0;T<=e.length-1;T++)switch(T){case 0:x=e[T+1].x-e[T].x,w=e[T+1].y-e[T].y,y.x=w*1,y.y=-x,y.z=w*0,S.copy(y),y.normalize(),l.push(y.x,y.y,y.z);break;case e.length-1:l.push(S.x,S.y,S.z);break;default:x=e[T+1].x-e[T].x,w=e[T+1].y-e[T].y,y.x=w*1,y.y=-x,y.z=w*0,_.copy(y),y.x+=S.x,y.y+=S.y,y.z+=S.z,y.normalize(),l.push(y.x,y.y,y.z),S.copy(_)}for(let T=0;T<=t;T++){const M=i+T*h*r,C=Math.sin(M),N=Math.cos(M);for(let D=0;D<=e.length-1;D++){p.x=e[D].x*C,p.y=e[D].y,p.z=e[D].x*N,s.push(p.x,p.y,p.z),g.x=T/t,g.y=D/(e.length-1),o.push(g.x,g.y);const P=l[3*D+0]*C,z=l[3*D+1],I=l[3*D+0]*N;u.push(P,z,I)}}for(let T=0;T<t;T++)for(let M=0;M<e.length-1;M++){const C=M+T*e.length,N=C,D=C+e.length,P=C+e.length+1,z=C+1;a.push(N,D,z),a.push(P,z,D)}this.setIndex(a),this.setAttribute("position",new Ct(s,3)),this.setAttribute("uv",new Ct(o,2)),this.setAttribute("normal",new Ct(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new t_(e.points,e.segments,e.phiStart,e.phiLength)}}class pE extends t_{constructor(e=1,t=1,i=4,r=8){const a=new v0;a.absarc(0,-t/2,e,Math.PI*1.5,0),a.absarc(0,t/2,e,0,Math.PI*.5),super(a.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new pE(e.radius,e.length,e.capSegments,e.radialSegments)}}class mE extends on{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const a=[],s=[],o=[],l=[],u=new le,h=new st;s.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let p=0,g=3;p<=t;p++,g+=3){const y=i+p/t*r;u.x=e*Math.cos(y),u.y=e*Math.sin(y),s.push(u.x,u.y,u.z),o.push(0,0,1),h.x=(s[g]/e+1)/2,h.y=(s[g+1]/e+1)/2,l.push(h.x,h.y)}for(let p=1;p<=t;p++)a.push(p,p+1,0);this.setIndex(a),this.setAttribute("position",new Ct(s,3)),this.setAttribute("normal",new Ct(o,3)),this.setAttribute("uv",new Ct(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mE(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class zg extends on{constructor(e=1,t=1,i=1,r=32,a=1,s=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:l};const u=this;r=Math.floor(r),a=Math.floor(a);const h=[],p=[],g=[],y=[];let _=0;const S=[],x=i/2;let w=0;T(),s===!1&&(e>0&&M(!0),t>0&&M(!1)),this.setIndex(h),this.setAttribute("position",new Ct(p,3)),this.setAttribute("normal",new Ct(g,3)),this.setAttribute("uv",new Ct(y,2));function T(){const C=new le,N=new le;let D=0;const P=(t-e)/i;for(let z=0;z<=a;z++){const I=[],L=z/a,H=L*(t-e)+e;for(let j=0;j<=r;j++){const G=j/r,K=G*l+o,ee=Math.sin(K),Y=Math.cos(K);N.x=H*ee,N.y=-L*i+x,N.z=H*Y,p.push(N.x,N.y,N.z),C.set(ee,P,Y).normalize(),g.push(C.x,C.y,C.z),y.push(G,1-L),I.push(_++)}S.push(I)}for(let z=0;z<r;z++)for(let I=0;I<a;I++){const L=S[I][z],H=S[I+1][z],j=S[I+1][z+1],G=S[I][z+1];(e>0||I!==0)&&(h.push(L,H,G),D+=3),(t>0||I!==a-1)&&(h.push(H,j,G),D+=3)}u.addGroup(w,D,0),w+=D}function M(C){const N=_,D=new st,P=new le;let z=0;const I=C===!0?e:t,L=C===!0?1:-1;for(let j=1;j<=r;j++)p.push(0,x*L,0),g.push(0,L,0),y.push(.5,.5),_++;const H=_;for(let j=0;j<=r;j++){const K=j/r*l+o,ee=Math.cos(K),Y=Math.sin(K);P.x=I*Y,P.y=x*L,P.z=I*ee,p.push(P.x,P.y,P.z),g.push(0,L,0),D.x=ee*.5+.5,D.y=Y*.5*L+.5,y.push(D.x,D.y),_++}for(let j=0;j<r;j++){const G=N+j,K=H+j;C===!0?h.push(K,K+1,G):h.push(K+1,K,G),z+=3}u.addGroup(w,z,C===!0?1:2),w+=z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zg(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class gE extends zg{constructor(e=1,t=1,i=32,r=1,a=!1,s=0,o=Math.PI*2){super(0,e,t,i,r,a,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:o}}static fromJSON(e){return new gE(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class wh extends on{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const a=[],s=[];o(r),u(i),h(),this.setAttribute("position",new Ct(a,3)),this.setAttribute("normal",new Ct(a.slice(),3)),this.setAttribute("uv",new Ct(s,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(T){const M=new le,C=new le,N=new le;for(let D=0;D<t.length;D+=3)y(t[D+0],M),y(t[D+1],C),y(t[D+2],N),l(M,C,N,T)}function l(T,M,C,N){const D=N+1,P=[];for(let z=0;z<=D;z++){P[z]=[];const I=T.clone().lerp(C,z/D),L=M.clone().lerp(C,z/D),H=D-z;for(let j=0;j<=H;j++)j===0&&z===D?P[z][j]=I:P[z][j]=I.clone().lerp(L,j/H)}for(let z=0;z<D;z++)for(let I=0;I<2*(D-z)-1;I++){const L=Math.floor(I/2);I%2===0?(g(P[z][L+1]),g(P[z+1][L]),g(P[z][L])):(g(P[z][L+1]),g(P[z+1][L+1]),g(P[z+1][L]))}}function u(T){const M=new le;for(let C=0;C<a.length;C+=3)M.x=a[C+0],M.y=a[C+1],M.z=a[C+2],M.normalize().multiplyScalar(T),a[C+0]=M.x,a[C+1]=M.y,a[C+2]=M.z}function h(){const T=new le;for(let M=0;M<a.length;M+=3){T.x=a[M+0],T.y=a[M+1],T.z=a[M+2];const C=x(T)/2/Math.PI+.5,N=w(T)/Math.PI+.5;s.push(C,1-N)}_(),p()}function p(){for(let T=0;T<s.length;T+=6){const M=s[T+0],C=s[T+2],N=s[T+4],D=Math.max(M,C,N),P=Math.min(M,C,N);D>.9&&P<.1&&(M<.2&&(s[T+0]+=1),C<.2&&(s[T+2]+=1),N<.2&&(s[T+4]+=1))}}function g(T){a.push(T.x,T.y,T.z)}function y(T,M){const C=T*3;M.x=e[C+0],M.y=e[C+1],M.z=e[C+2]}function _(){const T=new le,M=new le,C=new le,N=new le,D=new st,P=new st,z=new st;for(let I=0,L=0;I<a.length;I+=9,L+=6){T.set(a[I+0],a[I+1],a[I+2]),M.set(a[I+3],a[I+4],a[I+5]),C.set(a[I+6],a[I+7],a[I+8]),D.set(s[L+0],s[L+1]),P.set(s[L+2],s[L+3]),z.set(s[L+4],s[L+5]),N.copy(T).add(M).add(C).divideScalar(3);const H=x(N);S(D,L+0,T,H),S(P,L+2,M,H),S(z,L+4,C,H)}}function S(T,M,C,N){N<0&&T.x===1&&(s[M]=T.x-1),C.x===0&&C.z===0&&(s[M]=N/2/Math.PI+.5)}function x(T){return Math.atan2(T.z,-T.x)}function w(T){return Math.atan2(-T.y,Math.sqrt(T.x*T.x+T.z*T.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wh(e.vertices,e.indices,e.radius,e.details)}}class vE extends wh{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new vE(e.radius,e.detail)}}const MS=new le,AS=new le,DT=new le,CS=new zs;class mH extends on{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),a=Math.cos(Yd*t),s=e.getIndex(),o=e.getAttribute("position"),l=s?s.count:o.count,u=[0,0,0],h=["a","b","c"],p=new Array(3),g={},y=[];for(let _=0;_<l;_+=3){s?(u[0]=s.getX(_),u[1]=s.getX(_+1),u[2]=s.getX(_+2)):(u[0]=_,u[1]=_+1,u[2]=_+2);const{a:S,b:x,c:w}=CS;if(S.fromBufferAttribute(o,u[0]),x.fromBufferAttribute(o,u[1]),w.fromBufferAttribute(o,u[2]),CS.getNormal(DT),p[0]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,p[1]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,p[2]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let T=0;T<3;T++){const M=(T+1)%3,C=p[T],N=p[M],D=CS[h[T]],P=CS[h[M]],z=`${C}_${N}`,I=`${N}_${C}`;I in g&&g[I]?(DT.dot(g[I].normal)<=a&&(y.push(D.x,D.y,D.z),y.push(P.x,P.y,P.z)),g[I]=null):z in g||(g[z]={index0:u[T],index1:u[M],normal:DT.clone()})}}for(const _ in g)if(g[_]){const{index0:S,index1:x}=g[_];MS.fromBufferAttribute(o,S),AS.fromBufferAttribute(o,x),y.push(MS.x,MS.y,MS.z),y.push(AS.x,AS.y,AS.z)}this.setAttribute("position",new Ct(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class $d extends v0{constructor(e){super(e),this.uuid=po(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new v0().fromJSON(r))}return this}}class L7{static triangulate(e,t,i=2){const r=t&&t.length,a=r?t[0]*i:e.length;let s=gH(e,0,a,i,!0);const o=[];if(!s||s.next===s.prev)return o;let l,u,h,p,g,y,_;if(r&&(s=F7(e,t,s,i)),e.length>80*i){l=h=e[0],u=p=e[1];for(let S=i;S<a;S+=i)g=e[S],y=e[S+1],g<l&&(l=g),y<u&&(u=y),g>h&&(h=g),y>p&&(p=y);_=Math.max(h-l,p-u),_=_!==0?32767/_:0}return y0(s,o,i,l,u,_,0),o}}function gH(n,e,t,i,r){let a,s;if(r===Z7(n,e,t,i)>0)for(a=e;a<t;a+=i)s=$N(a,n[a],n[a+1],s);else for(a=t-i;a>=e;a-=i)s=$N(a,n[a],n[a+1],s);return s&&yE(s,s.next)&&(b0(s),s=s.next),s}function sp(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(yE(t,t.next)||Zi(t.prev,t,t.next)===0)){if(b0(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function y0(n,e,t,i,r,a,s){if(!n)return;!s&&a&&q7(n,i,r,a);let o=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,a?B7(n,i,r,a):I7(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),b0(n),n=u.next,o=u.next;continue}if(n=u,n===o){s?s===1?(n=z7(sp(n),e,t),y0(n,e,t,i,r,a,2)):s===2&&k7(n,e,t,i,r,a):y0(sp(n),e,t,i,r,a,1);break}}}function I7(n){const e=n.prev,t=n,i=n.next;if(Zi(e,t,i)>=0)return!1;const r=e.x,a=t.x,s=i.x,o=e.y,l=t.y,u=i.y,h=r<a?r<s?r:s:a<s?a:s,p=o<l?o<u?o:u:l<u?l:u,g=r>a?r>s?r:s:a>s?a:s,y=o>l?o>u?o:u:l>u?l:u;let _=i.next;for(;_!==e;){if(_.x>=h&&_.x<=g&&_.y>=p&&_.y<=y&&ag(r,o,a,l,s,u,_.x,_.y)&&Zi(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function B7(n,e,t,i){const r=n.prev,a=n,s=n.next;if(Zi(r,a,s)>=0)return!1;const o=r.x,l=a.x,u=s.x,h=r.y,p=a.y,g=s.y,y=o<l?o<u?o:u:l<u?l:u,_=h<p?h<g?h:g:p<g?p:g,S=o>l?o>u?o:u:l>u?l:u,x=h>p?h>g?h:g:p>g?p:g,w=GR(y,_,e,t,i),T=GR(S,x,e,t,i);let M=n.prevZ,C=n.nextZ;for(;M&&M.z>=w&&C&&C.z<=T;){if(M.x>=y&&M.x<=S&&M.y>=_&&M.y<=x&&M!==r&&M!==s&&ag(o,h,l,p,u,g,M.x,M.y)&&Zi(M.prev,M,M.next)>=0||(M=M.prevZ,C.x>=y&&C.x<=S&&C.y>=_&&C.y<=x&&C!==r&&C!==s&&ag(o,h,l,p,u,g,C.x,C.y)&&Zi(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;M&&M.z>=w;){if(M.x>=y&&M.x<=S&&M.y>=_&&M.y<=x&&M!==r&&M!==s&&ag(o,h,l,p,u,g,M.x,M.y)&&Zi(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;C&&C.z<=T;){if(C.x>=y&&C.x<=S&&C.y>=_&&C.y<=x&&C!==r&&C!==s&&ag(o,h,l,p,u,g,C.x,C.y)&&Zi(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function z7(n,e,t){let i=n;do{const r=i.prev,a=i.next.next;!yE(r,a)&&vH(r,i,i.next,a)&&_0(r,a)&&_0(a,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(a.i/t|0),b0(i),b0(i.next),i=n=a),i=i.next}while(i!==n);return sp(i)}function k7(n,e,t,i,r,a){let s=n;do{let o=s.next.next;for(;o!==s.prev;){if(s.i!==o.i&&$7(s,o)){let l=yH(s,o);s=sp(s,s.next),l=sp(l,l.next),y0(s,e,t,i,r,a,0),y0(l,e,t,i,r,a,0);return}o=o.next}s=s.next}while(s!==n)}function F7(n,e,t,i){const r=[];let a,s,o,l,u;for(a=0,s=e.length;a<s;a++)o=e[a]*i,l=a<s-1?e[a+1]*i:n.length,u=gH(n,o,l,i,!1),u===u.next&&(u.steiner=!0),r.push(Y7(u));for(r.sort(H7),a=0;a<r.length;a++)t=V7(r[a],t);return t}function H7(n,e){return n.x-e.x}function V7(n,e){const t=G7(n,e);if(!t)return e;const i=yH(t,n);return sp(i,i.next),sp(t,t.next)}function G7(n,e){let t=e,i=-1/0,r;const a=n.x,s=n.y;do{if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const g=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(g<=a&&g>i&&(i=g,r=t.x<t.next.x?t:t.next,g===a))return r}t=t.next}while(t!==e);if(!r)return null;const o=r,l=r.x,u=r.y;let h=1/0,p;t=r;do a>=t.x&&t.x>=l&&a!==t.x&&ag(s<u?a:i,s,l,u,s<u?i:a,s,t.x,t.y)&&(p=Math.abs(s-t.y)/(a-t.x),_0(t,n)&&(p<h||p===h&&(t.x>r.x||t.x===r.x&&j7(r,t)))&&(r=t,h=p)),t=t.next;while(t!==o);return r}function j7(n,e){return Zi(n.prev,n,e.prev)<0&&Zi(e.next,n,n.next)<0}function q7(n,e,t,i){let r=n;do r.z===0&&(r.z=GR(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,W7(r)}function W7(n){let e,t,i,r,a,s,o,l,u=1;do{for(t=n,n=null,a=null,s=0;t;){for(s++,i=t,o=0,e=0;e<u&&(o++,i=i.nextZ,!!i);e++);for(l=u;o>0||l>0&&i;)o!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,o--):(r=i,i=i.nextZ,l--),a?a.nextZ=r:n=r,r.prevZ=a,a=r;t=i}a.nextZ=null,u*=2}while(s>1);return n}function GR(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Y7(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function ag(n,e,t,i,r,a,s,o){return(r-s)*(e-o)>=(n-s)*(a-o)&&(n-s)*(i-o)>=(t-s)*(e-o)&&(t-s)*(a-o)>=(r-s)*(i-o)}function $7(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!X7(n,e)&&(_0(n,e)&&_0(e,n)&&K7(n,e)&&(Zi(n.prev,n,e.prev)||Zi(n,e.prev,e))||yE(n,e)&&Zi(n.prev,n,n.next)>0&&Zi(e.prev,e,e.next)>0)}function Zi(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function yE(n,e){return n.x===e.x&&n.y===e.y}function vH(n,e,t,i){const r=OS(Zi(n,e,t)),a=OS(Zi(n,e,i)),s=OS(Zi(t,i,n)),o=OS(Zi(t,i,e));return!!(r!==a&&s!==o||r===0&&RS(n,t,e)||a===0&&RS(n,i,e)||s===0&&RS(t,n,i)||o===0&&RS(t,e,i))}function RS(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function OS(n){return n>0?1:n<0?-1:0}function X7(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&vH(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function _0(n,e){return Zi(n.prev,n,n.next)<0?Zi(n,e,n.next)>=0&&Zi(n,n.prev,e)>=0:Zi(n,e,n.prev)<0||Zi(n,n.next,e)<0}function K7(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,a=(n.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&r<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function yH(n,e){const t=new jR(n.i,n.x,n.y),i=new jR(e.i,e.x,e.y),r=n.next,a=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,a.next=i,i.prev=a,i}function $N(n,e,t,i){const r=new jR(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function b0(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function jR(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Z7(n,e,t,i){let r=0;for(let a=e,s=t-i;a<t;a+=i)r+=(n[s]-n[a])*(n[a+1]+n[s+1]),s=a;return r}class Vl{static area(e){const t=e.length;let i=0;for(let r=t-1,a=0;a<t;r=a++)i+=e[r].x*e[a].y-e[a].x*e[r].y;return i*.5}static isClockWise(e){return Vl.area(e)<0}static triangulateShape(e,t){const i=[],r=[],a=[];XN(e),KN(i,e);let s=e.length;t.forEach(XN);for(let l=0;l<t.length;l++)r.push(s),s+=t[l].length,KN(i,t[l]);const o=L7.triangulate(i,r);for(let l=0;l<o.length;l+=3)a.push(o.slice(l,l+3));return a}}function XN(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function KN(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class _E extends on{constructor(e=new $d([new st(.5,.5),new st(-.5,.5),new st(-.5,-.5),new st(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],a=[];for(let o=0,l=e.length;o<l;o++){const u=e[o];s(u)}this.setAttribute("position",new Ct(r,3)),this.setAttribute("uv",new Ct(a,2)),this.computeVertexNormals();function s(o){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,p=t.depth!==void 0?t.depth:1;let g=t.bevelEnabled!==void 0?t.bevelEnabled:!0,y=t.bevelThickness!==void 0?t.bevelThickness:.2,_=t.bevelSize!==void 0?t.bevelSize:y-.1,S=t.bevelOffset!==void 0?t.bevelOffset:0,x=t.bevelSegments!==void 0?t.bevelSegments:3;const w=t.extrudePath,T=t.UVGenerator!==void 0?t.UVGenerator:Q7;let M,C=!1,N,D,P,z;w&&(M=w.getSpacedPoints(h),C=!0,g=!1,N=w.computeFrenetFrames(h,!1),D=new le,P=new le,z=new le),g||(x=0,y=0,_=0,S=0);const I=o.extractPoints(u);let L=I.shape;const H=I.holes;if(!Vl.isClockWise(L)){L=L.reverse();for(let _e=0,Ae=H.length;_e<Ae;_e++){const te=H[_e];Vl.isClockWise(te)&&(H[_e]=te.reverse())}}const G=Vl.triangulateShape(L,H),K=L;for(let _e=0,Ae=H.length;_e<Ae;_e++){const te=H[_e];L=L.concat(te)}function ee(_e,Ae,te){return Ae||console.error("THREE.ExtrudeGeometry: vec does not exist"),_e.clone().addScaledVector(Ae,te)}const Y=L.length,re=G.length;function J(_e,Ae,te){let ke,De,Ie;const Te=_e.x-Ae.x,Xe=_e.y-Ae.y,Pe=te.x-_e.x,$=te.y-_e.y,W=Te*Te+Xe*Xe,ae=Te*$-Xe*Pe;if(Math.abs(ae)>Number.EPSILON){const he=Math.sqrt(W),Se=Math.sqrt(Pe*Pe+$*$),Oe=Ae.x-Xe/he,je=Ae.y+Te/he,Ge=te.x-$/Se,Ke=te.y+Pe/Se,_t=((Ge-Oe)*$-(Ke-je)*Pe)/(Te*$-Xe*Pe);ke=Oe+Te*_t-_e.x,De=je+Xe*_t-_e.y;const Ye=ke*ke+De*De;if(Ye<=2)return new st(ke,De);Ie=Math.sqrt(Ye/2)}else{let he=!1;Te>Number.EPSILON?Pe>Number.EPSILON&&(he=!0):Te<-Number.EPSILON?Pe<-Number.EPSILON&&(he=!0):Math.sign(Xe)===Math.sign($)&&(he=!0),he?(ke=-Xe,De=Te,Ie=Math.sqrt(W)):(ke=Te,De=Xe,Ie=Math.sqrt(W/2))}return new st(ke/Ie,De/Ie)}const se=[];for(let _e=0,Ae=K.length,te=Ae-1,ke=_e+1;_e<Ae;_e++,te++,ke++)te===Ae&&(te=0),ke===Ae&&(ke=0),se[_e]=J(K[_e],K[te],K[ke]);const q=[];let X,oe=se.concat();for(let _e=0,Ae=H.length;_e<Ae;_e++){const te=H[_e];X=[];for(let ke=0,De=te.length,Ie=De-1,Te=ke+1;ke<De;ke++,Ie++,Te++)Ie===De&&(Ie=0),Te===De&&(Te=0),X[ke]=J(te[ke],te[Ie],te[Te]);q.push(X),oe=oe.concat(X)}for(let _e=0;_e<x;_e++){const Ae=_e/x,te=y*Math.cos(Ae*Math.PI/2),ke=_*Math.sin(Ae*Math.PI/2)+S;for(let De=0,Ie=K.length;De<Ie;De++){const Te=ee(K[De],se[De],ke);de(Te.x,Te.y,-te)}for(let De=0,Ie=H.length;De<Ie;De++){const Te=H[De];X=q[De];for(let Xe=0,Pe=Te.length;Xe<Pe;Xe++){const $=ee(Te[Xe],X[Xe],ke);de($.x,$.y,-te)}}}const ue=_+S;for(let _e=0;_e<Y;_e++){const Ae=g?ee(L[_e],oe[_e],ue):L[_e];C?(P.copy(N.normals[0]).multiplyScalar(Ae.x),D.copy(N.binormals[0]).multiplyScalar(Ae.y),z.copy(M[0]).add(P).add(D),de(z.x,z.y,z.z)):de(Ae.x,Ae.y,0)}for(let _e=1;_e<=h;_e++)for(let Ae=0;Ae<Y;Ae++){const te=g?ee(L[Ae],oe[Ae],ue):L[Ae];C?(P.copy(N.normals[_e]).multiplyScalar(te.x),D.copy(N.binormals[_e]).multiplyScalar(te.y),z.copy(M[_e]).add(P).add(D),de(z.x,z.y,z.z)):de(te.x,te.y,p/h*_e)}for(let _e=x-1;_e>=0;_e--){const Ae=_e/x,te=y*Math.cos(Ae*Math.PI/2),ke=_*Math.sin(Ae*Math.PI/2)+S;for(let De=0,Ie=K.length;De<Ie;De++){const Te=ee(K[De],se[De],ke);de(Te.x,Te.y,p+te)}for(let De=0,Ie=H.length;De<Ie;De++){const Te=H[De];X=q[De];for(let Xe=0,Pe=Te.length;Xe<Pe;Xe++){const $=ee(Te[Xe],X[Xe],ke);C?de($.x,$.y+M[h-1].y,M[h-1].x+te):de($.x,$.y,p+te)}}}Z(),ce();function Z(){const _e=r.length/3;if(g){let Ae=0,te=Y*Ae;for(let ke=0;ke<re;ke++){const De=G[ke];ve(De[2]+te,De[1]+te,De[0]+te)}Ae=h+x*2,te=Y*Ae;for(let ke=0;ke<re;ke++){const De=G[ke];ve(De[0]+te,De[1]+te,De[2]+te)}}else{for(let Ae=0;Ae<re;Ae++){const te=G[Ae];ve(te[2],te[1],te[0])}for(let Ae=0;Ae<re;Ae++){const te=G[Ae];ve(te[0]+Y*h,te[1]+Y*h,te[2]+Y*h)}}i.addGroup(_e,r.length/3-_e,0)}function ce(){const _e=r.length/3;let Ae=0;me(K,Ae),Ae+=K.length;for(let te=0,ke=H.length;te<ke;te++){const De=H[te];me(De,Ae),Ae+=De.length}i.addGroup(_e,r.length/3-_e,1)}function me(_e,Ae){let te=_e.length;for(;--te>=0;){const ke=te;let De=te-1;De<0&&(De=_e.length-1);for(let Ie=0,Te=h+x*2;Ie<Te;Ie++){const Xe=Y*Ie,Pe=Y*(Ie+1),$=Ae+ke+Xe,W=Ae+De+Xe,ae=Ae+De+Pe,he=Ae+ke+Pe;We($,W,ae,he)}}}function de(_e,Ae,te){l.push(_e),l.push(Ae),l.push(te)}function ve(_e,Ae,te){ze(_e),ze(Ae),ze(te);const ke=r.length/3,De=T.generateTopUV(i,r,ke-3,ke-2,ke-1);qe(De[0]),qe(De[1]),qe(De[2])}function We(_e,Ae,te,ke){ze(_e),ze(Ae),ze(ke),ze(Ae),ze(te),ze(ke);const De=r.length/3,Ie=T.generateSideWallUV(i,r,De-6,De-3,De-2,De-1);qe(Ie[0]),qe(Ie[1]),qe(Ie[3]),qe(Ie[1]),qe(Ie[2]),qe(Ie[3])}function ze(_e){r.push(l[_e*3+0]),r.push(l[_e*3+1]),r.push(l[_e*3+2])}function qe(_e){a.push(_e.x),a.push(_e.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return J7(t,i,e)}static fromJSON(e,t){const i=[];for(let a=0,s=e.shapes.length;a<s;a++){const o=t[e.shapes[a]];i.push(o)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new g1[r.type]().fromJSON(r)),new _E(i,e.options)}}const Q7={generateTopUV:function(n,e,t,i,r){const a=e[t*3],s=e[t*3+1],o=e[i*3],l=e[i*3+1],u=e[r*3],h=e[r*3+1];return[new st(a,s),new st(o,l),new st(u,h)]},generateSideWallUV:function(n,e,t,i,r,a){const s=e[t*3],o=e[t*3+1],l=e[t*3+2],u=e[i*3],h=e[i*3+1],p=e[i*3+2],g=e[r*3],y=e[r*3+1],_=e[r*3+2],S=e[a*3],x=e[a*3+1],w=e[a*3+2];return Math.abs(o-h)<Math.abs(s-u)?[new st(s,1-l),new st(u,1-p),new st(g,1-_),new st(S,1-w)]:[new st(o,1-l),new st(h,1-p),new st(y,1-_),new st(x,1-w)]}};function J7(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const a=n[i];t.shapes.push(a.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class bE extends wh{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new bE(e.radius,e.detail)}}class n_ extends wh{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new n_(e.radius,e.detail)}}class lf extends on{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const a=e/2,s=t/2,o=Math.floor(i),l=Math.floor(r),u=o+1,h=l+1,p=e/o,g=t/l,y=[],_=[],S=[],x=[];for(let w=0;w<h;w++){const T=w*g-s;for(let M=0;M<u;M++){const C=M*p-a;_.push(C,-T,0),S.push(0,0,1),x.push(M/o),x.push(1-w/l)}}for(let w=0;w<l;w++)for(let T=0;T<o;T++){const M=T+u*w,C=T+u*(w+1),N=T+1+u*(w+1),D=T+1+u*w;y.push(M,C,D),y.push(C,N,D)}this.setIndex(y),this.setAttribute("position",new Ct(_,3)),this.setAttribute("normal",new Ct(S,3)),this.setAttribute("uv",new Ct(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lf(e.width,e.height,e.widthSegments,e.heightSegments)}}class SE extends on{constructor(e=.5,t=1,i=32,r=1,a=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:a,thetaLength:s},i=Math.max(3,i),r=Math.max(1,r);const o=[],l=[],u=[],h=[];let p=e;const g=(t-e)/r,y=new le,_=new st;for(let S=0;S<=r;S++){for(let x=0;x<=i;x++){const w=a+x/i*s;y.x=p*Math.cos(w),y.y=p*Math.sin(w),l.push(y.x,y.y,y.z),u.push(0,0,1),_.x=(y.x/t+1)/2,_.y=(y.y/t+1)/2,h.push(_.x,_.y)}p+=g}for(let S=0;S<r;S++){const x=S*(i+1);for(let w=0;w<i;w++){const T=w+x,M=T,C=T+i+1,N=T+i+2,D=T+1;o.push(M,C,D),o.push(C,N,D)}}this.setIndex(o),this.setAttribute("position",new Ct(l,3)),this.setAttribute("normal",new Ct(u,3)),this.setAttribute("uv",new Ct(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new SE(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class xE extends on{constructor(e=new $d([new st(0,.5),new st(-.5,-.5),new st(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],a=[],s=[];let o=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let h=0;h<e.length;h++)u(e[h]),this.addGroup(o,l,h),o+=l,l=0;this.setIndex(i),this.setAttribute("position",new Ct(r,3)),this.setAttribute("normal",new Ct(a,3)),this.setAttribute("uv",new Ct(s,2));function u(h){const p=r.length/3,g=h.extractPoints(t);let y=g.shape;const _=g.holes;Vl.isClockWise(y)===!1&&(y=y.reverse());for(let x=0,w=_.length;x<w;x++){const T=_[x];Vl.isClockWise(T)===!0&&(_[x]=T.reverse())}const S=Vl.triangulateShape(y,_);for(let x=0,w=_.length;x<w;x++){const T=_[x];y=y.concat(T)}for(let x=0,w=y.length;x<w;x++){const T=y[x];r.push(T.x,T.y,0),a.push(0,0,1),s.push(T.x,T.y)}for(let x=0,w=S.length;x<w;x++){const T=S[x],M=T[0]+p,C=T[1]+p,N=T[2]+p;i.push(M,C,N),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return e9(t,e)}static fromJSON(e,t){const i=[];for(let r=0,a=e.shapes.length;r<a;r++){const s=t[e.shapes[r]];i.push(s)}return new xE(i,e.curveSegments)}}function e9(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class i_ extends on{constructor(e=1,t=32,i=16,r=0,a=Math.PI*2,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:a,thetaStart:s,thetaLength:o},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(s+o,Math.PI);let u=0;const h=[],p=new le,g=new le,y=[],_=[],S=[],x=[];for(let w=0;w<=i;w++){const T=[],M=w/i;let C=0;w===0&&s===0?C=.5/t:w===i&&l===Math.PI&&(C=-.5/t);for(let N=0;N<=t;N++){const D=N/t;p.x=-e*Math.cos(r+D*a)*Math.sin(s+M*o),p.y=e*Math.cos(s+M*o),p.z=e*Math.sin(r+D*a)*Math.sin(s+M*o),_.push(p.x,p.y,p.z),g.copy(p).normalize(),S.push(g.x,g.y,g.z),x.push(D+C,1-M),T.push(u++)}h.push(T)}for(let w=0;w<i;w++)for(let T=0;T<t;T++){const M=h[w][T+1],C=h[w][T],N=h[w+1][T],D=h[w+1][T+1];(w!==0||s>0)&&y.push(M,C,D),(w!==i-1||l<Math.PI)&&y.push(C,N,D)}this.setIndex(y),this.setAttribute("position",new Ct(_,3)),this.setAttribute("normal",new Ct(S,3)),this.setAttribute("uv",new Ct(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class EE extends wh{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new EE(e.radius,e.detail)}}class wE extends on{constructor(e=1,t=.4,i=12,r=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:a},i=Math.floor(i),r=Math.floor(r);const s=[],o=[],l=[],u=[],h=new le,p=new le,g=new le;for(let y=0;y<=i;y++)for(let _=0;_<=r;_++){const S=_/r*a,x=y/i*Math.PI*2;p.x=(e+t*Math.cos(x))*Math.cos(S),p.y=(e+t*Math.cos(x))*Math.sin(S),p.z=t*Math.sin(x),o.push(p.x,p.y,p.z),h.x=e*Math.cos(S),h.y=e*Math.sin(S),g.subVectors(p,h).normalize(),l.push(g.x,g.y,g.z),u.push(_/r),u.push(y/i)}for(let y=1;y<=i;y++)for(let _=1;_<=r;_++){const S=(r+1)*y+_-1,x=(r+1)*(y-1)+_-1,w=(r+1)*(y-1)+_,T=(r+1)*y+_;s.push(S,x,T),s.push(x,w,T)}this.setIndex(s),this.setAttribute("position",new Ct(o,3)),this.setAttribute("normal",new Ct(l,3)),this.setAttribute("uv",new Ct(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wE(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class TE extends on{constructor(e=1,t=.4,i=64,r=8,a=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:a,q:s},i=Math.floor(i),r=Math.floor(r);const o=[],l=[],u=[],h=[],p=new le,g=new le,y=new le,_=new le,S=new le,x=new le,w=new le;for(let M=0;M<=i;++M){const C=M/i*a*Math.PI*2;T(C,a,s,e,y),T(C+.01,a,s,e,_),x.subVectors(_,y),w.addVectors(_,y),S.crossVectors(x,w),w.crossVectors(S,x),S.normalize(),w.normalize();for(let N=0;N<=r;++N){const D=N/r*Math.PI*2,P=-t*Math.cos(D),z=t*Math.sin(D);p.x=y.x+(P*w.x+z*S.x),p.y=y.y+(P*w.y+z*S.y),p.z=y.z+(P*w.z+z*S.z),l.push(p.x,p.y,p.z),g.subVectors(p,y).normalize(),u.push(g.x,g.y,g.z),h.push(M/i),h.push(N/r)}}for(let M=1;M<=i;M++)for(let C=1;C<=r;C++){const N=(r+1)*(M-1)+(C-1),D=(r+1)*M+(C-1),P=(r+1)*M+C,z=(r+1)*(M-1)+C;o.push(N,D,z),o.push(D,P,z)}this.setIndex(o),this.setAttribute("position",new Ct(l,3)),this.setAttribute("normal",new Ct(u,3)),this.setAttribute("uv",new Ct(h,2));function T(M,C,N,D,P){const z=Math.cos(M),I=Math.sin(M),L=N/C*M,H=Math.cos(L);P.x=D*(2+H)*.5*z,P.y=D*(2+H)*I*.5,P.z=D*Math.sin(L)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new TE(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class ME extends on{constructor(e=new RD(new le(-1,-1,0),new le(-1,1,0),new le(1,1,0)),t=64,i=1,r=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:a};const s=e.computeFrenetFrames(t,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const o=new le,l=new le,u=new st;let h=new le;const p=[],g=[],y=[],_=[];S(),this.setIndex(_),this.setAttribute("position",new Ct(p,3)),this.setAttribute("normal",new Ct(g,3)),this.setAttribute("uv",new Ct(y,2));function S(){for(let M=0;M<t;M++)x(M);x(a===!1?t:0),T(),w()}function x(M){h=e.getPointAt(M/t,h);const C=s.normals[M],N=s.binormals[M];for(let D=0;D<=r;D++){const P=D/r*Math.PI*2,z=Math.sin(P),I=-Math.cos(P);l.x=I*C.x+z*N.x,l.y=I*C.y+z*N.y,l.z=I*C.z+z*N.z,l.normalize(),g.push(l.x,l.y,l.z),o.x=h.x+i*l.x,o.y=h.y+i*l.y,o.z=h.z+i*l.z,p.push(o.x,o.y,o.z)}}function w(){for(let M=1;M<=t;M++)for(let C=1;C<=r;C++){const N=(r+1)*(M-1)+(C-1),D=(r+1)*M+(C-1),P=(r+1)*M+C,z=(r+1)*(M-1)+C;_.push(N,D,z),_.push(D,P,z)}}function T(){for(let M=0;M<=t;M++)for(let C=0;C<=r;C++)u.x=M/t,u.y=C/r,y.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new ME(new g1[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class _H extends on{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new le,a=new le;if(e.index!==null){const s=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let u=0,h=l.length;u<h;++u){const p=l[u],g=p.start,y=p.count;for(let _=g,S=g+y;_<S;_+=3)for(let x=0;x<3;x++){const w=o.getX(_+x),T=o.getX(_+(x+1)%3);r.fromBufferAttribute(s,w),a.fromBufferAttribute(s,T),ZN(r,a,i)===!0&&(t.push(r.x,r.y,r.z),t.push(a.x,a.y,a.z))}}}else{const s=e.attributes.position;for(let o=0,l=s.count/3;o<l;o++)for(let u=0;u<3;u++){const h=3*o+u,p=3*o+(u+1)%3;r.fromBufferAttribute(s,h),a.fromBufferAttribute(s,p),ZN(r,a,i)===!0&&(t.push(r.x,r.y,r.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new Ct(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function ZN(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var QN=Object.freeze({__proto__:null,BoxGeometry:_p,CapsuleGeometry:pE,CircleGeometry:mE,ConeGeometry:gE,CylinderGeometry:zg,DodecahedronGeometry:vE,EdgesGeometry:mH,ExtrudeGeometry:_E,IcosahedronGeometry:bE,LatheGeometry:t_,OctahedronGeometry:n_,PlaneGeometry:lf,PolyhedronGeometry:wh,RingGeometry:SE,ShapeGeometry:xE,SphereGeometry:i_,TetrahedronGeometry:EE,TorusGeometry:wE,TorusKnotGeometry:TE,TubeGeometry:ME,WireframeGeometry:_H});class bH extends Fa{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new yt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class SH extends jl{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class DD extends Fa{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new yt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Eh,this.normalScale=new st(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Cr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class xH extends DD{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new st(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return sn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new yt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new yt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new yt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class sg extends Fa{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new yt(16777215),this.specular=new yt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Eh,this.normalScale=new st(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Cr,this.combine=X0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class EH extends Fa{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new yt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Eh,this.normalScale=new st(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class wH extends Fa{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Eh,this.normalScale=new st(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class UD extends Fa{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new yt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Eh,this.normalScale=new st(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Cr,this.combine=X0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class AE extends Fa{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=F5,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class CE extends Fa{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class TH extends Fa{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new yt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Eh,this.normalScale=new st(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class MH extends Ha{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Vd(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function AH(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function CH(n){function e(r,a){return n[r]-n[a]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function qR(n,e,t){const i=n.length,r=new n.constructor(i);for(let a=0,s=0;s!==i;++a){const o=t[a]*e;for(let l=0;l!==e;++l)r[s++]=n[o+l]}return r}function ND(n,e,t,i){let r=1,a=n[0];for(;a!==void 0&&a[i]===void 0;)a=n[r++];if(a===void 0)return;let s=a[i];if(s!==void 0)if(Array.isArray(s))do s=a[i],s!==void 0&&(e.push(a.time),t.push(...s)),a=n[r++];while(a!==void 0);else if(s.toArray!==void 0)do s=a[i],s!==void 0&&(e.push(a.time),s.toArray(t,t.length)),a=n[r++];while(a!==void 0);else do s=a[i],s!==void 0&&(e.push(a.time),t.push(s)),a=n[r++];while(a!==void 0)}function t9(n,e,t,i,r=30){const a=n.clone();a.name=e;const s=[];for(let l=0;l<a.tracks.length;++l){const u=a.tracks[l],h=u.getValueSize(),p=[],g=[];for(let y=0;y<u.times.length;++y){const _=u.times[y]*r;if(!(_<t||_>=i)){p.push(u.times[y]);for(let S=0;S<h;++S)g.push(u.values[y*h+S])}}p.length!==0&&(u.times=Vd(p,u.times.constructor),u.values=Vd(g,u.values.constructor),s.push(u))}a.tracks=s;let o=1/0;for(let l=0;l<a.tracks.length;++l)o>a.tracks[l].times[0]&&(o=a.tracks[l].times[0]);for(let l=0;l<a.tracks.length;++l)a.tracks[l].shift(-1*o);return a.resetDuration(),a}function n9(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,a=e/i;for(let s=0;s<r;++s){const o=t.tracks[s],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(w){return w.name===o.name&&w.ValueTypeName===l});if(u===void 0)continue;let h=0;const p=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=p/3);let g=0;const y=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=y/3);const _=o.times.length-1;let S;if(a<=o.times[0]){const w=h,T=p-h;S=o.values.slice(w,T)}else if(a>=o.times[_]){const w=_*p+h,T=w+p-h;S=o.values.slice(w,T)}else{const w=o.createInterpolant(),T=h,M=p-h;w.evaluate(a),S=w.resultBuffer.slice(T,M)}l==="quaternion"&&new Ki().fromArray(S).normalize().conjugate().toArray(S);const x=u.times.length;for(let w=0;w<x;++w){const T=w*y+g;if(l==="quaternion")Ki.multiplyQuaternionsFlat(u.values,T,S,0,u.values,T);else{const M=y-g*2;for(let C=0;C<M;++C)u.values[T+C]-=S[C]}}}return n.blendMode=pD,n}const i9={convertArray:Vd,isTypedArray:AH,getKeyframeOrder:CH,sortedArray:qR,flattenJSON:ND,subclip:t9,makeClipAdditive:n9};class r_{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],a=t[i-1];e:{t:{let s;n:{i:if(!(e<r)){for(let o=i+2;;){if(r===void 0){if(e<a)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(a=r,r=t[++i],e<r)break t}s=t.length;break n}if(!(e>=a)){const o=t[1];e<o&&(i=2,a=o);for(let l=i-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=a,a=t[--i-1],e>=a)break t}s=i,i=0;break n}break e}for(;i<s;){const o=i+s>>>1;e<t[o]?s=o:i=o+1}if(r=t[i],a=t[i-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,a,r)}return this.interpolate_(i,a,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,a=e*r;for(let s=0;s!==r;++s)t[s]=i[a+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class RH extends r_{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Fd,endingEnd:Fd}}intervalChanged_(e,t,i){const r=this.parameterPositions;let a=e-2,s=e+1,o=r[a],l=r[s];if(o===void 0)switch(this.getSettings_().endingStart){case Hd:a=e,o=2*t-i;break;case f0:a=r.length-2,o=t+r[a]-r[a+1];break;default:a=e,o=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Hd:s=e,l=2*i-t;break;case f0:s=1,l=i+r[1]-r[0];break;default:s=e-1,l=t}const u=(i-t)*.5,h=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(l-i),this._offsetPrev=a*h,this._offsetNext=s*h}interpolate_(e,t,i,r){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,h=this._offsetPrev,p=this._offsetNext,g=this._weightPrev,y=this._weightNext,_=(i-t)/(r-t),S=_*_,x=S*_,w=-g*x+2*g*S-g*_,T=(1+g)*x+(-1.5-2*g)*S+(-.5+g)*_+1,M=(-1-y)*x+(1.5+y)*S+.5*_,C=y*x-y*S;for(let N=0;N!==o;++N)a[N]=w*s[h+N]+T*s[u+N]+M*s[l+N]+C*s[p+N];return a}}class PD extends r_{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,h=(i-t)/(r-t),p=1-h;for(let g=0;g!==o;++g)a[g]=s[u+g]*p+s[l+g]*h;return a}}class OH extends r_{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Xl{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Vd(t,this.TimeBufferType),this.values=Vd(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Vd(e.times,Array),values:Vd(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new OH(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new PD(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new RH(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case u0:t=this.InterpolantFactoryMethodDiscrete;break;case d1:t=this.InterpolantFactoryMethodLinear;break;case hx:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return u0;case this.InterpolantFactoryMethodLinear:return d1;case this.InterpolantFactoryMethodSmooth:return hx}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let a=0,s=r-1;for(;a!==r&&i[a]<e;)++a;for(;s!==-1&&i[s]>t;)--s;if(++s,a!==0||s!==r){a>=s&&(s=Math.max(s,1),a=s-1);const o=this.getValueSize();this.times=i.slice(a,s),this.values=this.values.slice(a*o,s*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,a=i.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let o=0;o!==a;o++){const l=i[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,s),e=!1;break}s=l}if(r!==void 0&&AH(r))for(let o=0,l=r.length;o!==l;++o){const u=r[o];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===hx,a=e.length-1;let s=1;for(let o=1;o<a;++o){let l=!1;const u=e[o],h=e[o+1];if(u!==h&&(o!==1||u!==e[0]))if(r)l=!0;else{const p=o*i,g=p-i,y=p+i;for(let _=0;_!==i;++_){const S=t[p+_];if(S!==t[g+_]||S!==t[y+_]){l=!0;break}}}if(l){if(o!==s){e[s]=e[o];const p=o*i,g=s*i;for(let y=0;y!==i;++y)t[g+y]=t[p+y]}++s}}if(a>0){e[s]=e[a];for(let o=a*i,l=s*i,u=0;u!==i;++u)t[l+u]=t[o+u];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Xl.prototype.TimeBufferType=Float32Array;Xl.prototype.ValueBufferType=Float32Array;Xl.prototype.DefaultInterpolation=d1;class bp extends Xl{constructor(e,t,i){super(e,t,i)}}bp.prototype.ValueTypeName="bool";bp.prototype.ValueBufferType=Array;bp.prototype.DefaultInterpolation=u0;bp.prototype.InterpolantFactoryMethodLinear=void 0;bp.prototype.InterpolantFactoryMethodSmooth=void 0;class LD extends Xl{}LD.prototype.ValueTypeName="color";class bg extends Xl{}bg.prototype.ValueTypeName="number";class DH extends r_{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=(i-t)/(r-t);let u=e*o;for(let h=u+o;u!==h;u+=4)Ki.slerpFlat(a,0,s,u-o,s,u,l);return a}}class op extends Xl{InterpolantFactoryMethodLinear(e){return new DH(this.times,this.values,this.getValueSize(),e)}}op.prototype.ValueTypeName="quaternion";op.prototype.InterpolantFactoryMethodSmooth=void 0;class Sp extends Xl{constructor(e,t,i){super(e,t,i)}}Sp.prototype.ValueTypeName="string";Sp.prototype.ValueBufferType=Array;Sp.prototype.DefaultInterpolation=u0;Sp.prototype.InterpolantFactoryMethodLinear=void 0;Sp.prototype.InterpolantFactoryMethodSmooth=void 0;class Sg extends Xl{}Sg.prototype.ValueTypeName="vector";class xg{constructor(e="",t=-1,i=[],r=rE){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=po(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let s=0,o=i.length;s!==o;++s)t.push(a9(i[s]).scale(r));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,s=i.length;a!==s;++a)t.push(Xl.toJSON(i[a]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const a=t.length,s=[];for(let o=0;o<a;o++){let l=[],u=[];l.push((o+a-1)%a,o,(o+1)%a),u.push(0,1,0);const h=CH(l);l=qR(l,1,h),u=qR(u,1,h),!r&&l[0]===0&&(l.push(a),u.push(u[0])),s.push(new bg(".morphTargetInfluences["+t[o].name+"]",l,u).scale(1/i))}return new this(e,-1,s)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},a=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const u=e[o],h=u.name.match(a);if(h&&h.length>1){const p=h[1];let g=r[p];g||(r[p]=g=[]),g.push(u)}}const s=[];for(const o in r)s.push(this.CreateFromMorphTargetSequence(o,r[o],t,i));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(p,g,y,_,S){if(y.length!==0){const x=[],w=[];ND(y,x,w,_),x.length!==0&&S.push(new p(g,x,w))}},r=[],a=e.name||"default",s=e.fps||30,o=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let p=0;p<u.length;p++){const g=u[p].keys;if(!(!g||g.length===0))if(g[0].morphTargets){const y={};let _;for(_=0;_<g.length;_++)if(g[_].morphTargets)for(let S=0;S<g[_].morphTargets.length;S++)y[g[_].morphTargets[S]]=-1;for(const S in y){const x=[],w=[];for(let T=0;T!==g[_].morphTargets.length;++T){const M=g[_];x.push(M.time),w.push(M.morphTarget===S?1:0)}r.push(new bg(".morphTargetInfluence["+S+"]",x,w))}l=y.length*s}else{const y=".bones["+t[p].name+"]";i(Sg,y+".position",g,"pos",r),i(op,y+".quaternion",g,"rot",r),i(Sg,y+".scale",g,"scl",r)}}return r.length===0?null:new this(a,l,r,o)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const a=this.tracks[i];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function r9(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return bg;case"vector":case"vector2":case"vector3":case"vector4":return Sg;case"color":return LD;case"quaternion":return op;case"bool":case"boolean":return bp;case"string":return Sp}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function a9(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=r9(n.type);if(n.times===void 0){const t=[],i=[];ND(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Yu={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class ID{constructor(e,t,i){const r=this;let a=!1,s=0,o=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(h){o++,a===!1&&r.onStart!==void 0&&r.onStart(h,s,o),a=!0},this.itemEnd=function(h){s++,r.onProgress!==void 0&&r.onProgress(h,s,o),s===o&&(a=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,p){return u.push(h,p),this},this.removeHandler=function(h){const p=u.indexOf(h);return p!==-1&&u.splice(p,2),this},this.getHandler=function(h){for(let p=0,g=u.length;p<g;p+=2){const y=u[p],_=u[p+1];if(y.global&&(y.lastIndex=0),y.test(h))return _}return null}}}const UH=new ID;class ia{constructor(e){this.manager=e!==void 0?e:UH,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,a){i.load(e,r,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ia.DEFAULT_MATERIAL_NAME="__DEFAULT";const ku={};class s9 extends Error{constructor(e,t){super(e),this.response=t}}class ql extends ia{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=Yu.get(e);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(ku[e]!==void 0){ku[e].push({onLoad:t,onProgress:i,onError:r});return}ku[e]=[],ku[e].push({onLoad:t,onProgress:i,onError:r});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(s).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const h=ku[e],p=u.body.getReader(),g=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),y=g?parseInt(g):0,_=y!==0;let S=0;const x=new ReadableStream({start(w){T();function T(){p.read().then(({done:M,value:C})=>{if(M)w.close();else{S+=C.byteLength;const N=new ProgressEvent("progress",{lengthComputable:_,loaded:S,total:y});for(let D=0,P=h.length;D<P;D++){const z=h[D];z.onProgress&&z.onProgress(N)}w.enqueue(C),T()}},M=>{w.error(M)})}}});return new Response(x)}else throw new s9(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(h=>new DOMParser().parseFromString(h,o));case"json":return u.json();default:if(o===void 0)return u.text();{const p=/charset="?([^;"\s]*)"?/i.exec(o),g=p&&p[1]?p[1].toLowerCase():void 0,y=new TextDecoder(g);return u.arrayBuffer().then(_=>y.decode(_))}}}).then(u=>{Yu.add(e,u);const h=ku[e];delete ku[e];for(let p=0,g=h.length;p<g;p++){const y=h[p];y.onLoad&&y.onLoad(u)}}).catch(u=>{const h=ku[e];if(h===void 0)throw this.manager.itemError(e),u;delete ku[e];for(let p=0,g=h.length;p<g;p++){const y=h[p];y.onError&&y.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class o9 extends ia{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new ql(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),a.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=xg.parse(e[i]);t.push(r)}return t}}class l9 extends ia{constructor(e){super(e)}load(e,t,i,r){const a=this,s=[],o=new hE,l=new ql(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(a.withCredentials);let u=0;function h(p){l.load(e[p],function(g){const y=a.parse(g,!0);s[p]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},u+=1,u===6&&(y.mipmapCount===1&&(o.minFilter=Sr),o.image=s,o.format=y.format,o.needsUpdate=!0,t&&t(o))},i,r)}if(Array.isArray(e))for(let p=0,g=e.length;p<g;++p)h(p);else l.load(e,function(p){const g=a.parse(p,!0);if(g.isCubemap){const y=g.mipmaps.length/g.mipmapCount;for(let _=0;_<y;_++){s[_]={mipmaps:[]};for(let S=0;S<g.mipmapCount;S++)s[_].mipmaps.push(g.mipmaps[_*g.mipmapCount+S]),s[_].format=g.format,s[_].width=g.width,s[_].height=g.height}o.image=s}else o.image.width=g.width,o.image.height=g.height,o.mipmaps=g.mipmaps;g.mipmapCount===1&&(o.minFilter=Sr),o.format=g.format,o.needsUpdate=!0,t&&t(o)},i,r);return o}}class S0 extends ia{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=Yu.get(e);if(s!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s;const o=m0("img");function l(){h(),Yu.add(e,this),t&&t(this),a.manager.itemEnd(e)}function u(p){h(),r&&r(p),a.manager.itemError(e),a.manager.itemEnd(e)}function h(){o.removeEventListener("load",l,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),a.manager.itemStart(e),o.src=e,o}}class c9 extends ia{constructor(e){super(e)}load(e,t,i,r){const a=new Q0;a.colorSpace=ni;const s=new S0(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function l(u){s.load(e[u],function(h){a.images[u]=h,o++,o===6&&(a.needsUpdate=!0,t&&t(a))},void 0,r)}for(let u=0;u<e.length;++u)l(u);return a}}class u9 extends ia{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new Gc,o=new ql(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(a.withCredentials),o.load(e,function(l){let u;try{u=a.parse(l)}catch(h){if(r!==void 0)r(h);else{console.error(h);return}}u.image!==void 0?s.image=u.image:u.data!==void 0&&(s.image.width=u.width,s.image.height=u.height,s.image.data=u.data),s.wrapS=u.wrapS!==void 0?u.wrapS:ks,s.wrapT=u.wrapT!==void 0?u.wrapT:ks,s.magFilter=u.magFilter!==void 0?u.magFilter:Sr,s.minFilter=u.minFilter!==void 0?u.minFilter:Sr,s.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(s.colorSpace=u.colorSpace),u.flipY!==void 0&&(s.flipY=u.flipY),u.format!==void 0&&(s.format=u.format),u.type!==void 0&&(s.type=u.type),u.mipmaps!==void 0&&(s.mipmaps=u.mipmaps,s.minFilter=Fc),u.mipmapCount===1&&(s.minFilter=Sr),u.generateMipmaps!==void 0&&(s.generateMipmaps=u.generateMipmaps),s.needsUpdate=!0,t&&t(s,u)},i,r),s}}class NH extends ia{constructor(e){super(e)}load(e,t,i,r){const a=new Pi,s=new S0(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(o){a.image=o,a.needsUpdate=!0,t!==void 0&&t(a)},i,r),a}}class Th extends On{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new yt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class PH extends Th{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(On.DEFAULT_UP),this.updateMatrix(),this.groundColor=new yt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const UT=new Mt,JN=new le,eP=new le;class BD{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new st(512,512),this.map=null,this.mapPass=null,this.matrix=new Mt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new e_,this._frameExtents=new st(1,1),this._viewportCount=1,this._viewports=[new yn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;JN.setFromMatrixPosition(e.matrixWorld),t.position.copy(JN),eP.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(eP),t.updateMatrixWorld(),UT.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(UT),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(UT)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class f9 extends BD{constructor(){super(new Ir(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=vg*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;(i!==t.fov||r!==t.aspect||a!==t.far)&&(t.fov=i,t.aspect=r,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class zD extends Th{constructor(e,t,i=0,r=Math.PI/3,a=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(On.DEFAULT_UP),this.updateMatrix(),this.target=new On,this.distance=i,this.angle=r,this.penumbra=a,this.decay=s,this.map=null,this.shadow=new f9}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const tP=new Mt,yy=new le,NT=new le;class h9 extends BD{constructor(){super(new Ir(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new st(4,2),this._viewportCount=6,this._viewports=[new yn(2,1,1,1),new yn(0,1,1,1),new yn(3,1,1,1),new yn(1,1,1,1),new yn(3,0,1,1),new yn(1,0,1,1)],this._cubeDirections=[new le(1,0,0),new le(-1,0,0),new le(0,0,1),new le(0,0,-1),new le(0,1,0),new le(0,-1,0)],this._cubeUps=[new le(0,1,0),new le(0,1,0),new le(0,1,0),new le(0,1,0),new le(0,0,1),new le(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,a=e.distance||i.far;a!==i.far&&(i.far=a,i.updateProjectionMatrix()),yy.setFromMatrixPosition(e.matrixWorld),i.position.copy(yy),NT.copy(i.position),NT.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(NT),i.updateMatrixWorld(),r.makeTranslation(-yy.x,-yy.y,-yy.z),tP.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(tP)}}class v1 extends Th{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new h9}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class a_ extends lE{constructor(e=-1,t=1,i=1,r=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let a=i-e,s=i+e,o=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=u*this.view.offsetX,s=a+u*this.view.width,o-=h*this.view.offsetY,l=o-h*this.view.height}this.projectionMatrix.makeOrthographic(a,s,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class d9 extends BD{constructor(){super(new a_(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class kD extends Th{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(On.DEFAULT_UP),this.updateMatrix(),this.target=new On,this.shadow=new d9}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class FD extends Th{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class LH extends Th{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class IH{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new le)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*r),t.addScaledVector(s[2],.488603*a),t.addScaledVector(s[3],.488603*i),t.addScaledVector(s[4],1.092548*(i*r)),t.addScaledVector(s[5],1.092548*(r*a)),t.addScaledVector(s[6],.315392*(3*a*a-1)),t.addScaledVector(s[7],1.092548*(i*a)),t.addScaledVector(s[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],2*.511664*r),t.addScaledVector(s[2],2*.511664*a),t.addScaledVector(s[3],2*.511664*i),t.addScaledVector(s[4],2*.429043*i*r),t.addScaledVector(s[5],2*.429043*r*a),t.addScaledVector(s[6],.743125*a*a-.247708),t.addScaledVector(s[7],2*.429043*i*a),t.addScaledVector(s[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,a=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*a,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*i*a,t[8]=.546274*(i*i-r*r)}}class BH extends Th{constructor(e=new IH,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class RE extends ia{constructor(e){super(e),this.textures={}}load(e,t,i,r){const a=this,s=new ql(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),a.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(a){return t[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),t[a]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new yt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const s=e.uniforms[a];switch(r.uniforms[a]={},s.type){case"t":r.uniforms[a].value=i(s.value);break;case"c":r.uniforms[a].value=new yt().setHex(s.value);break;case"v2":r.uniforms[a].value=new st().fromArray(s.value);break;case"v3":r.uniforms[a].value=new le().fromArray(s.value);break;case"v4":r.uniforms[a].value=new yn().fromArray(s.value);break;case"m3":r.uniforms[a].value=new rn().fromArray(s.value);break;case"m4":r.uniforms[a].value=new Mt().fromArray(s.value);break;default:r.uniforms[a].value=s.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)r.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),r.normalScale=new st().fromArray(a)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new st().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return RE.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:bH,SpriteMaterial:SD,RawShaderMaterial:SH,ShaderMaterial:jl,PointsMaterial:ED,MeshPhysicalMaterial:xH,MeshStandardMaterial:DD,MeshPhongMaterial:sg,MeshToonMaterial:EH,MeshNormalMaterial:wH,MeshLambertMaterial:UD,MeshDepthMaterial:AE,MeshDistanceMaterial:CE,MeshBasicMaterial:of,MeshMatcapMaterial:TH,LineDashedMaterial:MH,LineBasicMaterial:Ha,Material:Fa};return new t[e]}}class y1{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class HD extends on{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class zH extends ia{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new ql(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),a.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(y,_){if(t[_]!==void 0)return t[_];const x=y.interleavedBuffers[_],w=a(y,x.buffer),T=rg(x.type,w),M=new fE(T,x.stride);return M.uuid=x.uuid,t[_]=M,M}function a(y,_){if(i[_]!==void 0)return i[_];const x=y.arrayBuffers[_],w=new Uint32Array(x).buffer;return i[_]=w,w}const s=e.isInstancedBufferGeometry?new HD:new on,o=e.data.index;if(o!==void 0){const y=rg(o.type,o.array);s.setIndex(new oi(y,1))}const l=e.data.attributes;for(const y in l){const _=l[y];let S;if(_.isInterleavedBufferAttribute){const x=r(e.data,_.data);S=new rp(x,_.itemSize,_.offset,_.normalized)}else{const x=rg(_.type,_.array),w=_.isInstancedBufferAttribute?ap:oi;S=new w(x,_.itemSize,_.normalized)}_.name!==void 0&&(S.name=_.name),_.usage!==void 0&&S.setUsage(_.usage),s.setAttribute(y,S)}const u=e.data.morphAttributes;if(u)for(const y in u){const _=u[y],S=[];for(let x=0,w=_.length;x<w;x++){const T=_[x];let M;if(T.isInterleavedBufferAttribute){const C=r(e.data,T.data);M=new rp(C,T.itemSize,T.offset,T.normalized)}else{const C=rg(T.type,T.array);M=new oi(C,T.itemSize,T.normalized)}T.name!==void 0&&(M.name=T.name),S.push(M)}s.morphAttributes[y]=S}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let y=0,_=p.length;y!==_;++y){const S=p[y];s.addGroup(S.start,S.count,S.materialIndex)}const g=e.data.boundingSphere;if(g!==void 0){const y=new le;g.center!==void 0&&y.fromArray(g.center),s.boundingSphere=new na(y,g.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class p9 extends ia{constructor(e){super(e)}load(e,t,i,r){const a=this,s=this.path===""?y1.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new ql(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(p){r!==void 0&&r(p),console.error("THREE:ObjectLoader: Can't parse "+e+".",p.message);return}const h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}a.parse(u,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?y1.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const a=new ql(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const s=await a.loadAsync(e,t),o=JSON.parse(s),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(o)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,r),s=this.parseImages(e.images,function(){t!==void 0&&t(u)}),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,a,l,o,i),h=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,h),this.bindLightTargets(u),t!==void 0){let p=!1;for(const g in s)if(s[g].data instanceof HTMLImageElement){p=!0;break}p===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),a=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,r,o,s,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const a=new $d().fromJSON(e[i]);t[a.uuid]=a}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(a){a.isBone&&(r[a.uuid]=a)}),e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=new J0().fromJSON(e[a],r);i[o.uuid]=o}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new zH;for(let a=0,s=e.length;a<s;a++){let o;const l=e[a];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(l);break;default:l.type in QN?o=QN[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),l.userData!==void 0&&(o.userData=l.userData),i[l.uuid]=o}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const a=new RE;a.setTextures(t);for(let s=0,o=e.length;s<o;s++){const l=e[s];i[l.uuid]===void 0&&(i[l.uuid]=a.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],a=xg.parse(r);t[a.uuid]=a}return t}parseImages(e,t){const i=this,r={};let a;function s(l){return i.manager.itemStart(l),a.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const u=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:i.resourcePath+u;return s(h)}else return l.data?{data:rg(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new ID(t);a=new S0(l),a.setCrossOrigin(this.crossOrigin);for(let u=0,h=e.length;u<h;u++){const p=e[u],g=p.url;if(Array.isArray(g)){const y=[];for(let _=0,S=g.length;_<S;_++){const x=g[_],w=o(x);w!==null&&(w instanceof HTMLImageElement?y.push(w):y.push(new Gc(w.data,w.width,w.height)))}r[p.uuid]=new fh(y)}else{const y=o(p.url);r[p.uuid]=new fh(y)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function a(s){if(typeof s=="string"){const o=s,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await r.loadAsync(l)}else return s.data?{data:rg(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){r=new S0(this.manager),r.setCrossOrigin(this.crossOrigin);for(let s=0,o=e.length;s<o;s++){const l=e[s],u=l.url;if(Array.isArray(u)){const h=[];for(let p=0,g=u.length;p<g;p++){const y=u[p],_=await a(y);_!==null&&(_ instanceof HTMLImageElement?h.push(_):h.push(new Gc(_.data,_.width,_.height)))}i[l.uuid]=new fh(h)}else{const h=await a(l.url);i[l.uuid]=new fh(h)}}}return i}parseTextures(e,t){function i(a,s){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),s[a])}const r={};if(e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=e[a];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=t[o.image],u=l.data;let h;Array.isArray(u)?(h=new Q0,u.length===6&&(h.needsUpdate=!0)):(u&&u.data?h=new Gc:h=new Pi,u&&(h.needsUpdate=!0)),h.source=l,h.uuid=o.uuid,o.name!==void 0&&(h.name=o.name),o.mapping!==void 0&&(h.mapping=i(o.mapping,m9)),o.channel!==void 0&&(h.channel=o.channel),o.offset!==void 0&&h.offset.fromArray(o.offset),o.repeat!==void 0&&h.repeat.fromArray(o.repeat),o.center!==void 0&&h.center.fromArray(o.center),o.rotation!==void 0&&(h.rotation=o.rotation),o.wrap!==void 0&&(h.wrapS=i(o.wrap[0],nP),h.wrapT=i(o.wrap[1],nP)),o.format!==void 0&&(h.format=o.format),o.internalFormat!==void 0&&(h.internalFormat=o.internalFormat),o.type!==void 0&&(h.type=o.type),o.colorSpace!==void 0&&(h.colorSpace=o.colorSpace),o.minFilter!==void 0&&(h.minFilter=i(o.minFilter,iP)),o.magFilter!==void 0&&(h.magFilter=i(o.magFilter,iP)),o.anisotropy!==void 0&&(h.anisotropy=o.anisotropy),o.flipY!==void 0&&(h.flipY=o.flipY),o.generateMipmaps!==void 0&&(h.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(h.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(h.compareFunction=o.compareFunction),o.userData!==void 0&&(h.userData=o.userData),r[o.uuid]=h}return r}parseObject(e,t,i,r,a){let s;function o(g){return t[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",g),t[g]}function l(g){if(g!==void 0){if(Array.isArray(g)){const y=[];for(let _=0,S=g.length;_<S;_++){const x=g[_];i[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),y.push(i[x])}return y}return i[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),i[g]}}function u(g){return r[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",g),r[g]}let h,p;switch(e.type){case"Scene":s=new bD,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new yt(e.background):s.background=u(e.background)),e.environment!==void 0&&(s.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new uE(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new cE(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&s.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(s.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&s.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":s=new Ir(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new a_(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new FD(e.color,e.intensity);break;case"DirectionalLight":s=new kD(e.color,e.intensity),s.target=e.target||"";break;case"PointLight":s=new v1(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new LH(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new zD(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),s.target=e.target||"";break;case"HemisphereLight":s=new PH(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new BH().fromJSON(e);break;case"SkinnedMesh":h=o(e.geometry),p=l(e.material),s=new xD(h,p),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":h=o(e.geometry),p=l(e.material),s=new Ni(h,p);break;case"InstancedMesh":h=o(e.geometry),p=l(e.material);const g=e.count,y=e.instanceMatrix,_=e.instanceColor;s=new aH(h,p,g),s.instanceMatrix=new ap(new Float32Array(y.array),16),_!==void 0&&(s.instanceColor=new ap(new Float32Array(_.array),_.itemSize));break;case"BatchedMesh":h=o(e.geometry),p=l(e.material),s=new sH(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,p),s.geometry=h,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._visibility=e.visibility,s._active=e.active,s._bounds=e.bounds.map(S=>{const x=new ta;x.min.fromArray(S.boxMin),x.max.fromArray(S.boxMax);const w=new na;return w.radius=S.sphereRadius,w.center.fromArray(S.sphereCenter),{boxInitialized:S.boxInitialized,box:x,sphereInitialized:S.sphereInitialized,sphere:w}}),s._maxInstanceCount=e.maxInstanceCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._geometryCount=e.geometryCount,s._matricesTexture=u(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(s._colorsTexture=u(e.colorsTexture.uuid));break;case"LOD":s=new rH;break;case"Line":s=new ef(o(e.geometry),l(e.material));break;case"LineLoop":s=new oH(o(e.geometry),l(e.material));break;case"LineSegments":s=new Qc(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":s=new lH(o(e.geometry),l(e.material));break;case"Sprite":s=new iH(l(e.material));break;case"Group":s=new hh;break;case"Bone":s=new g0;break;default:s=new On}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(s.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const g=e.children;for(let y=0;y<g.length;y++)s.add(this.parseObject(g[y],t,i,r,a))}if(e.animations!==void 0){const g=e.animations;for(let y=0;y<g.length;y++){const _=g[y];s.animations.push(a[_])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const g=e.levels;for(let y=0;y<g.length;y++){const _=g[y],S=s.getObjectByProperty("uuid",_.object);S!==void 0&&s.addLevel(S,_.distance,_.hysteresis)}}return s}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new On}})}}const m9={UVMapping:Z1,CubeReflectionMapping:Qu,CubeRefractionMapping:ph,EquirectangularReflectionMapping:mg,EquirectangularRefractionMapping:l0,CubeUVReflectionMapping:Lg},nP={RepeatWrapping:tp,ClampToEdgeWrapping:ks,MirroredRepeatWrapping:c0},iP={NearestFilter:va,NearestMipmapNearestFilter:rD,NearestMipmapLinearFilter:ig,LinearFilter:Sr,LinearMipmapNearestFilter:Vy,LinearMipmapLinearFilter:Fc};class g9 extends ia{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=Yu.get(e);if(s!==void 0){if(a.manager.itemStart(e),s.then){s.then(u=>{t&&t(u),a.manager.itemEnd(e)}).catch(u=>{r&&r(u)});return}return setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader;const l=fetch(e,o).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(u){return Yu.add(e,u),t&&t(u),a.manager.itemEnd(e),u}).catch(function(u){r&&r(u),Yu.remove(e),a.manager.itemError(e),a.manager.itemEnd(e)});Yu.add(e,l),a.manager.itemStart(e)}}let DS;class VD{static getContext(){return DS===void 0&&(DS=new(window.AudioContext||window.webkitAudioContext)),DS}static setContext(e){DS=e}}class v9 extends ia{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new ql(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{const u=l.slice(0);VD.getContext().decodeAudioData(u,function(p){t(p)}).catch(o)}catch(u){o(u)}},i,r);function o(l){r?r(l):console.error(l),a.manager.itemError(e)}}}const rP=new Mt,aP=new Mt,_d=new Mt;class y9{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ir,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ir,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,_d.copy(e.projectionMatrix);const r=t.eyeSep/2,a=r*t.near/t.focus,s=t.near*Math.tan(Yd*t.fov*.5)/t.zoom;let o,l;aP.elements[12]=-r,rP.elements[12]=r,o=-s*t.aspect+a,l=s*t.aspect+a,_d.elements[0]=2*t.near/(l-o),_d.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(_d),o=-s*t.aspect-a,l=s*t.aspect-a,_d.elements[0]=2*t.near/(l-o),_d.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(_d)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(aP),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(rP)}}class kH extends Ir{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class GD{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=sP(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=sP();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function sP(){return performance.now()}const bd=new le,oP=new Ki,_9=new le,Sd=new le;class b9 extends On{constructor(){super(),this.type="AudioListener",this.context=VD.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new GD}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(bd,oP,_9),Sd.set(0,0,-1).applyQuaternion(oP),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(bd.x,r),t.positionY.linearRampToValueAtTime(bd.y,r),t.positionZ.linearRampToValueAtTime(bd.z,r),t.forwardX.linearRampToValueAtTime(Sd.x,r),t.forwardY.linearRampToValueAtTime(Sd.y,r),t.forwardZ.linearRampToValueAtTime(Sd.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(bd.x,bd.y,bd.z),t.setOrientation(Sd.x,Sd.y,Sd.z,i.x,i.y,i.z)}}class FH extends On{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const xd=new le,lP=new Ki,S9=new le,Ed=new le;class x9 extends FH{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(xd,lP,S9),Ed.set(0,0,1).applyQuaternion(lP);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(xd.x,i),t.positionY.linearRampToValueAtTime(xd.y,i),t.positionZ.linearRampToValueAtTime(xd.z,i),t.orientationX.linearRampToValueAtTime(Ed.x,i),t.orientationY.linearRampToValueAtTime(Ed.y,i),t.orientationZ.linearRampToValueAtTime(Ed.z,i)}else t.setPosition(xd.x,xd.y,xd.z),t.setOrientation(Ed.x,Ed.y,Ed.z)}}class E9{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class HH{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,a,s;switch(t){case"quaternion":r=this._slerp,a=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,a=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,a=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=a,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,a=e*r+r;let s=this.cumulativeWeight;if(s===0){for(let o=0;o!==r;++o)i[a+o]=i[o];s=t}else{s+=t;const o=t/s;this._mixBufferRegion(i,a,0,o,r)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,a=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-a,t)}s>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(i[l]!==i[l+t]){o.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let a=i,s=r;a!==s;++a)t[a]=t[r+a%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,a){if(r>=.5)for(let s=0;s!==a;++s)e[t+s]=e[i+s]}_slerp(e,t,i,r){Ki.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,a){const s=this._workIndex*a;Ki.multiplyQuaternionsFlat(e,s,e,t,e,i),Ki.slerpFlat(e,t,e,t,e,s,r)}_lerp(e,t,i,r,a){const s=1-r;for(let o=0;o!==a;++o){const l=t+o;e[l]=e[l]*s+e[i+o]*r}}_lerpAdditive(e,t,i,r,a){for(let s=0;s!==a;++s){const o=t+s;e[o]=e[o]+e[i+s]*r}}}const jD="\\[\\]\\.:\\/",w9=new RegExp("["+jD+"]","g"),qD="[^"+jD+"]",T9="[^"+jD.replace("\\.","")+"]",M9=/((?:WC+[\/:])*)/.source.replace("WC",qD),A9=/(WCOD+)?/.source.replace("WCOD",T9),C9=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",qD),R9=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",qD),O9=new RegExp("^"+M9+A9+C9+R9+"$"),D9=["material","materials","bones","map"];class U9{constructor(e,t,i){const r=i||Rn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,a=i.length;r!==a;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Rn{constructor(e,t,i){this.path=t,this.parsedPath=i||Rn.parseTrackName(t),this.node=Rn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Rn.Composite(e,t,i):new Rn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(w9,"")}static parseTrackName(e){const t=O9.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const a=i.nodeName.substring(r+1);D9.indexOf(a)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=a)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(a){for(let s=0;s<a.length;s++){const o=a[s];if(o.name===t||o.uuid===t)return o;const l=i(o.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let a=t.propertyIndex;if(e||(e=Rn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let u=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===u){u=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const s=e[r];if(s===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?o=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(a!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else s.fromArray!==void 0&&s.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Rn.Composite=U9;Rn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Rn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Rn.prototype.GetterByBindingType=[Rn.prototype._getValue_direct,Rn.prototype._getValue_array,Rn.prototype._getValue_arrayElement,Rn.prototype._getValue_toArray];Rn.prototype.SetterByBindingTypeAndVersioning=[[Rn.prototype._setValue_direct,Rn.prototype._setValue_direct_setNeedsUpdate,Rn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Rn.prototype._setValue_array,Rn.prototype._setValue_array_setNeedsUpdate,Rn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Rn.prototype._setValue_arrayElement,Rn.prototype._setValue_arrayElement_setNeedsUpdate,Rn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Rn.prototype._setValue_fromArray,Rn.prototype._setValue_fromArray_setNeedsUpdate,Rn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class N9{constructor(){this.isAnimationObjectGroup=!0,this.uuid=po(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,a=this._bindings,s=a.length;let o,l=e.length,u=this.nCachedObjects_;for(let h=0,p=arguments.length;h!==p;++h){const g=arguments[h],y=g.uuid;let _=t[y];if(_===void 0){_=l++,t[y]=_,e.push(g);for(let S=0,x=s;S!==x;++S)a[S].push(new Rn(g,i[S],r[S]))}else if(_<u){o=e[_];const S=--u,x=e[S];t[x.uuid]=_,e[_]=x,t[y]=S,e[S]=g;for(let w=0,T=s;w!==T;++w){const M=a[w],C=M[S];let N=M[_];M[_]=C,N===void 0&&(N=new Rn(g,i[w],r[w])),M[S]=N}}else e[_]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const l=arguments[s],u=l.uuid,h=t[u];if(h!==void 0&&h>=a){const p=a++,g=e[p];t[g.uuid]=h,e[h]=g,t[u]=p,e[p]=l;for(let y=0,_=r;y!==_;++y){const S=i[y],x=S[p],w=S[h];S[h]=x,S[p]=w}}}this.nCachedObjects_=a}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_,s=e.length;for(let o=0,l=arguments.length;o!==l;++o){const u=arguments[o],h=u.uuid,p=t[h];if(p!==void 0)if(delete t[h],p<a){const g=--a,y=e[g],_=--s,S=e[_];t[y.uuid]=p,e[p]=y,t[S.uuid]=g,e[g]=S,e.pop();for(let x=0,w=r;x!==w;++x){const T=i[x],M=T[g],C=T[_];T[p]=M,T[g]=C,T.pop()}}else{const g=--s,y=e[g];g>0&&(t[y.uuid]=p),e[p]=y,e.pop();for(let _=0,S=r;_!==S;++_){const x=i[_];x[p]=x[g],x.pop()}}}this.nCachedObjects_=a}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const a=this._bindings;if(r!==void 0)return a[r];const s=this._paths,o=this._parsedPaths,l=this._objects,u=l.length,h=this.nCachedObjects_,p=new Array(u);r=a.length,i[e]=r,s.push(e),o.push(t),a.push(p);for(let g=h,y=l.length;g!==y;++g){const _=l[g];p[g]=new Rn(_,e,t)}return p}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,a=this._parsedPaths,s=this._bindings,o=s.length-1,l=s[o],u=e[o];t[u]=i,s[i]=l,s.pop(),a[i]=a[o],a.pop(),r[i]=r[o],r.pop()}}}class VH{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const a=t.tracks,s=a.length,o=new Array(s),l={endingStart:Fd,endingEnd:Fd};for(let u=0;u!==s;++u){const h=a[u].createInterpolant(null);o[u]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=z5,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,a=e._clip.duration,s=a/r,o=r/a;e.warp(1,s,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,a=r.time,s=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,u=o.sampleValues;return l[0]=a,l[1]=a+i,u[0]=e/s,u[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const l=(e-a)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const s=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case pD:for(let h=0,p=l.length;h!==p;++h)l[h].evaluate(s),u[h].accumulateAdditive(o);break;case rE:default:for(let h=0,p=l.length;h!==p;++h)l[h].evaluate(s),u[h].accumulate(r,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,a=this._loopCount;const s=i===k5;if(e===0)return a===-1?r:s&&(a&1)===1?t-r:r;if(i===B5){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),r>=t||r<0){const o=Math.floor(r/t);r-=t*o,a+=Math.abs(o);const l=this.repetitions-a;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,s)}else this._setEndings(!1,!1,s);this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(s&&(a&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Hd,r.endingEnd=Hd):(e?r.endingStart=this.zeroSlopeAtStart?Hd:Fd:r.endingStart=f0,t?r.endingEnd=this.zeroSlopeAtEnd?Hd:Fd:r.endingEnd=f0)}_scheduleFading(e,t,i){const r=this._mixer,a=r.time;let s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,l=s.sampleValues;return o[0]=a,l[0]=t,o[1]=a+e,l[1]=i,this}}const P9=new Float32Array(1);class L9 extends Zc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,a=r.length,s=e._propertyBindings,o=e._interpolants,l=i.uuid,u=this._bindingsByRootAndName;let h=u[l];h===void 0&&(h={},u[l]=h);for(let p=0;p!==a;++p){const g=r[p],y=g.name;let _=h[y];if(_!==void 0)++_.referenceCount,s[p]=_;else{if(_=s[p],_!==void 0){_._cacheIndex===null&&(++_.referenceCount,this._addInactiveBinding(_,l,y));continue}const S=t&&t._propertyBindings[p].binding.parsedPath;_=new HH(Rn.create(i,y,S),g.ValueTypeName,g.getValueSize()),++_.referenceCount,this._addInactiveBinding(_,l,y),s[p]=_}o[p].resultBuffer=_.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,a=this._actionsByClip[r];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,a=this._actionsByClip;let s=a[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=s;else{const o=s.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,s=this._actionsByClip,o=s[a],l=o.knownActions,u=l[l.length-1],h=e._byClipCacheIndex;u._byClipCacheIndex=h,l[h]=u,l.pop(),e._byClipCacheIndex=null;const p=o.actionByRoot,g=(e._localRoot||this._root).uuid;delete p[g],l.length===0&&delete s[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const a=t[i];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,a=this._bindings;let s=r[t];s===void 0&&(s={},r[t]=s),s[i]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,a=i.path,s=this._bindingsByRootAndName,o=s[r],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete o[a],Object.keys(o).length===0&&delete s[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new PD(new Float32Array(2),new Float32Array(2),1,P9),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,a=t[r];e.__cacheIndex=r,t[r]=e,a.__cacheIndex=i,t[i]=a}clipAction(e,t,i){const r=t||this._root,a=r.uuid;let s=typeof e=="string"?xg.findByName(r,e):e;const o=s!==null?s.uuid:e,l=this._actionsByClip[o];let u=null;if(i===void 0&&(s!==null?i=s.blendMode:i=rE),l!==void 0){const p=l.actionByRoot[a];if(p!==void 0&&p.blendMode===i)return p;u=l.knownActions[0],s===null&&(s=u._clip)}if(s===null)return null;const h=new VH(this,s,t,i);return this._bindAction(h,u),this._addInactiveAction(h,o,a),h}existingAction(e,t){const i=t||this._root,r=i.uuid,a=typeof e=="string"?xg.findByName(i,e):e,s=a?a.uuid:e,o=this._actionsByClip[s];return o!==void 0&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,a=Math.sign(e),s=this._accuIndex^=1;for(let u=0;u!==i;++u)t[u]._update(r,e,a,s);const o=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)o[u].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,a=r[i];if(a!==void 0){const s=a.knownActions;for(let o=0,l=s.length;o!==l;++o){const u=s[o];this._deactivateAction(u);const h=u._cacheIndex,p=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,p._cacheIndex=h,t[h]=p,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const s in i){const o=i[s].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,a=r[t];if(a!==void 0)for(const s in a){const o=a[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class I9 extends aE{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new sE(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class B9 extends aE{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTargetArray=!0,this.depth=i,this.texture=new Z0(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class WD{constructor(e){this.value=e}clone(){return new WD(this.value.clone===void 0?this.value:this.value.clone())}}let z9=0;class k9 extends Zc{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:z9++}),this.name="",this.usage=d0,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const a=Array.isArray(t[i])?t[i]:[t[i]];for(let s=0;s<a.length;s++)this.uniforms.push(a[s].clone())}return this}clone(){return new this.constructor().copy(this)}}class F9 extends fE{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class H9{constructor(e,t,i,r,a){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=a,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const cP=new Mt;class YD{constructor(e,t,i=0,r=1/0){this.ray=new Bg(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new yg,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return cP.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(cP),this}intersectObject(e,t=!0,i=[]){return WR(e,this,i,t),i.sort(uP),i}intersectObjects(e,t=!0,i=[]){for(let r=0,a=e.length;r<a;r++)WR(e[r],this,i,t);return i.sort(uP),i}}function uP(n,e){return n.distance-e.distance}function WR(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const a=n.children;for(let s=0,o=a.length;s<o;s++)WR(a[s],e,t,!0)}}class GH{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=sn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(sn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class V9{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class $D{constructor(e,t,i,r){$D.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const a=this.elements;return a[0]=e,a[2]=t,a[1]=i,a[3]=r,this}}const fP=new st;class G9{constructor(e=new st(1/0,1/0),t=new st(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=fP.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,fP).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const hP=new le,US=new le;class j9{constructor(e=new le,t=new le){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){hP.subVectors(e,this.start),US.subVectors(this.end,this.start);const i=US.dot(US);let a=US.dot(hP)/i;return t&&(a=sn(a,0,1)),a}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const dP=new le;class q9 extends On{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new on,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,o=1,l=32;s<l;s++,o++){const u=s/l*Math.PI*2,h=o/l*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(h),Math.sin(h),1)}i.setAttribute("position",new Ct(r,3));const a=new Ha({fog:!1,toneMapped:!1});this.cone=new Qc(i,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),dP.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(dP),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const th=new le,NS=new Mt,PT=new Mt;class W9 extends Qc{constructor(e){const t=jH(e),i=new on,r=[],a=[],s=new yt(0,0,1),o=new yt(0,1,0);for(let u=0;u<t.length;u++){const h=t[u];h.parent&&h.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),a.push(s.r,s.g,s.b),a.push(o.r,o.g,o.b))}i.setAttribute("position",new Ct(r,3)),i.setAttribute("color",new Ct(a,3));const l=new Ha({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");PT.copy(this.root.matrixWorld).invert();for(let a=0,s=0;a<t.length;a++){const o=t[a];o.parent&&o.parent.isBone&&(NS.multiplyMatrices(PT,o.matrixWorld),th.setFromMatrixPosition(NS),r.setXYZ(s,th.x,th.y,th.z),NS.multiplyMatrices(PT,o.parent.matrixWorld),th.setFromMatrixPosition(NS),r.setXYZ(s+1,th.x,th.y,th.z),s+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function jH(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...jH(n.children[t]));return e}class Y9 extends Ni{constructor(e,t,i){const r=new i_(t,4,2),a=new of({wireframe:!0,fog:!1,toneMapped:!1});super(r,a),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const $9=new le,pP=new yt,mP=new yt;class X9 extends On{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new n_(t);r.rotateY(Math.PI*.5),this.material=new of({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=r.getAttribute("position"),s=new Float32Array(a.count*3);r.setAttribute("color",new oi(s,3)),this.add(new Ni(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");pP.copy(this.light.color),mP.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const a=i<r/2?pP:mP;t.setXYZ(i,a.r,a.g,a.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt($9.setFromMatrixPosition(this.light.matrixWorld).negate())}}class K9 extends Qc{constructor(e=10,t=10,i=4473924,r=8947848){i=new yt(i),r=new yt(r);const a=t/2,s=e/t,o=e/2,l=[],u=[];for(let g=0,y=0,_=-o;g<=t;g++,_+=s){l.push(-o,0,_,o,0,_),l.push(_,0,-o,_,0,o);const S=g===a?i:r;S.toArray(u,y),y+=3,S.toArray(u,y),y+=3,S.toArray(u,y),y+=3,S.toArray(u,y),y+=3}const h=new on;h.setAttribute("position",new Ct(l,3)),h.setAttribute("color",new Ct(u,3));const p=new Ha({vertexColors:!0,toneMapped:!1});super(h,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Z9 extends Qc{constructor(e=10,t=16,i=8,r=64,a=4473924,s=8947848){a=new yt(a),s=new yt(s);const o=[],l=[];if(t>1)for(let p=0;p<t;p++){const g=p/t*(Math.PI*2),y=Math.sin(g)*e,_=Math.cos(g)*e;o.push(0,0,0),o.push(y,0,_);const S=p&1?a:s;l.push(S.r,S.g,S.b),l.push(S.r,S.g,S.b)}for(let p=0;p<i;p++){const g=p&1?a:s,y=e-e/i*p;for(let _=0;_<r;_++){let S=_/r*(Math.PI*2),x=Math.sin(S)*y,w=Math.cos(S)*y;o.push(x,0,w),l.push(g.r,g.g,g.b),S=(_+1)/r*(Math.PI*2),x=Math.sin(S)*y,w=Math.cos(S)*y,o.push(x,0,w),l.push(g.r,g.g,g.b)}}const u=new on;u.setAttribute("position",new Ct(o,3)),u.setAttribute("color",new Ct(l,3));const h=new Ha({vertexColors:!0,toneMapped:!1});super(u,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const gP=new le,PS=new le,vP=new le;class Q9 extends On{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new on;r.setAttribute("position",new Ct([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const a=new Ha({fog:!1,toneMapped:!1});this.lightPlane=new ef(r,a),this.add(this.lightPlane),r=new on,r.setAttribute("position",new Ct([0,0,0,0,0,1],3)),this.targetLine=new ef(r,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),gP.setFromMatrixPosition(this.light.matrixWorld),PS.setFromMatrixPosition(this.light.target.matrixWorld),vP.subVectors(PS,gP),this.lightPlane.lookAt(PS),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(PS),this.targetLine.scale.z=vP.length()}}const LS=new le,cr=new lE;class J9 extends Qc{constructor(e){const t=new on,i=new Ha({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],a=[],s={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(_,S){l(_),l(S)}function l(_){r.push(0,0,0),a.push(0,0,0),s[_]===void 0&&(s[_]=[]),s[_].push(r.length/3-1)}t.setAttribute("position",new Ct(r,3)),t.setAttribute("color",new Ct(a,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const u=new yt(16755200),h=new yt(16711680),p=new yt(43775),g=new yt(16777215),y=new yt(3355443);this.setColors(u,h,p,g,y)}setColors(e,t,i,r,a){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,i.r,i.g,i.b),o.setXYZ(33,i.r,i.g,i.b),o.setXYZ(34,i.r,i.g,i.b),o.setXYZ(35,i.r,i.g,i.b),o.setXYZ(36,i.r,i.g,i.b),o.setXYZ(37,i.r,i.g,i.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,a.r,a.g,a.b),o.setXYZ(41,a.r,a.g,a.b),o.setXYZ(42,a.r,a.g,a.b),o.setXYZ(43,a.r,a.g,a.b),o.setXYZ(44,a.r,a.g,a.b),o.setXYZ(45,a.r,a.g,a.b),o.setXYZ(46,a.r,a.g,a.b),o.setXYZ(47,a.r,a.g,a.b),o.setXYZ(48,a.r,a.g,a.b),o.setXYZ(49,a.r,a.g,a.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;cr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const a=this.camera.coordinateSystem===Hl?-1:0;_r("c",t,e,cr,0,0,a),_r("t",t,e,cr,0,0,1),_r("n1",t,e,cr,-1,-1,a),_r("n2",t,e,cr,i,-1,a),_r("n3",t,e,cr,-1,r,a),_r("n4",t,e,cr,i,r,a),_r("f1",t,e,cr,-1,-1,1),_r("f2",t,e,cr,i,-1,1),_r("f3",t,e,cr,-1,r,1),_r("f4",t,e,cr,i,r,1),_r("u1",t,e,cr,i*.7,r*1.1,a),_r("u2",t,e,cr,-1*.7,r*1.1,a),_r("u3",t,e,cr,0,r*2,a),_r("cf1",t,e,cr,-1,0,1),_r("cf2",t,e,cr,i,0,1),_r("cf3",t,e,cr,0,-1,1),_r("cf4",t,e,cr,0,r,1),_r("cn1",t,e,cr,-1,0,a),_r("cn2",t,e,cr,i,0,a),_r("cn3",t,e,cr,0,-1,a),_r("cn4",t,e,cr,0,r,a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function _r(n,e,t,i,r,a,s){LS.set(r,a,s).unproject(i);const o=e[n];if(o!==void 0){const l=t.getAttribute("position");for(let u=0,h=o.length;u<h;u++)l.setXYZ(o[u],LS.x,LS.y,LS.z)}}const IS=new ta;class eY extends Qc{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),a=new on;a.setIndex(new oi(i,1)),a.setAttribute("position",new oi(r,3)),super(a,new Ha({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&IS.setFromObject(this.object),IS.isEmpty())return;const e=IS.min,t=IS.max,i=this.geometry.attributes.position,r=i.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class tY extends Qc{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new on;a.setIndex(new oi(i,1)),a.setAttribute("position",new Ct(r,3)),super(a,new Ha({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class nY extends ef{constructor(e,t=1,i=16776960){const r=i,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new on;s.setAttribute("position",new Ct(a,3)),s.computeBoundingSphere(),super(s,new Ha({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new on;l.setAttribute("position",new Ct(o,3)),l.computeBoundingSphere(),this.add(new Ni(l,new of({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const yP=new le;let BS,LT;class iY extends On{constructor(e=new le(0,0,1),t=new le(0,0,0),i=1,r=16776960,a=i*.2,s=a*.2){super(),this.type="ArrowHelper",BS===void 0&&(BS=new on,BS.setAttribute("position",new Ct([0,0,0,0,1,0],3)),LT=new zg(0,.5,1,5,1),LT.translate(0,-.5,0)),this.position.copy(t),this.line=new ef(BS,new Ha({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ni(LT,new of({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,a,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{yP.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(yP,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class rY extends Qc{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new on;r.setAttribute("position",new Ct(t,3)),r.setAttribute("color",new Ct(i,3));const a=new Ha({vertexColors:!0,toneMapped:!1});super(r,a),this.type="AxesHelper"}setColors(e,t,i){const r=new yt,a=this.geometry.attributes.color.array;return r.set(e),r.toArray(a,0),r.toArray(a,3),r.set(t),r.toArray(a,6),r.toArray(a,9),r.set(i),r.toArray(a,12),r.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class qH{constructor(){this.type="ShapePath",this.color=new yt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new v0,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,a,s){return this.currentPath.bezierCurveTo(e,t,i,r,a,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(w){const T=[];for(let M=0,C=w.length;M<C;M++){const N=w[M],D=new $d;D.curves=N.curves,T.push(D)}return T}function i(w,T){const M=T.length;let C=!1;for(let N=M-1,D=0;D<M;N=D++){let P=T[N],z=T[D],I=z.x-P.x,L=z.y-P.y;if(Math.abs(L)>Number.EPSILON){if(L<0&&(P=T[D],I=-I,z=T[N],L=-L),w.y<P.y||w.y>z.y)continue;if(w.y===P.y){if(w.x===P.x)return!0}else{const H=L*(w.x-P.x)-I*(w.y-P.y);if(H===0)return!0;if(H<0)continue;C=!C}}else{if(w.y!==P.y)continue;if(z.x<=w.x&&w.x<=P.x||P.x<=w.x&&w.x<=z.x)return!0}}return C}const r=Vl.isClockWise,a=this.subPaths;if(a.length===0)return[];let s,o,l;const u=[];if(a.length===1)return o=a[0],l=new $d,l.curves=o.curves,u.push(l),u;let h=!r(a[0].getPoints());h=e?!h:h;const p=[],g=[];let y=[],_=0,S;g[_]=void 0,y[_]=[];for(let w=0,T=a.length;w<T;w++)o=a[w],S=o.getPoints(),s=r(S),s=e?!s:s,s?(!h&&g[_]&&_++,g[_]={s:new $d,p:S},g[_].s.curves=o.curves,h&&_++,y[_]=[]):y[_].push({h:o,p:S[0]});if(!g[0])return t(a);if(g.length>1){let w=!1,T=0;for(let M=0,C=g.length;M<C;M++)p[M]=[];for(let M=0,C=g.length;M<C;M++){const N=y[M];for(let D=0;D<N.length;D++){const P=N[D];let z=!0;for(let I=0;I<g.length;I++)i(P.p,g[I].p)&&(M!==I&&T++,z?(z=!1,p[I].push(P)):w=!0);z&&p[M].push(P)}}T>0&&w===!1&&(y=p)}let x;for(let w=0,T=g.length;w<T;w++){l=g[w].s,u.push(l),x=y[w];for(let M=0,C=x.length;M<C;M++)l.holes.push(x[M].h)}return u}}class aY extends Zc{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function sY(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function oY(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function lY(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function YR(n,e,t,i){const r=cY(i);switch(t){case lD:return n*e;case uD:return n*e;case fD:return n*e*2;case tE:return n*e/r.components*r.byteLength;case K0:return n*e/r.components*r.byteLength;case hD:return n*e*2/r.components*r.byteLength;case nE:return n*e*2/r.components*r.byteLength;case cD:return n*e*3/r.components*r.byteLength;case za:return n*e*4/r.components*r.byteLength;case iE:return n*e*4/r.components*r.byteLength;case Gy:case jy:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case qy:case Wy:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Vx:case jx:return Math.max(n,16)*Math.max(e,8)/4;case Hx:case Gx:return Math.max(n,8)*Math.max(e,8)/2;case qx:case Wx:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Yx:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case $x:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Xx:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case Kx:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case Zx:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case Qx:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Jx:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case e1:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case t1:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case n1:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case i1:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case r1:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case a1:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case s1:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case o1:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Yy:case l1:case c1:return Math.ceil(n/4)*Math.ceil(e/4)*16;case dD:case u1:return Math.ceil(n/4)*Math.ceil(e/4)*8;case f1:case h1:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function cY(n){switch(n){case Gl:case aD:return{byteLength:1,components:1};case gg:case sD:case Ig:return{byteLength:2,components:1};case J1:case eE:return{byteLength:2,components:4};case Ju:case Q1:case Fs:return{byteLength:4,components:1};case oD:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class uY{static contain(e,t){return sY(e,t)}static cover(e,t){return oY(e,t)}static fill(e){return lY(e)}static getByteLength(e,t,i,r){return YR(e,t,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:X1}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=X1);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function WH(){let n=null,e=!1,t=null,i=null;function r(a,s){t(a,s),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){n=a}}}function fY(n){const e=new WeakMap;function t(o,l){const u=o.array,h=o.usage,p=u.byteLength,g=n.createBuffer();n.bindBuffer(l,g),n.bufferData(l,u,h),o.onUploadCallback();let y;if(u instanceof Float32Array)y=n.FLOAT;else if(u instanceof Uint16Array)o.isFloat16BufferAttribute?y=n.HALF_FLOAT:y=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)y=n.SHORT;else if(u instanceof Uint32Array)y=n.UNSIGNED_INT;else if(u instanceof Int32Array)y=n.INT;else if(u instanceof Int8Array)y=n.BYTE;else if(u instanceof Uint8Array)y=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)y=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:g,type:y,bytesPerElement:u.BYTES_PER_ELEMENT,version:o.version,size:p}}function i(o,l,u){const h=l.array,p=l.updateRanges;if(n.bindBuffer(u,o),p.length===0)n.bufferSubData(u,0,h);else{p.sort((y,_)=>y.start-_.start);let g=0;for(let y=1;y<p.length;y++){const _=p[g],S=p[y];S.start<=_.start+_.count+1?_.count=Math.max(_.count,S.start+S.count-_.start):(++g,p[g]=S)}p.length=g+1;for(let y=0,_=p.length;y<_;y++){const S=p[y];n.bufferSubData(u,S.start*h.BYTES_PER_ELEMENT,h,S.start,S.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function a(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(n.deleteBuffer(l.buffer),e.delete(o))}function s(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const h=e.get(o);(!h||h.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const u=e.get(o);if(u===void 0)e.set(o,t(o,l));else if(u.version<o.version){if(u.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(u.buffer,o,l),u.version=o.version}}return{get:r,remove:a,update:s}}var hY=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,dY=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,pY=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,mY=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,gY=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,vY=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,yY=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,_Y=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,bY=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,SY=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,xY=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,EY=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,wY=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,TY=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,MY=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,AY=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,CY=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,RY=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,OY=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,DY=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,UY=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,NY=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,PY=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,LY=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,IY=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,BY=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,zY=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,kY=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,FY=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,HY=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,VY="gl_FragColor = linearToOutputTexel( gl_FragColor );",GY=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,jY=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,qY=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,WY=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,YY=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,$Y=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,XY=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,KY=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,ZY=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,QY=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,JY=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,e$=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,t$=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,n$=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,i$=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,r$=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,a$=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,s$=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,o$=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,l$=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,c$=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,u$=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,f$=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,h$=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,d$=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,p$=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,m$=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,g$=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,v$=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,y$=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,_$=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,b$=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,S$=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,x$=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,E$=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,w$=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,T$=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,M$=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,A$=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,C$=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,R$=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,O$=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,D$=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,U$=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,N$=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,P$=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,L$=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,I$=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,B$=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,z$=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,k$=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,F$=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,H$=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,V$=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,G$=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,j$=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,q$=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,W$=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Y$=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,$$=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,X$=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,K$=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Z$=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Q$=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,J$=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,eX=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,tX=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,nX=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,iX=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,rX=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,aX=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,sX=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,oX=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,lX=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,cX=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,uX=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const fX=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,hX=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,dX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,pX=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,mX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,gX=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vX=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,yX=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,_X=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,bX=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,SX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,xX=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,EX=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,wX=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,TX=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,MX=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AX=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,CX=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,RX=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,OX=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,DX=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,UX=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,NX=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,PX=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,LX=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,IX=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,BX=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zX=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kX=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,FX=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,HX=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,VX=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,GX=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,jX=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,fn={alphahash_fragment:hY,alphahash_pars_fragment:dY,alphamap_fragment:pY,alphamap_pars_fragment:mY,alphatest_fragment:gY,alphatest_pars_fragment:vY,aomap_fragment:yY,aomap_pars_fragment:_Y,batching_pars_vertex:bY,batching_vertex:SY,begin_vertex:xY,beginnormal_vertex:EY,bsdfs:wY,iridescence_fragment:TY,bumpmap_pars_fragment:MY,clipping_planes_fragment:AY,clipping_planes_pars_fragment:CY,clipping_planes_pars_vertex:RY,clipping_planes_vertex:OY,color_fragment:DY,color_pars_fragment:UY,color_pars_vertex:NY,color_vertex:PY,common:LY,cube_uv_reflection_fragment:IY,defaultnormal_vertex:BY,displacementmap_pars_vertex:zY,displacementmap_vertex:kY,emissivemap_fragment:FY,emissivemap_pars_fragment:HY,colorspace_fragment:VY,colorspace_pars_fragment:GY,envmap_fragment:jY,envmap_common_pars_fragment:qY,envmap_pars_fragment:WY,envmap_pars_vertex:YY,envmap_physical_pars_fragment:r$,envmap_vertex:$Y,fog_vertex:XY,fog_pars_vertex:KY,fog_fragment:ZY,fog_pars_fragment:QY,gradientmap_pars_fragment:JY,lightmap_pars_fragment:e$,lights_lambert_fragment:t$,lights_lambert_pars_fragment:n$,lights_pars_begin:i$,lights_toon_fragment:a$,lights_toon_pars_fragment:s$,lights_phong_fragment:o$,lights_phong_pars_fragment:l$,lights_physical_fragment:c$,lights_physical_pars_fragment:u$,lights_fragment_begin:f$,lights_fragment_maps:h$,lights_fragment_end:d$,logdepthbuf_fragment:p$,logdepthbuf_pars_fragment:m$,logdepthbuf_pars_vertex:g$,logdepthbuf_vertex:v$,map_fragment:y$,map_pars_fragment:_$,map_particle_fragment:b$,map_particle_pars_fragment:S$,metalnessmap_fragment:x$,metalnessmap_pars_fragment:E$,morphinstance_vertex:w$,morphcolor_vertex:T$,morphnormal_vertex:M$,morphtarget_pars_vertex:A$,morphtarget_vertex:C$,normal_fragment_begin:R$,normal_fragment_maps:O$,normal_pars_fragment:D$,normal_pars_vertex:U$,normal_vertex:N$,normalmap_pars_fragment:P$,clearcoat_normal_fragment_begin:L$,clearcoat_normal_fragment_maps:I$,clearcoat_pars_fragment:B$,iridescence_pars_fragment:z$,opaque_fragment:k$,packing:F$,premultiplied_alpha_fragment:H$,project_vertex:V$,dithering_fragment:G$,dithering_pars_fragment:j$,roughnessmap_fragment:q$,roughnessmap_pars_fragment:W$,shadowmap_pars_fragment:Y$,shadowmap_pars_vertex:$$,shadowmap_vertex:X$,shadowmask_pars_fragment:K$,skinbase_vertex:Z$,skinning_pars_vertex:Q$,skinning_vertex:J$,skinnormal_vertex:eX,specularmap_fragment:tX,specularmap_pars_fragment:nX,tonemapping_fragment:iX,tonemapping_pars_fragment:rX,transmission_fragment:aX,transmission_pars_fragment:sX,uv_pars_fragment:oX,uv_pars_vertex:lX,uv_vertex:cX,worldpos_vertex:uX,background_vert:fX,background_frag:hX,backgroundCube_vert:dX,backgroundCube_frag:pX,cube_vert:mX,cube_frag:gX,depth_vert:vX,depth_frag:yX,distanceRGBA_vert:_X,distanceRGBA_frag:bX,equirect_vert:SX,equirect_frag:xX,linedashed_vert:EX,linedashed_frag:wX,meshbasic_vert:TX,meshbasic_frag:MX,meshlambert_vert:AX,meshlambert_frag:CX,meshmatcap_vert:RX,meshmatcap_frag:OX,meshnormal_vert:DX,meshnormal_frag:UX,meshphong_vert:NX,meshphong_frag:PX,meshphysical_vert:LX,meshphysical_frag:IX,meshtoon_vert:BX,meshtoon_frag:zX,points_vert:kX,points_frag:FX,shadow_vert:HX,shadow_frag:VX,sprite_vert:GX,sprite_frag:jX},wt={common:{diffuse:{value:new yt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new rn},alphaMap:{value:null},alphaMapTransform:{value:new rn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new rn}},envmap:{envMap:{value:null},envMapRotation:{value:new rn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new rn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new rn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new rn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new rn},normalScale:{value:new st(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new rn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new rn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new rn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new rn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new yt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new yt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new rn},alphaTest:{value:0},uvTransform:{value:new rn}},sprite:{diffuse:{value:new yt(16777215)},opacity:{value:1},center:{value:new st(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new rn},alphaMap:{value:null},alphaMapTransform:{value:new rn},alphaTest:{value:0}}},kl={basic:{uniforms:as([wt.common,wt.specularmap,wt.envmap,wt.aomap,wt.lightmap,wt.fog]),vertexShader:fn.meshbasic_vert,fragmentShader:fn.meshbasic_frag},lambert:{uniforms:as([wt.common,wt.specularmap,wt.envmap,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.fog,wt.lights,{emissive:{value:new yt(0)}}]),vertexShader:fn.meshlambert_vert,fragmentShader:fn.meshlambert_frag},phong:{uniforms:as([wt.common,wt.specularmap,wt.envmap,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.fog,wt.lights,{emissive:{value:new yt(0)},specular:{value:new yt(1118481)},shininess:{value:30}}]),vertexShader:fn.meshphong_vert,fragmentShader:fn.meshphong_frag},standard:{uniforms:as([wt.common,wt.envmap,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.roughnessmap,wt.metalnessmap,wt.fog,wt.lights,{emissive:{value:new yt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag},toon:{uniforms:as([wt.common,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.gradientmap,wt.fog,wt.lights,{emissive:{value:new yt(0)}}]),vertexShader:fn.meshtoon_vert,fragmentShader:fn.meshtoon_frag},matcap:{uniforms:as([wt.common,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.fog,{matcap:{value:null}}]),vertexShader:fn.meshmatcap_vert,fragmentShader:fn.meshmatcap_frag},points:{uniforms:as([wt.points,wt.fog]),vertexShader:fn.points_vert,fragmentShader:fn.points_frag},dashed:{uniforms:as([wt.common,wt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:fn.linedashed_vert,fragmentShader:fn.linedashed_frag},depth:{uniforms:as([wt.common,wt.displacementmap]),vertexShader:fn.depth_vert,fragmentShader:fn.depth_frag},normal:{uniforms:as([wt.common,wt.bumpmap,wt.normalmap,wt.displacementmap,{opacity:{value:1}}]),vertexShader:fn.meshnormal_vert,fragmentShader:fn.meshnormal_frag},sprite:{uniforms:as([wt.sprite,wt.fog]),vertexShader:fn.sprite_vert,fragmentShader:fn.sprite_frag},background:{uniforms:{uvTransform:{value:new rn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:fn.background_vert,fragmentShader:fn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new rn}},vertexShader:fn.backgroundCube_vert,fragmentShader:fn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:fn.cube_vert,fragmentShader:fn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:fn.equirect_vert,fragmentShader:fn.equirect_frag},distanceRGBA:{uniforms:as([wt.common,wt.displacementmap,{referencePosition:{value:new le},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:fn.distanceRGBA_vert,fragmentShader:fn.distanceRGBA_frag},shadow:{uniforms:as([wt.lights,wt.fog,{color:{value:new yt(0)},opacity:{value:1}}]),vertexShader:fn.shadow_vert,fragmentShader:fn.shadow_frag}};kl.physical={uniforms:as([kl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new rn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new rn},clearcoatNormalScale:{value:new st(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new rn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new rn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new rn},sheen:{value:0},sheenColor:{value:new yt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new rn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new rn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new rn},transmissionSamplerSize:{value:new st},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new rn},attenuationDistance:{value:0},attenuationColor:{value:new yt(0)},specularColor:{value:new yt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new rn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new rn},anisotropyVector:{value:new st},anisotropyMap:{value:null},anisotropyMapTransform:{value:new rn}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag};const zS={r:0,b:0,g:0},wd=new Cr,qX=new Mt;function WX(n,e,t,i,r,a,s){const o=new yt(0);let l=a===!0?0:1,u,h,p=null,g=0,y=null;function _(M){let C=M.isScene===!0?M.background:null;return C&&C.isTexture&&(C=(M.backgroundBlurriness>0?t:e).get(C)),C}function S(M){let C=!1;const N=_(M);N===null?w(o,l):N&&N.isColor&&(w(N,1),C=!0);const D=n.xr.getEnvironmentBlendMode();D==="additive"?i.buffers.color.setClear(0,0,0,1,s):D==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(n.autoClear||C)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function x(M,C){const N=_(C);N&&(N.isCubeTexture||N.mapping===Lg)?(h===void 0&&(h=new Ni(new _p(1,1,1),new jl({name:"BackgroundCubeMaterial",uniforms:_g(kl.backgroundCube.uniforms),vertexShader:kl.backgroundCube.vertexShader,fragmentShader:kl.backgroundCube.fragmentShader,side:ds,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(D,P,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),wd.copy(C.backgroundRotation),wd.x*=-1,wd.y*=-1,wd.z*=-1,N.isCubeTexture&&N.isRenderTargetTexture===!1&&(wd.y*=-1,wd.z*=-1),h.material.uniforms.envMap.value=N,h.material.uniforms.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=C.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(qX.makeRotationFromEuler(wd)),h.material.toneMapped=cn.getTransfer(N.colorSpace)!==ei,(p!==N||g!==N.version||y!==n.toneMapping)&&(h.material.needsUpdate=!0,p=N,g=N.version,y=n.toneMapping),h.layers.enableAll(),M.unshift(h,h.geometry,h.material,0,0,null)):N&&N.isTexture&&(u===void 0&&(u=new Ni(new lf(2,2),new jl({name:"BackgroundMaterial",uniforms:_g(kl.background.uniforms),vertexShader:kl.background.vertexShader,fragmentShader:kl.background.fragmentShader,side:Zu,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=N,u.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,u.material.toneMapped=cn.getTransfer(N.colorSpace)!==ei,N.matrixAutoUpdate===!0&&N.updateMatrix(),u.material.uniforms.uvTransform.value.copy(N.matrix),(p!==N||g!==N.version||y!==n.toneMapping)&&(u.material.needsUpdate=!0,p=N,g=N.version,y=n.toneMapping),u.layers.enableAll(),M.unshift(u,u.geometry,u.material,0,0,null))}function w(M,C){M.getRGB(zS,J5(n)),i.buffers.color.setClear(zS.r,zS.g,zS.b,C,s)}function T(){h!==void 0&&(h.geometry.dispose(),h.material.dispose(),h=void 0),u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0)}return{getClearColor:function(){return o},setClearColor:function(M,C=1){o.set(M),l=C,w(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(M){l=M,w(o,l)},render:S,addToRenderList:x,dispose:T}}function YX(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=g(null);let a=r,s=!1;function o(L,H,j,G,K){let ee=!1;const Y=p(G,j,H);a!==Y&&(a=Y,u(a.object)),ee=y(L,G,j,K),ee&&_(L,G,j,K),K!==null&&e.update(K,n.ELEMENT_ARRAY_BUFFER),(ee||s)&&(s=!1,C(L,H,j,G),K!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(K).buffer))}function l(){return n.createVertexArray()}function u(L){return n.bindVertexArray(L)}function h(L){return n.deleteVertexArray(L)}function p(L,H,j){const G=j.wireframe===!0;let K=i[L.id];K===void 0&&(K={},i[L.id]=K);let ee=K[H.id];ee===void 0&&(ee={},K[H.id]=ee);let Y=ee[G];return Y===void 0&&(Y=g(l()),ee[G]=Y),Y}function g(L){const H=[],j=[],G=[];for(let K=0;K<t;K++)H[K]=0,j[K]=0,G[K]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:H,enabledAttributes:j,attributeDivisors:G,object:L,attributes:{},index:null}}function y(L,H,j,G){const K=a.attributes,ee=H.attributes;let Y=0;const re=j.getAttributes();for(const J in re)if(re[J].location>=0){const q=K[J];let X=ee[J];if(X===void 0&&(J==="instanceMatrix"&&L.instanceMatrix&&(X=L.instanceMatrix),J==="instanceColor"&&L.instanceColor&&(X=L.instanceColor)),q===void 0||q.attribute!==X||X&&q.data!==X.data)return!0;Y++}return a.attributesNum!==Y||a.index!==G}function _(L,H,j,G){const K={},ee=H.attributes;let Y=0;const re=j.getAttributes();for(const J in re)if(re[J].location>=0){let q=ee[J];q===void 0&&(J==="instanceMatrix"&&L.instanceMatrix&&(q=L.instanceMatrix),J==="instanceColor"&&L.instanceColor&&(q=L.instanceColor));const X={};X.attribute=q,q&&q.data&&(X.data=q.data),K[J]=X,Y++}a.attributes=K,a.attributesNum=Y,a.index=G}function S(){const L=a.newAttributes;for(let H=0,j=L.length;H<j;H++)L[H]=0}function x(L){w(L,0)}function w(L,H){const j=a.newAttributes,G=a.enabledAttributes,K=a.attributeDivisors;j[L]=1,G[L]===0&&(n.enableVertexAttribArray(L),G[L]=1),K[L]!==H&&(n.vertexAttribDivisor(L,H),K[L]=H)}function T(){const L=a.newAttributes,H=a.enabledAttributes;for(let j=0,G=H.length;j<G;j++)H[j]!==L[j]&&(n.disableVertexAttribArray(j),H[j]=0)}function M(L,H,j,G,K,ee,Y){Y===!0?n.vertexAttribIPointer(L,H,j,K,ee):n.vertexAttribPointer(L,H,j,G,K,ee)}function C(L,H,j,G){S();const K=G.attributes,ee=j.getAttributes(),Y=H.defaultAttributeValues;for(const re in ee){const J=ee[re];if(J.location>=0){let se=K[re];if(se===void 0&&(re==="instanceMatrix"&&L.instanceMatrix&&(se=L.instanceMatrix),re==="instanceColor"&&L.instanceColor&&(se=L.instanceColor)),se!==void 0){const q=se.normalized,X=se.itemSize,oe=e.get(se);if(oe===void 0)continue;const ue=oe.buffer,Z=oe.type,ce=oe.bytesPerElement,me=Z===n.INT||Z===n.UNSIGNED_INT||se.gpuType===Q1;if(se.isInterleavedBufferAttribute){const de=se.data,ve=de.stride,We=se.offset;if(de.isInstancedInterleavedBuffer){for(let ze=0;ze<J.locationSize;ze++)w(J.location+ze,de.meshPerAttribute);L.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=de.meshPerAttribute*de.count)}else for(let ze=0;ze<J.locationSize;ze++)x(J.location+ze);n.bindBuffer(n.ARRAY_BUFFER,ue);for(let ze=0;ze<J.locationSize;ze++)M(J.location+ze,X/J.locationSize,Z,q,ve*ce,(We+X/J.locationSize*ze)*ce,me)}else{if(se.isInstancedBufferAttribute){for(let de=0;de<J.locationSize;de++)w(J.location+de,se.meshPerAttribute);L.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=se.meshPerAttribute*se.count)}else for(let de=0;de<J.locationSize;de++)x(J.location+de);n.bindBuffer(n.ARRAY_BUFFER,ue);for(let de=0;de<J.locationSize;de++)M(J.location+de,X/J.locationSize,Z,q,X*ce,X/J.locationSize*de*ce,me)}}else if(Y!==void 0){const q=Y[re];if(q!==void 0)switch(q.length){case 2:n.vertexAttrib2fv(J.location,q);break;case 3:n.vertexAttrib3fv(J.location,q);break;case 4:n.vertexAttrib4fv(J.location,q);break;default:n.vertexAttrib1fv(J.location,q)}}}}T()}function N(){z();for(const L in i){const H=i[L];for(const j in H){const G=H[j];for(const K in G)h(G[K].object),delete G[K];delete H[j]}delete i[L]}}function D(L){if(i[L.id]===void 0)return;const H=i[L.id];for(const j in H){const G=H[j];for(const K in G)h(G[K].object),delete G[K];delete H[j]}delete i[L.id]}function P(L){for(const H in i){const j=i[H];if(j[L.id]===void 0)continue;const G=j[L.id];for(const K in G)h(G[K].object),delete G[K];delete j[L.id]}}function z(){I(),s=!0,a!==r&&(a=r,u(a.object))}function I(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:o,reset:z,resetDefaultState:I,dispose:N,releaseStatesOfGeometry:D,releaseStatesOfProgram:P,initAttributes:S,enableAttribute:x,disableUnusedAttributes:T}}function $X(n,e,t){let i;function r(u){i=u}function a(u,h){n.drawArrays(i,u,h),t.update(h,i,1)}function s(u,h,p){p!==0&&(n.drawArraysInstanced(i,u,h,p),t.update(h,i,p))}function o(u,h,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,u,0,h,0,p);let y=0;for(let _=0;_<p;_++)y+=h[_];t.update(y,i,1)}function l(u,h,p,g){if(p===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let _=0;_<u.length;_++)s(u[_],h[_],g[_]);else{y.multiDrawArraysInstancedWEBGL(i,u,0,h,0,g,0,p);let _=0;for(let S=0;S<p;S++)_+=h[S]*g[S];t.update(_,i,1)}}this.setMode=r,this.render=a,this.renderInstances=s,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function XX(n,e,t,i){let r;function a(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(P){return!(P!==za&&i.convert(P)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(P){const z=P===Ig&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(P!==Gl&&i.convert(P)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&P!==Fs&&!z)}function l(P){if(P==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp";const h=l(u);h!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",h,"instead."),u=h);const p=t.logarithmicDepthBuffer===!0,g=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),y=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),_=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),S=n.getParameter(n.MAX_TEXTURE_SIZE),x=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),w=n.getParameter(n.MAX_VERTEX_ATTRIBS),T=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),M=n.getParameter(n.MAX_VARYING_VECTORS),C=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),N=_>0,D=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:l,textureFormatReadable:s,textureTypeReadable:o,precision:u,logarithmicDepthBuffer:p,reverseDepthBuffer:g,maxTextures:y,maxVertexTextures:_,maxTextureSize:S,maxCubemapSize:x,maxAttributes:w,maxVertexUniforms:T,maxVaryings:M,maxFragmentUniforms:C,vertexTextures:N,maxSamples:D}}function KX(n){const e=this;let t=null,i=0,r=!1,a=!1;const s=new sh,o=new rn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(p,g){const y=p.length!==0||g||i!==0||r;return r=g,i=p.length,y},this.beginShadows=function(){a=!0,h(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(p,g){t=h(p,g,0)},this.setState=function(p,g,y){const _=p.clippingPlanes,S=p.clipIntersection,x=p.clipShadows,w=n.get(p);if(!r||_===null||_.length===0||a&&!x)a?h(null):u();else{const T=a?0:i,M=T*4;let C=w.clippingState||null;l.value=C,C=h(_,g,M,y);for(let N=0;N!==M;++N)C[N]=t[N];w.clippingState=C,this.numIntersection=S?this.numPlanes:0,this.numPlanes+=T}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(p,g,y,_){const S=p!==null?p.length:0;let x=null;if(S!==0){if(x=l.value,_!==!0||x===null){const w=y+S*4,T=g.matrixWorldInverse;o.getNormalMatrix(T),(x===null||x.length<w)&&(x=new Float32Array(w));for(let M=0,C=y;M!==S;++M,C+=4)s.copy(p[M]).applyMatrix4(T,o),s.normal.toArray(x,C),x[C+3]=s.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=S,e.numIntersection=0,x}}function ZX(n){let e=new WeakMap;function t(s,o){return o===mg?s.mapping=Qu:o===l0&&(s.mapping=ph),s}function i(s){if(s&&s.isTexture){const o=s.mapping;if(o===mg||o===l0)if(e.has(s)){const l=e.get(s).texture;return t(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const u=new tH(l.height);return u.fromEquirectangularTexture(n,s),e.set(s,u),s.addEventListener("dispose",r),t(u.texture,s.mapping)}else return null}}return s}function r(s){const o=s.target;o.removeEventListener("dispose",r);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function a(){e=new WeakMap}return{get:i,dispose:a}}const og=4,_P=[.125,.215,.35,.446,.526,.582],Id=20,IT=new a_,bP=new yt;let BT=null,zT=0,kT=0,FT=!1;const Nd=(1+Math.sqrt(5))/2,Um=1/Nd,SP=[new le(-Nd,Um,0),new le(Nd,Um,0),new le(-Um,0,Nd),new le(Um,0,Nd),new le(0,Nd,-Um),new le(0,Nd,Um),new le(-1,1,-1),new le(1,1,-1),new le(-1,1,1),new le(1,1,1)],QX=new le;class $R{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100,a={}){const{size:s=256,position:o=QX}=a;BT=this._renderer.getRenderTarget(),zT=this._renderer.getActiveCubeFace(),kT=this._renderer.getActiveMipmapLevel(),FT=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,r,l,o),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=wP(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=EP(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(BT,zT,kT),this._renderer.xr.enabled=FT,e.scissorTest=!1,kS(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Qu||e.mapping===ph?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),BT=this._renderer.getRenderTarget(),zT=this._renderer.getActiveCubeFace(),kT=this._renderer.getActiveMipmapLevel(),FT=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Sr,minFilter:Sr,generateMipmaps:!1,type:Ig,format:za,colorSpace:mh,depthBuffer:!1},r=xP(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=xP(e,t,i);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=JX(a)),this._blurMaterial=eK(a,e,t)}return r}_compileMaterial(e){const t=new Ni(this._lodPlanes[0],e);this._renderer.compile(t,IT)}_sceneToCubeUV(e,t,i,r,a){const l=new Ir(90,1,t,i),u=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],p=this._renderer,g=p.autoClear,y=p.toneMapping;p.getClearColor(bP),p.toneMapping=Vc,p.autoClear=!1;const _=new of({name:"PMREM.Background",side:ds,depthWrite:!1,depthTest:!1}),S=new Ni(new _p,_);let x=!1;const w=e.background;w?w.isColor&&(_.color.copy(w),e.background=null,x=!0):(_.color.copy(bP),x=!0);for(let T=0;T<6;T++){const M=T%3;M===0?(l.up.set(0,u[T],0),l.position.set(a.x,a.y,a.z),l.lookAt(a.x+h[T],a.y,a.z)):M===1?(l.up.set(0,0,u[T]),l.position.set(a.x,a.y,a.z),l.lookAt(a.x,a.y+h[T],a.z)):(l.up.set(0,u[T],0),l.position.set(a.x,a.y,a.z),l.lookAt(a.x,a.y,a.z+h[T]));const C=this._cubeSize;kS(r,M*C,T>2?C:0,C,C),p.setRenderTarget(r),x&&p.render(S,l),p.render(e,l)}S.geometry.dispose(),S.material.dispose(),p.toneMapping=y,p.autoClear=g,e.background=w}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Qu||e.mapping===ph;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=wP()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=EP());const a=r?this._cubemapMaterial:this._equirectMaterial,s=new Ni(this._lodPlanes[0],a),o=a.uniforms;o.envMap.value=e;const l=this._cubeSize;kS(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(s,IT)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let a=1;a<r;a++){const s=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),o=SP[(r-a-1)%SP.length];this._blur(e,a-1,a,s,o)}t.autoClear=i}_blur(e,t,i,r,a){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,r,"latitudinal",a),this._halfBlur(s,e,i,i,r,"longitudinal",a)}_halfBlur(e,t,i,r,a,s,o){const l=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,p=new Ni(this._lodPlanes[r],u),g=u.uniforms,y=this._sizeLods[i]-1,_=isFinite(a)?Math.PI/(2*y):2*Math.PI/(2*Id-1),S=a/_,x=isFinite(a)?1+Math.floor(h*S):Id;x>Id&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${Id}`);const w=[];let T=0;for(let P=0;P<Id;++P){const z=P/S,I=Math.exp(-z*z/2);w.push(I),P===0?T+=I:P<x&&(T+=2*I)}for(let P=0;P<w.length;P++)w[P]=w[P]/T;g.envMap.value=e.texture,g.samples.value=x,g.weights.value=w,g.latitudinal.value=s==="latitudinal",o&&(g.poleAxis.value=o);const{_lodMax:M}=this;g.dTheta.value=_,g.mipInt.value=M-i;const C=this._sizeLods[r],N=3*C*(r>M-og?r-M+og:0),D=4*(this._cubeSize-C);kS(t,N,D,3*C,2*C),l.setRenderTarget(t),l.render(p,IT)}}function JX(n){const e=[],t=[],i=[];let r=n;const a=n-og+1+_P.length;for(let s=0;s<a;s++){const o=Math.pow(2,r);t.push(o);let l=1/o;s>n-og?l=_P[s-n+og-1]:s===0&&(l=0),i.push(l);const u=1/(o-2),h=-u,p=1+u,g=[h,h,p,h,p,p,h,h,p,p,h,p],y=6,_=6,S=3,x=2,w=1,T=new Float32Array(S*_*y),M=new Float32Array(x*_*y),C=new Float32Array(w*_*y);for(let D=0;D<y;D++){const P=D%3*2/3-1,z=D>2?0:-1,I=[P,z,0,P+2/3,z,0,P+2/3,z+1,0,P,z,0,P+2/3,z+1,0,P,z+1,0];T.set(I,S*_*D),M.set(g,x*_*D);const L=[D,D,D,D,D,D];C.set(L,w*_*D)}const N=new on;N.setAttribute("position",new oi(T,S)),N.setAttribute("uv",new oi(M,x)),N.setAttribute("faceIndex",new oi(C,w)),e.push(N),r>og&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function xP(n,e,t){const i=new Yc(n,e,t);return i.texture.mapping=Lg,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function kS(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function eK(n,e,t){const i=new Float32Array(Id),r=new le(0,1,0);return new jl({name:"SphericalGaussianBlur",defines:{n:Id,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:XD(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:$u,depthTest:!1,depthWrite:!1})}function EP(){return new jl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:XD(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:$u,depthTest:!1,depthWrite:!1})}function wP(){return new jl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:XD(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:$u,depthTest:!1,depthWrite:!1})}function XD(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function tK(n){let e=new WeakMap,t=null;function i(o){if(o&&o.isTexture){const l=o.mapping,u=l===mg||l===l0,h=l===Qu||l===ph;if(u||h){let p=e.get(o);const g=p!==void 0?p.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==g)return t===null&&(t=new $R(n)),p=u?t.fromEquirectangular(o,p):t.fromCubemap(o,p),p.texture.pmremVersion=o.pmremVersion,e.set(o,p),p.texture;if(p!==void 0)return p.texture;{const y=o.image;return u&&y&&y.height>0||h&&y&&r(y)?(t===null&&(t=new $R(n)),p=u?t.fromEquirectangular(o):t.fromCubemap(o),p.texture.pmremVersion=o.pmremVersion,e.set(o,p),o.addEventListener("dispose",a),p.texture):null}}}return o}function r(o){let l=0;const u=6;for(let h=0;h<u;h++)o[h]!==void 0&&l++;return l===u}function a(o){const l=o.target;l.removeEventListener("dispose",a);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:s}}function nK(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&Ud("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function iK(n,e,t,i){const r={},a=new WeakMap;function s(p){const g=p.target;g.index!==null&&e.remove(g.index);for(const _ in g.attributes)e.remove(g.attributes[_]);g.removeEventListener("dispose",s),delete r[g.id];const y=a.get(g);y&&(e.remove(y),a.delete(g)),i.releaseStatesOfGeometry(g),g.isInstancedBufferGeometry===!0&&delete g._maxInstanceCount,t.memory.geometries--}function o(p,g){return r[g.id]===!0||(g.addEventListener("dispose",s),r[g.id]=!0,t.memory.geometries++),g}function l(p){const g=p.attributes;for(const y in g)e.update(g[y],n.ARRAY_BUFFER)}function u(p){const g=[],y=p.index,_=p.attributes.position;let S=0;if(y!==null){const T=y.array;S=y.version;for(let M=0,C=T.length;M<C;M+=3){const N=T[M+0],D=T[M+1],P=T[M+2];g.push(N,D,D,P,P,N)}}else if(_!==void 0){const T=_.array;S=_.version;for(let M=0,C=T.length/3-1;M<C;M+=3){const N=M+0,D=M+1,P=M+2;g.push(N,D,D,P,P,N)}}else return;const x=new(X5(g)?yD:oE)(g,1);x.version=S;const w=a.get(p);w&&e.remove(w),a.set(p,x)}function h(p){const g=a.get(p);if(g){const y=p.index;y!==null&&g.version<y.version&&u(p)}else u(p);return a.get(p)}return{get:o,update:l,getWireframeAttribute:h}}function rK(n,e,t){let i;function r(g){i=g}let a,s;function o(g){a=g.type,s=g.bytesPerElement}function l(g,y){n.drawElements(i,y,a,g*s),t.update(y,i,1)}function u(g,y,_){_!==0&&(n.drawElementsInstanced(i,y,a,g*s,_),t.update(y,i,_))}function h(g,y,_){if(_===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,y,0,a,g,0,_);let x=0;for(let w=0;w<_;w++)x+=y[w];t.update(x,i,1)}function p(g,y,_,S){if(_===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let w=0;w<g.length;w++)u(g[w]/s,y[w],S[w]);else{x.multiDrawElementsInstancedWEBGL(i,y,0,a,g,0,S,0,_);let w=0;for(let T=0;T<_;T++)w+=y[T]*S[T];t.update(w,i,1)}}this.setMode=r,this.setIndex=o,this.render=l,this.renderInstances=u,this.renderMultiDraw=h,this.renderMultiDrawInstances=p}function aK(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(a,s,o){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=o*(a/3);break;case n.LINES:t.lines+=o*(a/2);break;case n.LINE_STRIP:t.lines+=o*(a-1);break;case n.LINE_LOOP:t.lines+=o*a;break;case n.POINTS:t.points+=o*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function sK(n,e,t){const i=new WeakMap,r=new yn;function a(s,o,l){const u=s.morphTargetInfluences,h=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,p=h!==void 0?h.length:0;let g=i.get(o);if(g===void 0||g.count!==p){let L=function(){z.dispose(),i.delete(o),o.removeEventListener("dispose",L)};var y=L;g!==void 0&&g.texture.dispose();const _=o.morphAttributes.position!==void 0,S=o.morphAttributes.normal!==void 0,x=o.morphAttributes.color!==void 0,w=o.morphAttributes.position||[],T=o.morphAttributes.normal||[],M=o.morphAttributes.color||[];let C=0;_===!0&&(C=1),S===!0&&(C=2),x===!0&&(C=3);let N=o.attributes.position.count*C,D=1;N>e.maxTextureSize&&(D=Math.ceil(N/e.maxTextureSize),N=e.maxTextureSize);const P=new Float32Array(N*D*4*p),z=new Z0(P,N,D,p);z.type=Fs,z.needsUpdate=!0;const I=C*4;for(let H=0;H<p;H++){const j=w[H],G=T[H],K=M[H],ee=N*D*4*H;for(let Y=0;Y<j.count;Y++){const re=Y*I;_===!0&&(r.fromBufferAttribute(j,Y),P[ee+re+0]=r.x,P[ee+re+1]=r.y,P[ee+re+2]=r.z,P[ee+re+3]=0),S===!0&&(r.fromBufferAttribute(G,Y),P[ee+re+4]=r.x,P[ee+re+5]=r.y,P[ee+re+6]=r.z,P[ee+re+7]=0),x===!0&&(r.fromBufferAttribute(K,Y),P[ee+re+8]=r.x,P[ee+re+9]=r.y,P[ee+re+10]=r.z,P[ee+re+11]=K.itemSize===4?r.w:1)}}g={count:p,texture:z,size:new st(N,D)},i.set(o,g),o.addEventListener("dispose",L)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",s.morphTexture,t);else{let _=0;for(let x=0;x<u.length;x++)_+=u[x];const S=o.morphTargetsRelative?1:1-_;l.getUniforms().setValue(n,"morphTargetBaseInfluence",S),l.getUniforms().setValue(n,"morphTargetInfluences",u)}l.getUniforms().setValue(n,"morphTargetsTexture",g.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",g.size)}return{update:a}}function oK(n,e,t,i){let r=new WeakMap;function a(l){const u=i.render.frame,h=l.geometry,p=e.get(l,h);if(r.get(p)!==u&&(e.update(p),r.set(p,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),r.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,u))),l.isSkinnedMesh){const g=l.skeleton;r.get(g)!==u&&(g.update(),r.set(g,u))}return p}function s(){r=new WeakMap}function o(l){const u=l.target;u.removeEventListener("dispose",o),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:a,dispose:s}}const YH=new Pi,TP=new wD(1,1),$H=new Z0,XH=new sE,KH=new Q0,MP=[],AP=[],CP=new Float32Array(16),RP=new Float32Array(9),OP=new Float32Array(4);function kg(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let a=MP[r];if(a===void 0&&(a=new Float32Array(r),MP[r]=a),e!==0){i.toArray(a,0);for(let s=1,o=0;s!==e;++s)o+=t,n[s].toArray(a,o)}return a}function Br(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function zr(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function OE(n,e){let t=AP[e];t===void 0&&(t=new Int32Array(e),AP[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function lK(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function cK(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Br(t,e))return;n.uniform2fv(this.addr,e),zr(t,e)}}function uK(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Br(t,e))return;n.uniform3fv(this.addr,e),zr(t,e)}}function fK(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Br(t,e))return;n.uniform4fv(this.addr,e),zr(t,e)}}function hK(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Br(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),zr(t,e)}else{if(Br(t,i))return;OP.set(i),n.uniformMatrix2fv(this.addr,!1,OP),zr(t,i)}}function dK(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Br(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),zr(t,e)}else{if(Br(t,i))return;RP.set(i),n.uniformMatrix3fv(this.addr,!1,RP),zr(t,i)}}function pK(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Br(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),zr(t,e)}else{if(Br(t,i))return;CP.set(i),n.uniformMatrix4fv(this.addr,!1,CP),zr(t,i)}}function mK(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function gK(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Br(t,e))return;n.uniform2iv(this.addr,e),zr(t,e)}}function vK(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Br(t,e))return;n.uniform3iv(this.addr,e),zr(t,e)}}function yK(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Br(t,e))return;n.uniform4iv(this.addr,e),zr(t,e)}}function _K(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function bK(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Br(t,e))return;n.uniform2uiv(this.addr,e),zr(t,e)}}function SK(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Br(t,e))return;n.uniform3uiv(this.addr,e),zr(t,e)}}function xK(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Br(t,e))return;n.uniform4uiv(this.addr,e),zr(t,e)}}function EK(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let a;this.type===n.SAMPLER_2D_SHADOW?(TP.compareFunction=gD,a=TP):a=YH,t.setTexture2D(e||a,r)}function wK(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||XH,r)}function TK(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||KH,r)}function MK(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||$H,r)}function AK(n){switch(n){case 5126:return lK;case 35664:return cK;case 35665:return uK;case 35666:return fK;case 35674:return hK;case 35675:return dK;case 35676:return pK;case 5124:case 35670:return mK;case 35667:case 35671:return gK;case 35668:case 35672:return vK;case 35669:case 35673:return yK;case 5125:return _K;case 36294:return bK;case 36295:return SK;case 36296:return xK;case 35678:case 36198:case 36298:case 36306:case 35682:return EK;case 35679:case 36299:case 36307:return wK;case 35680:case 36300:case 36308:case 36293:return TK;case 36289:case 36303:case 36311:case 36292:return MK}}function CK(n,e){n.uniform1fv(this.addr,e)}function RK(n,e){const t=kg(e,this.size,2);n.uniform2fv(this.addr,t)}function OK(n,e){const t=kg(e,this.size,3);n.uniform3fv(this.addr,t)}function DK(n,e){const t=kg(e,this.size,4);n.uniform4fv(this.addr,t)}function UK(n,e){const t=kg(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function NK(n,e){const t=kg(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function PK(n,e){const t=kg(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function LK(n,e){n.uniform1iv(this.addr,e)}function IK(n,e){n.uniform2iv(this.addr,e)}function BK(n,e){n.uniform3iv(this.addr,e)}function zK(n,e){n.uniform4iv(this.addr,e)}function kK(n,e){n.uniform1uiv(this.addr,e)}function FK(n,e){n.uniform2uiv(this.addr,e)}function HK(n,e){n.uniform3uiv(this.addr,e)}function VK(n,e){n.uniform4uiv(this.addr,e)}function GK(n,e,t){const i=this.cache,r=e.length,a=OE(t,r);Br(i,a)||(n.uniform1iv(this.addr,a),zr(i,a));for(let s=0;s!==r;++s)t.setTexture2D(e[s]||YH,a[s])}function jK(n,e,t){const i=this.cache,r=e.length,a=OE(t,r);Br(i,a)||(n.uniform1iv(this.addr,a),zr(i,a));for(let s=0;s!==r;++s)t.setTexture3D(e[s]||XH,a[s])}function qK(n,e,t){const i=this.cache,r=e.length,a=OE(t,r);Br(i,a)||(n.uniform1iv(this.addr,a),zr(i,a));for(let s=0;s!==r;++s)t.setTextureCube(e[s]||KH,a[s])}function WK(n,e,t){const i=this.cache,r=e.length,a=OE(t,r);Br(i,a)||(n.uniform1iv(this.addr,a),zr(i,a));for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||$H,a[s])}function YK(n){switch(n){case 5126:return CK;case 35664:return RK;case 35665:return OK;case 35666:return DK;case 35674:return UK;case 35675:return NK;case 35676:return PK;case 5124:case 35670:return LK;case 35667:case 35671:return IK;case 35668:case 35672:return BK;case 35669:case 35673:return zK;case 5125:return kK;case 36294:return FK;case 36295:return HK;case 36296:return VK;case 35678:case 36198:case 36298:case 36306:case 35682:return GK;case 35679:case 36299:case 36307:return jK;case 35680:case 36300:case 36308:case 36293:return qK;case 36289:case 36303:case 36311:case 36292:return WK}}class $K{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=AK(t.type)}}class XK{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=YK(t.type)}}class KK{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let a=0,s=r.length;a!==s;++a){const o=r[a];o.setValue(e,t[o.id],i)}}}const HT=/(\w+)(\])?(\[|\.)?/g;function DP(n,e){n.seq.push(e),n.map[e.id]=e}function ZK(n,e,t){const i=n.name,r=i.length;for(HT.lastIndex=0;;){const a=HT.exec(i),s=HT.lastIndex;let o=a[1];const l=a[2]==="]",u=a[3];if(l&&(o=o|0),u===void 0||u==="["&&s+2===r){DP(t,u===void 0?new $K(o,n,e):new XK(o,n,e));break}else{let p=t.map[o];p===void 0&&(p=new KK(o),DP(t,p)),t=p}}}class px{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const a=e.getActiveUniform(t,r),s=e.getUniformLocation(t,a.name);ZK(a,s,this)}}setValue(e,t,i,r){const a=this.map[t];a!==void 0&&a.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let a=0,s=t.length;a!==s;++a){const o=t[a],l=i[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,a=e.length;r!==a;++r){const s=e[r];s.id in t&&i.push(s)}return i}}function UP(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const QK=37297;let JK=0;function eZ(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let s=r;s<a;s++){const o=s+1;i.push(`${o===e?">":" "} ${o}: ${t[s]}`)}return i.join(`
`)}const NP=new rn;function tZ(n){cn._getMatrix(NP,cn.workingColorSpace,n);const e=`mat3( ${NP.elements.map(t=>t.toFixed(4))} )`;switch(cn.getTransfer(n)){case h0:return[e,"LinearTransferOETF"];case ei:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function PP(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const a=/ERROR: 0:(\d+)/.exec(r);if(a){const s=parseInt(a[1]);return t.toUpperCase()+`

`+r+`

`+eZ(n.getShaderSource(e),s)}else return r}function nZ(n,e){const t=tZ(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function iZ(n,e){let t;switch(e){case O5:t="Linear";break;case D5:t="Reinhard";break;case U5:t="Cineon";break;case iD:t="ACESFilmic";break;case P5:t="AgX";break;case L5:t="Neutral";break;case N5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const FS=new le;function rZ(){cn.getLuminanceCoefficients(FS);const n=FS.x.toFixed(4),e=FS.y.toFixed(4),t=FS.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function aZ(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Ny).join(`
`)}function sZ(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function oZ(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const a=n.getActiveAttrib(e,r),s=a.name;let o=1;a.type===n.FLOAT_MAT2&&(o=2),a.type===n.FLOAT_MAT3&&(o=3),a.type===n.FLOAT_MAT4&&(o=4),t[s]={type:a.type,location:n.getAttribLocation(e,s),locationSize:o}}return t}function Ny(n){return n!==""}function LP(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function IP(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const lZ=/^[ \t]*#include +<([\w\d./]+)>/gm;function XR(n){return n.replace(lZ,uZ)}const cZ=new Map;function uZ(n,e){let t=fn[e];if(t===void 0){const i=cZ.get(e);if(i!==void 0)t=fn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return XR(t)}const fZ=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function BP(n){return n.replace(fZ,hZ)}function hZ(n,e,t,i){let r="";for(let a=parseInt(e);a<parseInt(t);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function zP(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function dZ(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===K1?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Hy?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Ll&&(e="SHADOWMAP_TYPE_VSM"),e}function pZ(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Qu:case ph:e="ENVMAP_TYPE_CUBE";break;case Lg:e="ENVMAP_TYPE_CUBE_UV";break}return e}function mZ(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case ph:e="ENVMAP_MODE_REFRACTION";break}return e}function gZ(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case X0:e="ENVMAP_BLENDING_MULTIPLY";break;case C5:e="ENVMAP_BLENDING_MIX";break;case R5:e="ENVMAP_BLENDING_ADD";break}return e}function vZ(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function yZ(n,e,t,i){const r=n.getContext(),a=t.defines;let s=t.vertexShader,o=t.fragmentShader;const l=dZ(t),u=pZ(t),h=mZ(t),p=gZ(t),g=vZ(t),y=aZ(t),_=sZ(a),S=r.createProgram();let x,w,T=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(x=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(Ny).join(`
`),x.length>0&&(x+=`
`),w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(Ny).join(`
`),w.length>0&&(w+=`
`)):(x=[zP(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ny).join(`
`),w=[zP(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",t.envMap?"#define "+p:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Vc?"#define TONE_MAPPING":"",t.toneMapping!==Vc?fn.tonemapping_pars_fragment:"",t.toneMapping!==Vc?iZ("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",fn.colorspace_pars_fragment,nZ("linearToOutputTexel",t.outputColorSpace),rZ(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Ny).join(`
`)),s=XR(s),s=LP(s,t),s=IP(s,t),o=XR(o),o=LP(o,t),o=IP(o,t),s=BP(s),o=BP(o),t.isRawShaderMaterial!==!0&&(T=`#version 300 es
`,x=[y,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,w=["#define varying in",t.glslVersion===HR?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===HR?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);const M=T+x+s,C=T+w+o,N=UP(r,r.VERTEX_SHADER,M),D=UP(r,r.FRAGMENT_SHADER,C);r.attachShader(S,N),r.attachShader(S,D),t.index0AttributeName!==void 0?r.bindAttribLocation(S,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(S,0,"position"),r.linkProgram(S);function P(H){if(n.debug.checkShaderErrors){const j=r.getProgramInfoLog(S).trim(),G=r.getShaderInfoLog(N).trim(),K=r.getShaderInfoLog(D).trim();let ee=!0,Y=!0;if(r.getProgramParameter(S,r.LINK_STATUS)===!1)if(ee=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,S,N,D);else{const re=PP(r,N,"vertex"),J=PP(r,D,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(S,r.VALIDATE_STATUS)+`

Material Name: `+H.name+`
Material Type: `+H.type+`

Program Info Log: `+j+`
`+re+`
`+J)}else j!==""?console.warn("THREE.WebGLProgram: Program Info Log:",j):(G===""||K==="")&&(Y=!1);Y&&(H.diagnostics={runnable:ee,programLog:j,vertexShader:{log:G,prefix:x},fragmentShader:{log:K,prefix:w}})}r.deleteShader(N),r.deleteShader(D),z=new px(r,S),I=oZ(r,S)}let z;this.getUniforms=function(){return z===void 0&&P(this),z};let I;this.getAttributes=function(){return I===void 0&&P(this),I};let L=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return L===!1&&(L=r.getProgramParameter(S,QK)),L},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(S),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=JK++,this.cacheKey=e,this.usedTimes=1,this.program=S,this.vertexShader=N,this.fragmentShader=D,this}let _Z=0;class bZ{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),a=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(a)===!1&&(s.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new SZ(e),t.set(e,i)),i}}class SZ{constructor(e){this.id=_Z++,this.code=e,this.usedTimes=0}}function xZ(n,e,t,i,r,a,s){const o=new yg,l=new bZ,u=new Set,h=[],p=r.logarithmicDepthBuffer,g=r.vertexTextures;let y=r.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function S(I){return u.add(I),I===0?"uv":`uv${I}`}function x(I,L,H,j,G){const K=j.fog,ee=G.geometry,Y=I.isMeshStandardMaterial?j.environment:null,re=(I.isMeshStandardMaterial?t:e).get(I.envMap||Y),J=re&&re.mapping===Lg?re.image.height:null,se=_[I.type];I.precision!==null&&(y=r.getMaxPrecision(I.precision),y!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",y,"instead."));const q=ee.morphAttributes.position||ee.morphAttributes.normal||ee.morphAttributes.color,X=q!==void 0?q.length:0;let oe=0;ee.morphAttributes.position!==void 0&&(oe=1),ee.morphAttributes.normal!==void 0&&(oe=2),ee.morphAttributes.color!==void 0&&(oe=3);let ue,Z,ce,me;if(se){const Ut=kl[se];ue=Ut.vertexShader,Z=Ut.fragmentShader}else ue=I.vertexShader,Z=I.fragmentShader,l.update(I),ce=l.getVertexShaderID(I),me=l.getFragmentShaderID(I);const de=n.getRenderTarget(),ve=n.state.buffers.depth.getReversed(),We=G.isInstancedMesh===!0,ze=G.isBatchedMesh===!0,qe=!!I.map,_e=!!I.matcap,Ae=!!re,te=!!I.aoMap,ke=!!I.lightMap,De=!!I.bumpMap,Ie=!!I.normalMap,Te=!!I.displacementMap,Xe=!!I.emissiveMap,Pe=!!I.metalnessMap,$=!!I.roughnessMap,W=I.anisotropy>0,ae=I.clearcoat>0,he=I.dispersion>0,Se=I.iridescence>0,Oe=I.sheen>0,je=I.transmission>0,Ge=W&&!!I.anisotropyMap,Ke=ae&&!!I.clearcoatMap,_t=ae&&!!I.clearcoatNormalMap,Ye=ae&&!!I.clearcoatRoughnessMap,ct=Se&&!!I.iridescenceMap,it=Se&&!!I.iridescenceThicknessMap,Ze=Oe&&!!I.sheenColorMap,$e=Oe&&!!I.sheenRoughnessMap,vt=!!I.specularMap,gt=!!I.specularColorMap,jt=!!I.specularIntensityMap,ye=je&&!!I.transmissionMap,Je=je&&!!I.thicknessMap,Ue=!!I.gradientMap,et=!!I.alphaMap,lt=I.alphaTest>0,rt=!!I.alphaHash,Tt=!!I.extensions;let Ft=Vc;I.toneMapped&&(de===null||de.isXRRenderTarget===!0)&&(Ft=n.toneMapping);const At={shaderID:se,shaderType:I.type,shaderName:I.name,vertexShader:ue,fragmentShader:Z,defines:I.defines,customVertexShaderID:ce,customFragmentShaderID:me,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:y,batching:ze,batchingColor:ze&&G._colorsTexture!==null,instancing:We,instancingColor:We&&G.instanceColor!==null,instancingMorph:We&&G.morphTexture!==null,supportsVertexTextures:g,outputColorSpace:de===null?n.outputColorSpace:de.isXRRenderTarget===!0?de.texture.colorSpace:mh,alphaToCoverage:!!I.alphaToCoverage,map:qe,matcap:_e,envMap:Ae,envMapMode:Ae&&re.mapping,envMapCubeUVHeight:J,aoMap:te,lightMap:ke,bumpMap:De,normalMap:Ie,displacementMap:g&&Te,emissiveMap:Xe,normalMapObjectSpace:Ie&&I.normalMapType===H5,normalMapTangentSpace:Ie&&I.normalMapType===Eh,metalnessMap:Pe,roughnessMap:$,anisotropy:W,anisotropyMap:Ge,clearcoat:ae,clearcoatMap:Ke,clearcoatNormalMap:_t,clearcoatRoughnessMap:Ye,dispersion:he,iridescence:Se,iridescenceMap:ct,iridescenceThicknessMap:it,sheen:Oe,sheenColorMap:Ze,sheenRoughnessMap:$e,specularMap:vt,specularColorMap:gt,specularIntensityMap:jt,transmission:je,transmissionMap:ye,thicknessMap:Je,gradientMap:Ue,opaque:I.transparent===!1&&I.blending===qd&&I.alphaToCoverage===!1,alphaMap:et,alphaTest:lt,alphaHash:rt,combine:I.combine,mapUv:qe&&S(I.map.channel),aoMapUv:te&&S(I.aoMap.channel),lightMapUv:ke&&S(I.lightMap.channel),bumpMapUv:De&&S(I.bumpMap.channel),normalMapUv:Ie&&S(I.normalMap.channel),displacementMapUv:Te&&S(I.displacementMap.channel),emissiveMapUv:Xe&&S(I.emissiveMap.channel),metalnessMapUv:Pe&&S(I.metalnessMap.channel),roughnessMapUv:$&&S(I.roughnessMap.channel),anisotropyMapUv:Ge&&S(I.anisotropyMap.channel),clearcoatMapUv:Ke&&S(I.clearcoatMap.channel),clearcoatNormalMapUv:_t&&S(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ye&&S(I.clearcoatRoughnessMap.channel),iridescenceMapUv:ct&&S(I.iridescenceMap.channel),iridescenceThicknessMapUv:it&&S(I.iridescenceThicknessMap.channel),sheenColorMapUv:Ze&&S(I.sheenColorMap.channel),sheenRoughnessMapUv:$e&&S(I.sheenRoughnessMap.channel),specularMapUv:vt&&S(I.specularMap.channel),specularColorMapUv:gt&&S(I.specularColorMap.channel),specularIntensityMapUv:jt&&S(I.specularIntensityMap.channel),transmissionMapUv:ye&&S(I.transmissionMap.channel),thicknessMapUv:Je&&S(I.thicknessMap.channel),alphaMapUv:et&&S(I.alphaMap.channel),vertexTangents:!!ee.attributes.tangent&&(Ie||W),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!ee.attributes.color&&ee.attributes.color.itemSize===4,pointsUvs:G.isPoints===!0&&!!ee.attributes.uv&&(qe||et),fog:!!K,useFog:I.fog===!0,fogExp2:!!K&&K.isFogExp2,flatShading:I.flatShading===!0,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:p,reverseDepthBuffer:ve,skinning:G.isSkinnedMesh===!0,morphTargets:ee.morphAttributes.position!==void 0,morphNormals:ee.morphAttributes.normal!==void 0,morphColors:ee.morphAttributes.color!==void 0,morphTargetsCount:X,morphTextureStride:oe,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numLightProbes:L.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:I.dithering,shadowMapEnabled:n.shadowMap.enabled&&H.length>0,shadowMapType:n.shadowMap.type,toneMapping:Ft,decodeVideoTexture:qe&&I.map.isVideoTexture===!0&&cn.getTransfer(I.map.colorSpace)===ei,decodeVideoTextureEmissive:Xe&&I.emissiveMap.isVideoTexture===!0&&cn.getTransfer(I.emissiveMap.colorSpace)===ei,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===Fl,flipSided:I.side===ds,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionClipCullDistance:Tt&&I.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Tt&&I.extensions.multiDraw===!0||ze)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()};return At.vertexUv1s=u.has(1),At.vertexUv2s=u.has(2),At.vertexUv3s=u.has(3),u.clear(),At}function w(I){const L=[];if(I.shaderID?L.push(I.shaderID):(L.push(I.customVertexShaderID),L.push(I.customFragmentShaderID)),I.defines!==void 0)for(const H in I.defines)L.push(H),L.push(I.defines[H]);return I.isRawShaderMaterial===!1&&(T(L,I),M(L,I),L.push(n.outputColorSpace)),L.push(I.customProgramCacheKey),L.join()}function T(I,L){I.push(L.precision),I.push(L.outputColorSpace),I.push(L.envMapMode),I.push(L.envMapCubeUVHeight),I.push(L.mapUv),I.push(L.alphaMapUv),I.push(L.lightMapUv),I.push(L.aoMapUv),I.push(L.bumpMapUv),I.push(L.normalMapUv),I.push(L.displacementMapUv),I.push(L.emissiveMapUv),I.push(L.metalnessMapUv),I.push(L.roughnessMapUv),I.push(L.anisotropyMapUv),I.push(L.clearcoatMapUv),I.push(L.clearcoatNormalMapUv),I.push(L.clearcoatRoughnessMapUv),I.push(L.iridescenceMapUv),I.push(L.iridescenceThicknessMapUv),I.push(L.sheenColorMapUv),I.push(L.sheenRoughnessMapUv),I.push(L.specularMapUv),I.push(L.specularColorMapUv),I.push(L.specularIntensityMapUv),I.push(L.transmissionMapUv),I.push(L.thicknessMapUv),I.push(L.combine),I.push(L.fogExp2),I.push(L.sizeAttenuation),I.push(L.morphTargetsCount),I.push(L.morphAttributeCount),I.push(L.numDirLights),I.push(L.numPointLights),I.push(L.numSpotLights),I.push(L.numSpotLightMaps),I.push(L.numHemiLights),I.push(L.numRectAreaLights),I.push(L.numDirLightShadows),I.push(L.numPointLightShadows),I.push(L.numSpotLightShadows),I.push(L.numSpotLightShadowsWithMaps),I.push(L.numLightProbes),I.push(L.shadowMapType),I.push(L.toneMapping),I.push(L.numClippingPlanes),I.push(L.numClipIntersection),I.push(L.depthPacking)}function M(I,L){o.disableAll(),L.supportsVertexTextures&&o.enable(0),L.instancing&&o.enable(1),L.instancingColor&&o.enable(2),L.instancingMorph&&o.enable(3),L.matcap&&o.enable(4),L.envMap&&o.enable(5),L.normalMapObjectSpace&&o.enable(6),L.normalMapTangentSpace&&o.enable(7),L.clearcoat&&o.enable(8),L.iridescence&&o.enable(9),L.alphaTest&&o.enable(10),L.vertexColors&&o.enable(11),L.vertexAlphas&&o.enable(12),L.vertexUv1s&&o.enable(13),L.vertexUv2s&&o.enable(14),L.vertexUv3s&&o.enable(15),L.vertexTangents&&o.enable(16),L.anisotropy&&o.enable(17),L.alphaHash&&o.enable(18),L.batching&&o.enable(19),L.dispersion&&o.enable(20),L.batchingColor&&o.enable(21),I.push(o.mask),o.disableAll(),L.fog&&o.enable(0),L.useFog&&o.enable(1),L.flatShading&&o.enable(2),L.logarithmicDepthBuffer&&o.enable(3),L.reverseDepthBuffer&&o.enable(4),L.skinning&&o.enable(5),L.morphTargets&&o.enable(6),L.morphNormals&&o.enable(7),L.morphColors&&o.enable(8),L.premultipliedAlpha&&o.enable(9),L.shadowMapEnabled&&o.enable(10),L.doubleSided&&o.enable(11),L.flipSided&&o.enable(12),L.useDepthPacking&&o.enable(13),L.dithering&&o.enable(14),L.transmission&&o.enable(15),L.sheen&&o.enable(16),L.opaque&&o.enable(17),L.pointsUvs&&o.enable(18),L.decodeVideoTexture&&o.enable(19),L.decodeVideoTextureEmissive&&o.enable(20),L.alphaToCoverage&&o.enable(21),I.push(o.mask)}function C(I){const L=_[I.type];let H;if(L){const j=kl[L];H=_D.clone(j.uniforms)}else H=I.uniforms;return H}function N(I,L){let H;for(let j=0,G=h.length;j<G;j++){const K=h[j];if(K.cacheKey===L){H=K,++H.usedTimes;break}}return H===void 0&&(H=new yZ(n,L,I,a),h.push(H)),H}function D(I){if(--I.usedTimes===0){const L=h.indexOf(I);h[L]=h[h.length-1],h.pop(),I.destroy()}}function P(I){l.remove(I)}function z(){l.dispose()}return{getParameters:x,getProgramCacheKey:w,getUniforms:C,acquireProgram:N,releaseProgram:D,releaseShaderCache:P,programs:h,dispose:z}}function EZ(){let n=new WeakMap;function e(s){return n.has(s)}function t(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function i(s){n.delete(s)}function r(s,o,l){n.get(s)[o]=l}function a(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:a}}function wZ(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function kP(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function FP(){const n=[];let e=0;const t=[],i=[],r=[];function a(){e=0,t.length=0,i.length=0,r.length=0}function s(p,g,y,_,S,x){let w=n[e];return w===void 0?(w={id:p.id,object:p,geometry:g,material:y,groupOrder:_,renderOrder:p.renderOrder,z:S,group:x},n[e]=w):(w.id=p.id,w.object=p,w.geometry=g,w.material=y,w.groupOrder=_,w.renderOrder=p.renderOrder,w.z=S,w.group=x),e++,w}function o(p,g,y,_,S,x){const w=s(p,g,y,_,S,x);y.transmission>0?i.push(w):y.transparent===!0?r.push(w):t.push(w)}function l(p,g,y,_,S,x){const w=s(p,g,y,_,S,x);y.transmission>0?i.unshift(w):y.transparent===!0?r.unshift(w):t.unshift(w)}function u(p,g){t.length>1&&t.sort(p||wZ),i.length>1&&i.sort(g||kP),r.length>1&&r.sort(g||kP)}function h(){for(let p=e,g=n.length;p<g;p++){const y=n[p];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:t,transmissive:i,transparent:r,init:a,push:o,unshift:l,finish:h,sort:u}}function TZ(){let n=new WeakMap;function e(i,r){const a=n.get(i);let s;return a===void 0?(s=new FP,n.set(i,[s])):r>=a.length?(s=new FP,a.push(s)):s=a[r],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function MZ(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new le,color:new yt};break;case"SpotLight":t={position:new le,direction:new le,color:new yt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new le,color:new yt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new le,skyColor:new yt,groundColor:new yt};break;case"RectAreaLight":t={color:new yt,position:new le,halfWidth:new le,halfHeight:new le};break}return n[e.id]=t,t}}}function AZ(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new st};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new st};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new st,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let CZ=0;function RZ(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function OZ(n){const e=new MZ,t=AZ(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new le);const r=new le,a=new Mt,s=new Mt;function o(u){let h=0,p=0,g=0;for(let I=0;I<9;I++)i.probe[I].set(0,0,0);let y=0,_=0,S=0,x=0,w=0,T=0,M=0,C=0,N=0,D=0,P=0;u.sort(RZ);for(let I=0,L=u.length;I<L;I++){const H=u[I],j=H.color,G=H.intensity,K=H.distance,ee=H.shadow&&H.shadow.map?H.shadow.map.texture:null;if(H.isAmbientLight)h+=j.r*G,p+=j.g*G,g+=j.b*G;else if(H.isLightProbe){for(let Y=0;Y<9;Y++)i.probe[Y].addScaledVector(H.sh.coefficients[Y],G);P++}else if(H.isDirectionalLight){const Y=e.get(H);if(Y.color.copy(H.color).multiplyScalar(H.intensity),H.castShadow){const re=H.shadow,J=t.get(H);J.shadowIntensity=re.intensity,J.shadowBias=re.bias,J.shadowNormalBias=re.normalBias,J.shadowRadius=re.radius,J.shadowMapSize=re.mapSize,i.directionalShadow[y]=J,i.directionalShadowMap[y]=ee,i.directionalShadowMatrix[y]=H.shadow.matrix,T++}i.directional[y]=Y,y++}else if(H.isSpotLight){const Y=e.get(H);Y.position.setFromMatrixPosition(H.matrixWorld),Y.color.copy(j).multiplyScalar(G),Y.distance=K,Y.coneCos=Math.cos(H.angle),Y.penumbraCos=Math.cos(H.angle*(1-H.penumbra)),Y.decay=H.decay,i.spot[S]=Y;const re=H.shadow;if(H.map&&(i.spotLightMap[N]=H.map,N++,re.updateMatrices(H),H.castShadow&&D++),i.spotLightMatrix[S]=re.matrix,H.castShadow){const J=t.get(H);J.shadowIntensity=re.intensity,J.shadowBias=re.bias,J.shadowNormalBias=re.normalBias,J.shadowRadius=re.radius,J.shadowMapSize=re.mapSize,i.spotShadow[S]=J,i.spotShadowMap[S]=ee,C++}S++}else if(H.isRectAreaLight){const Y=e.get(H);Y.color.copy(j).multiplyScalar(G),Y.halfWidth.set(H.width*.5,0,0),Y.halfHeight.set(0,H.height*.5,0),i.rectArea[x]=Y,x++}else if(H.isPointLight){const Y=e.get(H);if(Y.color.copy(H.color).multiplyScalar(H.intensity),Y.distance=H.distance,Y.decay=H.decay,H.castShadow){const re=H.shadow,J=t.get(H);J.shadowIntensity=re.intensity,J.shadowBias=re.bias,J.shadowNormalBias=re.normalBias,J.shadowRadius=re.radius,J.shadowMapSize=re.mapSize,J.shadowCameraNear=re.camera.near,J.shadowCameraFar=re.camera.far,i.pointShadow[_]=J,i.pointShadowMap[_]=ee,i.pointShadowMatrix[_]=H.shadow.matrix,M++}i.point[_]=Y,_++}else if(H.isHemisphereLight){const Y=e.get(H);Y.skyColor.copy(H.color).multiplyScalar(G),Y.groundColor.copy(H.groundColor).multiplyScalar(G),i.hemi[w]=Y,w++}}x>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=wt.LTC_FLOAT_1,i.rectAreaLTC2=wt.LTC_FLOAT_2):(i.rectAreaLTC1=wt.LTC_HALF_1,i.rectAreaLTC2=wt.LTC_HALF_2)),i.ambient[0]=h,i.ambient[1]=p,i.ambient[2]=g;const z=i.hash;(z.directionalLength!==y||z.pointLength!==_||z.spotLength!==S||z.rectAreaLength!==x||z.hemiLength!==w||z.numDirectionalShadows!==T||z.numPointShadows!==M||z.numSpotShadows!==C||z.numSpotMaps!==N||z.numLightProbes!==P)&&(i.directional.length=y,i.spot.length=S,i.rectArea.length=x,i.point.length=_,i.hemi.length=w,i.directionalShadow.length=T,i.directionalShadowMap.length=T,i.pointShadow.length=M,i.pointShadowMap.length=M,i.spotShadow.length=C,i.spotShadowMap.length=C,i.directionalShadowMatrix.length=T,i.pointShadowMatrix.length=M,i.spotLightMatrix.length=C+N-D,i.spotLightMap.length=N,i.numSpotLightShadowsWithMaps=D,i.numLightProbes=P,z.directionalLength=y,z.pointLength=_,z.spotLength=S,z.rectAreaLength=x,z.hemiLength=w,z.numDirectionalShadows=T,z.numPointShadows=M,z.numSpotShadows=C,z.numSpotMaps=N,z.numLightProbes=P,i.version=CZ++)}function l(u,h){let p=0,g=0,y=0,_=0,S=0;const x=h.matrixWorldInverse;for(let w=0,T=u.length;w<T;w++){const M=u[w];if(M.isDirectionalLight){const C=i.directional[p];C.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),C.direction.sub(r),C.direction.transformDirection(x),p++}else if(M.isSpotLight){const C=i.spot[y];C.position.setFromMatrixPosition(M.matrixWorld),C.position.applyMatrix4(x),C.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),C.direction.sub(r),C.direction.transformDirection(x),y++}else if(M.isRectAreaLight){const C=i.rectArea[_];C.position.setFromMatrixPosition(M.matrixWorld),C.position.applyMatrix4(x),s.identity(),a.copy(M.matrixWorld),a.premultiply(x),s.extractRotation(a),C.halfWidth.set(M.width*.5,0,0),C.halfHeight.set(0,M.height*.5,0),C.halfWidth.applyMatrix4(s),C.halfHeight.applyMatrix4(s),_++}else if(M.isPointLight){const C=i.point[g];C.position.setFromMatrixPosition(M.matrixWorld),C.position.applyMatrix4(x),g++}else if(M.isHemisphereLight){const C=i.hemi[S];C.direction.setFromMatrixPosition(M.matrixWorld),C.direction.transformDirection(x),S++}}}return{setup:o,setupView:l,state:i}}function HP(n){const e=new OZ(n),t=[],i=[];function r(h){u.camera=h,t.length=0,i.length=0}function a(h){t.push(h)}function s(h){i.push(h)}function o(){e.setup(t)}function l(h){e.setupView(t,h)}const u={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:u,setupLights:o,setupLightsView:l,pushLight:a,pushShadow:s}}function DZ(n){let e=new WeakMap;function t(r,a=0){const s=e.get(r);let o;return s===void 0?(o=new HP(n),e.set(r,[o])):a>=s.length?(o=new HP(n),s.push(o)):o=s[a],o}function i(){e=new WeakMap}return{get:t,dispose:i}}const UZ=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,NZ=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function PZ(n,e,t){let i=new e_;const r=new st,a=new st,s=new yn,o=new AE({depthPacking:mD}),l=new CE,u={},h=t.maxTextureSize,p={[Zu]:ds,[ds]:Zu,[Fl]:Fl},g=new jl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new st},radius:{value:4}},vertexShader:UZ,fragmentShader:NZ}),y=g.clone();y.defines.HORIZONTAL_PASS=1;const _=new on;_.setAttribute("position",new oi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const S=new Ni(_,g),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=K1;let w=this.type;this.render=function(D,P,z){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||D.length===0)return;const I=n.getRenderTarget(),L=n.getActiveCubeFace(),H=n.getActiveMipmapLevel(),j=n.state;j.setBlending($u),j.buffers.color.setClear(1,1,1,1),j.buffers.depth.setTest(!0),j.setScissorTest(!1);const G=w!==Ll&&this.type===Ll,K=w===Ll&&this.type!==Ll;for(let ee=0,Y=D.length;ee<Y;ee++){const re=D[ee],J=re.shadow;if(J===void 0){console.warn("THREE.WebGLShadowMap:",re,"has no shadow.");continue}if(J.autoUpdate===!1&&J.needsUpdate===!1)continue;r.copy(J.mapSize);const se=J.getFrameExtents();if(r.multiply(se),a.copy(J.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(a.x=Math.floor(h/se.x),r.x=a.x*se.x,J.mapSize.x=a.x),r.y>h&&(a.y=Math.floor(h/se.y),r.y=a.y*se.y,J.mapSize.y=a.y)),J.map===null||G===!0||K===!0){const X=this.type!==Ll?{minFilter:va,magFilter:va}:{};J.map!==null&&J.map.dispose(),J.map=new Yc(r.x,r.y,X),J.map.texture.name=re.name+".shadowMap",J.camera.updateProjectionMatrix()}n.setRenderTarget(J.map),n.clear();const q=J.getViewportCount();for(let X=0;X<q;X++){const oe=J.getViewport(X);s.set(a.x*oe.x,a.y*oe.y,a.x*oe.z,a.y*oe.w),j.viewport(s),J.updateMatrices(re,X),i=J.getFrustum(),C(P,z,J.camera,re,this.type)}J.isPointLightShadow!==!0&&this.type===Ll&&T(J,z),J.needsUpdate=!1}w=this.type,x.needsUpdate=!1,n.setRenderTarget(I,L,H)};function T(D,P){const z=e.update(S);g.defines.VSM_SAMPLES!==D.blurSamples&&(g.defines.VSM_SAMPLES=D.blurSamples,y.defines.VSM_SAMPLES=D.blurSamples,g.needsUpdate=!0,y.needsUpdate=!0),D.mapPass===null&&(D.mapPass=new Yc(r.x,r.y)),g.uniforms.shadow_pass.value=D.map.texture,g.uniforms.resolution.value=D.mapSize,g.uniforms.radius.value=D.radius,n.setRenderTarget(D.mapPass),n.clear(),n.renderBufferDirect(P,null,z,g,S,null),y.uniforms.shadow_pass.value=D.mapPass.texture,y.uniforms.resolution.value=D.mapSize,y.uniforms.radius.value=D.radius,n.setRenderTarget(D.map),n.clear(),n.renderBufferDirect(P,null,z,y,S,null)}function M(D,P,z,I){let L=null;const H=z.isPointLight===!0?D.customDistanceMaterial:D.customDepthMaterial;if(H!==void 0)L=H;else if(L=z.isPointLight===!0?l:o,n.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0){const j=L.uuid,G=P.uuid;let K=u[j];K===void 0&&(K={},u[j]=K);let ee=K[G];ee===void 0&&(ee=L.clone(),K[G]=ee,P.addEventListener("dispose",N)),L=ee}if(L.visible=P.visible,L.wireframe=P.wireframe,I===Ll?L.side=P.shadowSide!==null?P.shadowSide:P.side:L.side=P.shadowSide!==null?P.shadowSide:p[P.side],L.alphaMap=P.alphaMap,L.alphaTest=P.alphaTest,L.map=P.map,L.clipShadows=P.clipShadows,L.clippingPlanes=P.clippingPlanes,L.clipIntersection=P.clipIntersection,L.displacementMap=P.displacementMap,L.displacementScale=P.displacementScale,L.displacementBias=P.displacementBias,L.wireframeLinewidth=P.wireframeLinewidth,L.linewidth=P.linewidth,z.isPointLight===!0&&L.isMeshDistanceMaterial===!0){const j=n.properties.get(L);j.light=z}return L}function C(D,P,z,I,L){if(D.visible===!1)return;if(D.layers.test(P.layers)&&(D.isMesh||D.isLine||D.isPoints)&&(D.castShadow||D.receiveShadow&&L===Ll)&&(!D.frustumCulled||i.intersectsObject(D))){D.modelViewMatrix.multiplyMatrices(z.matrixWorldInverse,D.matrixWorld);const G=e.update(D),K=D.material;if(Array.isArray(K)){const ee=G.groups;for(let Y=0,re=ee.length;Y<re;Y++){const J=ee[Y],se=K[J.materialIndex];if(se&&se.visible){const q=M(D,se,I,L);D.onBeforeShadow(n,D,P,z,G,q,J),n.renderBufferDirect(z,null,G,q,D,J),D.onAfterShadow(n,D,P,z,G,q,J)}}}else if(K.visible){const ee=M(D,K,I,L);D.onBeforeShadow(n,D,P,z,G,ee,null),n.renderBufferDirect(z,null,G,ee,D,null),D.onAfterShadow(n,D,P,z,G,ee,null)}}const j=D.children;for(let G=0,K=j.length;G<K;G++)C(j[G],P,z,I,L)}function N(D){D.target.removeEventListener("dispose",N);for(const z in u){const I=u[z],L=D.target.uuid;L in I&&(I[L].dispose(),delete I[L])}}}const LZ={[Px]:Lx,[Ix]:kx,[Bx]:Fx,[ep]:zx,[Lx]:Px,[kx]:Ix,[Fx]:Bx,[zx]:ep};function IZ(n,e){function t(){let ye=!1;const Je=new yn;let Ue=null;const et=new yn(0,0,0,0);return{setMask:function(lt){Ue!==lt&&!ye&&(n.colorMask(lt,lt,lt,lt),Ue=lt)},setLocked:function(lt){ye=lt},setClear:function(lt,rt,Tt,Ft,At){At===!0&&(lt*=Ft,rt*=Ft,Tt*=Ft),Je.set(lt,rt,Tt,Ft),et.equals(Je)===!1&&(n.clearColor(lt,rt,Tt,Ft),et.copy(Je))},reset:function(){ye=!1,Ue=null,et.set(-1,0,0,0)}}}function i(){let ye=!1,Je=!1,Ue=null,et=null,lt=null;return{setReversed:function(rt){if(Je!==rt){const Tt=e.get("EXT_clip_control");Je?Tt.clipControlEXT(Tt.LOWER_LEFT_EXT,Tt.ZERO_TO_ONE_EXT):Tt.clipControlEXT(Tt.LOWER_LEFT_EXT,Tt.NEGATIVE_ONE_TO_ONE_EXT);const Ft=lt;lt=null,this.setClear(Ft)}Je=rt},getReversed:function(){return Je},setTest:function(rt){rt?de(n.DEPTH_TEST):ve(n.DEPTH_TEST)},setMask:function(rt){Ue!==rt&&!ye&&(n.depthMask(rt),Ue=rt)},setFunc:function(rt){if(Je&&(rt=LZ[rt]),et!==rt){switch(rt){case Px:n.depthFunc(n.NEVER);break;case Lx:n.depthFunc(n.ALWAYS);break;case Ix:n.depthFunc(n.LESS);break;case ep:n.depthFunc(n.LEQUAL);break;case Bx:n.depthFunc(n.EQUAL);break;case zx:n.depthFunc(n.GEQUAL);break;case kx:n.depthFunc(n.GREATER);break;case Fx:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}et=rt}},setLocked:function(rt){ye=rt},setClear:function(rt){lt!==rt&&(Je&&(rt=1-rt),n.clearDepth(rt),lt=rt)},reset:function(){ye=!1,Ue=null,et=null,lt=null,Je=!1}}}function r(){let ye=!1,Je=null,Ue=null,et=null,lt=null,rt=null,Tt=null,Ft=null,At=null;return{setTest:function(Ut){ye||(Ut?de(n.STENCIL_TEST):ve(n.STENCIL_TEST))},setMask:function(Ut){Je!==Ut&&!ye&&(n.stencilMask(Ut),Je=Ut)},setFunc:function(Ut,Ln,Dn){(Ue!==Ut||et!==Ln||lt!==Dn)&&(n.stencilFunc(Ut,Ln,Dn),Ue=Ut,et=Ln,lt=Dn)},setOp:function(Ut,Ln,Dn){(rt!==Ut||Tt!==Ln||Ft!==Dn)&&(n.stencilOp(Ut,Ln,Dn),rt=Ut,Tt=Ln,Ft=Dn)},setLocked:function(Ut){ye=Ut},setClear:function(Ut){At!==Ut&&(n.clearStencil(Ut),At=Ut)},reset:function(){ye=!1,Je=null,Ue=null,et=null,lt=null,rt=null,Tt=null,Ft=null,At=null}}}const a=new t,s=new i,o=new r,l=new WeakMap,u=new WeakMap;let h={},p={},g=new WeakMap,y=[],_=null,S=!1,x=null,w=null,T=null,M=null,C=null,N=null,D=null,P=new yt(0,0,0),z=0,I=!1,L=null,H=null,j=null,G=null,K=null;const ee=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Y=!1,re=0;const J=n.getParameter(n.VERSION);J.indexOf("WebGL")!==-1?(re=parseFloat(/^WebGL (\d)/.exec(J)[1]),Y=re>=1):J.indexOf("OpenGL ES")!==-1&&(re=parseFloat(/^OpenGL ES (\d)/.exec(J)[1]),Y=re>=2);let se=null,q={};const X=n.getParameter(n.SCISSOR_BOX),oe=n.getParameter(n.VIEWPORT),ue=new yn().fromArray(X),Z=new yn().fromArray(oe);function ce(ye,Je,Ue,et){const lt=new Uint8Array(4),rt=n.createTexture();n.bindTexture(ye,rt),n.texParameteri(ye,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ye,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Tt=0;Tt<Ue;Tt++)ye===n.TEXTURE_3D||ye===n.TEXTURE_2D_ARRAY?n.texImage3D(Je,0,n.RGBA,1,1,et,0,n.RGBA,n.UNSIGNED_BYTE,lt):n.texImage2D(Je+Tt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,lt);return rt}const me={};me[n.TEXTURE_2D]=ce(n.TEXTURE_2D,n.TEXTURE_2D,1),me[n.TEXTURE_CUBE_MAP]=ce(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),me[n.TEXTURE_2D_ARRAY]=ce(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),me[n.TEXTURE_3D]=ce(n.TEXTURE_3D,n.TEXTURE_3D,1,1),a.setClear(0,0,0,1),s.setClear(1),o.setClear(0),de(n.DEPTH_TEST),s.setFunc(ep),De(!1),Ie(LR),de(n.CULL_FACE),te($u);function de(ye){h[ye]!==!0&&(n.enable(ye),h[ye]=!0)}function ve(ye){h[ye]!==!1&&(n.disable(ye),h[ye]=!1)}function We(ye,Je){return p[ye]!==Je?(n.bindFramebuffer(ye,Je),p[ye]=Je,ye===n.DRAW_FRAMEBUFFER&&(p[n.FRAMEBUFFER]=Je),ye===n.FRAMEBUFFER&&(p[n.DRAW_FRAMEBUFFER]=Je),!0):!1}function ze(ye,Je){let Ue=y,et=!1;if(ye){Ue=g.get(Je),Ue===void 0&&(Ue=[],g.set(Je,Ue));const lt=ye.textures;if(Ue.length!==lt.length||Ue[0]!==n.COLOR_ATTACHMENT0){for(let rt=0,Tt=lt.length;rt<Tt;rt++)Ue[rt]=n.COLOR_ATTACHMENT0+rt;Ue.length=lt.length,et=!0}}else Ue[0]!==n.BACK&&(Ue[0]=n.BACK,et=!0);et&&n.drawBuffers(Ue)}function qe(ye){return _!==ye?(n.useProgram(ye),_=ye,!0):!1}const _e={[lh]:n.FUNC_ADD,[f5]:n.FUNC_SUBTRACT,[h5]:n.FUNC_REVERSE_SUBTRACT};_e[d5]=n.MIN,_e[p5]=n.MAX;const Ae={[m5]:n.ZERO,[g5]:n.ONE,[v5]:n.SRC_COLOR,[Ux]:n.SRC_ALPHA,[E5]:n.SRC_ALPHA_SATURATE,[S5]:n.DST_COLOR,[_5]:n.DST_ALPHA,[y5]:n.ONE_MINUS_SRC_COLOR,[Nx]:n.ONE_MINUS_SRC_ALPHA,[x5]:n.ONE_MINUS_DST_COLOR,[b5]:n.ONE_MINUS_DST_ALPHA,[w5]:n.CONSTANT_COLOR,[T5]:n.ONE_MINUS_CONSTANT_COLOR,[M5]:n.CONSTANT_ALPHA,[A5]:n.ONE_MINUS_CONSTANT_ALPHA};function te(ye,Je,Ue,et,lt,rt,Tt,Ft,At,Ut){if(ye===$u){S===!0&&(ve(n.BLEND),S=!1);return}if(S===!1&&(de(n.BLEND),S=!0),ye!==u5){if(ye!==x||Ut!==I){if((w!==lh||C!==lh)&&(n.blendEquation(n.FUNC_ADD),w=lh,C=lh),Ut)switch(ye){case qd:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case IR:n.blendFunc(n.ONE,n.ONE);break;case BR:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case zR:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ye);break}else switch(ye){case qd:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case IR:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case BR:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case zR:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ye);break}T=null,M=null,N=null,D=null,P.set(0,0,0),z=0,x=ye,I=Ut}return}lt=lt||Je,rt=rt||Ue,Tt=Tt||et,(Je!==w||lt!==C)&&(n.blendEquationSeparate(_e[Je],_e[lt]),w=Je,C=lt),(Ue!==T||et!==M||rt!==N||Tt!==D)&&(n.blendFuncSeparate(Ae[Ue],Ae[et],Ae[rt],Ae[Tt]),T=Ue,M=et,N=rt,D=Tt),(Ft.equals(P)===!1||At!==z)&&(n.blendColor(Ft.r,Ft.g,Ft.b,At),P.copy(Ft),z=At),x=ye,I=!1}function ke(ye,Je){ye.side===Fl?ve(n.CULL_FACE):de(n.CULL_FACE);let Ue=ye.side===ds;Je&&(Ue=!Ue),De(Ue),ye.blending===qd&&ye.transparent===!1?te($u):te(ye.blending,ye.blendEquation,ye.blendSrc,ye.blendDst,ye.blendEquationAlpha,ye.blendSrcAlpha,ye.blendDstAlpha,ye.blendColor,ye.blendAlpha,ye.premultipliedAlpha),s.setFunc(ye.depthFunc),s.setTest(ye.depthTest),s.setMask(ye.depthWrite),a.setMask(ye.colorWrite);const et=ye.stencilWrite;o.setTest(et),et&&(o.setMask(ye.stencilWriteMask),o.setFunc(ye.stencilFunc,ye.stencilRef,ye.stencilFuncMask),o.setOp(ye.stencilFail,ye.stencilZFail,ye.stencilZPass)),Xe(ye.polygonOffset,ye.polygonOffsetFactor,ye.polygonOffsetUnits),ye.alphaToCoverage===!0?de(n.SAMPLE_ALPHA_TO_COVERAGE):ve(n.SAMPLE_ALPHA_TO_COVERAGE)}function De(ye){L!==ye&&(ye?n.frontFace(n.CW):n.frontFace(n.CCW),L=ye)}function Ie(ye){ye!==o5?(de(n.CULL_FACE),ye!==H&&(ye===LR?n.cullFace(n.BACK):ye===l5?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ve(n.CULL_FACE),H=ye}function Te(ye){ye!==j&&(Y&&n.lineWidth(ye),j=ye)}function Xe(ye,Je,Ue){ye?(de(n.POLYGON_OFFSET_FILL),(G!==Je||K!==Ue)&&(n.polygonOffset(Je,Ue),G=Je,K=Ue)):ve(n.POLYGON_OFFSET_FILL)}function Pe(ye){ye?de(n.SCISSOR_TEST):ve(n.SCISSOR_TEST)}function $(ye){ye===void 0&&(ye=n.TEXTURE0+ee-1),se!==ye&&(n.activeTexture(ye),se=ye)}function W(ye,Je,Ue){Ue===void 0&&(se===null?Ue=n.TEXTURE0+ee-1:Ue=se);let et=q[Ue];et===void 0&&(et={type:void 0,texture:void 0},q[Ue]=et),(et.type!==ye||et.texture!==Je)&&(se!==Ue&&(n.activeTexture(Ue),se=Ue),n.bindTexture(ye,Je||me[ye]),et.type=ye,et.texture=Je)}function ae(){const ye=q[se];ye!==void 0&&ye.type!==void 0&&(n.bindTexture(ye.type,null),ye.type=void 0,ye.texture=void 0)}function he(){try{n.compressedTexImage2D(...arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function Se(){try{n.compressedTexImage3D(...arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function Oe(){try{n.texSubImage2D(...arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function je(){try{n.texSubImage3D(...arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function Ge(){try{n.compressedTexSubImage2D(...arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function Ke(){try{n.compressedTexSubImage3D(...arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function _t(){try{n.texStorage2D(...arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function Ye(){try{n.texStorage3D(...arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function ct(){try{n.texImage2D(...arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function it(){try{n.texImage3D(...arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function Ze(ye){ue.equals(ye)===!1&&(n.scissor(ye.x,ye.y,ye.z,ye.w),ue.copy(ye))}function $e(ye){Z.equals(ye)===!1&&(n.viewport(ye.x,ye.y,ye.z,ye.w),Z.copy(ye))}function vt(ye,Je){let Ue=u.get(Je);Ue===void 0&&(Ue=new WeakMap,u.set(Je,Ue));let et=Ue.get(ye);et===void 0&&(et=n.getUniformBlockIndex(Je,ye.name),Ue.set(ye,et))}function gt(ye,Je){const et=u.get(Je).get(ye);l.get(Je)!==et&&(n.uniformBlockBinding(Je,et,ye.__bindingPointIndex),l.set(Je,et))}function jt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),s.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},se=null,q={},p={},g=new WeakMap,y=[],_=null,S=!1,x=null,w=null,T=null,M=null,C=null,N=null,D=null,P=new yt(0,0,0),z=0,I=!1,L=null,H=null,j=null,G=null,K=null,ue.set(0,0,n.canvas.width,n.canvas.height),Z.set(0,0,n.canvas.width,n.canvas.height),a.reset(),s.reset(),o.reset()}return{buffers:{color:a,depth:s,stencil:o},enable:de,disable:ve,bindFramebuffer:We,drawBuffers:ze,useProgram:qe,setBlending:te,setMaterial:ke,setFlipSided:De,setCullFace:Ie,setLineWidth:Te,setPolygonOffset:Xe,setScissorTest:Pe,activeTexture:$,bindTexture:W,unbindTexture:ae,compressedTexImage2D:he,compressedTexImage3D:Se,texImage2D:ct,texImage3D:it,updateUBOMapping:vt,uniformBlockBinding:gt,texStorage2D:_t,texStorage3D:Ye,texSubImage2D:Oe,texSubImage3D:je,compressedTexSubImage2D:Ge,compressedTexSubImage3D:Ke,scissor:Ze,viewport:$e,reset:jt}}function BZ(n,e,t,i,r,a,s){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new st,h=new WeakMap;let p;const g=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _($,W){return y?new OffscreenCanvas($,W):m0("canvas")}function S($,W,ae){let he=1;const Se=Pe($);if((Se.width>ae||Se.height>ae)&&(he=ae/Math.max(Se.width,Se.height)),he<1)if(typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&$ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&$ instanceof ImageBitmap||typeof VideoFrame<"u"&&$ instanceof VideoFrame){const Oe=Math.floor(he*Se.width),je=Math.floor(he*Se.height);p===void 0&&(p=_(Oe,je));const Ge=W?_(Oe,je):p;return Ge.width=Oe,Ge.height=je,Ge.getContext("2d").drawImage($,0,0,Oe,je),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Se.width+"x"+Se.height+") to ("+Oe+"x"+je+")."),Ge}else return"data"in $&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Se.width+"x"+Se.height+")."),$;return $}function x($){return $.generateMipmaps}function w($){n.generateMipmap($)}function T($){return $.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:$.isWebGL3DRenderTarget?n.TEXTURE_3D:$.isWebGLArrayRenderTarget||$.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function M($,W,ae,he,Se=!1){if($!==null){if(n[$]!==void 0)return n[$];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+$+"'")}let Oe=W;if(W===n.RED&&(ae===n.FLOAT&&(Oe=n.R32F),ae===n.HALF_FLOAT&&(Oe=n.R16F),ae===n.UNSIGNED_BYTE&&(Oe=n.R8)),W===n.RED_INTEGER&&(ae===n.UNSIGNED_BYTE&&(Oe=n.R8UI),ae===n.UNSIGNED_SHORT&&(Oe=n.R16UI),ae===n.UNSIGNED_INT&&(Oe=n.R32UI),ae===n.BYTE&&(Oe=n.R8I),ae===n.SHORT&&(Oe=n.R16I),ae===n.INT&&(Oe=n.R32I)),W===n.RG&&(ae===n.FLOAT&&(Oe=n.RG32F),ae===n.HALF_FLOAT&&(Oe=n.RG16F),ae===n.UNSIGNED_BYTE&&(Oe=n.RG8)),W===n.RG_INTEGER&&(ae===n.UNSIGNED_BYTE&&(Oe=n.RG8UI),ae===n.UNSIGNED_SHORT&&(Oe=n.RG16UI),ae===n.UNSIGNED_INT&&(Oe=n.RG32UI),ae===n.BYTE&&(Oe=n.RG8I),ae===n.SHORT&&(Oe=n.RG16I),ae===n.INT&&(Oe=n.RG32I)),W===n.RGB_INTEGER&&(ae===n.UNSIGNED_BYTE&&(Oe=n.RGB8UI),ae===n.UNSIGNED_SHORT&&(Oe=n.RGB16UI),ae===n.UNSIGNED_INT&&(Oe=n.RGB32UI),ae===n.BYTE&&(Oe=n.RGB8I),ae===n.SHORT&&(Oe=n.RGB16I),ae===n.INT&&(Oe=n.RGB32I)),W===n.RGBA_INTEGER&&(ae===n.UNSIGNED_BYTE&&(Oe=n.RGBA8UI),ae===n.UNSIGNED_SHORT&&(Oe=n.RGBA16UI),ae===n.UNSIGNED_INT&&(Oe=n.RGBA32UI),ae===n.BYTE&&(Oe=n.RGBA8I),ae===n.SHORT&&(Oe=n.RGBA16I),ae===n.INT&&(Oe=n.RGBA32I)),W===n.RGB&&ae===n.UNSIGNED_INT_5_9_9_9_REV&&(Oe=n.RGB9_E5),W===n.RGBA){const je=Se?h0:cn.getTransfer(he);ae===n.FLOAT&&(Oe=n.RGBA32F),ae===n.HALF_FLOAT&&(Oe=n.RGBA16F),ae===n.UNSIGNED_BYTE&&(Oe=je===ei?n.SRGB8_ALPHA8:n.RGBA8),ae===n.UNSIGNED_SHORT_4_4_4_4&&(Oe=n.RGBA4),ae===n.UNSIGNED_SHORT_5_5_5_1&&(Oe=n.RGB5_A1)}return(Oe===n.R16F||Oe===n.R32F||Oe===n.RG16F||Oe===n.RG32F||Oe===n.RGBA16F||Oe===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Oe}function C($,W){let ae;return $?W===null||W===Ju||W===np?ae=n.DEPTH24_STENCIL8:W===Fs?ae=n.DEPTH32F_STENCIL8:W===gg&&(ae=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):W===null||W===Ju||W===np?ae=n.DEPTH_COMPONENT24:W===Fs?ae=n.DEPTH_COMPONENT32F:W===gg&&(ae=n.DEPTH_COMPONENT16),ae}function N($,W){return x($)===!0||$.isFramebufferTexture&&$.minFilter!==va&&$.minFilter!==Sr?Math.log2(Math.max(W.width,W.height))+1:$.mipmaps!==void 0&&$.mipmaps.length>0?$.mipmaps.length:$.isCompressedTexture&&Array.isArray($.image)?W.mipmaps.length:1}function D($){const W=$.target;W.removeEventListener("dispose",D),z(W),W.isVideoTexture&&h.delete(W)}function P($){const W=$.target;W.removeEventListener("dispose",P),L(W)}function z($){const W=i.get($);if(W.__webglInit===void 0)return;const ae=$.source,he=g.get(ae);if(he){const Se=he[W.__cacheKey];Se.usedTimes--,Se.usedTimes===0&&I($),Object.keys(he).length===0&&g.delete(ae)}i.remove($)}function I($){const W=i.get($);n.deleteTexture(W.__webglTexture);const ae=$.source,he=g.get(ae);delete he[W.__cacheKey],s.memory.textures--}function L($){const W=i.get($);if($.depthTexture&&($.depthTexture.dispose(),i.remove($.depthTexture)),$.isWebGLCubeRenderTarget)for(let he=0;he<6;he++){if(Array.isArray(W.__webglFramebuffer[he]))for(let Se=0;Se<W.__webglFramebuffer[he].length;Se++)n.deleteFramebuffer(W.__webglFramebuffer[he][Se]);else n.deleteFramebuffer(W.__webglFramebuffer[he]);W.__webglDepthbuffer&&n.deleteRenderbuffer(W.__webglDepthbuffer[he])}else{if(Array.isArray(W.__webglFramebuffer))for(let he=0;he<W.__webglFramebuffer.length;he++)n.deleteFramebuffer(W.__webglFramebuffer[he]);else n.deleteFramebuffer(W.__webglFramebuffer);if(W.__webglDepthbuffer&&n.deleteRenderbuffer(W.__webglDepthbuffer),W.__webglMultisampledFramebuffer&&n.deleteFramebuffer(W.__webglMultisampledFramebuffer),W.__webglColorRenderbuffer)for(let he=0;he<W.__webglColorRenderbuffer.length;he++)W.__webglColorRenderbuffer[he]&&n.deleteRenderbuffer(W.__webglColorRenderbuffer[he]);W.__webglDepthRenderbuffer&&n.deleteRenderbuffer(W.__webglDepthRenderbuffer)}const ae=$.textures;for(let he=0,Se=ae.length;he<Se;he++){const Oe=i.get(ae[he]);Oe.__webglTexture&&(n.deleteTexture(Oe.__webglTexture),s.memory.textures--),i.remove(ae[he])}i.remove($)}let H=0;function j(){H=0}function G(){const $=H;return $>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+$+" texture units while this GPU supports only "+r.maxTextures),H+=1,$}function K($){const W=[];return W.push($.wrapS),W.push($.wrapT),W.push($.wrapR||0),W.push($.magFilter),W.push($.minFilter),W.push($.anisotropy),W.push($.internalFormat),W.push($.format),W.push($.type),W.push($.generateMipmaps),W.push($.premultiplyAlpha),W.push($.flipY),W.push($.unpackAlignment),W.push($.colorSpace),W.join()}function ee($,W){const ae=i.get($);if($.isVideoTexture&&Te($),$.isRenderTargetTexture===!1&&$.version>0&&ae.__version!==$.version){const he=$.image;if(he===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(he.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Z(ae,$,W);return}}t.bindTexture(n.TEXTURE_2D,ae.__webglTexture,n.TEXTURE0+W)}function Y($,W){const ae=i.get($);if($.version>0&&ae.__version!==$.version){Z(ae,$,W);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ae.__webglTexture,n.TEXTURE0+W)}function re($,W){const ae=i.get($);if($.version>0&&ae.__version!==$.version){Z(ae,$,W);return}t.bindTexture(n.TEXTURE_3D,ae.__webglTexture,n.TEXTURE0+W)}function J($,W){const ae=i.get($);if($.version>0&&ae.__version!==$.version){ce(ae,$,W);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ae.__webglTexture,n.TEXTURE0+W)}const se={[tp]:n.REPEAT,[ks]:n.CLAMP_TO_EDGE,[c0]:n.MIRRORED_REPEAT},q={[va]:n.NEAREST,[rD]:n.NEAREST_MIPMAP_NEAREST,[ig]:n.NEAREST_MIPMAP_LINEAR,[Sr]:n.LINEAR,[Vy]:n.LINEAR_MIPMAP_NEAREST,[Fc]:n.LINEAR_MIPMAP_LINEAR},X={[V5]:n.NEVER,[$5]:n.ALWAYS,[G5]:n.LESS,[gD]:n.LEQUAL,[j5]:n.EQUAL,[Y5]:n.GEQUAL,[q5]:n.GREATER,[W5]:n.NOTEQUAL};function oe($,W){if(W.type===Fs&&e.has("OES_texture_float_linear")===!1&&(W.magFilter===Sr||W.magFilter===Vy||W.magFilter===ig||W.magFilter===Fc||W.minFilter===Sr||W.minFilter===Vy||W.minFilter===ig||W.minFilter===Fc)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri($,n.TEXTURE_WRAP_S,se[W.wrapS]),n.texParameteri($,n.TEXTURE_WRAP_T,se[W.wrapT]),($===n.TEXTURE_3D||$===n.TEXTURE_2D_ARRAY)&&n.texParameteri($,n.TEXTURE_WRAP_R,se[W.wrapR]),n.texParameteri($,n.TEXTURE_MAG_FILTER,q[W.magFilter]),n.texParameteri($,n.TEXTURE_MIN_FILTER,q[W.minFilter]),W.compareFunction&&(n.texParameteri($,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri($,n.TEXTURE_COMPARE_FUNC,X[W.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(W.magFilter===va||W.minFilter!==ig&&W.minFilter!==Fc||W.type===Fs&&e.has("OES_texture_float_linear")===!1)return;if(W.anisotropy>1||i.get(W).__currentAnisotropy){const ae=e.get("EXT_texture_filter_anisotropic");n.texParameterf($,ae.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(W.anisotropy,r.getMaxAnisotropy())),i.get(W).__currentAnisotropy=W.anisotropy}}}function ue($,W){let ae=!1;$.__webglInit===void 0&&($.__webglInit=!0,W.addEventListener("dispose",D));const he=W.source;let Se=g.get(he);Se===void 0&&(Se={},g.set(he,Se));const Oe=K(W);if(Oe!==$.__cacheKey){Se[Oe]===void 0&&(Se[Oe]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,ae=!0),Se[Oe].usedTimes++;const je=Se[$.__cacheKey];je!==void 0&&(Se[$.__cacheKey].usedTimes--,je.usedTimes===0&&I(W)),$.__cacheKey=Oe,$.__webglTexture=Se[Oe].texture}return ae}function Z($,W,ae){let he=n.TEXTURE_2D;(W.isDataArrayTexture||W.isCompressedArrayTexture)&&(he=n.TEXTURE_2D_ARRAY),W.isData3DTexture&&(he=n.TEXTURE_3D);const Se=ue($,W),Oe=W.source;t.bindTexture(he,$.__webglTexture,n.TEXTURE0+ae);const je=i.get(Oe);if(Oe.version!==je.__version||Se===!0){t.activeTexture(n.TEXTURE0+ae);const Ge=cn.getPrimaries(cn.workingColorSpace),Ke=W.colorSpace===ju?null:cn.getPrimaries(W.colorSpace),_t=W.colorSpace===ju||Ge===Ke?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,W.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,W.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,_t);let Ye=S(W.image,!1,r.maxTextureSize);Ye=Xe(W,Ye);const ct=a.convert(W.format,W.colorSpace),it=a.convert(W.type);let Ze=M(W.internalFormat,ct,it,W.colorSpace,W.isVideoTexture);oe(he,W);let $e;const vt=W.mipmaps,gt=W.isVideoTexture!==!0,jt=je.__version===void 0||Se===!0,ye=Oe.dataReady,Je=N(W,Ye);if(W.isDepthTexture)Ze=C(W.format===ip,W.type),jt&&(gt?t.texStorage2D(n.TEXTURE_2D,1,Ze,Ye.width,Ye.height):t.texImage2D(n.TEXTURE_2D,0,Ze,Ye.width,Ye.height,0,ct,it,null));else if(W.isDataTexture)if(vt.length>0){gt&&jt&&t.texStorage2D(n.TEXTURE_2D,Je,Ze,vt[0].width,vt[0].height);for(let Ue=0,et=vt.length;Ue<et;Ue++)$e=vt[Ue],gt?ye&&t.texSubImage2D(n.TEXTURE_2D,Ue,0,0,$e.width,$e.height,ct,it,$e.data):t.texImage2D(n.TEXTURE_2D,Ue,Ze,$e.width,$e.height,0,ct,it,$e.data);W.generateMipmaps=!1}else gt?(jt&&t.texStorage2D(n.TEXTURE_2D,Je,Ze,Ye.width,Ye.height),ye&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ye.width,Ye.height,ct,it,Ye.data)):t.texImage2D(n.TEXTURE_2D,0,Ze,Ye.width,Ye.height,0,ct,it,Ye.data);else if(W.isCompressedTexture)if(W.isCompressedArrayTexture){gt&&jt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Je,Ze,vt[0].width,vt[0].height,Ye.depth);for(let Ue=0,et=vt.length;Ue<et;Ue++)if($e=vt[Ue],W.format!==za)if(ct!==null)if(gt){if(ye)if(W.layerUpdates.size>0){const lt=YR($e.width,$e.height,W.format,W.type);for(const rt of W.layerUpdates){const Tt=$e.data.subarray(rt*lt/$e.data.BYTES_PER_ELEMENT,(rt+1)*lt/$e.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ue,0,0,rt,$e.width,$e.height,1,ct,Tt)}W.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ue,0,0,0,$e.width,$e.height,Ye.depth,ct,$e.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Ue,Ze,$e.width,$e.height,Ye.depth,0,$e.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else gt?ye&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Ue,0,0,0,$e.width,$e.height,Ye.depth,ct,it,$e.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Ue,Ze,$e.width,$e.height,Ye.depth,0,ct,it,$e.data)}else{gt&&jt&&t.texStorage2D(n.TEXTURE_2D,Je,Ze,vt[0].width,vt[0].height);for(let Ue=0,et=vt.length;Ue<et;Ue++)$e=vt[Ue],W.format!==za?ct!==null?gt?ye&&t.compressedTexSubImage2D(n.TEXTURE_2D,Ue,0,0,$e.width,$e.height,ct,$e.data):t.compressedTexImage2D(n.TEXTURE_2D,Ue,Ze,$e.width,$e.height,0,$e.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):gt?ye&&t.texSubImage2D(n.TEXTURE_2D,Ue,0,0,$e.width,$e.height,ct,it,$e.data):t.texImage2D(n.TEXTURE_2D,Ue,Ze,$e.width,$e.height,0,ct,it,$e.data)}else if(W.isDataArrayTexture)if(gt){if(jt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Je,Ze,Ye.width,Ye.height,Ye.depth),ye)if(W.layerUpdates.size>0){const Ue=YR(Ye.width,Ye.height,W.format,W.type);for(const et of W.layerUpdates){const lt=Ye.data.subarray(et*Ue/Ye.data.BYTES_PER_ELEMENT,(et+1)*Ue/Ye.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,et,Ye.width,Ye.height,1,ct,it,lt)}W.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ye.width,Ye.height,Ye.depth,ct,it,Ye.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Ze,Ye.width,Ye.height,Ye.depth,0,ct,it,Ye.data);else if(W.isData3DTexture)gt?(jt&&t.texStorage3D(n.TEXTURE_3D,Je,Ze,Ye.width,Ye.height,Ye.depth),ye&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ye.width,Ye.height,Ye.depth,ct,it,Ye.data)):t.texImage3D(n.TEXTURE_3D,0,Ze,Ye.width,Ye.height,Ye.depth,0,ct,it,Ye.data);else if(W.isFramebufferTexture){if(jt)if(gt)t.texStorage2D(n.TEXTURE_2D,Je,Ze,Ye.width,Ye.height);else{let Ue=Ye.width,et=Ye.height;for(let lt=0;lt<Je;lt++)t.texImage2D(n.TEXTURE_2D,lt,Ze,Ue,et,0,ct,it,null),Ue>>=1,et>>=1}}else if(vt.length>0){if(gt&&jt){const Ue=Pe(vt[0]);t.texStorage2D(n.TEXTURE_2D,Je,Ze,Ue.width,Ue.height)}for(let Ue=0,et=vt.length;Ue<et;Ue++)$e=vt[Ue],gt?ye&&t.texSubImage2D(n.TEXTURE_2D,Ue,0,0,ct,it,$e):t.texImage2D(n.TEXTURE_2D,Ue,Ze,ct,it,$e);W.generateMipmaps=!1}else if(gt){if(jt){const Ue=Pe(Ye);t.texStorage2D(n.TEXTURE_2D,Je,Ze,Ue.width,Ue.height)}ye&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ct,it,Ye)}else t.texImage2D(n.TEXTURE_2D,0,Ze,ct,it,Ye);x(W)&&w(he),je.__version=Oe.version,W.onUpdate&&W.onUpdate(W)}$.__version=W.version}function ce($,W,ae){if(W.image.length!==6)return;const he=ue($,W),Se=W.source;t.bindTexture(n.TEXTURE_CUBE_MAP,$.__webglTexture,n.TEXTURE0+ae);const Oe=i.get(Se);if(Se.version!==Oe.__version||he===!0){t.activeTexture(n.TEXTURE0+ae);const je=cn.getPrimaries(cn.workingColorSpace),Ge=W.colorSpace===ju?null:cn.getPrimaries(W.colorSpace),Ke=W.colorSpace===ju||je===Ge?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,W.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,W.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ke);const _t=W.isCompressedTexture||W.image[0].isCompressedTexture,Ye=W.image[0]&&W.image[0].isDataTexture,ct=[];for(let et=0;et<6;et++)!_t&&!Ye?ct[et]=S(W.image[et],!0,r.maxCubemapSize):ct[et]=Ye?W.image[et].image:W.image[et],ct[et]=Xe(W,ct[et]);const it=ct[0],Ze=a.convert(W.format,W.colorSpace),$e=a.convert(W.type),vt=M(W.internalFormat,Ze,$e,W.colorSpace),gt=W.isVideoTexture!==!0,jt=Oe.__version===void 0||he===!0,ye=Se.dataReady;let Je=N(W,it);oe(n.TEXTURE_CUBE_MAP,W);let Ue;if(_t){gt&&jt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Je,vt,it.width,it.height);for(let et=0;et<6;et++){Ue=ct[et].mipmaps;for(let lt=0;lt<Ue.length;lt++){const rt=Ue[lt];W.format!==za?Ze!==null?gt?ye&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,lt,0,0,rt.width,rt.height,Ze,rt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,lt,vt,rt.width,rt.height,0,rt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):gt?ye&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,lt,0,0,rt.width,rt.height,Ze,$e,rt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,lt,vt,rt.width,rt.height,0,Ze,$e,rt.data)}}}else{if(Ue=W.mipmaps,gt&&jt){Ue.length>0&&Je++;const et=Pe(ct[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Je,vt,et.width,et.height)}for(let et=0;et<6;et++)if(Ye){gt?ye&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,0,0,0,ct[et].width,ct[et].height,Ze,$e,ct[et].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,0,vt,ct[et].width,ct[et].height,0,Ze,$e,ct[et].data);for(let lt=0;lt<Ue.length;lt++){const Tt=Ue[lt].image[et].image;gt?ye&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,lt+1,0,0,Tt.width,Tt.height,Ze,$e,Tt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,lt+1,vt,Tt.width,Tt.height,0,Ze,$e,Tt.data)}}else{gt?ye&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,0,0,0,Ze,$e,ct[et]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,0,vt,Ze,$e,ct[et]);for(let lt=0;lt<Ue.length;lt++){const rt=Ue[lt];gt?ye&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,lt+1,0,0,Ze,$e,rt.image[et]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,lt+1,vt,Ze,$e,rt.image[et])}}}x(W)&&w(n.TEXTURE_CUBE_MAP),Oe.__version=Se.version,W.onUpdate&&W.onUpdate(W)}$.__version=W.version}function me($,W,ae,he,Se,Oe){const je=a.convert(ae.format,ae.colorSpace),Ge=a.convert(ae.type),Ke=M(ae.internalFormat,je,Ge,ae.colorSpace),_t=i.get(W),Ye=i.get(ae);if(Ye.__renderTarget=W,!_t.__hasExternalTextures){const ct=Math.max(1,W.width>>Oe),it=Math.max(1,W.height>>Oe);Se===n.TEXTURE_3D||Se===n.TEXTURE_2D_ARRAY?t.texImage3D(Se,Oe,Ke,ct,it,W.depth,0,je,Ge,null):t.texImage2D(Se,Oe,Ke,ct,it,0,je,Ge,null)}t.bindFramebuffer(n.FRAMEBUFFER,$),Ie(W)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,he,Se,Ye.__webglTexture,0,De(W)):(Se===n.TEXTURE_2D||Se>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Se<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,he,Se,Ye.__webglTexture,Oe),t.bindFramebuffer(n.FRAMEBUFFER,null)}function de($,W,ae){if(n.bindRenderbuffer(n.RENDERBUFFER,$),W.depthBuffer){const he=W.depthTexture,Se=he&&he.isDepthTexture?he.type:null,Oe=C(W.stencilBuffer,Se),je=W.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ge=De(W);Ie(W)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ge,Oe,W.width,W.height):ae?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ge,Oe,W.width,W.height):n.renderbufferStorage(n.RENDERBUFFER,Oe,W.width,W.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,je,n.RENDERBUFFER,$)}else{const he=W.textures;for(let Se=0;Se<he.length;Se++){const Oe=he[Se],je=a.convert(Oe.format,Oe.colorSpace),Ge=a.convert(Oe.type),Ke=M(Oe.internalFormat,je,Ge,Oe.colorSpace),_t=De(W);ae&&Ie(W)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,_t,Ke,W.width,W.height):Ie(W)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,_t,Ke,W.width,W.height):n.renderbufferStorage(n.RENDERBUFFER,Ke,W.width,W.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ve($,W){if(W&&W.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,$),!(W.depthTexture&&W.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const he=i.get(W.depthTexture);he.__renderTarget=W,(!he.__webglTexture||W.depthTexture.image.width!==W.width||W.depthTexture.image.height!==W.height)&&(W.depthTexture.image.width=W.width,W.depthTexture.image.height=W.height,W.depthTexture.needsUpdate=!0),ee(W.depthTexture,0);const Se=he.__webglTexture,Oe=De(W);if(W.depthTexture.format===Wd)Ie(W)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Se,0,Oe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Se,0);else if(W.depthTexture.format===ip)Ie(W)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Se,0,Oe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Se,0);else throw new Error("Unknown depthTexture format")}function We($){const W=i.get($),ae=$.isWebGLCubeRenderTarget===!0;if(W.__boundDepthTexture!==$.depthTexture){const he=$.depthTexture;if(W.__depthDisposeCallback&&W.__depthDisposeCallback(),he){const Se=()=>{delete W.__boundDepthTexture,delete W.__depthDisposeCallback,he.removeEventListener("dispose",Se)};he.addEventListener("dispose",Se),W.__depthDisposeCallback=Se}W.__boundDepthTexture=he}if($.depthTexture&&!W.__autoAllocateDepthBuffer){if(ae)throw new Error("target.depthTexture not supported in Cube render targets");ve(W.__webglFramebuffer,$)}else if(ae){W.__webglDepthbuffer=[];for(let he=0;he<6;he++)if(t.bindFramebuffer(n.FRAMEBUFFER,W.__webglFramebuffer[he]),W.__webglDepthbuffer[he]===void 0)W.__webglDepthbuffer[he]=n.createRenderbuffer(),de(W.__webglDepthbuffer[he],$,!1);else{const Se=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Oe=W.__webglDepthbuffer[he];n.bindRenderbuffer(n.RENDERBUFFER,Oe),n.framebufferRenderbuffer(n.FRAMEBUFFER,Se,n.RENDERBUFFER,Oe)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,W.__webglFramebuffer),W.__webglDepthbuffer===void 0)W.__webglDepthbuffer=n.createRenderbuffer(),de(W.__webglDepthbuffer,$,!1);else{const he=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Se=W.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Se),n.framebufferRenderbuffer(n.FRAMEBUFFER,he,n.RENDERBUFFER,Se)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function ze($,W,ae){const he=i.get($);W!==void 0&&me(he.__webglFramebuffer,$,$.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ae!==void 0&&We($)}function qe($){const W=$.texture,ae=i.get($),he=i.get(W);$.addEventListener("dispose",P);const Se=$.textures,Oe=$.isWebGLCubeRenderTarget===!0,je=Se.length>1;if(je||(he.__webglTexture===void 0&&(he.__webglTexture=n.createTexture()),he.__version=W.version,s.memory.textures++),Oe){ae.__webglFramebuffer=[];for(let Ge=0;Ge<6;Ge++)if(W.mipmaps&&W.mipmaps.length>0){ae.__webglFramebuffer[Ge]=[];for(let Ke=0;Ke<W.mipmaps.length;Ke++)ae.__webglFramebuffer[Ge][Ke]=n.createFramebuffer()}else ae.__webglFramebuffer[Ge]=n.createFramebuffer()}else{if(W.mipmaps&&W.mipmaps.length>0){ae.__webglFramebuffer=[];for(let Ge=0;Ge<W.mipmaps.length;Ge++)ae.__webglFramebuffer[Ge]=n.createFramebuffer()}else ae.__webglFramebuffer=n.createFramebuffer();if(je)for(let Ge=0,Ke=Se.length;Ge<Ke;Ge++){const _t=i.get(Se[Ge]);_t.__webglTexture===void 0&&(_t.__webglTexture=n.createTexture(),s.memory.textures++)}if($.samples>0&&Ie($)===!1){ae.__webglMultisampledFramebuffer=n.createFramebuffer(),ae.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ae.__webglMultisampledFramebuffer);for(let Ge=0;Ge<Se.length;Ge++){const Ke=Se[Ge];ae.__webglColorRenderbuffer[Ge]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ae.__webglColorRenderbuffer[Ge]);const _t=a.convert(Ke.format,Ke.colorSpace),Ye=a.convert(Ke.type),ct=M(Ke.internalFormat,_t,Ye,Ke.colorSpace,$.isXRRenderTarget===!0),it=De($);n.renderbufferStorageMultisample(n.RENDERBUFFER,it,ct,$.width,$.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ge,n.RENDERBUFFER,ae.__webglColorRenderbuffer[Ge])}n.bindRenderbuffer(n.RENDERBUFFER,null),$.depthBuffer&&(ae.__webglDepthRenderbuffer=n.createRenderbuffer(),de(ae.__webglDepthRenderbuffer,$,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Oe){t.bindTexture(n.TEXTURE_CUBE_MAP,he.__webglTexture),oe(n.TEXTURE_CUBE_MAP,W);for(let Ge=0;Ge<6;Ge++)if(W.mipmaps&&W.mipmaps.length>0)for(let Ke=0;Ke<W.mipmaps.length;Ke++)me(ae.__webglFramebuffer[Ge][Ke],$,W,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,Ke);else me(ae.__webglFramebuffer[Ge],$,W,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0);x(W)&&w(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(je){for(let Ge=0,Ke=Se.length;Ge<Ke;Ge++){const _t=Se[Ge],Ye=i.get(_t);t.bindTexture(n.TEXTURE_2D,Ye.__webglTexture),oe(n.TEXTURE_2D,_t),me(ae.__webglFramebuffer,$,_t,n.COLOR_ATTACHMENT0+Ge,n.TEXTURE_2D,0),x(_t)&&w(n.TEXTURE_2D)}t.unbindTexture()}else{let Ge=n.TEXTURE_2D;if(($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&(Ge=$.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Ge,he.__webglTexture),oe(Ge,W),W.mipmaps&&W.mipmaps.length>0)for(let Ke=0;Ke<W.mipmaps.length;Ke++)me(ae.__webglFramebuffer[Ke],$,W,n.COLOR_ATTACHMENT0,Ge,Ke);else me(ae.__webglFramebuffer,$,W,n.COLOR_ATTACHMENT0,Ge,0);x(W)&&w(Ge),t.unbindTexture()}$.depthBuffer&&We($)}function _e($){const W=$.textures;for(let ae=0,he=W.length;ae<he;ae++){const Se=W[ae];if(x(Se)){const Oe=T($),je=i.get(Se).__webglTexture;t.bindTexture(Oe,je),w(Oe),t.unbindTexture()}}}const Ae=[],te=[];function ke($){if($.samples>0){if(Ie($)===!1){const W=$.textures,ae=$.width,he=$.height;let Se=n.COLOR_BUFFER_BIT;const Oe=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,je=i.get($),Ge=W.length>1;if(Ge)for(let Ke=0;Ke<W.length;Ke++)t.bindFramebuffer(n.FRAMEBUFFER,je.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ke,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,je.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ke,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,je.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,je.__webglFramebuffer);for(let Ke=0;Ke<W.length;Ke++){if($.resolveDepthBuffer&&($.depthBuffer&&(Se|=n.DEPTH_BUFFER_BIT),$.stencilBuffer&&$.resolveStencilBuffer&&(Se|=n.STENCIL_BUFFER_BIT)),Ge){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,je.__webglColorRenderbuffer[Ke]);const _t=i.get(W[Ke]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,_t,0)}n.blitFramebuffer(0,0,ae,he,0,0,ae,he,Se,n.NEAREST),l===!0&&(Ae.length=0,te.length=0,Ae.push(n.COLOR_ATTACHMENT0+Ke),$.depthBuffer&&$.resolveDepthBuffer===!1&&(Ae.push(Oe),te.push(Oe),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,te)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ae))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ge)for(let Ke=0;Ke<W.length;Ke++){t.bindFramebuffer(n.FRAMEBUFFER,je.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ke,n.RENDERBUFFER,je.__webglColorRenderbuffer[Ke]);const _t=i.get(W[Ke]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,je.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ke,n.TEXTURE_2D,_t,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,je.__webglMultisampledFramebuffer)}else if($.depthBuffer&&$.resolveDepthBuffer===!1&&l){const W=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[W])}}}function De($){return Math.min(r.maxSamples,$.samples)}function Ie($){const W=i.get($);return $.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&W.__useRenderToTexture!==!1}function Te($){const W=s.render.frame;h.get($)!==W&&(h.set($,W),$.update())}function Xe($,W){const ae=$.colorSpace,he=$.format,Se=$.type;return $.isCompressedTexture===!0||$.isVideoTexture===!0||ae!==mh&&ae!==ju&&(cn.getTransfer(ae)===ei?(he!==za||Se!==Gl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ae)),W}function Pe($){return typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement?(u.width=$.naturalWidth||$.width,u.height=$.naturalHeight||$.height):typeof VideoFrame<"u"&&$ instanceof VideoFrame?(u.width=$.displayWidth,u.height=$.displayHeight):(u.width=$.width,u.height=$.height),u}this.allocateTextureUnit=G,this.resetTextureUnits=j,this.setTexture2D=ee,this.setTexture2DArray=Y,this.setTexture3D=re,this.setTextureCube=J,this.rebindTextures=ze,this.setupRenderTarget=qe,this.updateRenderTargetMipmap=_e,this.updateMultisampleRenderTarget=ke,this.setupDepthRenderbuffer=We,this.setupFrameBufferTexture=me,this.useMultisampledRTT=Ie}function ZH(n,e){function t(i,r=ju){let a;const s=cn.getTransfer(r);if(i===Gl)return n.UNSIGNED_BYTE;if(i===J1)return n.UNSIGNED_SHORT_4_4_4_4;if(i===eE)return n.UNSIGNED_SHORT_5_5_5_1;if(i===oD)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===aD)return n.BYTE;if(i===sD)return n.SHORT;if(i===gg)return n.UNSIGNED_SHORT;if(i===Q1)return n.INT;if(i===Ju)return n.UNSIGNED_INT;if(i===Fs)return n.FLOAT;if(i===Ig)return n.HALF_FLOAT;if(i===lD)return n.ALPHA;if(i===cD)return n.RGB;if(i===za)return n.RGBA;if(i===uD)return n.LUMINANCE;if(i===fD)return n.LUMINANCE_ALPHA;if(i===Wd)return n.DEPTH_COMPONENT;if(i===ip)return n.DEPTH_STENCIL;if(i===tE)return n.RED;if(i===K0)return n.RED_INTEGER;if(i===hD)return n.RG;if(i===nE)return n.RG_INTEGER;if(i===iE)return n.RGBA_INTEGER;if(i===Gy||i===jy||i===qy||i===Wy)if(s===ei)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(i===Gy)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===jy)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===qy)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Wy)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(i===Gy)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===jy)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===qy)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Wy)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Hx||i===Vx||i===Gx||i===jx)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(i===Hx)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Vx)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Gx)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===jx)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===qx||i===Wx||i===Yx)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(i===qx||i===Wx)return s===ei?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(i===Yx)return s===ei?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===$x||i===Xx||i===Kx||i===Zx||i===Qx||i===Jx||i===e1||i===t1||i===n1||i===i1||i===r1||i===a1||i===s1||i===o1)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(i===$x)return s===ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Xx)return s===ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Kx)return s===ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Zx)return s===ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Qx)return s===ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Jx)return s===ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===e1)return s===ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===t1)return s===ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===n1)return s===ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===i1)return s===ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===r1)return s===ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===a1)return s===ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===s1)return s===ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===o1)return s===ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Yy||i===l1||i===c1)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(i===Yy)return s===ei?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===l1)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===c1)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===dD||i===u1||i===f1||i===h1)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(i===Yy)return a.COMPRESSED_RED_RGTC1_EXT;if(i===u1)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===f1)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===h1)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===np?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const zZ=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,kZ=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class FZ{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new Pi,a=e.properties.get(r);a.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new jl({vertexShader:zZ,fragmentShader:kZ,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Ni(new lf(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class HZ extends Zc{constructor(e,t){super();const i=this;let r=null,a=1,s=null,o="local-floor",l=1,u=null,h=null,p=null,g=null,y=null,_=null;const S=new FZ,x=t.getContextAttributes();let w=null,T=null;const M=[],C=[],N=new st;let D=null;const P=new Ir;P.viewport=new yn;const z=new Ir;z.viewport=new yn;const I=[P,z],L=new kH;let H=null,j=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Z){let ce=M[Z];return ce===void 0&&(ce=new dx,M[Z]=ce),ce.getTargetRaySpace()},this.getControllerGrip=function(Z){let ce=M[Z];return ce===void 0&&(ce=new dx,M[Z]=ce),ce.getGripSpace()},this.getHand=function(Z){let ce=M[Z];return ce===void 0&&(ce=new dx,M[Z]=ce),ce.getHandSpace()};function G(Z){const ce=C.indexOf(Z.inputSource);if(ce===-1)return;const me=M[ce];me!==void 0&&(me.update(Z.inputSource,Z.frame,u||s),me.dispatchEvent({type:Z.type,data:Z.inputSource}))}function K(){r.removeEventListener("select",G),r.removeEventListener("selectstart",G),r.removeEventListener("selectend",G),r.removeEventListener("squeeze",G),r.removeEventListener("squeezestart",G),r.removeEventListener("squeezeend",G),r.removeEventListener("end",K),r.removeEventListener("inputsourceschange",ee);for(let Z=0;Z<M.length;Z++){const ce=C[Z];ce!==null&&(C[Z]=null,M[Z].disconnect(ce))}H=null,j=null,S.reset(),e.setRenderTarget(w),y=null,g=null,p=null,r=null,T=null,ue.stop(),i.isPresenting=!1,e.setPixelRatio(D),e.setSize(N.width,N.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Z){a=Z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Z){o=Z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(Z){u=Z},this.getBaseLayer=function(){return g!==null?g:y},this.getBinding=function(){return p},this.getFrame=function(){return _},this.getSession=function(){return r},this.setSession=async function(Z){if(r=Z,r!==null){if(w=e.getRenderTarget(),r.addEventListener("select",G),r.addEventListener("selectstart",G),r.addEventListener("selectend",G),r.addEventListener("squeeze",G),r.addEventListener("squeezestart",G),r.addEventListener("squeezeend",G),r.addEventListener("end",K),r.addEventListener("inputsourceschange",ee),x.xrCompatible!==!0&&await t.makeXRCompatible(),D=e.getPixelRatio(),e.getSize(N),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let me=null,de=null,ve=null;x.depth&&(ve=x.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,me=x.stencil?ip:Wd,de=x.stencil?np:Ju);const We={colorFormat:t.RGBA8,depthFormat:ve,scaleFactor:a};p=new XRWebGLBinding(r,t),g=p.createProjectionLayer(We),r.updateRenderState({layers:[g]}),e.setPixelRatio(1),e.setSize(g.textureWidth,g.textureHeight,!1),T=new Yc(g.textureWidth,g.textureHeight,{format:za,type:Gl,depthTexture:new wD(g.textureWidth,g.textureHeight,de,void 0,void 0,void 0,void 0,void 0,void 0,me),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0,resolveDepthBuffer:g.ignoreDepthValues===!1,resolveStencilBuffer:g.ignoreDepthValues===!1})}else{const me={antialias:x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:a};y=new XRWebGLLayer(r,t,me),r.updateRenderState({baseLayer:y}),e.setPixelRatio(1),e.setSize(y.framebufferWidth,y.framebufferHeight,!1),T=new Yc(y.framebufferWidth,y.framebufferHeight,{format:za,type:Gl,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}T.isXRRenderTarget=!0,this.setFoveation(l),u=null,s=await r.requestReferenceSpace(o),ue.setContext(r),ue.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return S.getDepthTexture()};function ee(Z){for(let ce=0;ce<Z.removed.length;ce++){const me=Z.removed[ce],de=C.indexOf(me);de>=0&&(C[de]=null,M[de].disconnect(me))}for(let ce=0;ce<Z.added.length;ce++){const me=Z.added[ce];let de=C.indexOf(me);if(de===-1){for(let We=0;We<M.length;We++)if(We>=C.length){C.push(me),de=We;break}else if(C[We]===null){C[We]=me,de=We;break}if(de===-1)break}const ve=M[de];ve&&ve.connect(me)}}const Y=new le,re=new le;function J(Z,ce,me){Y.setFromMatrixPosition(ce.matrixWorld),re.setFromMatrixPosition(me.matrixWorld);const de=Y.distanceTo(re),ve=ce.projectionMatrix.elements,We=me.projectionMatrix.elements,ze=ve[14]/(ve[10]-1),qe=ve[14]/(ve[10]+1),_e=(ve[9]+1)/ve[5],Ae=(ve[9]-1)/ve[5],te=(ve[8]-1)/ve[0],ke=(We[8]+1)/We[0],De=ze*te,Ie=ze*ke,Te=de/(-te+ke),Xe=Te*-te;if(ce.matrixWorld.decompose(Z.position,Z.quaternion,Z.scale),Z.translateX(Xe),Z.translateZ(Te),Z.matrixWorld.compose(Z.position,Z.quaternion,Z.scale),Z.matrixWorldInverse.copy(Z.matrixWorld).invert(),ve[10]===-1)Z.projectionMatrix.copy(ce.projectionMatrix),Z.projectionMatrixInverse.copy(ce.projectionMatrixInverse);else{const Pe=ze+Te,$=qe+Te,W=De-Xe,ae=Ie+(de-Xe),he=_e*qe/$*Pe,Se=Ae*qe/$*Pe;Z.projectionMatrix.makePerspective(W,ae,he,Se,Pe,$),Z.projectionMatrixInverse.copy(Z.projectionMatrix).invert()}}function se(Z,ce){ce===null?Z.matrixWorld.copy(Z.matrix):Z.matrixWorld.multiplyMatrices(ce.matrixWorld,Z.matrix),Z.matrixWorldInverse.copy(Z.matrixWorld).invert()}this.updateCamera=function(Z){if(r===null)return;let ce=Z.near,me=Z.far;S.texture!==null&&(S.depthNear>0&&(ce=S.depthNear),S.depthFar>0&&(me=S.depthFar)),L.near=z.near=P.near=ce,L.far=z.far=P.far=me,(H!==L.near||j!==L.far)&&(r.updateRenderState({depthNear:L.near,depthFar:L.far}),H=L.near,j=L.far),P.layers.mask=Z.layers.mask|2,z.layers.mask=Z.layers.mask|4,L.layers.mask=P.layers.mask|z.layers.mask;const de=Z.parent,ve=L.cameras;se(L,de);for(let We=0;We<ve.length;We++)se(ve[We],de);ve.length===2?J(L,P,z):L.projectionMatrix.copy(P.projectionMatrix),q(Z,L,de)};function q(Z,ce,me){me===null?Z.matrix.copy(ce.matrixWorld):(Z.matrix.copy(me.matrixWorld),Z.matrix.invert(),Z.matrix.multiply(ce.matrixWorld)),Z.matrix.decompose(Z.position,Z.quaternion,Z.scale),Z.updateMatrixWorld(!0),Z.projectionMatrix.copy(ce.projectionMatrix),Z.projectionMatrixInverse.copy(ce.projectionMatrixInverse),Z.isPerspectiveCamera&&(Z.fov=vg*2*Math.atan(1/Z.projectionMatrix.elements[5]),Z.zoom=1)}this.getCamera=function(){return L},this.getFoveation=function(){if(!(g===null&&y===null))return l},this.setFoveation=function(Z){l=Z,g!==null&&(g.fixedFoveation=Z),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=Z)},this.hasDepthSensing=function(){return S.texture!==null},this.getDepthSensingMesh=function(){return S.getMesh(L)};let X=null;function oe(Z,ce){if(h=ce.getViewerPose(u||s),_=ce,h!==null){const me=h.views;y!==null&&(e.setRenderTargetFramebuffer(T,y.framebuffer),e.setRenderTarget(T));let de=!1;me.length!==L.cameras.length&&(L.cameras.length=0,de=!0);for(let ze=0;ze<me.length;ze++){const qe=me[ze];let _e=null;if(y!==null)_e=y.getViewport(qe);else{const te=p.getViewSubImage(g,qe);_e=te.viewport,ze===0&&(e.setRenderTargetTextures(T,te.colorTexture,g.ignoreDepthValues?void 0:te.depthStencilTexture),e.setRenderTarget(T))}let Ae=I[ze];Ae===void 0&&(Ae=new Ir,Ae.layers.enable(ze),Ae.viewport=new yn,I[ze]=Ae),Ae.matrix.fromArray(qe.transform.matrix),Ae.matrix.decompose(Ae.position,Ae.quaternion,Ae.scale),Ae.projectionMatrix.fromArray(qe.projectionMatrix),Ae.projectionMatrixInverse.copy(Ae.projectionMatrix).invert(),Ae.viewport.set(_e.x,_e.y,_e.width,_e.height),ze===0&&(L.matrix.copy(Ae.matrix),L.matrix.decompose(L.position,L.quaternion,L.scale)),de===!0&&L.cameras.push(Ae)}const ve=r.enabledFeatures;if(ve&&ve.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&p){const ze=p.getDepthInformation(me[0]);ze&&ze.isValid&&ze.texture&&S.init(e,ze,r.renderState)}}for(let me=0;me<M.length;me++){const de=C[me],ve=M[me];de!==null&&ve!==void 0&&ve.update(de,ce,u||s)}X&&X(Z,ce),ce.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ce}),_=null}const ue=new WH;ue.setAnimationLoop(oe),this.setAnimationLoop=function(Z){X=Z},this.dispose=function(){}}}const Td=new Cr,VZ=new Mt;function GZ(n,e){function t(x,w){x.matrixAutoUpdate===!0&&x.updateMatrix(),w.value.copy(x.matrix)}function i(x,w){w.color.getRGB(x.fogColor.value,J5(n)),w.isFog?(x.fogNear.value=w.near,x.fogFar.value=w.far):w.isFogExp2&&(x.fogDensity.value=w.density)}function r(x,w,T,M,C){w.isMeshBasicMaterial||w.isMeshLambertMaterial?a(x,w):w.isMeshToonMaterial?(a(x,w),p(x,w)):w.isMeshPhongMaterial?(a(x,w),h(x,w)):w.isMeshStandardMaterial?(a(x,w),g(x,w),w.isMeshPhysicalMaterial&&y(x,w,C)):w.isMeshMatcapMaterial?(a(x,w),_(x,w)):w.isMeshDepthMaterial?a(x,w):w.isMeshDistanceMaterial?(a(x,w),S(x,w)):w.isMeshNormalMaterial?a(x,w):w.isLineBasicMaterial?(s(x,w),w.isLineDashedMaterial&&o(x,w)):w.isPointsMaterial?l(x,w,T,M):w.isSpriteMaterial?u(x,w):w.isShadowMaterial?(x.color.value.copy(w.color),x.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function a(x,w){x.opacity.value=w.opacity,w.color&&x.diffuse.value.copy(w.color),w.emissive&&x.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(x.map.value=w.map,t(w.map,x.mapTransform)),w.alphaMap&&(x.alphaMap.value=w.alphaMap,t(w.alphaMap,x.alphaMapTransform)),w.bumpMap&&(x.bumpMap.value=w.bumpMap,t(w.bumpMap,x.bumpMapTransform),x.bumpScale.value=w.bumpScale,w.side===ds&&(x.bumpScale.value*=-1)),w.normalMap&&(x.normalMap.value=w.normalMap,t(w.normalMap,x.normalMapTransform),x.normalScale.value.copy(w.normalScale),w.side===ds&&x.normalScale.value.negate()),w.displacementMap&&(x.displacementMap.value=w.displacementMap,t(w.displacementMap,x.displacementMapTransform),x.displacementScale.value=w.displacementScale,x.displacementBias.value=w.displacementBias),w.emissiveMap&&(x.emissiveMap.value=w.emissiveMap,t(w.emissiveMap,x.emissiveMapTransform)),w.specularMap&&(x.specularMap.value=w.specularMap,t(w.specularMap,x.specularMapTransform)),w.alphaTest>0&&(x.alphaTest.value=w.alphaTest);const T=e.get(w),M=T.envMap,C=T.envMapRotation;M&&(x.envMap.value=M,Td.copy(C),Td.x*=-1,Td.y*=-1,Td.z*=-1,M.isCubeTexture&&M.isRenderTargetTexture===!1&&(Td.y*=-1,Td.z*=-1),x.envMapRotation.value.setFromMatrix4(VZ.makeRotationFromEuler(Td)),x.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=w.reflectivity,x.ior.value=w.ior,x.refractionRatio.value=w.refractionRatio),w.lightMap&&(x.lightMap.value=w.lightMap,x.lightMapIntensity.value=w.lightMapIntensity,t(w.lightMap,x.lightMapTransform)),w.aoMap&&(x.aoMap.value=w.aoMap,x.aoMapIntensity.value=w.aoMapIntensity,t(w.aoMap,x.aoMapTransform))}function s(x,w){x.diffuse.value.copy(w.color),x.opacity.value=w.opacity,w.map&&(x.map.value=w.map,t(w.map,x.mapTransform))}function o(x,w){x.dashSize.value=w.dashSize,x.totalSize.value=w.dashSize+w.gapSize,x.scale.value=w.scale}function l(x,w,T,M){x.diffuse.value.copy(w.color),x.opacity.value=w.opacity,x.size.value=w.size*T,x.scale.value=M*.5,w.map&&(x.map.value=w.map,t(w.map,x.uvTransform)),w.alphaMap&&(x.alphaMap.value=w.alphaMap,t(w.alphaMap,x.alphaMapTransform)),w.alphaTest>0&&(x.alphaTest.value=w.alphaTest)}function u(x,w){x.diffuse.value.copy(w.color),x.opacity.value=w.opacity,x.rotation.value=w.rotation,w.map&&(x.map.value=w.map,t(w.map,x.mapTransform)),w.alphaMap&&(x.alphaMap.value=w.alphaMap,t(w.alphaMap,x.alphaMapTransform)),w.alphaTest>0&&(x.alphaTest.value=w.alphaTest)}function h(x,w){x.specular.value.copy(w.specular),x.shininess.value=Math.max(w.shininess,1e-4)}function p(x,w){w.gradientMap&&(x.gradientMap.value=w.gradientMap)}function g(x,w){x.metalness.value=w.metalness,w.metalnessMap&&(x.metalnessMap.value=w.metalnessMap,t(w.metalnessMap,x.metalnessMapTransform)),x.roughness.value=w.roughness,w.roughnessMap&&(x.roughnessMap.value=w.roughnessMap,t(w.roughnessMap,x.roughnessMapTransform)),w.envMap&&(x.envMapIntensity.value=w.envMapIntensity)}function y(x,w,T){x.ior.value=w.ior,w.sheen>0&&(x.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),x.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(x.sheenColorMap.value=w.sheenColorMap,t(w.sheenColorMap,x.sheenColorMapTransform)),w.sheenRoughnessMap&&(x.sheenRoughnessMap.value=w.sheenRoughnessMap,t(w.sheenRoughnessMap,x.sheenRoughnessMapTransform))),w.clearcoat>0&&(x.clearcoat.value=w.clearcoat,x.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(x.clearcoatMap.value=w.clearcoatMap,t(w.clearcoatMap,x.clearcoatMapTransform)),w.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap,t(w.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),w.clearcoatNormalMap&&(x.clearcoatNormalMap.value=w.clearcoatNormalMap,t(w.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),w.side===ds&&x.clearcoatNormalScale.value.negate())),w.dispersion>0&&(x.dispersion.value=w.dispersion),w.iridescence>0&&(x.iridescence.value=w.iridescence,x.iridescenceIOR.value=w.iridescenceIOR,x.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(x.iridescenceMap.value=w.iridescenceMap,t(w.iridescenceMap,x.iridescenceMapTransform)),w.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=w.iridescenceThicknessMap,t(w.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),w.transmission>0&&(x.transmission.value=w.transmission,x.transmissionSamplerMap.value=T.texture,x.transmissionSamplerSize.value.set(T.width,T.height),w.transmissionMap&&(x.transmissionMap.value=w.transmissionMap,t(w.transmissionMap,x.transmissionMapTransform)),x.thickness.value=w.thickness,w.thicknessMap&&(x.thicknessMap.value=w.thicknessMap,t(w.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=w.attenuationDistance,x.attenuationColor.value.copy(w.attenuationColor)),w.anisotropy>0&&(x.anisotropyVector.value.set(w.anisotropy*Math.cos(w.anisotropyRotation),w.anisotropy*Math.sin(w.anisotropyRotation)),w.anisotropyMap&&(x.anisotropyMap.value=w.anisotropyMap,t(w.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=w.specularIntensity,x.specularColor.value.copy(w.specularColor),w.specularColorMap&&(x.specularColorMap.value=w.specularColorMap,t(w.specularColorMap,x.specularColorMapTransform)),w.specularIntensityMap&&(x.specularIntensityMap.value=w.specularIntensityMap,t(w.specularIntensityMap,x.specularIntensityMapTransform))}function _(x,w){w.matcap&&(x.matcap.value=w.matcap)}function S(x,w){const T=e.get(w).light;x.referencePosition.value.setFromMatrixPosition(T.matrixWorld),x.nearDistance.value=T.shadow.camera.near,x.farDistance.value=T.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function jZ(n,e,t,i){let r={},a={},s=[];const o=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(T,M){const C=M.program;i.uniformBlockBinding(T,C)}function u(T,M){let C=r[T.id];C===void 0&&(_(T),C=h(T),r[T.id]=C,T.addEventListener("dispose",x));const N=M.program;i.updateUBOMapping(T,N);const D=e.render.frame;a[T.id]!==D&&(g(T),a[T.id]=D)}function h(T){const M=p();T.__bindingPointIndex=M;const C=n.createBuffer(),N=T.__size,D=T.usage;return n.bindBuffer(n.UNIFORM_BUFFER,C),n.bufferData(n.UNIFORM_BUFFER,N,D),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,M,C),C}function p(){for(let T=0;T<o;T++)if(s.indexOf(T)===-1)return s.push(T),T;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function g(T){const M=r[T.id],C=T.uniforms,N=T.__cache;n.bindBuffer(n.UNIFORM_BUFFER,M);for(let D=0,P=C.length;D<P;D++){const z=Array.isArray(C[D])?C[D]:[C[D]];for(let I=0,L=z.length;I<L;I++){const H=z[I];if(y(H,D,I,N)===!0){const j=H.__offset,G=Array.isArray(H.value)?H.value:[H.value];let K=0;for(let ee=0;ee<G.length;ee++){const Y=G[ee],re=S(Y);typeof Y=="number"||typeof Y=="boolean"?(H.__data[0]=Y,n.bufferSubData(n.UNIFORM_BUFFER,j+K,H.__data)):Y.isMatrix3?(H.__data[0]=Y.elements[0],H.__data[1]=Y.elements[1],H.__data[2]=Y.elements[2],H.__data[3]=0,H.__data[4]=Y.elements[3],H.__data[5]=Y.elements[4],H.__data[6]=Y.elements[5],H.__data[7]=0,H.__data[8]=Y.elements[6],H.__data[9]=Y.elements[7],H.__data[10]=Y.elements[8],H.__data[11]=0):(Y.toArray(H.__data,K),K+=re.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,j,H.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function y(T,M,C,N){const D=T.value,P=M+"_"+C;if(N[P]===void 0)return typeof D=="number"||typeof D=="boolean"?N[P]=D:N[P]=D.clone(),!0;{const z=N[P];if(typeof D=="number"||typeof D=="boolean"){if(z!==D)return N[P]=D,!0}else if(z.equals(D)===!1)return z.copy(D),!0}return!1}function _(T){const M=T.uniforms;let C=0;const N=16;for(let P=0,z=M.length;P<z;P++){const I=Array.isArray(M[P])?M[P]:[M[P]];for(let L=0,H=I.length;L<H;L++){const j=I[L],G=Array.isArray(j.value)?j.value:[j.value];for(let K=0,ee=G.length;K<ee;K++){const Y=G[K],re=S(Y),J=C%N,se=J%re.boundary,q=J+se;C+=se,q!==0&&N-q<re.storage&&(C+=N-q),j.__data=new Float32Array(re.storage/Float32Array.BYTES_PER_ELEMENT),j.__offset=C,C+=re.storage}}}const D=C%N;return D>0&&(C+=N-D),T.__size=C,T.__cache={},this}function S(T){const M={boundary:0,storage:0};return typeof T=="number"||typeof T=="boolean"?(M.boundary=4,M.storage=4):T.isVector2?(M.boundary=8,M.storage=8):T.isVector3||T.isColor?(M.boundary=16,M.storage=12):T.isVector4?(M.boundary=16,M.storage=16):T.isMatrix3?(M.boundary=48,M.storage=48):T.isMatrix4?(M.boundary=64,M.storage=64):T.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",T),M}function x(T){const M=T.target;M.removeEventListener("dispose",x);const C=s.indexOf(M.__bindingPointIndex);s.splice(C,1),n.deleteBuffer(r[M.id]),delete r[M.id],delete a[M.id]}function w(){for(const T in r)n.deleteBuffer(r[T]);s=[],r={},a={}}return{bind:l,update:u,dispose:w}}class QH{constructor(e={}){const{canvas:t=K5(),context:i=null,depth:r=!0,stencil:a=!1,alpha:s=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:p=!1,reverseDepthBuffer:g=!1}=e;this.isWebGLRenderer=!0;let y;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");y=i.getContextAttributes().alpha}else y=s;const _=new Uint32Array(4),S=new Int32Array(4);let x=null,w=null;const T=[],M=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ni,this.toneMapping=Vc,this.toneMappingExposure=1;const C=this;let N=!1,D=0,P=0,z=null,I=-1,L=null;const H=new yn,j=new yn;let G=null;const K=new yt(0);let ee=0,Y=t.width,re=t.height,J=1,se=null,q=null;const X=new yn(0,0,Y,re),oe=new yn(0,0,Y,re);let ue=!1;const Z=new e_;let ce=!1,me=!1;this.transmissionResolutionScale=1;const de=new Mt,ve=new Mt,We=new le,ze=new yn,qe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let _e=!1;function Ae(){return z===null?J:1}let te=i;function ke(Q,be){return t.getContext(Q,be)}try{const Q={alpha:!0,depth:r,stencil:a,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:p};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${X1}`),t.addEventListener("webglcontextlost",et,!1),t.addEventListener("webglcontextrestored",lt,!1),t.addEventListener("webglcontextcreationerror",rt,!1),te===null){const be="webgl2";if(te=ke(be,Q),te===null)throw ke(be)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Q){throw console.error("THREE.WebGLRenderer: "+Q.message),Q}let De,Ie,Te,Xe,Pe,$,W,ae,he,Se,Oe,je,Ge,Ke,_t,Ye,ct,it,Ze,$e,vt,gt,jt,ye;function Je(){De=new nK(te),De.init(),gt=new ZH(te,De),Ie=new XX(te,De,e,gt),Te=new IZ(te,De),Ie.reverseDepthBuffer&&g&&Te.buffers.depth.setReversed(!0),Xe=new aK(te),Pe=new EZ,$=new BZ(te,De,Te,Pe,Ie,gt,Xe),W=new ZX(C),ae=new tK(C),he=new fY(te),jt=new YX(te,he),Se=new iK(te,he,Xe,jt),Oe=new oK(te,Se,he,Xe),Ze=new sK(te,Ie,$),Ye=new KX(Pe),je=new xZ(C,W,ae,De,Ie,jt,Ye),Ge=new GZ(C,Pe),Ke=new TZ,_t=new DZ(De),it=new WX(C,W,ae,Te,Oe,y,l),ct=new PZ(C,Oe,Ie),ye=new jZ(te,Xe,Ie,Te),$e=new $X(te,De,Xe),vt=new rK(te,De,Xe),Xe.programs=je.programs,C.capabilities=Ie,C.extensions=De,C.properties=Pe,C.renderLists=Ke,C.shadowMap=ct,C.state=Te,C.info=Xe}Je();const Ue=new HZ(C,te);this.xr=Ue,this.getContext=function(){return te},this.getContextAttributes=function(){return te.getContextAttributes()},this.forceContextLoss=function(){const Q=De.get("WEBGL_lose_context");Q&&Q.loseContext()},this.forceContextRestore=function(){const Q=De.get("WEBGL_lose_context");Q&&Q.restoreContext()},this.getPixelRatio=function(){return J},this.setPixelRatio=function(Q){Q!==void 0&&(J=Q,this.setSize(Y,re,!1))},this.getSize=function(Q){return Q.set(Y,re)},this.setSize=function(Q,be,Ne=!0){if(Ue.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Y=Q,re=be,t.width=Math.floor(Q*J),t.height=Math.floor(be*J),Ne===!0&&(t.style.width=Q+"px",t.style.height=be+"px"),this.setViewport(0,0,Q,be)},this.getDrawingBufferSize=function(Q){return Q.set(Y*J,re*J).floor()},this.setDrawingBufferSize=function(Q,be,Ne){Y=Q,re=be,J=Ne,t.width=Math.floor(Q*Ne),t.height=Math.floor(be*Ne),this.setViewport(0,0,Q,be)},this.getCurrentViewport=function(Q){return Q.copy(H)},this.getViewport=function(Q){return Q.copy(X)},this.setViewport=function(Q,be,Ne,ge){Q.isVector4?X.set(Q.x,Q.y,Q.z,Q.w):X.set(Q,be,Ne,ge),Te.viewport(H.copy(X).multiplyScalar(J).round())},this.getScissor=function(Q){return Q.copy(oe)},this.setScissor=function(Q,be,Ne,ge){Q.isVector4?oe.set(Q.x,Q.y,Q.z,Q.w):oe.set(Q,be,Ne,ge),Te.scissor(j.copy(oe).multiplyScalar(J).round())},this.getScissorTest=function(){return ue},this.setScissorTest=function(Q){Te.setScissorTest(ue=Q)},this.setOpaqueSort=function(Q){se=Q},this.setTransparentSort=function(Q){q=Q},this.getClearColor=function(Q){return Q.copy(it.getClearColor())},this.setClearColor=function(){it.setClearColor(...arguments)},this.getClearAlpha=function(){return it.getClearAlpha()},this.setClearAlpha=function(){it.setClearAlpha(...arguments)},this.clear=function(Q=!0,be=!0,Ne=!0){let ge=0;if(Q){let we=!1;if(z!==null){const ut=z.texture.format;we=ut===iE||ut===nE||ut===K0}if(we){const ut=z.texture.type,mt=ut===Gl||ut===Ju||ut===gg||ut===np||ut===J1||ut===eE,St=it.getClearColor(),xt=it.getClearAlpha(),Ht=St.r,kt=St.g,Dt=St.b;mt?(_[0]=Ht,_[1]=kt,_[2]=Dt,_[3]=xt,te.clearBufferuiv(te.COLOR,0,_)):(S[0]=Ht,S[1]=kt,S[2]=Dt,S[3]=xt,te.clearBufferiv(te.COLOR,0,S))}else ge|=te.COLOR_BUFFER_BIT}be&&(ge|=te.DEPTH_BUFFER_BIT),Ne&&(ge|=te.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),te.clear(ge)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",et,!1),t.removeEventListener("webglcontextrestored",lt,!1),t.removeEventListener("webglcontextcreationerror",rt,!1),it.dispose(),Ke.dispose(),_t.dispose(),Pe.dispose(),W.dispose(),ae.dispose(),Oe.dispose(),jt.dispose(),ye.dispose(),je.dispose(),Ue.dispose(),Ue.removeEventListener("sessionstart",ci),Ue.removeEventListener("sessionend",dr),Li.stop()};function et(Q){Q.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),N=!0}function lt(){console.log("THREE.WebGLRenderer: Context Restored."),N=!1;const Q=Xe.autoReset,be=ct.enabled,Ne=ct.autoUpdate,ge=ct.needsUpdate,we=ct.type;Je(),Xe.autoReset=Q,ct.enabled=be,ct.autoUpdate=Ne,ct.needsUpdate=ge,ct.type=we}function rt(Q){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Q.statusMessage)}function Tt(Q){const be=Q.target;be.removeEventListener("dispose",Tt),Ft(be)}function Ft(Q){At(Q),Pe.remove(Q)}function At(Q){const be=Pe.get(Q).programs;be!==void 0&&(be.forEach(function(Ne){je.releaseProgram(Ne)}),Q.isShaderMaterial&&je.releaseShaderCache(Q))}this.renderBufferDirect=function(Q,be,Ne,ge,we,ut){be===null&&(be=qe);const mt=we.isMesh&&we.matrixWorld.determinant()<0,St=df(Q,be,Ne,ge,we);Te.setMaterial(ge,mt);let xt=Ne.index,Ht=1;if(ge.wireframe===!0){if(xt=Se.getWireframeAttribute(Ne),xt===void 0)return;Ht=2}const kt=Ne.drawRange,Dt=Ne.attributes.position;let dn=kt.start*Ht,ln=(kt.start+kt.count)*Ht;ut!==null&&(dn=Math.max(dn,ut.start*Ht),ln=Math.min(ln,(ut.start+ut.count)*Ht)),xt!==null?(dn=Math.max(dn,0),ln=Math.min(ln,xt.count)):Dt!=null&&(dn=Math.max(dn,0),ln=Math.min(ln,Dt.count));const jn=ln-dn;if(jn<0||jn===1/0)return;jt.setup(we,ge,St,Ne,xt);let bn,qt=$e;if(xt!==null&&(bn=he.get(xt),qt=vt,qt.setIndex(bn)),we.isMesh)ge.wireframe===!0?(Te.setLineWidth(ge.wireframeLinewidth*Ae()),qt.setMode(te.LINES)):qt.setMode(te.TRIANGLES);else if(we.isLine){let Nt=ge.linewidth;Nt===void 0&&(Nt=1),Te.setLineWidth(Nt*Ae()),we.isLineSegments?qt.setMode(te.LINES):we.isLineLoop?qt.setMode(te.LINE_LOOP):qt.setMode(te.LINE_STRIP)}else we.isPoints?qt.setMode(te.POINTS):we.isSprite&&qt.setMode(te.TRIANGLES);if(we.isBatchedMesh)if(we._multiDrawInstances!==null)Ud("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),qt.renderMultiDrawInstances(we._multiDrawStarts,we._multiDrawCounts,we._multiDrawCount,we._multiDrawInstances);else if(De.get("WEBGL_multi_draw"))qt.renderMultiDraw(we._multiDrawStarts,we._multiDrawCounts,we._multiDrawCount);else{const Nt=we._multiDrawStarts,mi=we._multiDrawCounts,nn=we._multiDrawCount,mr=xt?he.get(xt).bytesPerElement:1,Rr=Pe.get(ge).currentProgram.getUniforms();for(let Ji=0;Ji<nn;Ji++)Rr.setValue(te,"_gl_DrawID",Ji),qt.render(Nt[Ji]/mr,mi[Ji])}else if(we.isInstancedMesh)qt.renderInstances(dn,jn,we.count);else if(Ne.isInstancedBufferGeometry){const Nt=Ne._maxInstanceCount!==void 0?Ne._maxInstanceCount:1/0,mi=Math.min(Ne.instanceCount,Nt);qt.renderInstances(dn,jn,mi)}else qt.render(dn,jn)};function Ut(Q,be,Ne){Q.transparent===!0&&Q.side===Fl&&Q.forceSinglePass===!1?(Q.side=ds,Q.needsUpdate=!0,Zt(Q,be,Ne),Q.side=Zu,Q.needsUpdate=!0,Zt(Q,be,Ne),Q.side=Fl):Zt(Q,be,Ne)}this.compile=function(Q,be,Ne=null){Ne===null&&(Ne=Q),w=_t.get(Ne),w.init(be),M.push(w),Ne.traverseVisible(function(we){we.isLight&&we.layers.test(be.layers)&&(w.pushLight(we),we.castShadow&&w.pushShadow(we))}),Q!==Ne&&Q.traverseVisible(function(we){we.isLight&&we.layers.test(be.layers)&&(w.pushLight(we),we.castShadow&&w.pushShadow(we))}),w.setupLights();const ge=new Set;return Q.traverse(function(we){if(!(we.isMesh||we.isPoints||we.isLine||we.isSprite))return;const ut=we.material;if(ut)if(Array.isArray(ut))for(let mt=0;mt<ut.length;mt++){const St=ut[mt];Ut(St,Ne,we),ge.add(St)}else Ut(ut,Ne,we),ge.add(ut)}),w=M.pop(),ge},this.compileAsync=function(Q,be,Ne=null){const ge=this.compile(Q,be,Ne);return new Promise(we=>{function ut(){if(ge.forEach(function(mt){Pe.get(mt).currentProgram.isReady()&&ge.delete(mt)}),ge.size===0){we(Q);return}setTimeout(ut,10)}De.get("KHR_parallel_shader_compile")!==null?ut():setTimeout(ut,10)})};let Ln=null;function Dn(Q){Ln&&Ln(Q)}function ci(){Li.stop()}function dr(){Li.start()}const Li=new WH;Li.setAnimationLoop(Dn),typeof self<"u"&&Li.setContext(self),this.setAnimationLoop=function(Q){Ln=Q,Ue.setAnimationLoop(Q),Q===null?Li.stop():Li.start()},Ue.addEventListener("sessionstart",ci),Ue.addEventListener("sessionend",dr),this.render=function(Q,be){if(be!==void 0&&be.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(N===!0)return;if(Q.matrixWorldAutoUpdate===!0&&Q.updateMatrixWorld(),be.parent===null&&be.matrixWorldAutoUpdate===!0&&be.updateMatrixWorld(),Ue.enabled===!0&&Ue.isPresenting===!0&&(Ue.cameraAutoUpdate===!0&&Ue.updateCamera(be),be=Ue.getCamera()),Q.isScene===!0&&Q.onBeforeRender(C,Q,be,z),w=_t.get(Q,M.length),w.init(be),M.push(w),ve.multiplyMatrices(be.projectionMatrix,be.matrixWorldInverse),Z.setFromProjectionMatrix(ve),me=this.localClippingEnabled,ce=Ye.init(this.clippingPlanes,me),x=Ke.get(Q,T.length),x.init(),T.push(x),Ue.enabled===!0&&Ue.isPresenting===!0){const ut=C.xr.getDepthSensingMesh();ut!==null&&xi(ut,be,-1/0,C.sortObjects)}xi(Q,be,0,C.sortObjects),x.finish(),C.sortObjects===!0&&x.sort(se,q),_e=Ue.enabled===!1||Ue.isPresenting===!1||Ue.hasDepthSensing()===!1,_e&&it.addToRenderList(x,Q),this.info.render.frame++,ce===!0&&Ye.beginShadows();const Ne=w.state.shadowsArray;ct.render(Ne,Q,be),ce===!0&&Ye.endShadows(),this.info.autoReset===!0&&this.info.reset();const ge=x.opaque,we=x.transmissive;if(w.setupLights(),be.isArrayCamera){const ut=be.cameras;if(we.length>0)for(let mt=0,St=ut.length;mt<St;mt++){const xt=ut[mt];pr(ge,we,Q,xt)}_e&&it.render(Q);for(let mt=0,St=ut.length;mt<St;mt++){const xt=ut[mt];ra(x,Q,xt,xt.viewport)}}else we.length>0&&pr(ge,we,Q,be),_e&&it.render(Q),ra(x,Q,be);z!==null&&P===0&&($.updateMultisampleRenderTarget(z),$.updateRenderTargetMipmap(z)),Q.isScene===!0&&Q.onAfterRender(C,Q,be),jt.resetDefaultState(),I=-1,L=null,M.pop(),M.length>0?(w=M[M.length-1],ce===!0&&Ye.setGlobalState(C.clippingPlanes,w.state.camera)):w=null,T.pop(),T.length>0?x=T[T.length-1]:x=null};function xi(Q,be,Ne,ge){if(Q.visible===!1)return;if(Q.layers.test(be.layers)){if(Q.isGroup)Ne=Q.renderOrder;else if(Q.isLOD)Q.autoUpdate===!0&&Q.update(be);else if(Q.isLight)w.pushLight(Q),Q.castShadow&&w.pushShadow(Q);else if(Q.isSprite){if(!Q.frustumCulled||Z.intersectsSprite(Q)){ge&&ze.setFromMatrixPosition(Q.matrixWorld).applyMatrix4(ve);const mt=Oe.update(Q),St=Q.material;St.visible&&x.push(Q,mt,St,Ne,ze.z,null)}}else if((Q.isMesh||Q.isLine||Q.isPoints)&&(!Q.frustumCulled||Z.intersectsObject(Q))){const mt=Oe.update(Q),St=Q.material;if(ge&&(Q.boundingSphere!==void 0?(Q.boundingSphere===null&&Q.computeBoundingSphere(),ze.copy(Q.boundingSphere.center)):(mt.boundingSphere===null&&mt.computeBoundingSphere(),ze.copy(mt.boundingSphere.center)),ze.applyMatrix4(Q.matrixWorld).applyMatrix4(ve)),Array.isArray(St)){const xt=mt.groups;for(let Ht=0,kt=xt.length;Ht<kt;Ht++){const Dt=xt[Ht],dn=St[Dt.materialIndex];dn&&dn.visible&&x.push(Q,mt,dn,Ne,ze.z,Dt)}}else St.visible&&x.push(Q,mt,St,Ne,ze.z,null)}}const ut=Q.children;for(let mt=0,St=ut.length;mt<St;mt++)xi(ut[mt],be,Ne,ge)}function ra(Q,be,Ne,ge){const we=Q.opaque,ut=Q.transmissive,mt=Q.transparent;w.setupLightsView(Ne),ce===!0&&Ye.setGlobalState(C.clippingPlanes,Ne),ge&&Te.viewport(H.copy(ge)),we.length>0&&zn(we,be,Ne),ut.length>0&&zn(ut,be,Ne),mt.length>0&&zn(mt,be,Ne),Te.buffers.depth.setTest(!0),Te.buffers.depth.setMask(!0),Te.buffers.color.setMask(!0),Te.setPolygonOffset(!1)}function pr(Q,be,Ne,ge){if((Ne.isScene===!0?Ne.overrideMaterial:null)!==null)return;w.state.transmissionRenderTarget[ge.id]===void 0&&(w.state.transmissionRenderTarget[ge.id]=new Yc(1,1,{generateMipmaps:!0,type:De.has("EXT_color_buffer_half_float")||De.has("EXT_color_buffer_float")?Ig:Gl,minFilter:Fc,samples:4,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:cn.workingColorSpace}));const ut=w.state.transmissionRenderTarget[ge.id],mt=ge.viewport||H;ut.setSize(mt.z*C.transmissionResolutionScale,mt.w*C.transmissionResolutionScale);const St=C.getRenderTarget();C.setRenderTarget(ut),C.getClearColor(K),ee=C.getClearAlpha(),ee<1&&C.setClearColor(16777215,.5),C.clear(),_e&&it.render(Ne);const xt=C.toneMapping;C.toneMapping=Vc;const Ht=ge.viewport;if(ge.viewport!==void 0&&(ge.viewport=void 0),w.setupLightsView(ge),ce===!0&&Ye.setGlobalState(C.clippingPlanes,ge),zn(Q,Ne,ge),$.updateMultisampleRenderTarget(ut),$.updateRenderTargetMipmap(ut),De.has("WEBGL_multisampled_render_to_texture")===!1){let kt=!1;for(let Dt=0,dn=be.length;Dt<dn;Dt++){const ln=be[Dt],jn=ln.object,bn=ln.geometry,qt=ln.material,Nt=ln.group;if(qt.side===Fl&&jn.layers.test(ge.layers)){const mi=qt.side;qt.side=ds,qt.needsUpdate=!0,_n(jn,Ne,ge,bn,qt,Nt),qt.side=mi,qt.needsUpdate=!0,kt=!0}}kt===!0&&($.updateMultisampleRenderTarget(ut),$.updateRenderTargetMipmap(ut))}C.setRenderTarget(St),C.setClearColor(K,ee),Ht!==void 0&&(ge.viewport=Ht),C.toneMapping=xt}function zn(Q,be,Ne){const ge=be.isScene===!0?be.overrideMaterial:null;for(let we=0,ut=Q.length;we<ut;we++){const mt=Q[we],St=mt.object,xt=mt.geometry,Ht=ge===null?mt.material:ge,kt=mt.group;St.layers.test(Ne.layers)&&_n(St,be,Ne,xt,Ht,kt)}}function _n(Q,be,Ne,ge,we,ut){Q.onBeforeRender(C,be,Ne,ge,we,ut),Q.modelViewMatrix.multiplyMatrices(Ne.matrixWorldInverse,Q.matrixWorld),Q.normalMatrix.getNormalMatrix(Q.modelViewMatrix),we.onBeforeRender(C,be,Ne,ge,Q,ut),we.transparent===!0&&we.side===Fl&&we.forceSinglePass===!1?(we.side=ds,we.needsUpdate=!0,C.renderBufferDirect(Ne,be,ge,we,Q,ut),we.side=Zu,we.needsUpdate=!0,C.renderBufferDirect(Ne,be,ge,we,Q,ut),we.side=Fl):C.renderBufferDirect(Ne,be,ge,we,Q,ut),Q.onAfterRender(C,be,Ne,ge,we,ut)}function Zt(Q,be,Ne){be.isScene!==!0&&(be=qe);const ge=Pe.get(Q),we=w.state.lights,ut=w.state.shadowsArray,mt=we.state.version,St=je.getParameters(Q,we.state,ut,be,Ne),xt=je.getProgramCacheKey(St);let Ht=ge.programs;ge.environment=Q.isMeshStandardMaterial?be.environment:null,ge.fog=be.fog,ge.envMap=(Q.isMeshStandardMaterial?ae:W).get(Q.envMap||ge.environment),ge.envMapRotation=ge.environment!==null&&Q.envMap===null?be.environmentRotation:Q.envMapRotation,Ht===void 0&&(Q.addEventListener("dispose",Tt),Ht=new Map,ge.programs=Ht);let kt=Ht.get(xt);if(kt!==void 0){if(ge.currentProgram===kt&&ge.lightsStateVersion===mt)return ps(Q,St),kt}else St.uniforms=je.getUniforms(Q),Q.onBeforeCompile(St,C),kt=je.acquireProgram(St,xt),Ht.set(xt,kt),ge.uniforms=St.uniforms;const Dt=ge.uniforms;return(!Q.isShaderMaterial&&!Q.isRawShaderMaterial||Q.clipping===!0)&&(Dt.clippingPlanes=Ye.uniform),ps(Q,St),ge.needsLights=qo(Q),ge.lightsStateVersion=mt,ge.needsLights&&(Dt.ambientLightColor.value=we.state.ambient,Dt.lightProbe.value=we.state.probe,Dt.directionalLights.value=we.state.directional,Dt.directionalLightShadows.value=we.state.directionalShadow,Dt.spotLights.value=we.state.spot,Dt.spotLightShadows.value=we.state.spotShadow,Dt.rectAreaLights.value=we.state.rectArea,Dt.ltc_1.value=we.state.rectAreaLTC1,Dt.ltc_2.value=we.state.rectAreaLTC2,Dt.pointLights.value=we.state.point,Dt.pointLightShadows.value=we.state.pointShadow,Dt.hemisphereLights.value=we.state.hemi,Dt.directionalShadowMap.value=we.state.directionalShadowMap,Dt.directionalShadowMatrix.value=we.state.directionalShadowMatrix,Dt.spotShadowMap.value=we.state.spotShadowMap,Dt.spotLightMatrix.value=we.state.spotLightMatrix,Dt.spotLightMap.value=we.state.spotLightMap,Dt.pointShadowMap.value=we.state.pointShadowMap,Dt.pointShadowMatrix.value=we.state.pointShadowMatrix),ge.currentProgram=kt,ge.uniformsList=null,kt}function _a(Q){if(Q.uniformsList===null){const be=Q.currentProgram.getUniforms();Q.uniformsList=px.seqWithValue(be.seq,Q.uniforms)}return Q.uniformsList}function ps(Q,be){const Ne=Pe.get(Q);Ne.outputColorSpace=be.outputColorSpace,Ne.batching=be.batching,Ne.batchingColor=be.batchingColor,Ne.instancing=be.instancing,Ne.instancingColor=be.instancingColor,Ne.instancingMorph=be.instancingMorph,Ne.skinning=be.skinning,Ne.morphTargets=be.morphTargets,Ne.morphNormals=be.morphNormals,Ne.morphColors=be.morphColors,Ne.morphTargetsCount=be.morphTargetsCount,Ne.numClippingPlanes=be.numClippingPlanes,Ne.numIntersection=be.numClipIntersection,Ne.vertexAlphas=be.vertexAlphas,Ne.vertexTangents=be.vertexTangents,Ne.toneMapping=be.toneMapping}function df(Q,be,Ne,ge,we){be.isScene!==!0&&(be=qe),$.resetTextureUnits();const ut=be.fog,mt=ge.isMeshStandardMaterial?be.environment:null,St=z===null?C.outputColorSpace:z.isXRRenderTarget===!0?z.texture.colorSpace:mh,xt=(ge.isMeshStandardMaterial?ae:W).get(ge.envMap||mt),Ht=ge.vertexColors===!0&&!!Ne.attributes.color&&Ne.attributes.color.itemSize===4,kt=!!Ne.attributes.tangent&&(!!ge.normalMap||ge.anisotropy>0),Dt=!!Ne.morphAttributes.position,dn=!!Ne.morphAttributes.normal,ln=!!Ne.morphAttributes.color;let jn=Vc;ge.toneMapped&&(z===null||z.isXRRenderTarget===!0)&&(jn=C.toneMapping);const bn=Ne.morphAttributes.position||Ne.morphAttributes.normal||Ne.morphAttributes.color,qt=bn!==void 0?bn.length:0,Nt=Pe.get(ge),mi=w.state.lights;if(ce===!0&&(me===!0||Q!==L)){const ui=Q===L&&ge.id===I;Ye.setState(ge,Q,ui)}let nn=!1;ge.version===Nt.__version?(Nt.needsLights&&Nt.lightsStateVersion!==mi.state.version||Nt.outputColorSpace!==St||we.isBatchedMesh&&Nt.batching===!1||!we.isBatchedMesh&&Nt.batching===!0||we.isBatchedMesh&&Nt.batchingColor===!0&&we.colorTexture===null||we.isBatchedMesh&&Nt.batchingColor===!1&&we.colorTexture!==null||we.isInstancedMesh&&Nt.instancing===!1||!we.isInstancedMesh&&Nt.instancing===!0||we.isSkinnedMesh&&Nt.skinning===!1||!we.isSkinnedMesh&&Nt.skinning===!0||we.isInstancedMesh&&Nt.instancingColor===!0&&we.instanceColor===null||we.isInstancedMesh&&Nt.instancingColor===!1&&we.instanceColor!==null||we.isInstancedMesh&&Nt.instancingMorph===!0&&we.morphTexture===null||we.isInstancedMesh&&Nt.instancingMorph===!1&&we.morphTexture!==null||Nt.envMap!==xt||ge.fog===!0&&Nt.fog!==ut||Nt.numClippingPlanes!==void 0&&(Nt.numClippingPlanes!==Ye.numPlanes||Nt.numIntersection!==Ye.numIntersection)||Nt.vertexAlphas!==Ht||Nt.vertexTangents!==kt||Nt.morphTargets!==Dt||Nt.morphNormals!==dn||Nt.morphColors!==ln||Nt.toneMapping!==jn||Nt.morphTargetsCount!==qt)&&(nn=!0):(nn=!0,Nt.__version=ge.version);let mr=Nt.currentProgram;nn===!0&&(mr=Zt(ge,be,we));let Rr=!1,Ji=!1,Fn=!1;const kn=mr.getUniforms(),Ii=Nt.uniforms;if(Te.useProgram(mr.program)&&(Rr=!0,Ji=!0,Fn=!0),ge.id!==I&&(I=ge.id,Ji=!0),Rr||L!==Q){Te.buffers.depth.getReversed()?(de.copy(Q.projectionMatrix),IW(de),BW(de),kn.setValue(te,"projectionMatrix",de)):kn.setValue(te,"projectionMatrix",Q.projectionMatrix),kn.setValue(te,"viewMatrix",Q.matrixWorldInverse);const wi=kn.map.cameraPosition;wi!==void 0&&wi.setValue(te,We.setFromMatrixPosition(Q.matrixWorld)),Ie.logarithmicDepthBuffer&&kn.setValue(te,"logDepthBufFC",2/(Math.log(Q.far+1)/Math.LN2)),(ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshLambertMaterial||ge.isMeshBasicMaterial||ge.isMeshStandardMaterial||ge.isShaderMaterial)&&kn.setValue(te,"isOrthographic",Q.isOrthographicCamera===!0),L!==Q&&(L=Q,Ji=!0,Fn=!0)}if(we.isSkinnedMesh){kn.setOptional(te,we,"bindMatrix"),kn.setOptional(te,we,"bindMatrixInverse");const ui=we.skeleton;ui&&(ui.boneTexture===null&&ui.computeBoneTexture(),kn.setValue(te,"boneTexture",ui.boneTexture,$))}we.isBatchedMesh&&(kn.setOptional(te,we,"batchingTexture"),kn.setValue(te,"batchingTexture",we._matricesTexture,$),kn.setOptional(te,we,"batchingIdTexture"),kn.setValue(te,"batchingIdTexture",we._indirectTexture,$),kn.setOptional(te,we,"batchingColorTexture"),we._colorsTexture!==null&&kn.setValue(te,"batchingColorTexture",we._colorsTexture,$));const Ei=Ne.morphAttributes;if((Ei.position!==void 0||Ei.normal!==void 0||Ei.color!==void 0)&&Ze.update(we,Ne,mr),(Ji||Nt.receiveShadow!==we.receiveShadow)&&(Nt.receiveShadow=we.receiveShadow,kn.setValue(te,"receiveShadow",we.receiveShadow)),ge.isMeshGouraudMaterial&&ge.envMap!==null&&(Ii.envMap.value=xt,Ii.flipEnvMap.value=xt.isCubeTexture&&xt.isRenderTargetTexture===!1?-1:1),ge.isMeshStandardMaterial&&ge.envMap===null&&be.environment!==null&&(Ii.envMapIntensity.value=be.environmentIntensity),Ji&&(kn.setValue(te,"toneMappingExposure",C.toneMappingExposure),Nt.needsLights&&tu(Ii,Fn),ut&&ge.fog===!0&&Ge.refreshFogUniforms(Ii,ut),Ge.refreshMaterialUniforms(Ii,ge,J,re,w.state.transmissionRenderTarget[Q.id]),px.upload(te,_a(Nt),Ii,$)),ge.isShaderMaterial&&ge.uniformsNeedUpdate===!0&&(px.upload(te,_a(Nt),Ii,$),ge.uniformsNeedUpdate=!1),ge.isSpriteMaterial&&kn.setValue(te,"center",we.center),kn.setValue(te,"modelViewMatrix",we.modelViewMatrix),kn.setValue(te,"normalMatrix",we.normalMatrix),kn.setValue(te,"modelMatrix",we.matrixWorld),ge.isShaderMaterial||ge.isRawShaderMaterial){const ui=ge.uniformsGroups;for(let wi=0,Vr=ui.length;wi<Vr;wi++){const gr=ui[wi];ye.update(gr,mr),ye.bind(gr,mr)}}return mr}function tu(Q,be){Q.ambientLightColor.needsUpdate=be,Q.lightProbe.needsUpdate=be,Q.directionalLights.needsUpdate=be,Q.directionalLightShadows.needsUpdate=be,Q.pointLights.needsUpdate=be,Q.pointLightShadows.needsUpdate=be,Q.spotLights.needsUpdate=be,Q.spotLightShadows.needsUpdate=be,Q.rectAreaLights.needsUpdate=be,Q.hemisphereLights.needsUpdate=be}function qo(Q){return Q.isMeshLambertMaterial||Q.isMeshToonMaterial||Q.isMeshPhongMaterial||Q.isMeshStandardMaterial||Q.isShadowMaterial||Q.isShaderMaterial&&Q.lights===!0}this.getActiveCubeFace=function(){return D},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return z},this.setRenderTargetTextures=function(Q,be,Ne){Pe.get(Q.texture).__webglTexture=be,Pe.get(Q.depthTexture).__webglTexture=Ne;const ge=Pe.get(Q);ge.__hasExternalTextures=!0,ge.__autoAllocateDepthBuffer=Ne===void 0,ge.__autoAllocateDepthBuffer||De.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ge.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(Q,be){const Ne=Pe.get(Q);Ne.__webglFramebuffer=be,Ne.__useDefaultFramebuffer=be===void 0};const qa=te.createFramebuffer();this.setRenderTarget=function(Q,be=0,Ne=0){z=Q,D=be,P=Ne;let ge=!0,we=null,ut=!1,mt=!1;if(Q){const xt=Pe.get(Q);if(xt.__useDefaultFramebuffer!==void 0)Te.bindFramebuffer(te.FRAMEBUFFER,null),ge=!1;else if(xt.__webglFramebuffer===void 0)$.setupRenderTarget(Q);else if(xt.__hasExternalTextures)$.rebindTextures(Q,Pe.get(Q.texture).__webglTexture,Pe.get(Q.depthTexture).__webglTexture);else if(Q.depthBuffer){const Dt=Q.depthTexture;if(xt.__boundDepthTexture!==Dt){if(Dt!==null&&Pe.has(Dt)&&(Q.width!==Dt.image.width||Q.height!==Dt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");$.setupDepthRenderbuffer(Q)}}const Ht=Q.texture;(Ht.isData3DTexture||Ht.isDataArrayTexture||Ht.isCompressedArrayTexture)&&(mt=!0);const kt=Pe.get(Q).__webglFramebuffer;Q.isWebGLCubeRenderTarget?(Array.isArray(kt[be])?we=kt[be][Ne]:we=kt[be],ut=!0):Q.samples>0&&$.useMultisampledRTT(Q)===!1?we=Pe.get(Q).__webglMultisampledFramebuffer:Array.isArray(kt)?we=kt[Ne]:we=kt,H.copy(Q.viewport),j.copy(Q.scissor),G=Q.scissorTest}else H.copy(X).multiplyScalar(J).floor(),j.copy(oe).multiplyScalar(J).floor(),G=ue;if(Ne!==0&&(we=qa),Te.bindFramebuffer(te.FRAMEBUFFER,we)&&ge&&Te.drawBuffers(Q,we),Te.viewport(H),Te.scissor(j),Te.setScissorTest(G),ut){const xt=Pe.get(Q.texture);te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_CUBE_MAP_POSITIVE_X+be,xt.__webglTexture,Ne)}else if(mt){const xt=Pe.get(Q.texture),Ht=be;te.framebufferTextureLayer(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,xt.__webglTexture,Ne,Ht)}else if(Q!==null&&Ne!==0){const xt=Pe.get(Q.texture);te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,xt.__webglTexture,Ne)}I=-1},this.readRenderTargetPixels=function(Q,be,Ne,ge,we,ut,mt){if(!(Q&&Q.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let St=Pe.get(Q).__webglFramebuffer;if(Q.isWebGLCubeRenderTarget&&mt!==void 0&&(St=St[mt]),St){Te.bindFramebuffer(te.FRAMEBUFFER,St);try{const xt=Q.texture,Ht=xt.format,kt=xt.type;if(!Ie.textureFormatReadable(Ht)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ie.textureTypeReadable(kt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}be>=0&&be<=Q.width-ge&&Ne>=0&&Ne<=Q.height-we&&te.readPixels(be,Ne,ge,we,gt.convert(Ht),gt.convert(kt),ut)}finally{const xt=z!==null?Pe.get(z).__webglFramebuffer:null;Te.bindFramebuffer(te.FRAMEBUFFER,xt)}}},this.readRenderTargetPixelsAsync=async function(Q,be,Ne,ge,we,ut,mt){if(!(Q&&Q.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let St=Pe.get(Q).__webglFramebuffer;if(Q.isWebGLCubeRenderTarget&&mt!==void 0&&(St=St[mt]),St){const xt=Q.texture,Ht=xt.format,kt=xt.type;if(!Ie.textureFormatReadable(Ht))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ie.textureTypeReadable(kt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(be>=0&&be<=Q.width-ge&&Ne>=0&&Ne<=Q.height-we){Te.bindFramebuffer(te.FRAMEBUFFER,St);const Dt=te.createBuffer();te.bindBuffer(te.PIXEL_PACK_BUFFER,Dt),te.bufferData(te.PIXEL_PACK_BUFFER,ut.byteLength,te.STREAM_READ),te.readPixels(be,Ne,ge,we,gt.convert(Ht),gt.convert(kt),0);const dn=z!==null?Pe.get(z).__webglFramebuffer:null;Te.bindFramebuffer(te.FRAMEBUFFER,dn);const ln=te.fenceSync(te.SYNC_GPU_COMMANDS_COMPLETE,0);return te.flush(),await LW(te,ln,4),te.bindBuffer(te.PIXEL_PACK_BUFFER,Dt),te.getBufferSubData(te.PIXEL_PACK_BUFFER,0,ut),te.deleteBuffer(Dt),te.deleteSync(ln),ut}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(Q,be=null,Ne=0){Q.isTexture!==!0&&(Ud("WebGLRenderer: copyFramebufferToTexture function signature has changed."),be=arguments[0]||null,Q=arguments[1]);const ge=Math.pow(2,-Ne),we=Math.floor(Q.image.width*ge),ut=Math.floor(Q.image.height*ge),mt=be!==null?be.x:0,St=be!==null?be.y:0;$.setTexture2D(Q,0),te.copyTexSubImage2D(te.TEXTURE_2D,Ne,0,0,mt,St,we,ut),Te.unbindTexture()};const Wo=te.createFramebuffer(),ba=te.createFramebuffer();this.copyTextureToTexture=function(Q,be,Ne=null,ge=null,we=0,ut=null){Q.isTexture!==!0&&(Ud("WebGLRenderer: copyTextureToTexture function signature has changed."),ge=arguments[0]||null,Q=arguments[1],be=arguments[2],ut=arguments[3]||0,Ne=null),ut===null&&(we!==0?(Ud("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),ut=we,we=0):ut=0);let mt,St,xt,Ht,kt,Dt,dn,ln,jn;const bn=Q.isCompressedTexture?Q.mipmaps[ut]:Q.image;if(Ne!==null)mt=Ne.max.x-Ne.min.x,St=Ne.max.y-Ne.min.y,xt=Ne.isBox3?Ne.max.z-Ne.min.z:1,Ht=Ne.min.x,kt=Ne.min.y,Dt=Ne.isBox3?Ne.min.z:0;else{const Ei=Math.pow(2,-we);mt=Math.floor(bn.width*Ei),St=Math.floor(bn.height*Ei),Q.isDataArrayTexture?xt=bn.depth:Q.isData3DTexture?xt=Math.floor(bn.depth*Ei):xt=1,Ht=0,kt=0,Dt=0}ge!==null?(dn=ge.x,ln=ge.y,jn=ge.z):(dn=0,ln=0,jn=0);const qt=gt.convert(be.format),Nt=gt.convert(be.type);let mi;be.isData3DTexture?($.setTexture3D(be,0),mi=te.TEXTURE_3D):be.isDataArrayTexture||be.isCompressedArrayTexture?($.setTexture2DArray(be,0),mi=te.TEXTURE_2D_ARRAY):($.setTexture2D(be,0),mi=te.TEXTURE_2D),te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,be.flipY),te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,be.premultiplyAlpha),te.pixelStorei(te.UNPACK_ALIGNMENT,be.unpackAlignment);const nn=te.getParameter(te.UNPACK_ROW_LENGTH),mr=te.getParameter(te.UNPACK_IMAGE_HEIGHT),Rr=te.getParameter(te.UNPACK_SKIP_PIXELS),Ji=te.getParameter(te.UNPACK_SKIP_ROWS),Fn=te.getParameter(te.UNPACK_SKIP_IMAGES);te.pixelStorei(te.UNPACK_ROW_LENGTH,bn.width),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,bn.height),te.pixelStorei(te.UNPACK_SKIP_PIXELS,Ht),te.pixelStorei(te.UNPACK_SKIP_ROWS,kt),te.pixelStorei(te.UNPACK_SKIP_IMAGES,Dt);const kn=Q.isDataArrayTexture||Q.isData3DTexture,Ii=be.isDataArrayTexture||be.isData3DTexture;if(Q.isDepthTexture){const Ei=Pe.get(Q),ui=Pe.get(be),wi=Pe.get(Ei.__renderTarget),Vr=Pe.get(ui.__renderTarget);Te.bindFramebuffer(te.READ_FRAMEBUFFER,wi.__webglFramebuffer),Te.bindFramebuffer(te.DRAW_FRAMEBUFFER,Vr.__webglFramebuffer);for(let gr=0;gr<xt;gr++)kn&&(te.framebufferTextureLayer(te.READ_FRAMEBUFFER,te.COLOR_ATTACHMENT0,Pe.get(Q).__webglTexture,we,Dt+gr),te.framebufferTextureLayer(te.DRAW_FRAMEBUFFER,te.COLOR_ATTACHMENT0,Pe.get(be).__webglTexture,ut,jn+gr)),te.blitFramebuffer(Ht,kt,mt,St,dn,ln,mt,St,te.DEPTH_BUFFER_BIT,te.NEAREST);Te.bindFramebuffer(te.READ_FRAMEBUFFER,null),Te.bindFramebuffer(te.DRAW_FRAMEBUFFER,null)}else if(we!==0||Q.isRenderTargetTexture||Pe.has(Q)){const Ei=Pe.get(Q),ui=Pe.get(be);Te.bindFramebuffer(te.READ_FRAMEBUFFER,Wo),Te.bindFramebuffer(te.DRAW_FRAMEBUFFER,ba);for(let wi=0;wi<xt;wi++)kn?te.framebufferTextureLayer(te.READ_FRAMEBUFFER,te.COLOR_ATTACHMENT0,Ei.__webglTexture,we,Dt+wi):te.framebufferTexture2D(te.READ_FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,Ei.__webglTexture,we),Ii?te.framebufferTextureLayer(te.DRAW_FRAMEBUFFER,te.COLOR_ATTACHMENT0,ui.__webglTexture,ut,jn+wi):te.framebufferTexture2D(te.DRAW_FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,ui.__webglTexture,ut),we!==0?te.blitFramebuffer(Ht,kt,mt,St,dn,ln,mt,St,te.COLOR_BUFFER_BIT,te.NEAREST):Ii?te.copyTexSubImage3D(mi,ut,dn,ln,jn+wi,Ht,kt,mt,St):te.copyTexSubImage2D(mi,ut,dn,ln,Ht,kt,mt,St);Te.bindFramebuffer(te.READ_FRAMEBUFFER,null),Te.bindFramebuffer(te.DRAW_FRAMEBUFFER,null)}else Ii?Q.isDataTexture||Q.isData3DTexture?te.texSubImage3D(mi,ut,dn,ln,jn,mt,St,xt,qt,Nt,bn.data):be.isCompressedArrayTexture?te.compressedTexSubImage3D(mi,ut,dn,ln,jn,mt,St,xt,qt,bn.data):te.texSubImage3D(mi,ut,dn,ln,jn,mt,St,xt,qt,Nt,bn):Q.isDataTexture?te.texSubImage2D(te.TEXTURE_2D,ut,dn,ln,mt,St,qt,Nt,bn.data):Q.isCompressedTexture?te.compressedTexSubImage2D(te.TEXTURE_2D,ut,dn,ln,bn.width,bn.height,qt,bn.data):te.texSubImage2D(te.TEXTURE_2D,ut,dn,ln,mt,St,qt,Nt,bn);te.pixelStorei(te.UNPACK_ROW_LENGTH,nn),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,mr),te.pixelStorei(te.UNPACK_SKIP_PIXELS,Rr),te.pixelStorei(te.UNPACK_SKIP_ROWS,Ji),te.pixelStorei(te.UNPACK_SKIP_IMAGES,Fn),ut===0&&be.generateMipmaps&&te.generateMipmap(mi),Te.unbindTexture()},this.copyTextureToTexture3D=function(Q,be,Ne=null,ge=null,we=0){return Q.isTexture!==!0&&(Ud("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Ne=arguments[0]||null,ge=arguments[1]||null,Q=arguments[2],be=arguments[3],we=arguments[4]||0),Ud('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(Q,be,Ne,ge,we)},this.initRenderTarget=function(Q){Pe.get(Q).__webglFramebuffer===void 0&&$.setupRenderTarget(Q)},this.initTexture=function(Q){Q.isCubeTexture?$.setTextureCube(Q,0):Q.isData3DTexture?$.setTexture3D(Q,0):Q.isDataArrayTexture||Q.isCompressedArrayTexture?$.setTexture2DArray(Q,0):$.setTexture2D(Q,0),Te.unbindTexture()},this.resetState=function(){D=0,P=0,z=null,Te.reset(),jt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Hl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=cn._getDrawingBufferColorSpace(e),t.unpackColorSpace=cn._getUnpackColorSpace()}}const qZ=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:iD,AddEquation:lh,AddOperation:R5,AdditiveAnimationBlendMode:pD,AdditiveBlending:IR,AgXToneMapping:P5,AlphaFormat:lD,AlwaysCompare:$5,AlwaysDepth:Lx,AlwaysStencilFunc:FR,AmbientLight:FD,AnimationAction:VH,AnimationClip:xg,AnimationLoader:o9,AnimationMixer:L9,AnimationObjectGroup:N9,AnimationUtils:i9,ArcCurve:uH,ArrayCamera:kH,ArrowHelper:iY,AttachedBindMode:kR,Audio:FH,AudioAnalyser:E9,AudioContext:VD,AudioListener:b9,AudioLoader:v9,AxesHelper:rY,BackSide:ds,BasicDepthPacking:F5,BasicShadowMap:c5,BatchedMesh:sH,Bone:g0,BooleanKeyframeTrack:bp,Box2:G9,Box3:ta,Box3Helper:tY,BoxGeometry:_p,BoxHelper:eY,BufferAttribute:oi,BufferGeometry:on,BufferGeometryLoader:zH,ByteType:aD,Cache:Yu,Camera:lE,CameraHelper:J9,CanvasTexture:A7,CapsuleGeometry:pE,CatmullRomCurve3:fH,CineonToneMapping:U5,CircleGeometry:mE,ClampToEdgeWrapping:ks,Clock:GD,Color:yt,ColorKeyframeTrack:LD,ColorManagement:cn,CompressedArrayTexture:T7,CompressedCubeTexture:M7,CompressedTexture:hE,CompressedTextureLoader:l9,ConeGeometry:gE,ConstantAlphaFactor:M5,ConstantColorFactor:w5,Controls:aY,CubeCamera:eH,CubeReflectionMapping:Qu,CubeRefractionMapping:ph,CubeTexture:Q0,CubeTextureLoader:c9,CubeUVReflectionMapping:Lg,CubicBezierCurve:MD,CubicBezierCurve3:hH,CubicInterpolant:RH,CullFaceBack:LR,CullFaceFront:l5,CullFaceFrontBack:Bq,CullFaceNone:o5,Curve:Ho,CurvePath:pH,CustomBlending:u5,CustomToneMapping:N5,CylinderGeometry:zg,Cylindrical:V9,Data3DTexture:sE,DataArrayTexture:Z0,DataTexture:Gc,DataTextureLoader:u9,DataUtils:QW,DecrementStencilOp:Zq,DecrementWrapStencilOp:Jq,DefaultLoadingManager:UH,DepthFormat:Wd,DepthStencilFormat:ip,DepthTexture:wD,DetachedBindMode:I5,DirectionalLight:kD,DirectionalLightHelper:Q9,DiscreteInterpolant:OH,DodecahedronGeometry:vE,DoubleSide:Fl,DstAlphaFactor:_5,DstColorFactor:S5,DynamicCopyUsage:pW,DynamicDrawUsage:lW,DynamicReadUsage:fW,EdgesGeometry:mH,EllipseCurve:dE,EqualCompare:j5,EqualDepth:Bx,EqualStencilFunc:iW,EquirectangularReflectionMapping:mg,EquirectangularRefractionMapping:l0,Euler:Cr,EventDispatcher:Zc,ExtrudeGeometry:_E,FileLoader:ql,Float16BufferAttribute:a7,Float32BufferAttribute:Ct,FloatType:Fs,Fog:uE,FogExp2:cE,FramebufferTexture:w7,FrontSide:Zu,Frustum:e_,GLBufferAttribute:H9,GLSL1:gW,GLSL3:HR,GreaterCompare:q5,GreaterDepth:kx,GreaterEqualCompare:Y5,GreaterEqualDepth:zx,GreaterEqualStencilFunc:oW,GreaterStencilFunc:aW,GridHelper:K9,Group:hh,HalfFloatType:Ig,HemisphereLight:PH,HemisphereLightHelper:X9,IcosahedronGeometry:bE,ImageBitmapLoader:g9,ImageLoader:S0,ImageUtils:Z5,IncrementStencilOp:Kq,IncrementWrapStencilOp:Qq,InstancedBufferAttribute:ap,InstancedBufferGeometry:HD,InstancedInterleavedBuffer:F9,InstancedMesh:aH,Int16BufferAttribute:i7,Int32BufferAttribute:r7,Int8BufferAttribute:e7,IntType:Q1,InterleavedBuffer:fE,InterleavedBufferAttribute:rp,Interpolant:r_,InterpolateDiscrete:u0,InterpolateLinear:d1,InterpolateSmooth:hx,InvertStencilOp:eW,KeepStencilOp:Dd,KeyframeTrack:Xl,LOD:rH,LatheGeometry:t_,Layers:yg,LessCompare:G5,LessDepth:Ix,LessEqualCompare:gD,LessEqualDepth:ep,LessEqualStencilFunc:rW,LessStencilFunc:nW,Light:Th,LightProbe:BH,Line:ef,Line3:j9,LineBasicMaterial:Ha,LineCurve:AD,LineCurve3:dH,LineDashedMaterial:MH,LineLoop:oH,LineSegments:Qc,LinearFilter:Sr,LinearInterpolant:PD,LinearMipMapLinearFilter:Hq,LinearMipMapNearestFilter:Fq,LinearMipmapLinearFilter:Fc,LinearMipmapNearestFilter:Vy,LinearSRGBColorSpace:mh,LinearToneMapping:O5,LinearTransfer:h0,Loader:ia,LoaderUtils:y1,LoadingManager:ID,LoopOnce:B5,LoopPingPong:k5,LoopRepeat:z5,LuminanceAlphaFormat:fD,LuminanceFormat:uD,MOUSE:Lq,Material:Fa,MaterialLoader:RE,MathUtils:Lr,Matrix2:$D,Matrix3:rn,Matrix4:Mt,MaxEquation:p5,Mesh:Ni,MeshBasicMaterial:of,MeshDepthMaterial:AE,MeshDistanceMaterial:CE,MeshLambertMaterial:UD,MeshMatcapMaterial:TH,MeshNormalMaterial:wH,MeshPhongMaterial:sg,MeshPhysicalMaterial:xH,MeshStandardMaterial:DD,MeshToonMaterial:EH,MinEquation:d5,MirroredRepeatWrapping:c0,MixOperation:C5,MultiplyBlending:zR,MultiplyOperation:X0,NearestFilter:va,NearestMipMapLinearFilter:kq,NearestMipMapNearestFilter:zq,NearestMipmapLinearFilter:ig,NearestMipmapNearestFilter:rD,NeutralToneMapping:L5,NeverCompare:V5,NeverDepth:Px,NeverStencilFunc:tW,NoBlending:$u,NoColorSpace:ju,NoToneMapping:Vc,NormalAnimationBlendMode:rE,NormalBlending:qd,NotEqualCompare:W5,NotEqualDepth:Fx,NotEqualStencilFunc:sW,NumberKeyframeTrack:bg,Object3D:On,ObjectLoader:p9,ObjectSpaceNormalMap:H5,OctahedronGeometry:n_,OneFactor:g5,OneMinusConstantAlphaFactor:A5,OneMinusConstantColorFactor:T5,OneMinusDstAlphaFactor:b5,OneMinusDstColorFactor:x5,OneMinusSrcAlphaFactor:Nx,OneMinusSrcColorFactor:y5,OrthographicCamera:a_,PCFShadowMap:K1,PCFSoftShadowMap:Hy,PMREMGenerator:$R,Path:v0,PerspectiveCamera:Ir,Plane:sh,PlaneGeometry:lf,PlaneHelper:nY,PointLight:v1,PointLightHelper:Y9,Points:lH,PointsMaterial:ED,PolarGridHelper:Z9,PolyhedronGeometry:wh,PositionalAudio:x9,PropertyBinding:Rn,PropertyMixer:HH,QuadraticBezierCurve:CD,QuadraticBezierCurve3:RD,Quaternion:Ki,QuaternionKeyframeTrack:op,QuaternionLinearInterpolant:DH,RED_GREEN_RGTC2_Format:f1,RED_RGTC1_Format:dD,REVISION:X1,RGBADepthPacking:mD,RGBAFormat:za,RGBAIntegerFormat:iE,RGBA_ASTC_10x10_Format:a1,RGBA_ASTC_10x5_Format:n1,RGBA_ASTC_10x6_Format:i1,RGBA_ASTC_10x8_Format:r1,RGBA_ASTC_12x10_Format:s1,RGBA_ASTC_12x12_Format:o1,RGBA_ASTC_4x4_Format:$x,RGBA_ASTC_5x4_Format:Xx,RGBA_ASTC_5x5_Format:Kx,RGBA_ASTC_6x5_Format:Zx,RGBA_ASTC_6x6_Format:Qx,RGBA_ASTC_8x5_Format:Jx,RGBA_ASTC_8x6_Format:e1,RGBA_ASTC_8x8_Format:t1,RGBA_BPTC_Format:Yy,RGBA_ETC2_EAC_Format:Yx,RGBA_PVRTC_2BPPV1_Format:jx,RGBA_PVRTC_4BPPV1_Format:Gx,RGBA_S3TC_DXT1_Format:jy,RGBA_S3TC_DXT3_Format:qy,RGBA_S3TC_DXT5_Format:Wy,RGBDepthPacking:Wq,RGBFormat:cD,RGBIntegerFormat:Vq,RGB_BPTC_SIGNED_Format:l1,RGB_BPTC_UNSIGNED_Format:c1,RGB_ETC1_Format:qx,RGB_ETC2_Format:Wx,RGB_PVRTC_2BPPV1_Format:Vx,RGB_PVRTC_4BPPV1_Format:Hx,RGB_S3TC_DXT1_Format:Gy,RGDepthPacking:Yq,RGFormat:hD,RGIntegerFormat:nE,RawShaderMaterial:SH,Ray:Bg,Raycaster:YD,RectAreaLight:LH,RedFormat:tE,RedIntegerFormat:K0,ReinhardToneMapping:D5,RenderTarget:aE,RenderTarget3D:I9,RenderTargetArray:B9,RepeatWrapping:tp,ReplaceStencilOp:Xq,ReverseSubtractEquation:h5,RingGeometry:SE,SIGNED_RED_GREEN_RGTC2_Format:h1,SIGNED_RED_RGTC1_Format:u1,SRGBColorSpace:ni,SRGBTransfer:ei,Scene:bD,ShaderChunk:fn,ShaderLib:kl,ShaderMaterial:jl,ShadowMaterial:bH,Shape:$d,ShapeGeometry:xE,ShapePath:qH,ShapeUtils:Vl,ShortType:sD,Skeleton:J0,SkeletonHelper:W9,SkinnedMesh:xD,Source:fh,Sphere:na,SphereGeometry:i_,Spherical:GH,SphericalHarmonics3:IH,SplineCurve:OD,SpotLight:zD,SpotLightHelper:q9,Sprite:iH,SpriteMaterial:SD,SrcAlphaFactor:Ux,SrcAlphaSaturateFactor:E5,SrcColorFactor:v5,StaticCopyUsage:dW,StaticDrawUsage:d0,StaticReadUsage:uW,StereoCamera:y9,StreamCopyUsage:mW,StreamDrawUsage:cW,StreamReadUsage:hW,StringKeyframeTrack:Sp,SubtractEquation:f5,SubtractiveBlending:BR,TOUCH:Iq,TangentSpaceNormalMap:Eh,TetrahedronGeometry:EE,Texture:Pi,TextureLoader:NH,TextureUtils:uY,TimestampQuery:vW,TorusGeometry:wE,TorusKnotGeometry:TE,Triangle:zs,TriangleFanDrawMode:qq,TriangleStripDrawMode:jq,TrianglesDrawMode:Gq,TubeGeometry:ME,UVMapping:Z1,Uint16BufferAttribute:oE,Uint32BufferAttribute:yD,Uint8BufferAttribute:t7,Uint8ClampedBufferAttribute:n7,Uniform:WD,UniformsGroup:k9,UniformsLib:wt,UniformsUtils:_D,UnsignedByteType:Gl,UnsignedInt248Type:np,UnsignedInt5999Type:oD,UnsignedIntType:Ju,UnsignedShort4444Type:J1,UnsignedShort5551Type:eE,UnsignedShortType:gg,VSMShadowMap:Ll,Vector2:st,Vector3:le,Vector4:yn,VectorKeyframeTrack:Sg,VideoFrameTexture:E7,VideoTexture:cH,WebGL3DRenderTarget:VW,WebGLArrayRenderTarget:HW,WebGLCoordinateSystem:Hl,WebGLCubeRenderTarget:tH,WebGLRenderTarget:Yc,WebGLRenderer:QH,WebGLUtils:ZH,WebGPUCoordinateSystem:p0,WebXRController:dx,WireframeGeometry:_H,WrapAroundEnding:f0,ZeroCurvatureEnding:Fd,ZeroFactor:m5,ZeroSlopeEnding:Hd,ZeroStencilOp:$q,createCanvasElement:K5},Symbol.toStringTag,{value:"Module"}));var VT={exports:{}},GT={},jT={exports:{}},qT={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VP;function WZ(){if(VP)return qT;VP=1;var n=Pg();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,r=n.useEffect,a=n.useLayoutEffect,s=n.useDebugValue;function o(p,g){var y=g(),_=i({inst:{value:y,getSnapshot:g}}),S=_[0].inst,x=_[1];return a(function(){S.value=y,S.getSnapshot=g,l(S)&&x({inst:S})},[p,y,g]),r(function(){return l(S)&&x({inst:S}),p(function(){l(S)&&x({inst:S})})},[p]),s(y),y}function l(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!t(p,y)}catch{return!0}}function u(p,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return qT.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:h,qT}var GP;function YZ(){return GP||(GP=1,jT.exports=WZ()),jT.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jP;function $Z(){if(jP)return GT;jP=1;var n=Pg(),e=YZ();function t(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var i=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,a=n.useRef,s=n.useEffect,o=n.useMemo,l=n.useDebugValue;return GT.useSyncExternalStoreWithSelector=function(u,h,p,g,y){var _=a(null);if(_.current===null){var S={hasValue:!1,value:null};_.current=S}else S=_.current;_=o(function(){function w(D){if(!T){if(T=!0,M=D,D=g(D),y!==void 0&&S.hasValue){var P=S.value;if(y(P,D))return C=P}return C=D}if(P=C,i(M,D))return P;var z=g(D);return y!==void 0&&y(P,z)?(M=D,P):(M=D,C=z)}var T=!1,M,C,N=p===void 0?null:p;return[function(){return w(h())},N===null?void 0:function(){return w(N())}]},[h,p,g,y]);var x=r(u,_[0],_[1]);return s(function(){S.hasValue=!0,S.value=x},[x]),l(x),x},GT}var qP;function XZ(){return qP||(qP=1,VT.exports=$Z()),VT.exports}var KZ=XZ();const ZZ=kr(KZ),WP=n=>{let e;const t=new Set,i=(u,h)=>{const p=typeof u=="function"?u(e):u;if(!Object.is(p,e)){const g=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(y=>y(e,g))}},r=()=>e,o={setState:i,getState:r,getInitialState:()=>l,subscribe:u=>(t.add(u),()=>t.delete(u))},l=e=n(i,r,o);return o},QZ=(n=>n?WP(n):WP),{useSyncExternalStoreWithSelector:JZ}=ZZ,eQ=n=>n;function tQ(n,e=eQ,t){const i=JZ(n.subscribe,n.getState,n.getInitialState,e,t);return B.useDebugValue(i),i}const YP=(n,e)=>{const t=QZ(n),i=(r,a=e)=>tQ(t,r,a);return Object.assign(i,t),i},nQ=((n,e)=>n?YP(n,e):YP),iQ=n=>typeof n=="object"&&typeof n.then=="function",Gd=[];function JH(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function e6(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const a of Gd)if(JH(e,a.keys,a.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return i.lifespan&&i.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,i.lifespan)),a.response;if(!t)throw a.promise}const r={keys:e,equal:i.equal,remove:()=>{const a=Gd.indexOf(r);a!==-1&&Gd.splice(a,1)},promise:(iQ(n)?n:n(...e)).then(a=>{r.response=a,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(a=>r.error=a)};if(Gd.push(r),!t)throw r.promise}const KD=(n,e,t)=>e6(n,e,!1,t),t6=(n,e,t)=>void e6(n,e,!0,t),n6=n=>{if(n===void 0||n.length===0)Gd.splice(0,Gd.length);else{const e=Gd.find(t=>JH(n,t.keys,t.equal));e&&e.remove()}};var WT={exports:{}},YT={exports:{}};/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $P;function rQ(){return $P||($P=1,(function(n){n.exports=function(e){function t(d,m,E,R){return new G_(d,m,E,R)}function i(){}function r(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)m+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(d){return d===null||typeof d!="object"?null:(d=qn&&d[qn]||d["@@iterator"],typeof d=="function"?d:null)}function s(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===ir?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case pc:return"Fragment";case Eo:return"Portal";case mc:return"Profiler";case vu:return"StrictMode";case hl:return"Suspense";case Jh:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case gc:return(d.displayName||"Context")+".Provider";case bv:return(d._context.displayName||"Context")+".Consumer";case Vp:var m=d.render;return d=d.displayName,d||(d=m.displayName||m.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case Mf:return m=d.displayName||null,m!==null?m:s(d.type)||"Memo";case dl:m=d._payload,d=d._init;try{return s(d(m))}catch{}}return null}function o(d){if(vc===void 0)try{throw Error()}catch(E){var m=E.stack.trim().match(/\n( *(at )?)/);vc=m&&m[1]||"",yc=-1<E.stack.indexOf(`
    at`)?" (<anonymous>)":-1<E.stack.indexOf("@")?"@unknown:0:0":""}return`
`+vc+d+yc}function l(d,m){if(!d||Af)return"";Af=!0;var E=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var R={DetermineComponentFrameRoot:function(){try{if(m){var Et=function(){throw Error()};if(Object.defineProperty(Et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Et,[])}catch(tn){var dt=tn}Reflect.construct(d,[],Et)}else{try{Et.call()}catch(tn){dt=tn}d.call(Et.prototype)}}else{try{throw Error()}catch(tn){dt=tn}(Et=d())&&typeof Et.catch=="function"&&Et.catch(function(){})}}catch(tn){if(tn&&dt&&typeof tn.stack=="string")return[tn.stack,dt.stack]}return[null,null]}};R.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var U=Object.getOwnPropertyDescriptor(R.DetermineComponentFrameRoot,"name");U&&U.configurable&&Object.defineProperty(R.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=R.DetermineComponentFrameRoot(),ie=k[0],pe=k[1];if(ie&&pe){var Re=ie.split(`
`),tt=pe.split(`
`);for(U=R=0;R<Re.length&&!Re[R].includes("DetermineComponentFrameRoot");)R++;for(;U<tt.length&&!tt[U].includes("DetermineComponentFrameRoot");)U++;if(R===Re.length||U===tt.length)for(R=Re.length-1,U=tt.length-1;1<=R&&0<=U&&Re[R]!==tt[U];)U--;for(;1<=R&&0<=U;R--,U--)if(Re[R]!==tt[U]){if(R!==1||U!==1)do if(R--,U--,0>U||Re[R]!==tt[U]){var pt=`
`+Re[R].replace(" at new "," at ");return d.displayName&&pt.includes("<anonymous>")&&(pt=pt.replace("<anonymous>",d.displayName)),pt}while(1<=R&&0<=U);break}}}finally{Af=!1,Error.prepareStackTrace=E}return(E=d?d.displayName||d.name:"")?o(E):""}function u(d){switch(d.tag){case 26:case 27:case 5:return o(d.type);case 16:return o("Lazy");case 13:return o("Suspense");case 19:return o("SuspenseList");case 0:case 15:return d=l(d.type,!1),d;case 11:return d=l(d.type.render,!1),d;case 1:return d=l(d.type,!0),d;default:return""}}function h(d){try{var m="";do m+=u(d),d=d.return;while(d);return m}catch(E){return`
Error generating stack: `+E.message+`
`+E.stack}}function p(d){var m=d,E=d;if(d.alternate)for(;m.return;)m=m.return;else{d=m;do m=d,(m.flags&4098)!==0&&(E=m.return),d=m.return;while(d)}return m.tag===3?E:null}function g(d){if(p(d)!==d)throw Error(r(188))}function y(d){var m=d.alternate;if(!m){if(m=p(d),m===null)throw Error(r(188));return m!==d?null:d}for(var E=d,R=m;;){var U=E.return;if(U===null)break;var k=U.alternate;if(k===null){if(R=U.return,R!==null){E=R;continue}break}if(U.child===k.child){for(k=U.child;k;){if(k===E)return g(U),d;if(k===R)return g(U),m;k=k.sibling}throw Error(r(188))}if(E.return!==R.return)E=U,R=k;else{for(var ie=!1,pe=U.child;pe;){if(pe===E){ie=!0,E=U,R=k;break}if(pe===R){ie=!0,R=U,E=k;break}pe=pe.sibling}if(!ie){for(pe=k.child;pe;){if(pe===E){ie=!0,E=k,R=U;break}if(pe===R){ie=!0,R=k,E=U;break}pe=pe.sibling}if(!ie)throw Error(r(189))}}if(E.alternate!==R)throw Error(r(190))}if(E.tag!==3)throw Error(r(188));return E.stateNode.current===E?d:m}function _(d){var m=d.tag;if(m===5||m===26||m===27||m===6)return d;for(d=d.child;d!==null;){if(m=_(d),m!==null)return m;d=d.sibling}return null}function S(d){var m=d.tag;if(m===5||m===26||m===27||m===6)return d;for(d=d.child;d!==null;){if(d.tag!==4&&(m=S(d),m!==null))return m;d=d.sibling}return null}function x(d){return{current:d}}function w(d){0>xc||(d.current=tm[xc],tm[xc]=null,xc--)}function T(d,m){xc++,tm[xc]=d.current,d.current=m}function M(d){return d>>>=0,d===0?32:31-(jv(d)/Tw|0)|0}function C(d){var m=d&42;if(m!==0)return m;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function N(d,m){var E=d.pendingLanes;if(E===0)return 0;var R=0,U=d.suspendedLanes,k=d.pingedLanes,ie=d.warmLanes;d=d.finishedLanes!==0;var pe=E&134217727;return pe!==0?(E=pe&~U,E!==0?R=C(E):(k&=pe,k!==0?R=C(k):d||(ie=pe&~ie,ie!==0&&(R=C(ie))))):(pe=E&~U,pe!==0?R=C(pe):k!==0?R=C(k):d||(ie=E&~ie,ie!==0&&(R=C(ie)))),R===0?0:m!==0&&m!==R&&(m&U)===0&&(U=R&-R,ie=m&-m,U>=ie||U===32&&(ie&4194176)!==0)?m:R}function D(d,m){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&m)===0}function P(d,m){switch(d){case 1:case 2:case 4:case 8:return m+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function z(){var d=id;return id<<=1,(id&4194176)===0&&(id=128),d}function I(){var d=Uf;return Uf<<=1,(Uf&62914560)===0&&(Uf=4194304),d}function L(d){for(var m=[],E=0;31>E;E++)m.push(d);return m}function H(d,m){d.pendingLanes|=m,m!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function j(d,m,E,R,U,k){var ie=d.pendingLanes;d.pendingLanes=E,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=E,d.entangledLanes&=E,d.errorRecoveryDisabledLanes&=E,d.shellSuspendCounter=0;var pe=d.entanglements,Re=d.expirationTimes,tt=d.hiddenUpdates;for(E=ie&~E;0<E;){var pt=31-Hi(E),Et=1<<pt;pe[pt]=0,Re[pt]=-1;var dt=tt[pt];if(dt!==null)for(tt[pt]=null,pt=0;pt<dt.length;pt++){var tn=dt[pt];tn!==null&&(tn.lane&=-536870913)}E&=~Et}R!==0&&G(d,R,0),k!==0&&U===0&&d.tag!==0&&(d.suspendedLanes|=k&~(ie&~m))}function G(d,m,E){d.pendingLanes|=m,d.suspendedLanes&=~m;var R=31-Hi(m);d.entangledLanes|=m,d.entanglements[R]=d.entanglements[R]|1073741824|E&4194218}function K(d,m){var E=d.entangledLanes|=m;for(d=d.entanglements;E;){var R=31-Hi(E),U=1<<R;U&m|d[R]&m&&(d[R]|=m),E&=~U}}function ee(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function Y(d){if(rr&&typeof rr.onCommitFiberRoot=="function")try{rr.onCommitFiberRoot(Pf,d,void 0,(d.current.flags&128)===128)}catch{}}function re(d){if(typeof Wr=="function"&&im(d),rr&&typeof rr.setStrictMode=="function")try{rr.setStrictMode(Pf,d)}catch{}}function J(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}function se(d,m){if(typeof d=="object"&&d!==null){var E=rm.get(d);return E!==void 0?E:(m={value:d,source:m,stack:h(m)},rm.set(d,m),m)}return{value:d,source:m,stack:h(m)}}function q(d,m){Ja[es++]=Lf,Ja[es++]=wc,wc=d,Lf=m}function X(d,m,E){Oa[Yr++]=Ao,Oa[Yr++]=Co,Oa[Yr++]=Js,Js=d;var R=Ao;d=Co;var U=32-Hi(R)-1;R&=~(1<<U),E+=1;var k=32-Hi(m)+U;if(30<k){var ie=U-U%5;k=(R&(1<<ie)-1).toString(32),R>>=ie,U-=ie,Ao=1<<32-Hi(m)+U|E<<U|R,Co=k+d}else Ao=1<<k|E<<U|R,Co=d}function oe(d){d.return!==null&&(q(d,1),X(d,1,0))}function ue(d){for(;d===wc;)wc=Ja[--es],Ja[es]=null,Lf=Ja[--es],Ja[es]=null;for(;d===Js;)Js=Oa[--Yr],Oa[Yr]=null,Co=Oa[--Yr],Oa[Yr]=null,Ao=Oa[--Yr],Oa[Yr]=null}function Z(d,m){T(yl,m),T(Es,d),T(Vi,null),d=Sv(m),w(Vi),T(Vi,d)}function ce(){w(Vi),w(Es),w(yl)}function me(d){d.memoizedState!==null&&T(ad,d);var m=Vi.current,E=j_(m,d.type);m!==E&&(T(Es,d),T(Vi,E))}function de(d){Es.current===d&&(w(Vi),w(Es)),ad.current===d&&(w(ad),Ks?ml._currentValue=_u:ml._currentValue2=_u)}function ve(d){var m=Error(r(418,""));throw Ae(se(m,d)),sd}function We(d,m){if(!Ra)throw Error(r(175));xu(d.stateNode,d.type,d.memoizedProps,m,d)||ve(d)}function ze(d){for(Gi=d.return;Gi;)switch(Gi.tag){case 3:case 27:eo=!0;return;case 5:case 13:eo=!1;return;default:Gi=Gi.return}}function qe(d){if(!Ra||d!==Gi)return!1;if(!Nn)return ze(d),Nn=!0,!1;var m=!1;if(Er?d.tag!==3&&d.tag!==27&&(d.tag!==5||Pv(d.type)&&!Nr(d.type,d.memoizedProps))&&(m=!0):d.tag!==3&&(d.tag!==5||Pv(d.type)&&!Nr(d.type,d.memoizedProps))&&(m=!0),m&&Yn&&ve(d),ze(d),d.tag===13){if(!Ra)throw Error(r(316));if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));Yn=xb(d)}else Yn=Gi?Sc(d.stateNode):null;return!0}function _e(){Ra&&(Yn=Gi=null,Nn=!1)}function Ae(d){ws===null?ws=[d]:ws.push(d)}function te(){for(var d=_l,m=to=_l=0;m<d;){var E=Da[m];Da[m++]=null;var R=Da[m];Da[m++]=null;var U=Da[m];Da[m++]=null;var k=Da[m];if(Da[m++]=null,R!==null&&U!==null){var ie=R.pending;ie===null?U.next=U:(U.next=ie.next,ie.next=U),R.pending=U}k!==0&&Te(E,U,k)}}function ke(d,m,E,R){Da[_l++]=d,Da[_l++]=m,Da[_l++]=E,Da[_l++]=R,to|=R,d.lanes|=R,d=d.alternate,d!==null&&(d.lanes|=R)}function De(d,m,E,R){return ke(d,m,E,R),Xe(d)}function Ie(d,m){return ke(d,null,null,m),Xe(d)}function Te(d,m,E){d.lanes|=E;var R=d.alternate;R!==null&&(R.lanes|=E);for(var U=!1,k=d.return;k!==null;)k.childLanes|=E,R=k.alternate,R!==null&&(R.childLanes|=E),k.tag===22&&(d=k.stateNode,d===null||d._visibility&1||(U=!0)),d=k,k=k.return;U&&m!==null&&d.tag===3&&(k=d.stateNode,U=31-Hi(E),k=k.hiddenUpdates,d=k[U],d===null?k[U]=[m]:d.push(m),m.lane=E|536870912)}function Xe(d){if(50<Ou)throw Ou=0,Xv=null,Error(r(185));for(var m=d.return;m!==null;)d=m,m=d.return;return d.tag===3?d.stateNode:null}function Pe(d){d!==Tc&&d.next===null&&(Tc===null?fi=Tc=d:Tc=Tc.next=d),ji=!0,am||(am=!0,Oe(W))}function $(d,m){if(!sm&&ji){sm=!0;do for(var E=!1,R=fi;R!==null;){if(d!==0){var U=R.pendingLanes;if(U===0)var k=0;else{var ie=R.suspendedLanes,pe=R.pingedLanes;k=(1<<31-Hi(42|d)+1)-1,k&=U&~(ie&~pe),k=k&201326677?k&201326677|1:k?k|2:0}k!==0&&(E=!0,Se(R,k))}else k=Tn,k=N(R,R===Xn?k:0),(k&3)===0||D(R,k)||(E=!0,Se(R,k));R=R.next}while(E);sm=!1}}function W(){ji=am=!1;var d=0;If!==0&&($_()&&(d=If),If=0);for(var m=Qa(),E=null,R=fi;R!==null;){var U=R.next,k=ae(R,m);k===0?(R.next=null,E===null?fi=U:E.next=U,U===null&&(Tc=E)):(E=R,(d!==0||(k&3)!==0)&&(ji=!0)),R=U}$(d)}function ae(d,m){for(var E=d.suspendedLanes,R=d.pingedLanes,U=d.expirationTimes,k=d.pendingLanes&-62914561;0<k;){var ie=31-Hi(k),pe=1<<ie,Re=U[ie];Re===-1?((pe&E)===0||(pe&R)!==0)&&(U[ie]=P(pe,m)):Re<=m&&(d.expiredLanes|=pe),k&=~pe}if(m=Xn,E=Tn,E=N(d,d===m?E:0),R=d.callbackNode,E===0||d===m&&Wn===2||d.cancelPendingCommit!==null)return R!==null&&R!==null&&Qs(R),d.callbackNode=null,d.callbackPriority=0;if((E&3)===0||D(d,E)){if(m=E&-E,m===d.callbackPriority)return m;switch(R!==null&&Qs(R),ee(E)){case 2:case 8:E=rd;break;case 32:E=Nf;break;case 268435456:E=wu;break;default:E=Nf}return R=he.bind(null,d),E=Mo(E,R),d.callbackPriority=m,d.callbackNode=E,m}return R!==null&&R!==null&&Qs(R),d.callbackPriority=2,d.callbackNode=null,2}function he(d,m){var E=d.callbackNode;if(uc()&&d.callbackNode!==E)return null;var R=Tn;return R=N(d,d===Xn?R:0),R===0?null:(Xa(d,R,m),ae(d,Qa()),d.callbackNode!=null&&d.callbackNode===E?he.bind(null,d):null)}function Se(d,m){if(uc())return null;Xa(d,m,!0)}function Oe(d){Q_?J_(function(){(wn&6)!==0?Mo(nm,d):d()}):Mo(nm,d)}function je(){return If===0&&(If=z()),If}function Ge(d,m){if(Bf===null){var E=Bf=[];om=0,hi=je(),wr={status:"pending",value:void 0,then:function(R){E.push(R)}}}return om++,m.then(Ke,Ke),m}function Ke(){if(--om===0&&Bf!==null){wr!==null&&(wr.status="fulfilled");var d=Bf;Bf=null,hi=0,wr=null;for(var m=0;m<d.length;m++)(0,d[m])()}}function _t(d,m){var E=[],R={status:"pending",value:null,reason:null,then:function(U){E.push(U)}};return d.then(function(){R.status="fulfilled",R.value=m;for(var U=0;U<E.length;U++)(0,E[U])(m)},function(U){for(R.status="rejected",R.reason=U,U=0;U<E.length;U++)(0,E[U])(void 0)}),R}function Ye(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ct(d,m){d=d.updateQueue,m.updateQueue===d&&(m.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function it(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function Ze(d,m,E){var R=d.updateQueue;if(R===null)return null;if(R=R.shared,(wn&2)!==0){var U=R.pending;return U===null?m.next=m:(m.next=U.next,U.next=m),R.pending=m,m=Xe(d),Te(d,null,E),m}return ke(d,R,m,E),Xe(d)}function $e(d,m,E){if(m=m.updateQueue,m!==null&&(m=m.shared,(E&4194176)!==0)){var R=m.lanes;R&=d.pendingLanes,E|=R,m.lanes=E,K(d,E)}}function vt(d,m){var E=d.updateQueue,R=d.alternate;if(R!==null&&(R=R.updateQueue,E===R)){var U=null,k=null;if(E=E.firstBaseUpdate,E!==null){do{var ie={lane:E.lane,tag:E.tag,payload:E.payload,callback:null,next:null};k===null?U=k=ie:k=k.next=ie,E=E.next}while(E!==null);k===null?U=k=m:k=k.next=m}else U=k=m;E={baseState:R.baseState,firstBaseUpdate:U,lastBaseUpdate:k,shared:R.shared,callbacks:R.callbacks},d.updateQueue=E;return}d=E.lastBaseUpdate,d===null?E.firstBaseUpdate=m:d.next=m,E.lastBaseUpdate=m}function gt(){if(lm){var d=wr;if(d!==null)throw d}}function jt(d,m,E,R){lm=!1;var U=d.updateQueue;$r=!1;var k=U.firstBaseUpdate,ie=U.lastBaseUpdate,pe=U.shared.pending;if(pe!==null){U.shared.pending=null;var Re=pe,tt=Re.next;Re.next=null,ie===null?k=tt:ie.next=tt,ie=Re;var pt=d.alternate;pt!==null&&(pt=pt.updateQueue,pe=pt.lastBaseUpdate,pe!==ie&&(pe===null?pt.firstBaseUpdate=tt:pe.next=tt,pt.lastBaseUpdate=Re))}if(k!==null){var Et=U.baseState;ie=0,pt=tt=Re=null,pe=k;do{var dt=pe.lane&-536870913,tn=dt!==pe.lane;if(tn?(Tn&dt)===dt:(R&dt)===dt){dt!==0&&dt===hi&&(lm=!0),pt!==null&&(pt=pt.next={lane:0,tag:pe.tag,payload:pe.payload,callback:null,next:null});e:{var Us=d,Gf=pe;dt=m;var Du=E;switch(Gf.tag){case 1:if(Us=Gf.payload,typeof Us=="function"){Et=Us.call(Du,Et,dt);break e}Et=Us;break e;case 3:Us.flags=Us.flags&-65537|128;case 0:if(Us=Gf.payload,dt=typeof Us=="function"?Us.call(Du,Et,dt):Us,dt==null)break e;Et=ki({},Et,dt);break e;case 2:$r=!0}}dt=pe.callback,dt!==null&&(d.flags|=64,tn&&(d.flags|=8192),tn=U.callbacks,tn===null?U.callbacks=[dt]:tn.push(dt))}else tn={lane:dt,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null},pt===null?(tt=pt=tn,Re=Et):pt=pt.next=tn,ie|=dt;if(pe=pe.next,pe===null){if(pe=U.shared.pending,pe===null)break;tn=pe,pe=tn.next,tn.next=null,U.lastBaseUpdate=tn,U.shared.pending=null}}while(!0);pt===null&&(Re=Et),U.baseState=Re,U.firstBaseUpdate=tt,U.lastBaseUpdate=pt,k===null&&(U.shared.lanes=0),Os|=ie,d.lanes=ie,d.memoizedState=Et}}function ye(d,m){if(typeof d!="function")throw Error(r(191,d));d.call(m)}function Je(d,m){var E=d.callbacks;if(E!==null)for(d.callbacks=null,d=0;d<E.length;d++)ye(E[d],m)}function Ue(d,m){if(la(d,m))return!0;if(typeof d!="object"||d===null||typeof m!="object"||m===null)return!1;var E=Object.keys(d),R=Object.keys(m);if(E.length!==R.length)return!1;for(R=0;R<E.length;R++){var U=E[R];if(!Ob.call(m,U)||!la(d[U],m[U]))return!1}return!0}function et(d){return d=d.status,d==="fulfilled"||d==="rejected"}function lt(){}function rt(d,m,E){switch(E=d[E],E===void 0?d.push(m):E!==m&&(m.then(lt,lt),m=E),m.status){case"fulfilled":return m.value;case"rejected":throw d=m.reason,d===od?Error(r(483)):d;default:if(typeof m.status=="string")m.then(lt,lt);else{if(d=Xn,d!==null&&100<d.shellSuspendCounter)throw Error(r(482));d=m,d.status="pending",d.then(function(R){if(m.status==="pending"){var U=m;U.status="fulfilled",U.value=R}},function(R){if(m.status==="pending"){var U=m;U.status="rejected",U.reason=R}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw d=m.reason,d===od?Error(r(483)):d}throw Xr=m,od}}function Tt(){if(Xr===null)throw Error(r(459));var d=Xr;return Xr=null,d}function Ft(d){var m=Kr;return Kr+=1,Tu===null&&(Tu=[]),rt(Tu,d,m)}function At(d,m){m=m.props.ref,d.ref=m!==void 0?m:null}function Ut(d,m){throw m.$$typeof===_v?Error(r(525)):(d=Object.prototype.toString.call(m),Error(r(31,d==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":d)))}function Ln(d){var m=d._init;return m(d._payload)}function Dn(d){function m(Be,Me){if(d){var Ve=Be.deletions;Ve===null?(Be.deletions=[Me],Be.flags|=16):Ve.push(Me)}}function E(Be,Me){if(!d)return null;for(;Me!==null;)m(Be,Me),Me=Me.sibling;return null}function R(Be){for(var Me=new Map;Be!==null;)Be.key!==null?Me.set(Be.key,Be):Me.set(Be.index,Be),Be=Be.sibling;return Me}function U(Be,Me){return Be=cl(Be,Me),Be.index=0,Be.sibling=null,Be}function k(Be,Me,Ve){return Be.index=Ve,d?(Ve=Be.alternate,Ve!==null?(Ve=Ve.index,Ve<Me?(Be.flags|=33554434,Me):Ve):(Be.flags|=33554434,Me)):(Be.flags|=1048576,Me)}function ie(Be){return d&&Be.alternate===null&&(Be.flags|=33554434),Be}function pe(Be,Me,Ve,ht){return Me===null||Me.tag!==6?(Me=Qh(Ve,Be.mode,ht),Me.return=Be,Me):(Me=U(Me,Ve),Me.return=Be,Me)}function Re(Be,Me,Ve,ht){var Lt=Ve.type;return Lt===pc?pt(Be,Me,Ve.props.children,ht,Ve.key):Me!==null&&(Me.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===dl&&Ln(Lt)===Me.type)?(Me=U(Me,Ve.props),At(Me,Ve),Me.return=Be,Me):(Me=gu(Ve.type,Ve.key,Ve.props,null,Be.mode,ht),At(Me,Ve),Me.return=Be,Me)}function tt(Be,Me,Ve,ht){return Me===null||Me.tag!==4||Me.stateNode.containerInfo!==Ve.containerInfo||Me.stateNode.implementation!==Ve.implementation?(Me=Ca(Ve,Be.mode,ht),Me.return=Be,Me):(Me=U(Me,Ve.children||[]),Me.return=Be,Me)}function pt(Be,Me,Ve,ht,Lt){return Me===null||Me.tag!==7?(Me=hc(Ve,Be.mode,ht,Lt),Me.return=Be,Me):(Me=U(Me,Ve),Me.return=Be,Me)}function Et(Be,Me,Ve){if(typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint")return Me=Qh(""+Me,Be.mode,Ve),Me.return=Be,Me;if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case dc:return Ve=gu(Me.type,Me.key,Me.props,null,Be.mode,Ve),At(Ve,Me),Ve.return=Be,Ve;case Eo:return Me=Ca(Me,Be.mode,Ve),Me.return=Be,Me;case dl:var ht=Me._init;return Me=ht(Me._payload),Et(Be,Me,Ve)}if(_c(Me)||a(Me))return Me=hc(Me,Be.mode,Ve,null),Me.return=Be,Me;if(typeof Me.then=="function")return Et(Be,Ft(Me),Ve);if(Me.$$typeof===gc)return Et(Be,Ih(Be,Me),Ve);Ut(Be,Me)}return null}function dt(Be,Me,Ve,ht){var Lt=Me!==null?Me.key:null;if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number"||typeof Ve=="bigint")return Lt!==null?null:pe(Be,Me,""+Ve,ht);if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case dc:return Ve.key===Lt?Re(Be,Me,Ve,ht):null;case Eo:return Ve.key===Lt?tt(Be,Me,Ve,ht):null;case dl:return Lt=Ve._init,Ve=Lt(Ve._payload),dt(Be,Me,Ve,ht)}if(_c(Ve)||a(Ve))return Lt!==null?null:pt(Be,Me,Ve,ht,null);if(typeof Ve.then=="function")return dt(Be,Me,Ft(Ve),ht);if(Ve.$$typeof===gc)return dt(Be,Me,Ih(Be,Ve),ht);Ut(Be,Ve)}return null}function tn(Be,Me,Ve,ht,Lt){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return Be=Be.get(Ve)||null,pe(Me,Be,""+ht,Lt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case dc:return Be=Be.get(ht.key===null?Ve:ht.key)||null,Re(Me,Be,ht,Lt);case Eo:return Be=Be.get(ht.key===null?Ve:ht.key)||null,tt(Me,Be,ht,Lt);case dl:var Kn=ht._init;return ht=Kn(ht._payload),tn(Be,Me,Ve,ht,Lt)}if(_c(ht)||a(ht))return Be=Be.get(Ve)||null,pt(Me,Be,ht,Lt,null);if(typeof ht.then=="function")return tn(Be,Me,Ve,Ft(ht),Lt);if(ht.$$typeof===gc)return tn(Be,Me,Ve,Ih(Me,ht),Lt);Ut(Me,ht)}return null}function Us(Be,Me,Ve,ht){for(var Lt=null,Kn=null,Wt=Me,xn=Me=0,Jn=null;Wt!==null&&xn<Ve.length;xn++){Wt.index>xn?(Jn=Wt,Wt=null):Jn=Wt.sibling;var An=dt(Be,Wt,Ve[xn],ht);if(An===null){Wt===null&&(Wt=Jn);break}d&&Wt&&An.alternate===null&&m(Be,Wt),Me=k(An,Me,xn),Kn===null?Lt=An:Kn.sibling=An,Kn=An,Wt=Jn}if(xn===Ve.length)return E(Be,Wt),Nn&&q(Be,xn),Lt;if(Wt===null){for(;xn<Ve.length;xn++)Wt=Et(Be,Ve[xn],ht),Wt!==null&&(Me=k(Wt,Me,xn),Kn===null?Lt=Wt:Kn.sibling=Wt,Kn=Wt);return Nn&&q(Be,xn),Lt}for(Wt=R(Wt);xn<Ve.length;xn++)Jn=tn(Wt,Be,xn,Ve[xn],ht),Jn!==null&&(d&&Jn.alternate!==null&&Wt.delete(Jn.key===null?xn:Jn.key),Me=k(Jn,Me,xn),Kn===null?Lt=Jn:Kn.sibling=Jn,Kn=Jn);return d&&Wt.forEach(function(Pc){return m(Be,Pc)}),Nn&&q(Be,xn),Lt}function Gf(Be,Me,Ve,ht){if(Ve==null)throw Error(r(151));for(var Lt=null,Kn=null,Wt=Me,xn=Me=0,Jn=null,An=Ve.next();Wt!==null&&!An.done;xn++,An=Ve.next()){Wt.index>xn?(Jn=Wt,Wt=null):Jn=Wt.sibling;var Pc=dt(Be,Wt,An.value,ht);if(Pc===null){Wt===null&&(Wt=Jn);break}d&&Wt&&Pc.alternate===null&&m(Be,Wt),Me=k(Pc,Me,xn),Kn===null?Lt=Pc:Kn.sibling=Pc,Kn=Pc,Wt=Jn}if(An.done)return E(Be,Wt),Nn&&q(Be,xn),Lt;if(Wt===null){for(;!An.done;xn++,An=Ve.next())An=Et(Be,An.value,ht),An!==null&&(Me=k(An,Me,xn),Kn===null?Lt=An:Kn.sibling=An,Kn=An);return Nn&&q(Be,xn),Lt}for(Wt=R(Wt);!An.done;xn++,An=Ve.next())An=tn(Wt,Be,xn,An.value,ht),An!==null&&(d&&An.alternate!==null&&Wt.delete(An.key===null?xn:An.key),Me=k(An,Me,xn),Kn===null?Lt=An:Kn.sibling=An,Kn=An);return d&&Wt.forEach(function(Ub){return m(Be,Ub)}),Nn&&q(Be,xn),Lt}function Du(Be,Me,Ve,ht){if(typeof Ve=="object"&&Ve!==null&&Ve.type===pc&&Ve.key===null&&(Ve=Ve.props.children),typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case dc:e:{for(var Lt=Ve.key;Me!==null;){if(Me.key===Lt){if(Lt=Ve.type,Lt===pc){if(Me.tag===7){E(Be,Me.sibling),ht=U(Me,Ve.props.children),ht.return=Be,Be=ht;break e}}else if(Me.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===dl&&Ln(Lt)===Me.type){E(Be,Me.sibling),ht=U(Me,Ve.props),At(ht,Ve),ht.return=Be,Be=ht;break e}E(Be,Me);break}else m(Be,Me);Me=Me.sibling}Ve.type===pc?(ht=hc(Ve.props.children,Be.mode,ht,Ve.key),ht.return=Be,Be=ht):(ht=gu(Ve.type,Ve.key,Ve.props,null,Be.mode,ht),At(ht,Ve),ht.return=Be,Be=ht)}return ie(Be);case Eo:e:{for(Lt=Ve.key;Me!==null;){if(Me.key===Lt)if(Me.tag===4&&Me.stateNode.containerInfo===Ve.containerInfo&&Me.stateNode.implementation===Ve.implementation){E(Be,Me.sibling),ht=U(Me,Ve.children||[]),ht.return=Be,Be=ht;break e}else{E(Be,Me);break}else m(Be,Me);Me=Me.sibling}ht=Ca(Ve,Be.mode,ht),ht.return=Be,Be=ht}return ie(Be);case dl:return Lt=Ve._init,Ve=Lt(Ve._payload),Du(Be,Me,Ve,ht)}if(_c(Ve))return Us(Be,Me,Ve,ht);if(a(Ve)){if(Lt=a(Ve),typeof Lt!="function")throw Error(r(150));return Ve=Lt.call(Ve),Gf(Be,Me,Ve,ht)}if(typeof Ve.then=="function")return Du(Be,Me,Ft(Ve),ht);if(Ve.$$typeof===gc)return Du(Be,Me,Ih(Be,Ve),ht);Ut(Be,Ve)}return typeof Ve=="string"&&Ve!==""||typeof Ve=="number"||typeof Ve=="bigint"?(Ve=""+Ve,Me!==null&&Me.tag===6?(E(Be,Me.sibling),ht=U(Me,Ve),ht.return=Be,Be=ht):(E(Be,Me),ht=Qh(Ve,Be.mode,ht),ht.return=Be,Be=ht),ie(Be)):E(Be,Me)}return function(Be,Me,Ve,ht){try{Kr=0;var Lt=Du(Be,Me,Ve,ht);return Tu=null,Lt}catch(Wt){if(Wt===od)throw Wt;var Kn=t(29,Wt,null,Be.mode);return Kn.lanes=ht,Kn.return=Be,Kn}finally{}}}function ci(d,m){d=ao,T(io,d),T(no,m),ao=d|m.baseLanes}function dr(){T(io,ao),T(no,no.current)}function Li(){ao=io.current,w(no),w(io)}function xi(d){var m=d.alternate;T(ri,ri.current&1),T(Ua,d),Ts===null&&(m===null||no.current!==null||m.memoizedState!==null)&&(Ts=d)}function ra(d){if(d.tag===22){if(T(ri,ri.current),T(Ua,d),Ts===null){var m=d.alternate;m!==null&&m.memoizedState!==null&&(Ts=d)}}else pr()}function pr(){T(ri,ri.current),T(Ua,Ua.current)}function zn(d){w(Ua),Ts===d&&(Ts=null),w(ri)}function _n(d){for(var m=d;m!==null;){if(m.tag===13){var E=m.memoizedState;if(E!==null&&(E=E.dehydrated,E===null||bu(E)||nd(E)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}function Zt(){throw Error(r(321))}function _a(d,m){if(m===null)return!1;for(var E=0;E<m.length&&E<d.length;E++)if(!la(d[E],m[E]))return!1;return!0}function ps(d,m,E,R,U,k){return bl=k,Jt=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,Yt.H=d===null||d.memoizedState===null?El:ua,Ac=!1,k=E(R,U),Ac=!1,Mu&&(k=tu(m,E,R,U)),df(d),k}function df(d){Yt.H=qi;var m=In!==null&&In.next!==null;if(bl=0,yi=In=Jt=null,Sl=!1,zf=0,xl=null,m)throw Error(r(300));d===null||ar||(d=d.dependencies,d!==null&&Lh(d)&&(ar=!0))}function tu(d,m,E,R){Jt=d;var U=0;do{if(Mu&&(xl=null),zf=0,Mu=!1,25<=U)throw Error(r(301));if(U+=1,yi=In=null,d.updateQueue!=null){var k=d.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}Yt.H=Rc,k=m(E,R)}while(Mu);return k}function qo(){var d=Yt.H,m=d.useState()[0];return m=typeof m.then=="function"?Ne(m):m,d=d.useState()[0],(In!==null?In.memoizedState:null)!==d&&(Jt.flags|=1024),m}function qa(){var d=Cc!==0;return Cc=0,d}function Wo(d,m,E){m.updateQueue=d.updateQueue,m.flags&=-2053,d.lanes&=~E}function ba(d){if(Sl){for(d=d.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}Sl=!1}bl=0,yi=In=Jt=null,Mu=!1,zf=Cc=0,xl=null}function Q(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yi===null?Jt.memoizedState=yi=d:yi=yi.next=d,yi}function be(){if(In===null){var d=Jt.alternate;d=d!==null?d.memoizedState:null}else d=In.next;var m=yi===null?Jt.memoizedState:yi.next;if(m!==null)yi=m,In=d;else{if(d===null)throw Jt.alternate===null?Error(r(467)):Error(r(310));In=d,d={memoizedState:In.memoizedState,baseState:In.baseState,baseQueue:In.baseQueue,queue:In.queue,next:null},yi===null?Jt.memoizedState=yi=d:yi=yi.next=d}return yi}function Ne(d){var m=zf;return zf+=1,xl===null&&(xl=[]),d=rt(xl,d,m),m=Jt,(yi===null?m.memoizedState:yi.next)===null&&(m=m.alternate,Yt.H=m===null||m.memoizedState===null?El:ua),d}function ge(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return Ne(d);if(d.$$typeof===gc)return Dr(d)}throw Error(r(438,String(d)))}function we(d){var m=null,E=Jt.updateQueue;if(E!==null&&(m=E.memoCache),m==null){var R=Jt.alternate;R!==null&&(R=R.updateQueue,R!==null&&(R=R.memoCache,R!=null&&(m={data:R.data.map(function(U){return U.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),E===null&&(E=qv(),Jt.updateQueue=E),E.memoCache=m,E=m.data[m.index],E===void 0)for(E=m.data[m.index]=Array(d),R=0;R<d;R++)E[R]=pn;return m.index++,E}function ut(d,m){return typeof m=="function"?m(d):m}function mt(d){var m=be();return St(m,In,d)}function St(d,m,E){var R=d.queue;if(R===null)throw Error(r(311));R.lastRenderedReducer=E;var U=d.baseQueue,k=R.pending;if(k!==null){if(U!==null){var ie=U.next;U.next=k.next,k.next=ie}m.baseQueue=U=k,R.pending=null}if(k=d.baseState,U===null)d.memoizedState=k;else{m=U.next;var pe=ie=null,Re=null,tt=m,pt=!1;do{var Et=tt.lane&-536870913;if(Et!==tt.lane?(Tn&Et)===Et:(bl&Et)===Et){var dt=tt.revertLane;if(dt===0)Re!==null&&(Re=Re.next={lane:0,revertLane:0,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null}),Et===hi&&(pt=!0);else if((bl&dt)===dt){tt=tt.next,dt===hi&&(pt=!0);continue}else Et={lane:0,revertLane:tt.revertLane,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null},Re===null?(pe=Re=Et,ie=k):Re=Re.next=Et,Jt.lanes|=dt,Os|=dt;Et=tt.action,Ac&&E(k,Et),k=tt.hasEagerState?tt.eagerState:E(k,Et)}else dt={lane:Et,revertLane:tt.revertLane,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null},Re===null?(pe=Re=dt,ie=k):Re=Re.next=dt,Jt.lanes|=Et,Os|=Et;tt=tt.next}while(tt!==null&&tt!==m);if(Re===null?ie=k:Re.next=pe,!la(k,d.memoizedState)&&(ar=!0,pt&&(E=wr,E!==null)))throw E;d.memoizedState=k,d.baseState=ie,d.baseQueue=Re,R.lastRenderedState=k}return U===null&&(R.lanes=0),[d.memoizedState,R.dispatch]}function xt(d){var m=be(),E=m.queue;if(E===null)throw Error(r(311));E.lastRenderedReducer=d;var R=E.dispatch,U=E.pending,k=m.memoizedState;if(U!==null){E.pending=null;var ie=U=U.next;do k=d(k,ie.action),ie=ie.next;while(ie!==U);la(k,m.memoizedState)||(ar=!0),m.memoizedState=k,m.baseQueue===null&&(m.baseState=k),E.lastRenderedState=k}return[k,R]}function Ht(d,m,E){var R=Jt,U=be(),k=Nn;if(k){if(E===void 0)throw Error(r(407));E=E()}else E=m();var ie=!la((In||U).memoizedState,E);if(ie&&(U.memoizedState=E,ar=!0),U=U.queue,qs(dn.bind(null,R,U,d),[d]),U.getSnapshot!==m||ie||yi!==null&&yi.memoizedState.tag&1){if(R.flags|=2048,Vr(9,Dt.bind(null,R,U,E,m),{destroy:void 0},null),Xn===null)throw Error(r(349));k||(bl&60)!==0||kt(R,m,E)}return E}function kt(d,m,E){d.flags|=16384,d={getSnapshot:m,value:E},m=Jt.updateQueue,m===null?(m=qv(),Jt.updateQueue=m,m.stores=[d]):(E=m.stores,E===null?m.stores=[d]:E.push(d))}function Dt(d,m,E,R){m.value=E,m.getSnapshot=R,ln(m)&&jn(d)}function dn(d,m,E){return E(function(){ln(m)&&jn(d)})}function ln(d){var m=d.getSnapshot;d=d.value;try{var E=m();return!la(d,E)}catch{return!0}}function jn(d){var m=Ie(d,2);m!==null&&ii(m,d,2)}function bn(d){var m=Q();if(typeof d=="function"){var E=d;if(d=E(),Ac){re(!0);try{E()}finally{re(!1)}}}return m.memoizedState=m.baseState=d,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ut,lastRenderedState:d},m}function qt(d,m,E,R){return d.baseState=E,St(d,In,typeof R=="function"?R:ut)}function Nt(d,m,E,R,U){if(ec(d))throw Error(r(485));if(d=m.action,d!==null){var k={payload:U,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ie){k.listeners.push(ie)}};Yt.T!==null?E(!0):k.isTransition=!1,R(k),E=m.pending,E===null?(k.next=m.pending=k,mi(m,k)):(k.next=E.next,m.pending=E.next=k)}}function mi(d,m){var E=m.action,R=m.payload,U=d.state;if(m.isTransition){var k=Yt.T,ie={};Yt.T=ie;try{var pe=E(U,R),Re=Yt.S;Re!==null&&Re(ie,pe),nn(d,m,pe)}catch(tt){Rr(d,m,tt)}finally{Yt.T=k}}else try{k=E(U,R),nn(d,m,k)}catch(tt){Rr(d,m,tt)}}function nn(d,m,E){E!==null&&typeof E=="object"&&typeof E.then=="function"?E.then(function(R){mr(d,m,R)},function(R){return Rr(d,m,R)}):mr(d,m,E)}function mr(d,m,E){m.status="fulfilled",m.value=E,Ji(m),d.state=E,m=d.pending,m!==null&&(E=m.next,E===m?d.pending=null:(E=E.next,m.next=E,mi(d,E)))}function Rr(d,m,E){var R=d.pending;if(d.pending=null,R!==null){R=R.next;do m.status="rejected",m.reason=E,Ji(m),m=m.next;while(m!==R)}d.action=null}function Ji(d){d=d.listeners;for(var m=0;m<d.length;m++)(0,d[m])()}function Fn(d,m){return m}function kn(d,m){if(Nn){var E=Xn.formState;if(E!==null){e:{var R=Jt;if(Nn){if(Yn){var U=yb(Yn,eo);if(U){Yn=Sc(U),R=To(U);break e}}ve(R)}R=!1}R&&(m=E[0])}}E=Q(),E.memoizedState=E.baseState=m,R={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fn,lastRenderedState:m},E.queue=R,E=mf.bind(null,Jt,R),R.dispatch=E,R=bn(!1);var k=Xo.bind(null,Jt,!1,R.queue);return R=Q(),U={state:m,dispatch:null,action:d,pending:null},R.queue=U,E=Nt.bind(null,Jt,U,k,E),U.dispatch=E,R.memoizedState=d,[m,E,!1]}function Ii(d){var m=be();return Ei(m,In,d)}function Ei(d,m,E){m=St(d,m,Fn)[0],d=mt(ut)[0],m=typeof m=="object"&&m!==null&&typeof m.then=="function"?Ne(m):m;var R=be(),U=R.queue,k=U.dispatch;return E!==R.memoizedState&&(Jt.flags|=2048,Vr(9,ui.bind(null,U,E),{destroy:void 0},null)),[m,k,d]}function ui(d,m){d.action=m}function wi(d){var m=be(),E=In;if(E!==null)return Ei(m,E,d);be(),m=m.memoizedState,E=be();var R=E.queue.dispatch;return E.memoizedState=d,[m,R,!1]}function Vr(d,m,E,R){return d={tag:d,create:m,inst:E,deps:R,next:null},m=Jt.updateQueue,m===null&&(m=qv(),Jt.updateQueue=m),E=m.lastEffect,E===null?m.lastEffect=d.next=d:(R=E.next,E.next=d,d.next=R,m.lastEffect=d),d}function gr(){return be().memoizedState}function nu(d,m,E,R){var U=Q();Jt.flags|=d,U.memoizedState=Vr(1|m,E,{destroy:void 0},R===void 0?null:R)}function Zl(d,m,E,R){var U=be();R=R===void 0?null:R;var k=U.memoizedState.inst;In!==null&&R!==null&&_a(R,In.memoizedState.deps)?U.memoizedState=Vr(m,E,k,R):(Jt.flags|=d,U.memoizedState=Vr(1|m,E,k,R))}function iu(d,m){nu(8390656,8,d,m)}function qs(d,m){Zl(2048,8,d,m)}function Rh(d,m){return Zl(4,2,d,m)}function ru(d,m){return Zl(4,4,d,m)}function ms(d,m){if(typeof m=="function"){d=d();var E=m(d);return function(){typeof E=="function"?E():m(null)}}if(m!=null)return d=d(),m.current=d,function(){m.current=null}}function Ws(d,m,E){E=E!=null?E.concat([d]):null,Zl(4,4,ms.bind(null,m,d),E)}function Ys(){}function vo(d,m){var E=be();m=m===void 0?null:m;var R=E.memoizedState;return m!==null&&_a(m,R[1])?R[0]:(E.memoizedState=[d,m],d)}function Wa(d,m){var E=be();m=m===void 0?null:m;var R=E.memoizedState;if(m!==null&&_a(m,R[1]))return R[0];if(R=d(),Ac){re(!0);try{d()}finally{re(!1)}}return E.memoizedState=[R,m],R}function Ql(d,m,E){return E===void 0||(bl&1073741824)!==0?d.memoizedState=m:(d.memoizedState=E,d=qh(),Jt.lanes|=d,Os|=d,E)}function Jl(d,m,E,R){return la(E,m)?E:no.current!==null?(d=Ql(d,E,R),la(d,m)||(ar=!0),d):(bl&42)===0?(ar=!0,d.memoizedState=E):(d=qh(),Jt.lanes|=d,Os|=d,m)}function pf(d,m,E,R,U){var k=bc();oa(k!==0&&8>k?k:8);var ie=Yt.T,pe={};Yt.T=pe,Xo(d,!1,m,E);try{var Re=U(),tt=Yt.S;if(tt!==null&&tt(pe,Re),Re!==null&&typeof Re=="object"&&typeof Re.then=="function"){var pt=_t(Re,R);gs(d,m,pt,jr(d))}else gs(d,m,R,jr(d))}catch(Et){gs(d,m,{then:function(){},status:"rejected",reason:Et},jr())}finally{oa(k),Yt.T=ie}}function $s(d){var m=d.memoizedState;if(m!==null)return m;m={memoizedState:_u,baseState:_u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ut,lastRenderedState:_u},next:null};var E={};return m.next={memoizedState:E,baseState:E,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ut,lastRenderedState:E},next:null},d.memoizedState=m,d=d.alternate,d!==null&&(d.memoizedState=m),m}function Yo(){return Dr(ml)}function $o(){return be().memoizedState}function Bi(){return be().memoizedState}function au(d){for(var m=d.return;m!==null;){switch(m.tag){case 24:case 3:var E=jr();d=it(E);var R=Ze(m,d,E);R!==null&&(ii(R,m,E),$e(R,m,E)),m={cache:ic()},d.payload=m;return}m=m.return}}function su(d,m,E){var R=jr();E={lane:R,revertLane:0,action:E,hasEagerState:!1,eagerState:null,next:null},ec(d)?zi(m,E):(E=De(d,m,E,R),E!==null&&(ii(E,d,R),Sa(E,m,R)))}function mf(d,m,E){var R=jr();gs(d,m,E,R)}function gs(d,m,E,R){var U={lane:R,revertLane:0,action:E,hasEagerState:!1,eagerState:null,next:null};if(ec(d))zi(m,U);else{var k=d.alternate;if(d.lanes===0&&(k===null||k.lanes===0)&&(k=m.lastRenderedReducer,k!==null))try{var ie=m.lastRenderedState,pe=k(ie,E);if(U.hasEagerState=!0,U.eagerState=pe,la(pe,ie))return ke(d,m,U,0),Xn===null&&te(),!1}catch{}finally{}if(E=De(d,m,U,R),E!==null)return ii(E,d,R),Sa(E,m,R),!0}return!1}function Xo(d,m,E,R){if(R={lane:2,revertLane:je(),action:R,hasEagerState:!1,eagerState:null,next:null},ec(d)){if(m)throw Error(r(479))}else m=De(d,E,R,2),m!==null&&ii(m,d,2)}function ec(d){var m=d.alternate;return d===Jt||m!==null&&m===Jt}function zi(d,m){Mu=Sl=!0;var E=d.pending;E===null?m.next=m:(m.next=E.next,E.next=m),d.pending=m}function Sa(d,m,E){if((E&4194176)!==0){var R=m.lanes;R&=d.pendingLanes,E|=R,m.lanes=E,K(d,E)}}function aa(d,m,E,R){m=d.memoizedState,E=E(R,m),E=E==null?m:ki({},m,E),d.memoizedState=E,d.lanes===0&&(d.updateQueue.baseState=E)}function Ko(d,m,E,R,U,k,ie){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(R,k,ie):m.prototype&&m.prototype.isPureReactComponent?!Ue(E,R)||!Ue(U,k):!0}function gf(d,m,E,R){d=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(E,R),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(E,R),m.state!==d&&kf.enqueueReplaceState(m,m.state,null)}function Ya(d,m){var E=m;if("ref"in m){E={};for(var R in m)R!=="ref"&&(E[R]=m[R])}if(d=d.defaultProps){E===m&&(E=ki({},E));for(var U in d)E[U]===void 0&&(E[U]=d[U])}return E}function vs(d,m){try{var E=d.onUncaughtError;E(m.value,{componentStack:m.stack})}catch(R){setTimeout(function(){throw R})}}function Zo(d,m,E){try{var R=d.onCaughtError;R(E.value,{componentStack:E.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(U){setTimeout(function(){throw U})}}function ys(d,m,E){return E=it(E),E.tag=3,E.payload={element:null},E.callback=function(){vs(d,m)},E}function ou(d){return d=it(d),d.tag=3,d}function Gr(d,m,E,R){var U=E.type.getDerivedStateFromError;if(typeof U=="function"){var k=R.value;d.payload=function(){return U(k)},d.callback=function(){Zo(m,E,R)}}var ie=E.stateNode;ie!==null&&typeof ie.componentDidCatch=="function"&&(d.callback=function(){Zo(m,E,R),typeof U!="function"&&(Uo===null?Uo=new Set([this]):Uo.add(this));var pe=R.stack;this.componentDidCatch(R.value,{componentStack:pe!==null?pe:""})})}function Jg(d,m,E,R,U){if(E.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){if(m=E.alternate,m!==null&&Ph(m,E,U,!0),E=Ua.current,E!==null){switch(E.tag){case 13:return Ts===null?xs():E.alternate===null&&_i===0&&(_i=3),E.flags&=-257,E.flags|=65536,E.lanes=U,R===ca?E.flags|=16384:(m=E.updateQueue,m===null?E.updateQueue=new Set([R]):m.add(R),fc(d,R,U)),!1;case 22:return E.flags|=65536,R===ca?E.flags|=16384:(m=E.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([R])},E.updateQueue=m):(E=m.retryQueue,E===null?m.retryQueue=new Set([R]):E.add(R)),fc(d,R,U)),!1}throw Error(r(435,E.tag))}return fc(d,R,U),xs(),!1}if(Nn)return m=Ua.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=U,R!==sd&&(d=Error(r(422),{cause:R}),Ae(se(d,E)))):(R!==sd&&(m=Error(r(423),{cause:R}),Ae(se(m,E))),d=d.current.alternate,d.flags|=65536,U&=-U,d.lanes|=U,R=se(R,E),U=ys(d.stateNode,R,U),vt(d,U),_i!==4&&(_i=2)),!1;var k=Error(r(520),{cause:R});if(k=se(k,E),Hf===null?Hf=[k]:Hf.push(k),_i!==4&&(_i=2),m===null)return!0;R=se(R,E),E=m;do{switch(E.tag){case 3:return E.flags|=65536,d=U&-U,E.lanes|=d,d=ys(E.stateNode,R,d),vt(E,d),!1;case 1:if(m=E.type,k=E.stateNode,(E.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Uo===null||!Uo.has(k))))return E.flags|=65536,U&=-U,E.lanes|=U,U=ou(U),Gr(U,d,E,R),vt(E,U),!1}E=E.return}while(E!==null);return!1}function Ci(d,m,E,R){m.child=d===null?Ro(m,null,E,R):Mc(m,d.child,E,R)}function Qo(d,m,E,R,U){E=E.render;var k=m.ref;if("ref"in R){var ie={};for(var pe in R)pe!=="ref"&&(ie[pe]=R[pe])}else ie=R;return nc(m),R=ps(d,m,E,ie,k,U),pe=qa(),d!==null&&!ar?(Wo(d,m,U),Jo(d,m,U)):(Nn&&pe&&oe(m),m.flags|=1,Ci(d,m,R,U),m.child)}function Oh(d,m,E,R,U){if(d===null){var k=E.type;return typeof k=="function"&&!ll(k)&&k.defaultProps===void 0&&E.compare===null?(m.tag=15,m.type=k,Ap(d,m,k,R,U)):(d=gu(E.type,null,R,m,m.mode,U),d.ref=m.ref,d.return=m,m.child=d)}if(k=d.child,!rv(d,U)){var ie=k.memoizedProps;if(E=E.compare,E=E!==null?E:Ue,E(ie,R)&&d.ref===m.ref)return Jo(d,m,U)}return m.flags|=1,d=cl(k,R),d.ref=m.ref,d.return=m,m.child=d}function Ap(d,m,E,R,U){if(d!==null){var k=d.memoizedProps;if(Ue(k,R)&&d.ref===m.ref)if(ar=!1,m.pendingProps=R=k,rv(d,U))(d.flags&131072)!==0&&(ar=!0);else return m.lanes=d.lanes,Jo(d,m,U)}return $a(d,m,E,R,U)}function Or(d,m,E){var R=m.pendingProps,U=R.children,k=(m.stateNode._pendingVisibility&2)!==0,ie=d!==null?d.memoizedState:null;if(er(d,m),R.mode==="hidden"||k){if((m.flags&128)!==0){if(R=ie!==null?ie.baseLanes|E:E,d!==null){for(U=m.child=d.child,k=0;U!==null;)k=k|U.lanes|U.childLanes,U=U.sibling;m.childLanes=k&~R}else m.childLanes=0,m.child=null;return xa(d,m,R,E)}if((E&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},d!==null&&Rp(m,ie!==null?ie.cachePool:null),ie!==null?ci(m,ie):dr(),ra(m);else return m.lanes=m.childLanes=536870912,xa(d,m,ie!==null?ie.baseLanes|E:E,E)}else ie!==null?(Rp(m,ie.cachePool),ci(m,ie),pr(),m.memoizedState=null):(d!==null&&Rp(m,null),dr(),pr());return Ci(d,m,U,E),m.child}function xa(d,m,E,R){var U=sv();return U=U===null?null:{parent:Ks?Oi._currentValue:Oi._currentValue2,pool:U},m.memoizedState={baseLanes:E,cachePool:U},d!==null&&Rp(m,null),dr(),ra(m),d!==null&&Ph(d,m,R,!0),null}function er(d,m){var E=m.ref;if(E===null)d!==null&&d.ref!==null&&(m.flags|=2097664);else{if(typeof E!="function"&&typeof E!="object")throw Error(r(284));(d===null||d.ref!==E)&&(m.flags|=2097664)}}function $a(d,m,E,R,U){return nc(m),E=ps(d,m,E,R,void 0,U),R=qa(),d!==null&&!ar?(Wo(d,m,U),Jo(d,m,U)):(Nn&&R&&oe(m),m.flags|=1,Ci(d,m,E,U),m.child)}function Dh(d,m,E,R,U,k){return nc(m),m.updateQueue=null,E=tu(m,R,E,U),df(d),R=qa(),d!==null&&!ar?(Wo(d,m,k),Jo(d,m,k)):(Nn&&R&&oe(m),m.flags|=1,Ci(d,m,E,k),m.child)}function R_(d,m,E,R,U){if(nc(m),m.stateNode===null){var k=Eu,ie=E.contextType;typeof ie=="object"&&ie!==null&&(k=Dr(ie)),k=new E(R,k),m.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=kf,m.stateNode=k,k._reactInternals=m,k=m.stateNode,k.props=R,k.state=m.memoizedState,k.refs={},Ye(m),ie=E.contextType,k.context=typeof ie=="object"&&ie!==null?Dr(ie):Eu,k.state=m.memoizedState,ie=E.getDerivedStateFromProps,typeof ie=="function"&&(aa(m,E,ie,R),k.state=m.memoizedState),typeof E.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(ie=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),ie!==k.state&&kf.enqueueReplaceState(k,k.state,null),jt(m,R,k,U),gt(),k.state=m.memoizedState),typeof k.componentDidMount=="function"&&(m.flags|=4194308),R=!0}else if(d===null){k=m.stateNode;var pe=m.memoizedProps,Re=Ya(E,pe);k.props=Re;var tt=k.context,pt=E.contextType;ie=Eu,typeof pt=="object"&&pt!==null&&(ie=Dr(pt));var Et=E.getDerivedStateFromProps;pt=typeof Et=="function"||typeof k.getSnapshotBeforeUpdate=="function",pe=m.pendingProps!==pe,pt||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(pe||tt!==ie)&&gf(m,k,R,ie),$r=!1;var dt=m.memoizedState;k.state=dt,jt(m,R,k,U),gt(),tt=m.memoizedState,pe||dt!==tt||$r?(typeof Et=="function"&&(aa(m,E,Et,R),tt=m.memoizedState),(Re=$r||Ko(m,E,Re,R,dt,tt,ie))?(pt||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(m.flags|=4194308)):(typeof k.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=R,m.memoizedState=tt),k.props=R,k.state=tt,k.context=ie,R=Re):(typeof k.componentDidMount=="function"&&(m.flags|=4194308),R=!1)}else{k=m.stateNode,ct(d,m),ie=m.memoizedProps,pt=Ya(E,ie),k.props=pt,Et=m.pendingProps,dt=k.context,tt=E.contextType,Re=Eu,typeof tt=="object"&&tt!==null&&(Re=Dr(tt)),pe=E.getDerivedStateFromProps,(tt=typeof pe=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(ie!==Et||dt!==Re)&&gf(m,k,R,Re),$r=!1,dt=m.memoizedState,k.state=dt,jt(m,R,k,U),gt();var tn=m.memoizedState;ie!==Et||dt!==tn||$r||d!==null&&d.dependencies!==null&&Lh(d.dependencies)?(typeof pe=="function"&&(aa(m,E,pe,R),tn=m.memoizedState),(pt=$r||Ko(m,E,pt,R,dt,tn,Re)||d!==null&&d.dependencies!==null&&Lh(d.dependencies))?(tt||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(R,tn,Re),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(R,tn,Re)),typeof k.componentDidUpdate=="function"&&(m.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof k.componentDidUpdate!="function"||ie===d.memoizedProps&&dt===d.memoizedState||(m.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||ie===d.memoizedProps&&dt===d.memoizedState||(m.flags|=1024),m.memoizedProps=R,m.memoizedState=tn),k.props=R,k.state=tn,k.context=Re,R=pt):(typeof k.componentDidUpdate!="function"||ie===d.memoizedProps&&dt===d.memoizedState||(m.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||ie===d.memoizedProps&&dt===d.memoizedState||(m.flags|=1024),R=!1)}return k=R,er(d,m),R=(m.flags&128)!==0,k||R?(k=m.stateNode,E=R&&typeof E.getDerivedStateFromError!="function"?null:k.render(),m.flags|=1,d!==null&&R?(m.child=Mc(m,d.child,null,U),m.child=Mc(m,null,E,U)):Ci(d,m,E,U),m.memoizedState=k.state,d=m.child):d=Jo(d,m,U),d}function O_(d,m,E,R){return _e(),m.flags|=256,Ci(d,m,E,R),m.child}function ev(d){return{baseLanes:d,cachePool:ov()}}function Uh(d,m,E){return d=d!==null?d.childLanes&~E:0,m&&(d|=ts),d}function D_(d,m,E){var R=m.pendingProps,U=!1,k=(m.flags&128)!==0,ie;if((ie=k)||(ie=d!==null&&d.memoizedState===null?!1:(ri.current&2)!==0),ie&&(U=!0,m.flags&=-129),ie=(m.flags&32)!==0,m.flags&=-33,d===null){if(Nn){if(U?xi(m):pr(),Nn){var pe=Yn,Re;(Re=pe)&&(pe=bb(pe,eo),pe!==null?(m.memoizedState={dehydrated:pe,treeContext:Js!==null?{id:Ao,overflow:Co}:null,retryLane:536870912},Re=t(18,null,null,0),Re.stateNode=pe,Re.return=m,m.child=Re,Gi=m,Yn=null,Re=!0):Re=!1),Re||ve(m)}if(pe=m.memoizedState,pe!==null&&(pe=pe.dehydrated,pe!==null))return nd(pe)?m.lanes=16:m.lanes=536870912,null;zn(m)}return pe=R.children,R=R.fallback,U?(pr(),U=m.mode,pe=nv({mode:"hidden",children:pe},U),R=hc(R,U,E,null),pe.return=m,R.return=m,pe.sibling=R,m.child=pe,U=m.child,U.memoizedState=ev(E),U.childLanes=Uh(d,ie,E),m.memoizedState=cd,R):(xi(m),tv(m,pe))}if(Re=d.memoizedState,Re!==null&&(pe=Re.dehydrated,pe!==null)){if(k)m.flags&256?(xi(m),m.flags&=-257,m=Cp(d,m,E)):m.memoizedState!==null?(pr(),m.child=d.child,m.flags|=128,m=null):(pr(),U=R.fallback,pe=m.mode,R=nv({mode:"visible",children:R.children},pe),U=hc(U,pe,E,null),U.flags|=2,R.return=m,U.return=m,R.sibling=U,m.child=R,Mc(m,d.child,null,E),R=m.child,R.memoizedState=ev(E),R.childLanes=Uh(d,ie,E),m.memoizedState=cd,m=U);else if(xi(m),nd(pe))ie=Kp(pe).digest,R=Error(r(419)),R.stack="",R.digest=ie,Ae({value:R,source:null,stack:null}),m=Cp(d,m,E);else if(ar||Ph(d,m,E,!1),ie=(E&d.childLanes)!==0,ar||ie){if(ie=Xn,ie!==null){if(R=E&-E,(R&42)!==0)R=1;else switch(R){case 2:R=1;break;case 8:R=4;break;case 32:R=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:R=64;break;case 268435456:R=134217728;break;default:R=0}if(R=(R&(ie.suspendedLanes|E))!==0?0:R,R!==0&&R!==Re.retryLane)throw Re.retryLane=R,Ie(d,R),ii(ie,d,R),Wv}bu(pe)||xs(),m=Cp(d,m,E)}else bu(pe)?(m.flags|=128,m.child=d.child,m=Zh.bind(null,d),vb(pe,m),m=null):(d=Re.treeContext,Ra&&(Yn=Dv(pe),Gi=m,Nn=!0,ws=null,eo=!1,d!==null&&(Oa[Yr++]=Ao,Oa[Yr++]=Co,Oa[Yr++]=Js,Ao=d.id,Co=d.overflow,Js=m)),m=tv(m,R.children),m.flags|=4096);return m}return U?(pr(),U=R.fallback,pe=m.mode,Re=d.child,k=Re.sibling,R=cl(Re,{mode:"hidden",children:R.children}),R.subtreeFlags=Re.subtreeFlags&31457280,k!==null?U=cl(k,U):(U=hc(U,pe,E,null),U.flags|=2),U.return=m,R.return=m,R.sibling=U,m.child=R,R=U,U=m.child,pe=d.child.memoizedState,pe===null?pe=ev(E):(Re=pe.cachePool,Re!==null?(k=Ks?Oi._currentValue:Oi._currentValue2,Re=Re.parent!==k?{parent:k,pool:k}:Re):Re=ov(),pe={baseLanes:pe.baseLanes|E,cachePool:Re}),U.memoizedState=pe,U.childLanes=Uh(d,ie,E),m.memoizedState=cd,R):(xi(m),E=d.child,d=E.sibling,E=cl(E,{mode:"visible",children:R.children}),E.return=m,E.sibling=null,d!==null&&(ie=m.deletions,ie===null?(m.deletions=[d],m.flags|=16):ie.push(d)),m.child=E,m.memoizedState=null,E)}function tv(d,m){return m=nv({mode:"visible",children:m},d.mode),m.return=d,d.child=m}function nv(d,m){return Hp(d,m,0,null)}function Cp(d,m,E){return Mc(m,d.child,null,E),d=tv(m,m.pendingProps.children),d.flags|=2,m.memoizedState=null,d}function U_(d,m,E){d.lanes|=m;var R=d.alternate;R!==null&&(R.lanes|=m),Nh(d.return,m,E)}function iv(d,m,E,R,U){var k=d.memoizedState;k===null?d.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:R,tail:E,tailMode:U}:(k.isBackwards=m,k.rendering=null,k.renderingStartTime=0,k.last=R,k.tail=E,k.tailMode=U)}function N_(d,m,E){var R=m.pendingProps,U=R.revealOrder,k=R.tail;if(Ci(d,m,R.children,E),R=ri.current,(R&2)!==0)R=R&1|2,m.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=m.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&U_(d,E,m);else if(d.tag===19)U_(d,E,m);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===m)break e;for(;d.sibling===null;){if(d.return===null||d.return===m)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}R&=1}switch(T(ri,R),U){case"forwards":for(E=m.child,U=null;E!==null;)d=E.alternate,d!==null&&_n(d)===null&&(U=E),E=E.sibling;E=U,E===null?(U=m.child,m.child=null):(U=E.sibling,E.sibling=null),iv(m,!1,U,E,k);break;case"backwards":for(E=null,U=m.child,m.child=null;U!==null;){if(d=U.alternate,d!==null&&_n(d)===null){m.child=U;break}d=U.sibling,U.sibling=E,E=U,U=d}iv(m,!0,E,null,k);break;case"together":iv(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function Jo(d,m,E){if(d!==null&&(m.dependencies=d.dependencies),Os|=m.lanes,(E&m.childLanes)===0)if(d!==null){if(Ph(d,m,E,!1),(E&m.childLanes)===0)return null}else return null;if(d!==null&&m.child!==d.child)throw Error(r(153));if(m.child!==null){for(d=m.child,E=cl(d,d.pendingProps),m.child=E,E.return=m;d.sibling!==null;)d=d.sibling,E=E.sibling=cl(d,d.pendingProps),E.return=m;E.sibling=null}return m.child}function rv(d,m){return(d.lanes&m)!==0?!0:(d=d.dependencies,!!(d!==null&&Lh(d)))}function mw(d,m,E){switch(m.tag){case 3:Z(m,m.stateNode.containerInfo),tc(m,Oi,d.memoizedState.cache),_e();break;case 27:case 5:me(m);break;case 4:Z(m,m.stateNode.containerInfo);break;case 10:tc(m,m.type,m.memoizedProps.value);break;case 13:var R=m.memoizedState;if(R!==null)return R.dehydrated!==null?(xi(m),m.flags|=128,null):(E&m.child.childLanes)!==0?D_(d,m,E):(xi(m),d=Jo(d,m,E),d!==null?d.sibling:null);xi(m);break;case 19:var U=(d.flags&128)!==0;if(R=(E&m.childLanes)!==0,R||(Ph(d,m,E,!1),R=(E&m.childLanes)!==0),U){if(R)return N_(d,m,E);m.flags|=128}if(U=m.memoizedState,U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),T(ri,ri.current),R)break;return null;case 22:case 23:return m.lanes=0,Or(d,m,E);case 24:tc(m,Oi,d.memoizedState.cache)}return Jo(d,m,E)}function P_(d,m,E){if(d!==null)if(d.memoizedProps!==m.pendingProps)ar=!0;else{if(!rv(d,E)&&(m.flags&128)===0)return ar=!1,mw(d,m,E);ar=(d.flags&131072)!==0}else ar=!1,Nn&&(m.flags&1048576)!==0&&X(m,Lf,m.index);switch(m.lanes=0,m.tag){case 16:e:{d=m.pendingProps;var R=m.elementType,U=R._init;if(R=U(R._payload),m.type=R,typeof R=="function")ll(R)?(d=Ya(R,d),m.tag=1,m=R_(null,m,R,d,E)):(m.tag=0,m=$a(null,m,R,d,E));else{if(R!=null){if(U=R.$$typeof,U===Vp){m.tag=11,m=Qo(null,m,R,d,E);break e}else if(U===Mf){m.tag=14,m=Oh(null,m,R,d,E);break e}}throw m=s(R)||R,Error(r(306,m,""))}}return m;case 0:return $a(d,m,m.type,m.pendingProps,E);case 1:return R=m.type,U=Ya(R,m.pendingProps),R_(d,m,R,U,E);case 3:e:{if(Z(m,m.stateNode.containerInfo),d===null)throw Error(r(387));var k=m.pendingProps;U=m.memoizedState,R=U.element,ct(d,m),jt(m,k,null,E);var ie=m.memoizedState;if(k=ie.cache,tc(m,Oi,k),k!==U.cache&&lu(m,[Oi],E,!0),gt(),k=ie.element,Ra&&U.isDehydrated)if(U={element:k,isDehydrated:!1,cache:ie.cache},m.updateQueue.baseState=U,m.memoizedState=U,m.flags&256){m=O_(d,m,k,E);break e}else if(k!==R){R=se(Error(r(424)),m),Ae(R),m=O_(d,m,k,E);break e}else for(Ra&&(Yn=Su(m.stateNode.containerInfo),Gi=m,Nn=!0,ws=null,eo=!0),E=Ro(m,null,k,E),m.child=E;E;)E.flags=E.flags&-3|4096,E=E.sibling;else{if(_e(),k===R){m=Jo(d,m,E);break e}Ci(d,m,k,E)}m=m.child}return m;case 26:if(Za)return er(d,m),d===null?(E=Lv(m.type,null,m.pendingProps,null))?m.memoizedState=E:Nn||(m.stateNode=kv(m.type,m.pendingProps,yl.current,m)):m.memoizedState=Lv(m.type,d.memoizedProps,m.pendingProps,d.memoizedState),null;case 27:if(Er)return me(m),d===null&&Er&&Nn&&(R=m.stateNode=Jp(m.type,m.pendingProps,yl.current,Vi.current,!1),Gi=m,eo=!0,Yn=gl(R)),R=m.pendingProps.children,d!==null||Nn?Ci(d,m,R,E):m.child=Mc(m,null,R,E),er(d,m),m.child;case 5:return d===null&&Nn&&(Tb(m.type,m.pendingProps,Vi.current),(U=R=Yn)&&(R=Uv(R,m.type,m.pendingProps,eo),R!==null?(m.stateNode=R,Gi=m,Yn=gl(R),eo=!1,U=!0):U=!1),U||ve(m)),me(m),U=m.type,k=m.pendingProps,ie=d!==null?d.memoizedProps:null,R=k.children,Nr(U,k)?R=null:ie!==null&&Nr(U,ie)&&(m.flags|=32),m.memoizedState!==null&&(U=ps(d,m,qo,null,null,E),Ks?ml._currentValue=U:ml._currentValue2=U),er(d,m),Ci(d,m,R,E),m.child;case 6:return d===null&&Nn&&(ww(m.pendingProps,Vi.current),(d=E=Yn)&&(E=_b(E,m.pendingProps,eo),E!==null?(m.stateNode=E,Gi=m,Yn=null,d=!0):d=!1),d||ve(m)),null;case 13:return D_(d,m,E);case 4:return Z(m,m.stateNode.containerInfo),R=m.pendingProps,d===null?m.child=Mc(m,null,R,E):Ci(d,m,R,E),m.child;case 11:return Qo(d,m,m.type,m.pendingProps,E);case 7:return Ci(d,m,m.pendingProps,E),m.child;case 8:return Ci(d,m,m.pendingProps.children,E),m.child;case 12:return Ci(d,m,m.pendingProps.children,E),m.child;case 10:return R=m.pendingProps,tc(m,m.type,R.value),Ci(d,m,R.children,E),m.child;case 9:return U=m.type._context,R=m.pendingProps.children,nc(m),U=Dr(U),R=R(U),m.flags|=1,Ci(d,m,R,E),m.child;case 14:return Oh(d,m,m.type,m.pendingProps,E);case 15:return Ap(d,m,m.type,m.pendingProps,E);case 19:return N_(d,m,E);case 22:return Or(d,m,E);case 24:return nc(m),R=Dr(Oi),d===null?(U=sv(),U===null&&(U=Xn,k=ic(),U.pooledCache=k,k.refCount++,k!==null&&(U.pooledCacheLanes|=E),U=k),m.memoizedState={parent:R,cache:U},Ye(m),tc(m,Oi,U)):((d.lanes&E)!==0&&(ct(d,m),jt(m,null,null,E),gt()),U=d.memoizedState,k=m.memoizedState,U.parent!==R?(U={parent:R,cache:R},m.memoizedState=U,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=U),tc(m,Oi,R)):(R=k.cache,tc(m,Oi,R),R!==U.cache&&lu(m,[Oi],E,!0))),Ci(d,m,m.pendingProps.children,E),m.child;case 29:throw m.pendingProps}throw Error(r(156,m.tag))}function tc(d,m,E){Ks?(T(Ms,m._currentValue),m._currentValue=E):(T(Ms,m._currentValue2),m._currentValue2=E)}function el(d){var m=Ms.current;Ks?d._currentValue=m:d._currentValue2=m,w(Ms)}function Nh(d,m,E){for(;d!==null;){var R=d.alternate;if((d.childLanes&m)!==m?(d.childLanes|=m,R!==null&&(R.childLanes|=m)):R!==null&&(R.childLanes&m)!==m&&(R.childLanes|=m),d===E)break;d=d.return}}function lu(d,m,E,R){var U=d.child;for(U!==null&&(U.return=d);U!==null;){var k=U.dependencies;if(k!==null){var ie=U.child;k=k.firstContext;e:for(;k!==null;){var pe=k;k=U;for(var Re=0;Re<m.length;Re++)if(pe.context===m[Re]){k.lanes|=E,pe=k.alternate,pe!==null&&(pe.lanes|=E),Nh(k.return,E,d),R||(ie=null);break e}k=pe.next}}else if(U.tag===18){if(ie=U.return,ie===null)throw Error(r(341));ie.lanes|=E,k=ie.alternate,k!==null&&(k.lanes|=E),Nh(ie,E,d),ie=null}else ie=U.child;if(ie!==null)ie.return=U;else for(ie=U;ie!==null;){if(ie===d){ie=null;break}if(U=ie.sibling,U!==null){U.return=ie.return,ie=U;break}ie=ie.return}U=ie}}function Ph(d,m,E,R){d=null;for(var U=m,k=!1;U!==null;){if(!k){if((U.flags&524288)!==0)k=!0;else if((U.flags&262144)!==0)break}if(U.tag===10){var ie=U.alternate;if(ie===null)throw Error(r(387));if(ie=ie.memoizedProps,ie!==null){var pe=U.type;la(U.pendingProps.value,ie.value)||(d!==null?d.push(pe):d=[pe])}}else if(U===ad.current){if(ie=U.alternate,ie===null)throw Error(r(387));ie.memoizedState.memoizedState!==U.memoizedState.memoizedState&&(d!==null?d.push(ml):d=[ml])}U=U.return}d!==null&&lu(m,d,E,R),m.flags|=262144}function Lh(d){for(d=d.firstContext;d!==null;){var m=d.context;if(!la(Ks?m._currentValue:m._currentValue2,d.memoizedValue))return!0;d=d.next}return!1}function nc(d){Dc=d,As=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function Dr(d){return av(Dc,d)}function Ih(d,m){return Dc===null&&nc(d),av(d,m)}function av(d,m){var E=Ks?m._currentValue:m._currentValue2;if(m={context:m,memoizedValue:E,next:null},As===null){if(d===null)throw Error(r(308));As=m,d.dependencies={lanes:0,firstContext:m},d.flags|=524288}else As=As.next=m;return E}function ic(){return{controller:new ud,data:new Map,refCount:0}}function Bh(d){d.refCount--,d.refCount===0&&Ti(Mw,function(){d.controller.abort()})}function sv(){var d=Au.current;return d!==null?d:Xn.pooledCache}function Rp(d,m){m===null?T(Au,Au.current):T(Au,m.pool)}function ov(){var d=sv();return d===null?null:{parent:Ks?Oi._currentValue:Oi._currentValue2,pool:d}}function Ea(d){d.flags|=4}function vf(d,m){if(d!==null&&d.child===m.child)return!1;if((m.flags&16)!==0)return!0;for(d=m.child;d!==null;){if((d.flags&13878)!==0||(d.subtreeFlags&13878)!==0)return!0;d=d.sibling}return!1}function cu(d,m,E,R){if(vi)for(E=m.child;E!==null;){if(E.tag===5||E.tag===6)ed(d,E.stateNode);else if(!(E.tag===4||Er&&E.tag===27)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===m)break;for(;E.sibling===null;){if(E.return===null||E.return===m)return;E=E.return}E.sibling.return=E.return,E=E.sibling}else if(Zs)for(var U=m.child;U!==null;){if(U.tag===5){var k=U.stateNode;E&&R&&(k=gb(k,U.type,U.memoizedProps)),ed(d,k)}else if(U.tag===6)k=U.stateNode,E&&R&&(k=Ov(k,U.memoizedProps)),ed(d,k);else if(U.tag!==4){if(U.tag===22&&U.memoizedState!==null)k=U.child,k!==null&&(k.return=U),cu(d,U,!0,!0);else if(U.child!==null){U.child.return=U,U=U.child;continue}}if(U===m)break;for(;U.sibling===null;){if(U.return===null||U.return===m)return;U=U.return}U.sibling.return=U.return,U=U.sibling}}function L_(d,m,E,R){if(Zs)for(var U=m.child;U!==null;){if(U.tag===5){var k=U.stateNode;E&&R&&(k=gb(k,U.type,U.memoizedProps)),Rv(d,k)}else if(U.tag===6)k=U.stateNode,E&&R&&(k=Ov(k,U.memoizedProps)),Rv(d,k);else if(U.tag!==4){if(U.tag===22&&U.memoizedState!==null)k=U.child,k!==null&&(k.return=U),L_(d,U,!(U.memoizedProps!==null&&U.memoizedProps.mode==="manual"),!0);else if(U.child!==null){U.child.return=U,U=U.child;continue}}if(U===m)break;for(;U.sibling===null;){if(U.return===null||U.return===m)return;U=U.return}U.sibling.return=U.return,U=U.sibling}}function zh(d,m){if(Zs&&vf(d,m)){d=m.stateNode;var E=d.containerInfo,R=Xp();L_(R,m,!1,!1),d.pendingChildren=R,Ea(m),pb(E,R)}}function Op(d,m,E,R){if(vi)d.memoizedProps!==R&&Ea(m);else if(Zs){var U=d.stateNode,k=d.memoizedProps;if((d=vf(d,m))||k!==R){var ie=Vi.current;k=db(U,E,k,R,!d,null),k===U?m.stateNode=U:(Gp(k,E,R,ie)&&Ea(m),m.stateNode=k,d?cu(k,m,!1,!1):Ea(m))}else m.stateNode=U}}function Dp(d,m,E){if(Ev(m,E)){if(d.flags|=16777216,!wv(m,E))if(xr())d.flags|=8192;else throw Xr=ca,ld}else d.flags&=-16777217}function Up(d,m){if(Cb(m)){if(d.flags|=16777216,!Fv(m))if(xr())d.flags|=8192;else throw Xr=ca,ld}else d.flags&=-16777217}function yf(d,m){m!==null&&(d.flags|=4),d.flags&16384&&(m=d.tag!==22?I():536870912,d.lanes|=m,or|=m)}function _f(d,m){if(!Nn)switch(d.tailMode){case"hidden":m=d.tail;for(var E=null;m!==null;)m.alternate!==null&&(E=m),m=m.sibling;E===null?d.tail=null:E.sibling=null;break;case"collapsed":E=d.tail;for(var R=null;E!==null;)E.alternate!==null&&(R=E),E=E.sibling;R===null?m||d.tail===null?d.tail=null:d.tail.sibling=null:R.sibling=null}}function gi(d){var m=d.alternate!==null&&d.alternate.child===d.child,E=0,R=0;if(m)for(var U=d.child;U!==null;)E|=U.lanes|U.childLanes,R|=U.subtreeFlags&31457280,R|=U.flags&31457280,U.return=d,U=U.sibling;else for(U=d.child;U!==null;)E|=U.lanes|U.childLanes,R|=U.subtreeFlags,R|=U.flags,U.return=d,U=U.sibling;return d.subtreeFlags|=R,d.childLanes=E,m}function I_(d,m,E){var R=m.pendingProps;switch(ue(m),m.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gi(m),null;case 1:return gi(m),null;case 3:return E=m.stateNode,R=null,d!==null&&(R=d.memoizedState.cache),m.memoizedState.cache!==R&&(m.flags|=2048),el(Oi),ce(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(d===null||d.child===null)&&(qe(m)?Ea(m):d===null||d.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,ws!==null&&(sl(ws),ws=null))),zh(d,m),gi(m),null;case 26:if(Za){E=m.type;var U=m.memoizedState;return d===null?(Ea(m),U!==null?(gi(m),Up(m,U)):(gi(m),Dp(m,E,R))):U?U!==d.memoizedState?(Ea(m),gi(m),Up(m,U)):(gi(m),m.flags&=-16777217):(vi?d.memoizedProps!==R&&Ea(m):Op(d,m,E,R),gi(m),Dp(m,E,R)),null}case 27:if(Er){if(de(m),E=yl.current,U=m.type,d!==null&&m.stateNode!=null)vi?d.memoizedProps!==R&&Ea(m):Op(d,m,U,R);else{if(!R){if(m.stateNode===null)throw Error(r(166));return gi(m),null}d=Vi.current,qe(m)?We(m,d):(d=Jp(U,R,E,d,!0),m.stateNode=d,Ea(m))}return gi(m),null}case 5:if(de(m),E=m.type,d!==null&&m.stateNode!=null)Op(d,m,E,R);else{if(!R){if(m.stateNode===null)throw Error(r(166));return gi(m),null}d=Vi.current,qe(m)?We(m,d):(U=xv(E,R,yl.current,d,m),cu(U,m,!1,!1),m.stateNode=U,Gp(U,E,R,d)&&Ea(m))}return gi(m),Dp(m,m.type,m.pendingProps),null;case 6:if(d&&m.stateNode!=null)E=d.memoizedProps,vi?E!==R&&Ea(m):Zs&&(E!==R?(m.stateNode=Fi(R,yl.current,Vi.current,m),Ea(m)):m.stateNode=d.stateNode);else{if(typeof R!="string"&&m.stateNode===null)throw Error(r(166));if(d=yl.current,E=Vi.current,qe(m)){if(!Ra)throw Error(r(176));if(d=m.stateNode,E=m.memoizedProps,R=null,U=Gi,U!==null)switch(U.tag){case 27:case 5:R=U.memoizedProps}Zp(d,E,m,R)||ve(m)}else m.stateNode=Fi(R,d,E,m)}return gi(m),null;case 13:if(R=m.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(U=qe(m),R!==null&&R.dehydrated!==null){if(d===null){if(!U)throw Error(r(318));if(!Ra)throw Error(r(344));if(U=m.memoizedState,U=U!==null?U.dehydrated:null,!U)throw Error(r(317));Sb(U,m)}else _e(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;gi(m),U=!1}else ws!==null&&(sl(ws),ws=null),U=!0;if(!U)return m.flags&256?(zn(m),m):(zn(m),null)}if(zn(m),(m.flags&128)!==0)return m.lanes=E,m;if(E=R!==null,d=d!==null&&d.memoizedState!==null,E){R=m.child,U=null,R.alternate!==null&&R.alternate.memoizedState!==null&&R.alternate.memoizedState.cachePool!==null&&(U=R.alternate.memoizedState.cachePool.pool);var k=null;R.memoizedState!==null&&R.memoizedState.cachePool!==null&&(k=R.memoizedState.cachePool.pool),k!==U&&(R.flags|=2048)}return E!==d&&E&&(m.child.flags|=8192),yf(m,m.updateQueue),gi(m),null;case 4:return ce(),zh(d,m),d===null&&W_(m.stateNode.containerInfo),gi(m),null;case 10:return el(m.type),gi(m),null;case 19:if(w(ri),U=m.memoizedState,U===null)return gi(m),null;if(R=(m.flags&128)!==0,k=U.rendering,k===null)if(R)_f(U,!1);else{if(_i!==0||d!==null&&(d.flags&128)!==0)for(d=m.child;d!==null;){if(k=_n(d),k!==null){for(m.flags|=128,_f(U,!1),d=k.updateQueue,m.updateQueue=d,yf(m,d),m.subtreeFlags=0,d=E,E=m.child;E!==null;)mu(E,d),E=E.sibling;return T(ri,ri.current&1|2),m.child}d=d.sibling}U.tail!==null&&Qa()>ns&&(m.flags|=128,R=!0,_f(U,!1),m.lanes=4194304)}else{if(!R)if(d=_n(k),d!==null){if(m.flags|=128,R=!0,d=d.updateQueue,m.updateQueue=d,yf(m,d),_f(U,!0),U.tail===null&&U.tailMode==="hidden"&&!k.alternate&&!Nn)return gi(m),null}else 2*Qa()-U.renderingStartTime>ns&&E!==536870912&&(m.flags|=128,R=!0,_f(U,!1),m.lanes=4194304);U.isBackwards?(k.sibling=m.child,m.child=k):(d=U.last,d!==null?d.sibling=k:m.child=k,U.last=k)}return U.tail!==null?(m=U.tail,U.rendering=m,U.tail=m.sibling,U.renderingStartTime=Qa(),m.sibling=null,d=ri.current,T(ri,R?d&1|2:d&1),m):(gi(m),null);case 22:case 23:return zn(m),Li(),R=m.memoizedState!==null,d!==null?d.memoizedState!==null!==R&&(m.flags|=8192):R&&(m.flags|=8192),R?(E&536870912)!==0&&(m.flags&128)===0&&(gi(m),m.subtreeFlags&6&&(m.flags|=8192)):gi(m),E=m.updateQueue,E!==null&&yf(m,E.retryQueue),E=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(E=d.memoizedState.cachePool.pool),R=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(R=m.memoizedState.cachePool.pool),R!==E&&(m.flags|=2048),d!==null&&w(Au),null;case 24:return E=null,d!==null&&(E=d.memoizedState.cache),m.memoizedState.cache!==E&&(m.flags|=2048),el(Oi),gi(m),null;case 25:return null}throw Error(r(156,m.tag))}function gw(d,m){switch(ue(m),m.tag){case 1:return d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 3:return el(Oi),ce(),d=m.flags,(d&65536)!==0&&(d&128)===0?(m.flags=d&-65537|128,m):null;case 26:case 27:case 5:return de(m),null;case 13:if(zn(m),d=m.memoizedState,d!==null&&d.dehydrated!==null){if(m.alternate===null)throw Error(r(340));_e()}return d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 19:return w(ri),null;case 4:return ce(),null;case 10:return el(m.type),null;case 22:case 23:return zn(m),Li(),d!==null&&w(Au),d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 24:return el(Oi),null;case 25:return null;default:return null}}function B_(d,m){switch(ue(m),m.tag){case 3:el(Oi),ce();break;case 26:case 27:case 5:de(m);break;case 4:ce();break;case 13:zn(m);break;case 19:w(ri);break;case 10:el(m.type);break;case 22:case 23:zn(m),Li(),d!==null&&w(Au);break;case 24:el(Oi)}}function kh(d,m){try{var E=m.updateQueue,R=E!==null?E.lastEffect:null;if(R!==null){var U=R.next;E=U;do{if((E.tag&d)===d){R=void 0;var k=E.create,ie=E.inst;R=k(),ie.destroy=R}E=E.next}while(E!==U)}}catch(pe){Hn(m,m.return,pe)}}function rc(d,m,E){try{var R=m.updateQueue,U=R!==null?R.lastEffect:null;if(U!==null){var k=U.next;R=k;do{if((R.tag&d)===d){var ie=R.inst,pe=ie.destroy;if(pe!==void 0){ie.destroy=void 0,U=m;var Re=E;try{pe()}catch(tt){Hn(U,Re,tt)}}}R=R.next}while(R!==k)}}catch(tt){Hn(m,m.return,tt)}}function z_(d){var m=d.updateQueue;if(m!==null){var E=d.stateNode;try{Je(m,E)}catch(R){Hn(d,d.return,R)}}}function wa(d,m,E){E.props=Ya(d.type,d.memoizedProps),E.state=d.memoizedState;try{E.componentWillUnmount()}catch(R){Hn(d,m,R)}}function Xs(d,m){try{var E=d.ref;if(E!==null){var R=d.stateNode;switch(d.tag){case 26:case 27:case 5:var U=yu(R);break;default:U=R}typeof E=="function"?d.refCleanup=E(U):E.current=U}}catch(k){Hn(d,m,k)}}function Ta(d,m){var E=d.ref,R=d.refCleanup;if(E!==null)if(typeof R=="function")try{R()}catch(U){Hn(d,m,U)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof E=="function")try{E(null)}catch(U){Hn(d,m,U)}else E.current=null}function lv(d){var m=d.type,E=d.memoizedProps,R=d.stateNode;try{ab(R,m,E,d)}catch(U){Hn(d,d.return,U)}}function cv(d,m,E){try{sb(d.stateNode,d.type,E,m,d)}catch(R){Hn(d,d.return,R)}}function uv(d){return d.tag===5||d.tag===3||(Za?d.tag===26:!1)||(Er?d.tag===27:!1)||d.tag===4}function Fh(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||uv(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&(!Er||d.tag!==27)&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function fv(d,m,E){var R=d.tag;if(R===5||R===6)d=d.stateNode,m?Av(E,d,m):Mv(E,d);else if(!(R===4||Er&&R===27)&&(d=d.child,d!==null))for(fv(d,m,E),d=d.sibling;d!==null;)fv(d,m,E),d=d.sibling}function Np(d,m,E){var R=d.tag;if(R===5||R===6)d=d.stateNode,m?ob(E,d,m):ib(E,d);else if(!(R===4||Er&&R===27)&&(d=d.child,d!==null))for(Np(d,m,E),d=d.sibling;d!==null;)Np(d,m,E),d=d.sibling}function uu(d,m,E){d=d.containerInfo;try{mb(d,E)}catch(R){Hn(m,m.return,R)}}function hv(d,m){for(q_(d.containerInfo),Vt=m;Vt!==null;)if(d=Vt,m=d.child,(d.subtreeFlags&1028)!==0&&m!==null)m.return=d,Vt=m;else for(;Vt!==null;){d=Vt;var E=d.alternate;switch(m=d.flags,d.tag){case 0:break;case 11:case 15:break;case 1:if((m&1024)!==0&&E!==null){m=void 0;var R=d,U=E.memoizedProps;E=E.memoizedState;var k=R.stateNode;try{var ie=Ya(R.type,U,R.elementType===R.type);m=k.getSnapshotBeforeUpdate(ie,E),k.__reactInternalSnapshotBeforeUpdate=m}catch(pe){Hn(R,R.return,pe)}}break;case 3:(m&1024)!==0&&vi&&hb(d.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((m&1024)!==0)throw Error(r(163))}if(m=d.sibling,m!==null){m.return=d.return,Vt=m;break}Vt=d.return}return ie=Qn,Qn=!1,ie}function bf(d,m,E){var R=E.flags;switch(E.tag){case 0:case 11:case 15:nl(d,E),R&4&&kh(5,E);break;case 1:if(nl(d,E),R&4)if(d=E.stateNode,m===null)try{d.componentDidMount()}catch(pe){Hn(E,E.return,pe)}else{var U=Ya(E.type,m.memoizedProps);m=m.memoizedState;try{d.componentDidUpdate(U,m,d.__reactInternalSnapshotBeforeUpdate)}catch(pe){Hn(E,E.return,pe)}}R&64&&z_(E),R&512&&Xs(E,E.return);break;case 3:if(nl(d,E),R&64&&(R=E.updateQueue,R!==null)){if(d=null,E.child!==null)switch(E.child.tag){case 27:case 5:d=yu(E.child.stateNode);break;case 1:d=E.child.stateNode}try{Je(R,d)}catch(pe){Hn(E,E.return,pe)}}break;case 26:if(Za){nl(d,E),R&512&&Xs(E,E.return);break}case 27:case 5:nl(d,E),m===null&&R&4&&lv(E),R&512&&Xs(E,E.return);break;case 12:nl(d,E);break;case 13:nl(d,E),R&4&&fu(d,E);break;case 22:if(U=E.memoizedState!==null||wl,!U){m=m!==null&&m.memoizedState!==null||en;var k=wl,ie=en;wl=U,(en=m)&&!ie?ac(d,E,(E.subtreeFlags&8772)!==0):nl(d,E),wl=k,en=ie}R&512&&(E.memoizedProps.mode==="manual"?Xs(E,E.return):Ta(E,E.return));break;default:nl(d,E)}}function Pp(d){var m=d.alternate;m!==null&&(d.alternate=null,Pp(m)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(m=d.stateNode,m!==null&&X_(m)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function _s(d,m,E){for(E=E.child;E!==null;)tl(d,m,E),E=E.sibling}function tl(d,m,E){if(rr&&typeof rr.onCommitFiberUnmount=="function")try{rr.onCommitFiberUnmount(Pf,E)}catch{}switch(E.tag){case 26:if(Za){en||Ta(E,m),_s(d,m,E),E.memoizedState?Bv(E.memoizedState):E.stateNode&&Df(E.stateNode);break}case 27:if(Er){en||Ta(E,m);var R=Bn,U=Wi;Bn=E.stateNode,_s(d,m,E),Gv(E.stateNode),Bn=R,Wi=U;break}case 5:en||Ta(E,m);case 6:if(vi){if(R=Bn,U=Wi,Bn=null,_s(d,m,E),Bn=R,Wi=U,Bn!==null)if(Wi)try{cb(Bn,E.stateNode)}catch(k){Hn(E,m,k)}else try{lb(Bn,E.stateNode)}catch(k){Hn(E,m,k)}}else _s(d,m,E);break;case 18:vi&&Bn!==null&&(Wi?Nv(Bn,E.stateNode):wb(Bn,E.stateNode));break;case 4:vi?(R=Bn,U=Wi,Bn=E.stateNode.containerInfo,Wi=!0,_s(d,m,E),Bn=R,Wi=U):(Zs&&uu(E.stateNode,E,Xp()),_s(d,m,E));break;case 0:case 11:case 14:case 15:en||rc(2,E,m),en||rc(4,E,m),_s(d,m,E);break;case 1:en||(Ta(E,m),R=E.stateNode,typeof R.componentWillUnmount=="function"&&wa(E,m,R)),_s(d,m,E);break;case 21:_s(d,m,E);break;case 22:en||Ta(E,m),en=(R=en)||E.memoizedState!==null,_s(d,m,E),en=R;break;default:_s(d,m,E)}}function fu(d,m){if(Ra&&m.memoizedState===null&&(d=m.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{Qp(d)}catch(E){Hn(m,m.return,E)}}function dv(d){switch(d.tag){case 13:case 19:var m=d.stateNode;return m===null&&(m=d.stateNode=new Sn),m;case 22:return d=d.stateNode,m=d._retryCache,m===null&&(m=d._retryCache=new Sn),m;default:throw Error(r(435,d.tag))}}function Lp(d,m){var E=dv(d);m.forEach(function(R){var U=Fp.bind(null,d,R);E.has(R)||(E.add(R),R.then(U,U))})}function tr(d,m){var E=m.deletions;if(E!==null)for(var R=0;R<E.length;R++){var U=E[R],k=d,ie=m;if(vi){var pe=ie;e:for(;pe!==null;){switch(pe.tag){case 27:case 5:Bn=pe.stateNode,Wi=!1;break e;case 3:Bn=pe.stateNode.containerInfo,Wi=!0;break e;case 4:Bn=pe.stateNode.containerInfo,Wi=!0;break e}pe=pe.return}if(Bn===null)throw Error(r(160));tl(k,ie,U),Bn=null,Wi=!1}else tl(k,ie,U);k=U.alternate,k!==null&&(k.return=null),U.return=null}if(m.subtreeFlags&13878)for(m=m.child;m!==null;)pv(m,d),m=m.sibling}function pv(d,m){var E=d.alternate,R=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:tr(m,d),Ma(d),R&4&&(rc(3,d,d.return),kh(3,d),rc(5,d,d.return));break;case 1:tr(m,d),Ma(d),R&512&&(en||E===null||Ta(E,E.return)),R&64&&wl&&(d=d.updateQueue,d!==null&&(R=d.callbacks,R!==null&&(E=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=E===null?R:E.concat(R))));break;case 26:if(Za){var U=Zr;tr(m,d),Ma(d),R&512&&(en||E===null||Ta(E,E.return)),R&4&&(R=E!==null?E.memoizedState:null,m=d.memoizedState,E===null?m===null?d.stateNode===null?d.stateNode=Mb(U,d.type,d.memoizedProps,d):zv(U,d.type,d.stateNode):d.stateNode=Iv(U,m,d.memoizedProps):R!==m?(R===null?E.stateNode!==null&&Df(E.stateNode):Bv(R),m===null?zv(U,d.type,d.stateNode):Iv(U,m,d.memoizedProps)):m===null&&d.stateNode!==null&&cv(d,d.memoizedProps,E.memoizedProps));break}case 27:if(Er&&R&4&&d.alternate===null){U=d.stateNode;var k=d.memoizedProps;try{Rb(U),Vv(d.type,k,U,d)}catch(pt){Hn(d,d.return,pt)}}case 5:if(tr(m,d),Ma(d),R&512&&(en||E===null||Ta(E,E.return)),vi){if(d.flags&32){m=d.stateNode;try{$p(m)}catch(pt){Hn(d,d.return,pt)}}R&4&&d.stateNode!=null&&(m=d.memoizedProps,cv(d,m,E!==null?E.memoizedProps:m)),R&1024&&($n=!0)}break;case 6:if(tr(m,d),Ma(d),R&4&&vi){if(d.stateNode===null)throw Error(r(162));R=d.memoizedProps,E=E!==null?E.memoizedProps:R,m=d.stateNode;try{rb(m,E,R)}catch(pt){Hn(d,d.return,pt)}}break;case 3:if(Za?(Ab(),U=Zr,Zr=yr(m.containerInfo),tr(m,d),Zr=U):tr(m,d),Ma(d),R&4){if(vi&&Ra&&E!==null&&E.memoizedState.isDehydrated)try{Eb(m.containerInfo)}catch(pt){Hn(d,d.return,pt)}if(Zs){R=m.containerInfo,E=m.pendingChildren;try{mb(R,E)}catch(pt){Hn(d,d.return,pt)}}}$n&&($n=!1,mv(d));break;case 4:Za?(E=Zr,Zr=yr(d.stateNode.containerInfo),tr(m,d),Ma(d),Zr=E):(tr(m,d),Ma(d)),R&4&&Zs&&uu(d.stateNode,d,d.stateNode.pendingChildren);break;case 12:tr(m,d),Ma(d);break;case 13:tr(m,d),Ma(d),d.child.flags&8192&&d.memoizedState!==null!=(E!==null&&E.memoizedState!==null)&&($v=Qa()),R&4&&(R=d.updateQueue,R!==null&&(d.updateQueue=null,Lp(d,R)));break;case 22:R&512&&(en||E===null||Ta(E,E.return)),U=d.memoizedState!==null;var ie=E!==null&&E.memoizedState!==null,pe=wl,Re=en;if(wl=pe||U,en=Re||ie,tr(m,d),en=Re,wl=pe,Ma(d),m=d.stateNode,m._current=d,m._visibility&=-3,m._visibility|=m._pendingVisibility&2,R&8192&&(m._visibility=U?m._visibility&-2:m._visibility|1,U&&(m=wl||en,E===null||ie||m||Sf(d)),vi&&(d.memoizedProps===null||d.memoizedProps.mode!=="manual"))){e:if(E=null,vi)for(m=d;;){if(m.tag===5||Za&&m.tag===26||Er&&m.tag===27){if(E===null){ie=E=m;try{k=ie.stateNode,U?ub(k):Ew(ie.stateNode,ie.memoizedProps)}catch(pt){Hn(ie,ie.return,pt)}}}else if(m.tag===6){if(E===null){ie=m;try{var tt=ie.stateNode;U?fb(tt):Cv(tt,ie.memoizedProps)}catch(pt){Hn(ie,ie.return,pt)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===d)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break e;for(;m.sibling===null;){if(m.return===null||m.return===d)break e;E===m&&(E=null),m=m.return}E===m&&(E=null),m.sibling.return=m.return,m=m.sibling}}R&4&&(R=d.updateQueue,R!==null&&(E=R.retryQueue,E!==null&&(R.retryQueue=null,Lp(d,E))));break;case 19:tr(m,d),Ma(d),R&4&&(R=d.updateQueue,R!==null&&(d.updateQueue=null,Lp(d,R)));break;case 21:break;default:tr(m,d),Ma(d)}}function Ma(d){var m=d.flags;if(m&2){try{if(vi&&(!Er||d.tag!==27)){e:{for(var E=d.return;E!==null;){if(uv(E)){var R=E;break e}E=E.return}throw Error(r(160))}switch(R.tag){case 27:if(Er){var U=R.stateNode,k=Fh(d);Np(d,k,U);break}case 5:var ie=R.stateNode;R.flags&32&&($p(ie),R.flags&=-33);var pe=Fh(d);Np(d,pe,ie);break;case 3:case 4:var Re=R.stateNode.containerInfo,tt=Fh(d);fv(d,tt,Re);break;default:throw Error(r(161))}}}catch(pt){Hn(d,d.return,pt)}d.flags&=-3}m&4096&&(d.flags&=-4097)}function mv(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var m=d;mv(m),m.tag===5&&m.flags&1024&&Z_(m.stateNode),d=d.sibling}}function nl(d,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)bf(d,m.alternate,m),m=m.sibling}function Sf(d){for(d=d.child;d!==null;){var m=d;switch(m.tag){case 0:case 11:case 14:case 15:rc(4,m,m.return),Sf(m);break;case 1:Ta(m,m.return);var E=m.stateNode;typeof E.componentWillUnmount=="function"&&wa(m,m.return,E),Sf(m);break;case 26:case 27:case 5:Ta(m,m.return),Sf(m);break;case 22:Ta(m,m.return),m.memoizedState===null&&Sf(m);break;default:Sf(m)}d=d.sibling}}function ac(d,m,E){for(E=E&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var R=m.alternate,U=d,k=m,ie=k.flags;switch(k.tag){case 0:case 11:case 15:ac(U,k,E),kh(4,k);break;case 1:if(ac(U,k,E),R=k,U=R.stateNode,typeof U.componentDidMount=="function")try{U.componentDidMount()}catch(tt){Hn(R,R.return,tt)}if(R=k,U=R.updateQueue,U!==null){var pe=R.stateNode;try{var Re=U.shared.hiddenCallbacks;if(Re!==null)for(U.shared.hiddenCallbacks=null,U=0;U<Re.length;U++)ye(Re[U],pe)}catch(tt){Hn(R,R.return,tt)}}E&&ie&64&&z_(k),Xs(k,k.return);break;case 26:case 27:case 5:ac(U,k,E),E&&R===null&&ie&4&&lv(k),Xs(k,k.return);break;case 12:ac(U,k,E);break;case 13:ac(U,k,E),E&&ie&4&&fu(U,k);break;case 22:k.memoizedState===null&&ac(U,k,E),Xs(k,k.return);break;default:ac(U,k,E)}m=m.sibling}}function Ip(d,m){var E=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(E=d.memoizedState.cachePool.pool),d=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(d=m.memoizedState.cachePool.pool),d!==E&&(d!=null&&d.refCount++,E!=null&&Bh(E))}function Bp(d,m){d=null,m.alternate!==null&&(d=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==d&&(m.refCount++,d!=null&&Bh(d))}function il(d,m,E,R){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)bs(d,m,E,R),m=m.sibling}function bs(d,m,E,R){var U=m.flags;switch(m.tag){case 0:case 11:case 15:il(d,m,E,R),U&2048&&kh(9,m);break;case 3:il(d,m,E,R),U&2048&&(d=null,m.alternate!==null&&(d=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==d&&(m.refCount++,d!=null&&Bh(d)));break;case 12:if(U&2048){il(d,m,E,R),d=m.stateNode;try{var k=m.memoizedProps,ie=k.id,pe=k.onPostCommit;typeof pe=="function"&&pe(ie,m.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(Re){Hn(m,m.return,Re)}}else il(d,m,E,R);break;case 23:break;case 22:k=m.stateNode,m.memoizedState!==null?k._visibility&4?il(d,m,E,R):yo(d,m):k._visibility&4?il(d,m,E,R):(k._visibility|=4,Ur(d,m,E,R,(m.subtreeFlags&10256)!==0)),U&2048&&Ip(m.alternate,m);break;case 24:il(d,m,E,R),U&2048&&Bp(m.alternate,m);break;default:il(d,m,E,R)}}function Ur(d,m,E,R,U){for(U=U&&(m.subtreeFlags&10256)!==0,m=m.child;m!==null;){var k=d,ie=m,pe=E,Re=R,tt=ie.flags;switch(ie.tag){case 0:case 11:case 15:Ur(k,ie,pe,Re,U),kh(8,ie);break;case 23:break;case 22:var pt=ie.stateNode;ie.memoizedState!==null?pt._visibility&4?Ur(k,ie,pe,Re,U):yo(k,ie):(pt._visibility|=4,Ur(k,ie,pe,Re,U)),U&&tt&2048&&Ip(ie.alternate,ie);break;case 24:Ur(k,ie,pe,Re,U),U&&tt&2048&&Bp(ie.alternate,ie);break;default:Ur(k,ie,pe,Re,U)}m=m.sibling}}function yo(d,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var E=d,R=m,U=R.flags;switch(R.tag){case 22:yo(E,R),U&2048&&Ip(R.alternate,R);break;case 24:yo(E,R),U&2048&&Bp(R.alternate,R);break;default:yo(E,R)}m=m.sibling}}function rl(d){if(d.subtreeFlags&Uc)for(d=d.child;d!==null;)Hh(d),d=d.sibling}function Hh(d){switch(d.tag){case 26:rl(d),d.flags&Uc&&(d.memoizedState!==null?Hv(Zr,d.memoizedState,d.memoizedProps):Tv(d.type,d.memoizedProps));break;case 5:rl(d),d.flags&Uc&&Tv(d.type,d.memoizedProps);break;case 3:case 4:if(Za){var m=Zr;Zr=yr(d.stateNode.containerInfo),rl(d),Zr=m}else rl(d);break;case 22:d.memoizedState===null&&(m=d.alternate,m!==null&&m.memoizedState!==null?(m=Uc,Uc=16777216,rl(d),Uc=m):rl(d));break;default:rl(d)}}function Vh(d){var m=d.alternate;if(m!==null&&(d=m.child,d!==null)){m.child=null;do m=d.sibling,d.sibling=null,d=m;while(d!==null)}}function hu(d){var m=d.deletions;if((d.flags&16)!==0){if(m!==null)for(var E=0;E<m.length;E++){var R=m[E];Vt=R,jh(R,d)}Vh(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)al(d),d=d.sibling}function al(d){switch(d.tag){case 0:case 11:case 15:hu(d),d.flags&2048&&rc(9,d,d.return);break;case 3:hu(d);break;case 12:hu(d);break;case 22:var m=d.stateNode;d.memoizedState!==null&&m._visibility&4&&(d.return===null||d.return.tag!==13)?(m._visibility&=-5,Gh(d)):hu(d);break;default:hu(d)}}function Gh(d){var m=d.deletions;if((d.flags&16)!==0){if(m!==null)for(var E=0;E<m.length;E++){var R=m[E];Vt=R,jh(R,d)}Vh(d)}for(d=d.child;d!==null;){switch(m=d,m.tag){case 0:case 11:case 15:rc(8,m,m.return),Gh(m);break;case 22:E=m.stateNode,E._visibility&4&&(E._visibility&=-5,Gh(m));break;default:Gh(m)}d=d.sibling}}function jh(d,m){for(;Vt!==null;){var E=Vt;switch(E.tag){case 0:case 11:case 15:rc(8,E,m);break;case 23:case 22:if(E.memoizedState!==null&&E.memoizedState.cachePool!==null){var R=E.memoizedState.cachePool.pool;R!=null&&R.refCount++}break;case 24:Bh(E.memoizedState.cache)}if(R=E.child,R!==null)R.return=E,Vt=R;else e:for(E=d;Vt!==null;){R=Vt;var U=R.sibling,k=R.return;if(Pp(R),R===E){Vt=null;break e}if(U!==null){U.return=k,Vt=U;break e}Vt=k}}}function sc(d){var m=qp(d);if(m!=null){if(typeof m.memoizedProps["data-testname"]!="string")throw Error(r(364));return m}if(d=eb(d),d===null)throw Error(r(362));return d.stateNode.current}function zp(d,m){var E=d.tag;switch(m.$$typeof){case di:if(d.type===m.value)return!0;break;case ro:e:{for(m=m.value,d=[d,0],E=0;E<d.length;){var R=d[E++],U=R.tag,k=d[E++],ie=m[k];if(U!==5&&U!==26&&U!==27||!wo(R)){for(;ie!=null&&zp(R,ie);)k++,ie=m[k];if(k===m.length){m=!0;break e}else for(R=R.child;R!==null;)d.push(R,k),R=R.sibling}}m=!1}return m;case Oo:if((E===5||E===26||E===27)&&nb(d.stateNode,m.value))return!0;break;case fa:if((E===5||E===6||E===26||E===27)&&(d=tb(d),d!==null&&0<=d.indexOf(m.value)))return!0;break;case Ff:if((E===5||E===26||E===27)&&(d=d.memoizedProps["data-testname"],typeof d=="string"&&d.toLowerCase()===m.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function Aa(d){switch(d.$$typeof){case di:return"<"+(s(d.value)||"Unknown")+">";case ro:return":has("+(Aa(d)||"")+")";case Oo:return'[role="'+d.value+'"]';case fa:return'"'+d.value+'"';case Ff:return'[data-testname="'+d.value+'"]';default:throw Error(r(365))}}function du(d,m){var E=[];d=[d,0];for(var R=0;R<d.length;){var U=d[R++],k=U.tag,ie=d[R++],pe=m[ie];if(k!==5&&k!==26&&k!==27||!wo(U)){for(;pe!=null&&zp(U,pe);)ie++,pe=m[ie];if(ie===m.length)E.push(U);else for(U=U.child;U!==null;)d.push(U,ie),U=U.sibling}}return E}function oc(d,m){if(!Of)throw Error(r(363));d=sc(d),d=du(d,m),m=[],d=Array.from(d);for(var E=0;E<d.length;){var R=d[E++],U=R.tag;if(U===5||U===26||U===27)wo(R)||m.push(R.stateNode);else for(R=R.child;R!==null;)d.push(R),R=R.sibling}return m}function jr(){if((wn&2)!==0&&Tn!==0)return Tn&-Tn;if(Yt.T!==null){var d=hi;return d!==0?d:je()}return Y_()}function qh(){ts===0&&(ts=(Tn&536870912)===0||Nn?z():536870912);var d=Ua.current;return d!==null&&(d.flags|=32),ts}function ii(d,m,E){(d===Xn&&Wn===2||d.cancelPendingCommit!==null)&&(lc(d,0),sa(d,Tn,ts,!1)),H(d,E),((wn&2)===0||d!==Xn)&&(d===Xn&&((wn&2)===0&&(Ml|=E),_i===4&&sa(d,Tn,ts,!1)),Pe(d))}function Xa(d,m,E){if((wn&6)!==0)throw Error(r(327));var R=!E&&(m&60)===0&&(m&d.expiredLanes)===0||D(d,m),U=R?k_(d,m):Yh(d,m,!0),k=R;do{if(U===0){Rs&&!R&&sa(d,m,0,!1);break}else if(U===6)sa(d,m,0,!Cs);else{if(E=d.current.alternate,k&&!ol(E)){U=Yh(d,m,!1),k=!1;continue}if(U===2){if(k=m,d.errorRecoveryDisabledLanes&k)var ie=0;else ie=d.pendingLanes&-536870913,ie=ie!==0?ie:ie&536870912?536870912:0;if(ie!==0){m=ie;e:{var pe=d;U=Hf;var Re=Ra&&pe.current.memoizedState.isDehydrated;if(Re&&(lc(pe,ie).flags|=256),ie=Yh(pe,ie,!1),ie!==2){if(Cu&&!Re){pe.errorRecoveryDisabledLanes|=k,Ml|=k,U=4;break e}k=Ds,Ds=U,k!==null&&sl(k)}U=ie}if(k=!1,U!==2)continue}}if(U===1){lc(d,0),sa(d,m,0,!0);break}e:{switch(R=d,U){case 0:case 1:throw Error(r(345));case 4:if((m&4194176)===m){sa(R,m,ts,!Cs);break e}break;case 2:Ds=null;break;case 3:case 5:break;default:throw Error(r(329))}if(R.finishedWork=E,R.finishedLanes=m,(m&62914560)===m&&(k=$v+300-Qa(),10<k)){if(sa(R,m,ts,!Cs),N(R,0)!==0)break e;R.timeoutHandle=jp(_o.bind(null,R,E,Ds,Ru,cm,m,ts,Ml,or,Cs,2,-0,0),k);break e}_o(R,E,Ds,Ru,cm,m,ts,Ml,or,Cs,0,-0,0)}}break}while(!0);Pe(d)}function sl(d){Ds===null?Ds=d:Ds.push.apply(Ds,d)}function _o(d,m,E,R,U,k,ie,pe,Re,tt,pt,Et,dt){var tn=m.subtreeFlags;if((tn&8192||(tn&16785408)===16785408)&&(Sw(),Hh(m),m=K_(),m!==null)){d.cancelPendingCommit=m(kp.bind(null,d,E,R,U,ie,pe,Re,1,Et,dt)),sa(d,k,ie,!tt);return}kp(d,E,R,U,ie,pe,Re,pt,Et,dt)}function ol(d){for(var m=d;;){var E=m.tag;if((E===0||E===11||E===15)&&m.flags&16384&&(E=m.updateQueue,E!==null&&(E=E.stores,E!==null)))for(var R=0;R<E.length;R++){var U=E[R],k=U.getSnapshot;U=U.value;try{if(!la(k(),U))return!1}catch{return!1}}if(E=m.child,m.subtreeFlags&16384&&E!==null)E.return=m,m=E;else{if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function sa(d,m,E,R){m&=~ha,m&=~Ml,d.suspendedLanes|=m,d.pingedLanes&=~m,R&&(d.warmLanes|=m),R=d.expirationTimes;for(var U=m;0<U;){var k=31-Hi(U),ie=1<<k;R[k]=-1,U&=~ie}E!==0&&G(d,E,m)}function gv(){return(wn&6)===0?($(0),!1):!0}function Wh(){if(mn!==null){if(Wn===0)var d=mn.return;else d=mn,As=Dc=null,ba(d),Tu=null,Kr=0,d=mn;for(;d!==null;)B_(d.alternate,d),d=d.return;mn=null}}function lc(d,m){d.finishedWork=null,d.finishedLanes=0;var E=d.timeoutHandle;E!==Rf&&(d.timeoutHandle=Rf,td(E)),E=d.cancelPendingCommit,E!==null&&(d.cancelPendingCommit=null,E()),Wh(),Xn=d,mn=E=cl(d.current,null),Tn=m,Wn=0,sr=null,Cs=!1,Rs=D(d,m),Cu=!1,or=ts=ha=Ml=Os=_i=0,Ds=Hf=null,cm=!1,(m&8)!==0&&(m|=m&32);var R=d.entangledLanes;if(R!==0)for(d=d.entanglements,R&=m;0<R;){var U=31-Hi(R),k=1<<U;m|=d[U],R&=~k}return ao=m,te(),E}function qr(d,m){Jt=null,Yt.H=qi,m===od?(m=Tt(),Wn=3):m===ld?(m=Tt(),Wn=4):Wn=m===Wv?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,sr=m,mn===null&&(_i=1,vs(d,se(m,d.current)))}function xr(){var d=Ua.current;return d===null?!0:(Tn&4194176)===Tn?Ts===null:(Tn&62914560)===Tn||(Tn&536870912)!==0?d===Ts:!1}function Un(){var d=Yt.H;return Yt.H=qi,d===null?qi:d}function Ss(){var d=Yt.A;return Yt.A=Tl,d}function xs(){_i=4,Cs||(Tn&4194176)!==Tn&&Ua.current!==null||(Rs=!0),(Os&134217727)===0&&(Ml&134217727)===0||Xn===null||sa(Xn,Tn,ts,!1)}function Yh(d,m,E){var R=wn;wn|=2;var U=Un(),k=Ss();(Xn!==d||Tn!==m)&&(Ru=null,lc(d,m)),m=!1;var ie=_i;e:do try{if(Wn!==0&&mn!==null){var pe=mn,Re=sr;switch(Wn){case 8:Wh(),ie=6;break e;case 3:case 2:case 6:Ua.current===null&&(m=!0);var tt=Wn;if(Wn=0,sr=null,bo(d,pe,Re,tt),E&&Rs){ie=0;break e}break;default:tt=Wn,Wn=0,sr=null,bo(d,pe,Re,tt)}}pu(),ie=_i;break}catch(pt){qr(d,pt)}while(!0);return m&&d.shellSuspendCounter++,As=Dc=null,wn=R,Yt.H=U,Yt.A=k,mn===null&&(Xn=null,Tn=0,te()),ie}function pu(){for(;mn!==null;)xf(mn)}function k_(d,m){var E=wn;wn|=2;var R=Un(),U=Ss();Xn!==d||Tn!==m?(Ru=null,ns=Qa()+500,lc(d,m)):Rs=D(d,m);e:do try{if(Wn!==0&&mn!==null){m=mn;var k=sr;t:switch(Wn){case 1:Wn=0,sr=null,bo(d,m,k,1);break;case 2:if(et(k)){Wn=0,sr=null,Ef(m);break}m=function(){Wn===2&&Xn===d&&(Wn=7),Pe(d)},k.then(m,m);break e;case 3:Wn=7;break e;case 4:Wn=5;break e;case 7:et(k)?(Wn=0,sr=null,Ef(m)):(Wn=0,sr=null,bo(d,m,k,7));break;case 5:var ie=null;switch(mn.tag){case 26:ie=mn.memoizedState;case 5:case 27:var pe=mn,Re=pe.type,tt=pe.pendingProps;if(ie?Fv(ie):wv(Re,tt)){Wn=0,sr=null;var pt=pe.sibling;if(pt!==null)mn=pt;else{var Et=pe.return;Et!==null?(mn=Et,cc(Et)):mn=null}break t}}Wn=0,sr=null,bo(d,m,k,5);break;case 6:Wn=0,sr=null,bo(d,m,k,6);break;case 8:Wh(),_i=6;break e;default:throw Error(r(462))}}F_();break}catch(dt){qr(d,dt)}while(!0);return As=Dc=null,Yt.H=R,Yt.A=U,wn=E,mn!==null?0:(Xn=null,Tn=0,te(),_i)}function F_(){for(;mn!==null&&!Ec();)xf(mn)}function xf(d){var m=P_(d.alternate,d,ao);d.memoizedProps=d.pendingProps,m===null?cc(d):mn=m}function Ef(d){var m=d,E=m.alternate;switch(m.tag){case 15:case 0:m=Dh(E,m,m.pendingProps,m.type,void 0,Tn);break;case 11:m=Dh(E,m,m.pendingProps,m.type.render,m.ref,Tn);break;case 5:ba(m);default:B_(E,m),m=mn=mu(m,ao),m=P_(E,m,ao)}d.memoizedProps=d.pendingProps,m===null?cc(d):mn=m}function bo(d,m,E,R){As=Dc=null,ba(m),Tu=null,Kr=0;var U=m.return;try{if(Jg(d,U,m,E,Tn)){_i=1,vs(d,se(E,d.current)),mn=null;return}}catch(k){if(U!==null)throw mn=U,k;_i=1,vs(d,se(E,d.current)),mn=null;return}m.flags&32768?(Nn||R===1?d=!0:Rs||(Tn&536870912)!==0?d=!1:(Cs=d=!0,(R===2||R===3||R===6)&&(R=Ua.current,R!==null&&R.tag===13&&(R.flags|=16384))),vv(m,d)):cc(m)}function cc(d){var m=d;do{if((m.flags&32768)!==0){vv(m,Cs);return}d=m.return;var E=I_(m.alternate,m,ao);if(E!==null){mn=E;return}if(m=m.sibling,m!==null){mn=m;return}mn=m=d}while(m!==null);_i===0&&(_i=5)}function vv(d,m){do{var E=gw(d.alternate,d);if(E!==null){E.flags&=32767,mn=E;return}if(E=d.return,E!==null&&(E.flags|=32768,E.subtreeFlags=0,E.deletions=null),!m&&(d=d.sibling,d!==null)){mn=d;return}mn=d=E}while(d!==null);_i=6,mn=null}function kp(d,m,E,R,U,k,ie,pe,Re,tt){var pt=Yt.T,Et=bc();try{oa(2),Yt.T=null,H_(d,m,E,R,Et,U,k,ie,pe,Re,tt)}finally{Yt.T=pt,oa(Et)}}function H_(d,m,E,R,U,k,ie,pe){do uc();while(Nc!==null);if((wn&6)!==0)throw Error(r(327));var Re=d.finishedWork;if(R=d.finishedLanes,Re===null)return null;if(d.finishedWork=null,d.finishedLanes=0,Re===d.current)throw Error(r(177));d.callbackNode=null,d.callbackPriority=0,d.cancelPendingCommit=null;var tt=Re.lanes|Re.childLanes;if(tt|=to,j(d,R,tt,k,ie,pe),d===Xn&&(mn=Xn=null,Tn=0),(Re.subtreeFlags&10256)===0&&(Re.flags&10256)===0||Al||(Al=!0,um=tt,hd=E,V_(Nf,function(){return uc(),null})),E=(Re.flags&15990)!==0,(Re.subtreeFlags&15990)!==0||E?(E=Yt.T,Yt.T=null,k=bc(),oa(2),ie=wn,wn|=4,hv(d,Re),pv(Re,d),bw(d.containerInfo),d.current=Re,bf(d,Re.alternate,Re),vl(),wn=ie,oa(k),Yt.T=E):d.current=Re,Al?(Al=!1,Nc=d,Vf=R):$h(d,tt),tt=d.pendingLanes,tt===0&&(Uo=null),Y(Re.stateNode),Pe(d),m!==null)for(U=d.onRecoverableError,Re=0;Re<m.length;Re++)tt=m[Re],U(tt.value,{componentStack:tt.stack});return(Vf&3)!==0&&uc(),tt=d.pendingLanes,(R&4194218)!==0&&(tt&42)!==0?d===Xv?Ou++:(Ou=0,Xv=d):Ou=0,$(0),null}function $h(d,m){(d.pooledCacheLanes&=m)===0&&(m=d.pooledCache,m!=null&&(d.pooledCache=null,Bh(m)))}function uc(){if(Nc!==null){var d=Nc,m=um;um=0;var E=ee(Vf),R=32>E?32:E;E=Yt.T;var U=bc();try{if(oa(R),Yt.T=null,Nc===null)var k=!1;else{R=hd,hd=null;var ie=Nc,pe=Vf;if(Nc=null,Vf=0,(wn&6)!==0)throw Error(r(331));var Re=wn;if(wn|=4,al(ie.current),bs(ie,ie.current,pe,R),wn=Re,$(0,!1),rr&&typeof rr.onPostCommitFiberRoot=="function")try{rr.onPostCommitFiberRoot(Pf,ie)}catch{}k=!0}return k}finally{oa(U),Yt.T=E,$h(d,m)}}return!1}function wf(d,m,E){m=se(E,m),m=ys(d.stateNode,m,2),d=Ze(d,m,2),d!==null&&(H(d,2),Pe(d))}function Hn(d,m,E){if(d.tag===3)wf(d,d,E);else for(;m!==null;){if(m.tag===3){wf(m,d,E);break}else if(m.tag===1){var R=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof R.componentDidCatch=="function"&&(Uo===null||!Uo.has(R))){d=se(E,d),E=ou(2),R=Ze(m,E,2),R!==null&&(Gr(E,R,m,d),H(R,2),Pe(R));break}}m=m.return}}function fc(d,m,E){var R=d.pingCache;if(R===null){R=d.pingCache=new fd;var U=new Set;R.set(m,U)}else U=R.get(m),U===void 0&&(U=new Set,R.set(m,U));U.has(E)||(Cu=!0,U.add(E),d=Xh.bind(null,d,m,E),m.then(d,d))}function Xh(d,m,E){var R=d.pingCache;R!==null&&R.delete(m),d.pingedLanes|=d.suspendedLanes&E,d.warmLanes&=~E,Xn===d&&(Tn&E)===E&&(_i===4||_i===3&&(Tn&62914560)===Tn&&300>Qa()-$v?(wn&2)===0&&lc(d,0):ha|=E,or===Tn&&(or=0)),Pe(d)}function Kh(d,m){m===0&&(m=I()),d=Ie(d,m),d!==null&&(H(d,m),Pe(d))}function Zh(d){var m=d.memoizedState,E=0;m!==null&&(E=m.retryLane),Kh(d,E)}function Fp(d,m){var E=0;switch(d.tag){case 13:var R=d.stateNode,U=d.memoizedState;U!==null&&(E=U.retryLane);break;case 19:R=d.stateNode;break;case 22:R=d.stateNode._retryCache;break;default:throw Error(r(314))}R!==null&&R.delete(m),Kh(d,E)}function V_(d,m){return Mo(d,m)}function G_(d,m,E,R){this.tag=d,this.key=E,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=R,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ll(d){return d=d.prototype,!(!d||!d.isReactComponent)}function cl(d,m){var E=d.alternate;return E===null?(E=t(d.tag,m,d.key,d.mode),E.elementType=d.elementType,E.type=d.type,E.stateNode=d.stateNode,E.alternate=d,d.alternate=E):(E.pendingProps=m,E.type=d.type,E.flags=0,E.subtreeFlags=0,E.deletions=null),E.flags=d.flags&31457280,E.childLanes=d.childLanes,E.lanes=d.lanes,E.child=d.child,E.memoizedProps=d.memoizedProps,E.memoizedState=d.memoizedState,E.updateQueue=d.updateQueue,m=d.dependencies,E.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},E.sibling=d.sibling,E.index=d.index,E.ref=d.ref,E.refCleanup=d.refCleanup,E}function mu(d,m){d.flags&=31457282;var E=d.alternate;return E===null?(d.childLanes=0,d.lanes=m,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=E.childLanes,d.lanes=E.lanes,d.child=E.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=E.memoizedProps,d.memoizedState=E.memoizedState,d.updateQueue=E.updateQueue,d.type=E.type,m=E.dependencies,d.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),d}function gu(d,m,E,R,U,k){var ie=0;if(R=d,typeof d=="function")ll(d)&&(ie=1);else if(typeof d=="string")ie=Za&&Er?vr(d,E,Vi.current)?26:em(d)?27:5:Za?vr(d,E,Vi.current)?26:5:Er&&em(d)?27:5;else e:switch(d){case pc:return hc(E.children,U,k,m);case vu:ie=8,U|=24;break;case mc:return d=t(12,E,m,U|2),d.elementType=mc,d.lanes=k,d;case hl:return d=t(13,E,m,U),d.elementType=hl,d.lanes=k,d;case Jh:return d=t(19,E,m,U),d.elementType=Jh,d.lanes=k,d;case pl:return Hp(E,U,k,m);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case yw:case gc:ie=10;break e;case bv:ie=9;break e;case Vp:ie=11;break e;case Mf:ie=14;break e;case dl:ie=16,R=null;break e}ie=29,E=Error(r(130,d===null?"null":typeof d,"")),R=null}return m=t(ie,E,m,U),m.elementType=d,m.type=R,m.lanes=k,m}function hc(d,m,E,R){return d=t(7,d,R,m),d.lanes=E,d}function Hp(d,m,E,R){d=t(22,d,R,m),d.elementType=pl,d.lanes=E;var U={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var k=U._current;if(k===null)throw Error(r(456));if((U._pendingVisibility&2)===0){var ie=Ie(k,2);ie!==null&&(U._pendingVisibility|=2,ii(ie,k,2))}},attach:function(){var k=U._current;if(k===null)throw Error(r(456));if((U._pendingVisibility&2)!==0){var ie=Ie(k,2);ie!==null&&(U._pendingVisibility&=-3,ii(ie,k,2))}}};return d.stateNode=U,d}function Qh(d,m,E){return d=t(6,d,null,m),d.lanes=E,d}function Ca(d,m,E){return m=t(4,d.children!==null?d.children:[],d.key,m),m.lanes=E,m.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},m}function So(d,m,E,R,U,k,ie,pe){this.tag=1,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Rf,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=L(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=L(0),this.hiddenUpdates=L(null),this.identifierPrefix=R,this.onUncaughtError=U,this.onCaughtError=k,this.onRecoverableError=ie,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=pe,this.incompleteTransitions=new Map}function ul(d,m,E,R,U,k,ie,pe,Re,tt,pt,Et){return d=new So(d,m,E,ie,pe,Re,tt,Et),m=1,k===!0&&(m|=24),k=t(3,null,null,m),d.current=k,k.stateNode=d,m=ic(),m.refCount++,d.pooledCache=m,m.refCount++,k.memoizedState={element:R,isDehydrated:E,cache:m},Ye(k),d}function yv(d){return d?(d=Eu,d):Eu}function fl(d){var m=d._reactInternals;if(m===void 0)throw typeof d.render=="function"?Error(r(188)):(d=Object.keys(d).join(","),Error(r(268,d)));return d=y(m),d=d!==null?_(d):null,d===null?null:yu(d.stateNode)}function xo(d,m,E,R,U,k){U=yv(U),R.context===null?R.context=U:R.pendingContext=U,R=it(m),R.payload={element:E},k=k===void 0?null:k,k!==null&&(R.callback=k),E=Ze(d,R,m),E!==null&&(ii(E,d,m),$e(E,d,m))}function nr(d,m){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var E=d.retryLane;d.retryLane=E!==0&&E<m?E:m}}function Tf(d,m){nr(d,m),(d=d.alternate)&&nr(d,m)}var En={},vw=Pg(),Ka=nD(),ki=Object.assign,_v=Symbol.for("react.element"),dc=Symbol.for("react.transitional.element"),Eo=Symbol.for("react.portal"),pc=Symbol.for("react.fragment"),vu=Symbol.for("react.strict_mode"),mc=Symbol.for("react.profiler"),yw=Symbol.for("react.provider"),bv=Symbol.for("react.consumer"),gc=Symbol.for("react.context"),Vp=Symbol.for("react.forward_ref"),hl=Symbol.for("react.suspense"),Jh=Symbol.for("react.suspense_list"),Mf=Symbol.for("react.memo"),dl=Symbol.for("react.lazy"),pl=Symbol.for("react.offscreen"),pn=Symbol.for("react.memo_cache_sentinel"),qn=Symbol.iterator,ir=Symbol.for("react.client.reference"),Yt=vw.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vc,yc,Af=!1,_c=Array.isArray,Cf=e.rendererVersion,_w=e.rendererPackageName,Ri=e.extraDevToolsConfig,yu=e.getPublicInstance,Sv=e.getRootHostContext,j_=e.getChildHostContext,q_=e.prepareForCommit,bw=e.resetAfterCommit,xv=e.createInstance,ed=e.appendInitialChild,Gp=e.finalizeInitialChildren,Nr=e.shouldSetTextContent,Fi=e.createTextInstance,jp=e.scheduleTimeout,td=e.cancelTimeout,Rf=e.noTimeout,Ks=e.isPrimaryRenderer;e.warnsIfNotActing;var vi=e.supportsMutation,Zs=e.supportsPersistence,Ra=e.supportsHydration,qp=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var W_=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var oa=e.setCurrentUpdatePriority,bc=e.getCurrentUpdatePriority,Y_=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var $_=e.shouldAttemptEagerTransition,X_=e.detachDeletedInstance;e.requestPostPaintCallback;var Ev=e.maySuspendCommit,wv=e.preloadInstance,Sw=e.startSuspendingCommit,Tv=e.suspendInstance,K_=e.waitForCommitToBeReady,_u=e.NotPendingTransition,ml=e.HostTransitionContext,Z_=e.resetFormInstance;e.bindToConsole;var Q_=e.supportsMicrotasks,J_=e.scheduleMicrotask,Of=e.supportsTestSelectors,eb=e.findFiberRoot,xw=e.getBoundingRect,tb=e.getTextContent,wo=e.isHiddenSubtree,nb=e.matchAccessibilityRole,Wp=e.setFocusIfFocusable,Yp=e.setupIntersectionObserver,ib=e.appendChild,Mv=e.appendChildToContainer,rb=e.commitTextUpdate,ab=e.commitMount,sb=e.commitUpdate,ob=e.insertBefore,Av=e.insertInContainerBefore,lb=e.removeChild,cb=e.removeChildFromContainer,$p=e.resetTextContent,ub=e.hideInstance,fb=e.hideTextInstance,Ew=e.unhideInstance,Cv=e.unhideTextInstance,hb=e.clearContainer,db=e.cloneInstance,Xp=e.createContainerChildSet,Rv=e.appendChildToContainerChildSet,pb=e.finalizeContainerChildren,mb=e.replaceContainerChildren,gb=e.cloneHiddenInstance,Ov=e.cloneHiddenTextInstance,bu=e.isSuspenseInstancePending,nd=e.isSuspenseInstanceFallback,Kp=e.getSuspenseInstanceFallbackErrorDetails,vb=e.registerSuspenseInstanceRetry,yb=e.canHydrateFormStateMarker,To=e.isFormStateMarkerMatching,Sc=e.getNextHydratableSibling,gl=e.getFirstHydratableChild,Su=e.getFirstHydratableChildWithinContainer,Dv=e.getFirstHydratableChildWithinSuspenseInstance,Uv=e.canHydrateInstance,_b=e.canHydrateTextInstance,bb=e.canHydrateSuspenseInstance,xu=e.hydrateInstance,Zp=e.hydrateTextInstance,Sb=e.hydrateSuspenseInstance,xb=e.getNextHydratableInstanceAfterSuspenseInstance,Eb=e.commitHydratedContainer,Qp=e.commitHydratedSuspenseInstance,wb=e.clearSuspenseBoundary,Nv=e.clearSuspenseBoundaryFromContainer,Pv=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Tb=e.validateHydratableInstance,ww=e.validateHydratableTextInstance,Za=e.supportsResources,vr=e.isHostHoistableType,yr=e.getHoistableRoot,Lv=e.getResource,Iv=e.acquireResource,Bv=e.releaseResource,Mb=e.hydrateHoistable,zv=e.mountHoistable,Df=e.unmountHoistable,kv=e.createHoistableInstance,Ab=e.prepareToCommitHoistables,Cb=e.mayResourceSuspendCommit,Fv=e.preloadResource,Hv=e.suspendResource,Er=e.supportsSingletons,Jp=e.resolveSingletonInstance,Rb=e.clearSingleton,Vv=e.acquireSingletonInstance,Gv=e.releaseSingletonInstance,em=e.isHostSingletonType,tm=[],xc=-1,Eu={},Hi=Math.clz32?Math.clz32:M,jv=Math.log,Tw=Math.LN2,id=128,Uf=4194304,Mo=Ka.unstable_scheduleCallback,Qs=Ka.unstable_cancelCallback,Ec=Ka.unstable_shouldYield,vl=Ka.unstable_requestPaint,Qa=Ka.unstable_now,nm=Ka.unstable_ImmediatePriority,rd=Ka.unstable_UserBlockingPriority,Nf=Ka.unstable_NormalPriority,wu=Ka.unstable_IdlePriority,Wr=Ka.log,im=Ka.unstable_setDisableYieldValue,Pf=null,rr=null,la=typeof Object.is=="function"?Object.is:J,rm=new WeakMap,Ja=[],es=0,wc=null,Lf=0,Oa=[],Yr=0,Js=null,Ao=1,Co="",Vi=x(null),Es=x(null),yl=x(null),ad=x(null),Gi=null,Yn=null,Nn=!1,ws=null,eo=!1,sd=Error(r(519)),Da=[],_l=0,to=0,fi=null,Tc=null,am=!1,ji=!1,sm=!1,If=0,Bf=null,om=0,hi=0,wr=null,$r=!1,lm=!1,Ob=Object.prototype.hasOwnProperty,od=Error(r(460)),ld=Error(r(474)),ca={then:function(){}},Xr=null,Tu=null,Kr=0,Mc=Dn(!0),Ro=Dn(!1),no=x(null),io=x(0),Ua=x(null),Ts=null,ri=x(0),bl=0,Jt=null,In=null,yi=null,Sl=!1,Mu=!1,Ac=!1,Cc=0,zf=0,xl=null,Db=0,qv=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},qi={readContext:Dr,use:ge,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useLayoutEffect:Zt,useInsertionEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useSyncExternalStore:Zt,useId:Zt};qi.useCacheRefresh=Zt,qi.useMemoCache=Zt,qi.useHostTransitionStatus=Zt,qi.useFormState=Zt,qi.useActionState=Zt,qi.useOptimistic=Zt;var El={readContext:Dr,use:ge,useCallback:function(d,m){return Q().memoizedState=[d,m===void 0?null:m],d},useContext:Dr,useEffect:iu,useImperativeHandle:function(d,m,E){E=E!=null?E.concat([d]):null,nu(4194308,4,ms.bind(null,m,d),E)},useLayoutEffect:function(d,m){return nu(4194308,4,d,m)},useInsertionEffect:function(d,m){nu(4,2,d,m)},useMemo:function(d,m){var E=Q();m=m===void 0?null:m;var R=d();if(Ac){re(!0);try{d()}finally{re(!1)}}return E.memoizedState=[R,m],R},useReducer:function(d,m,E){var R=Q();if(E!==void 0){var U=E(m);if(Ac){re(!0);try{E(m)}finally{re(!1)}}}else U=m;return R.memoizedState=R.baseState=U,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:U},R.queue=d,d=d.dispatch=su.bind(null,Jt,d),[R.memoizedState,d]},useRef:function(d){var m=Q();return d={current:d},m.memoizedState=d},useState:function(d){d=bn(d);var m=d.queue,E=mf.bind(null,Jt,m);return m.dispatch=E,[d.memoizedState,E]},useDebugValue:Ys,useDeferredValue:function(d,m){var E=Q();return Ql(E,d,m)},useTransition:function(){var d=bn(!1);return d=pf.bind(null,Jt,d.queue,!0,!1),Q().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,m,E){var R=Jt,U=Q();if(Nn){if(E===void 0)throw Error(r(407));E=E()}else{if(E=m(),Xn===null)throw Error(r(349));(Tn&60)!==0||kt(R,m,E)}U.memoizedState=E;var k={value:E,getSnapshot:m};return U.queue=k,iu(dn.bind(null,R,k,d),[d]),R.flags|=2048,Vr(9,Dt.bind(null,R,k,E,m),{destroy:void 0},null),E},useId:function(){var d=Q(),m=Xn.identifierPrefix;if(Nn){var E=Co,R=Ao;E=(R&~(1<<32-Hi(R)-1)).toString(32)+E,m=":"+m+"R"+E,E=Cc++,0<E&&(m+="H"+E.toString(32)),m+=":"}else E=Db++,m=":"+m+"r"+E.toString(32)+":";return d.memoizedState=m},useCacheRefresh:function(){return Q().memoizedState=au.bind(null,Jt)}};El.useMemoCache=we,El.useHostTransitionStatus=Yo,El.useFormState=kn,El.useActionState=kn,El.useOptimistic=function(d){var m=Q();m.memoizedState=m.baseState=d;var E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=E,m=Xo.bind(null,Jt,!0,E),E.dispatch=m,[d,m]};var ua={readContext:Dr,use:ge,useCallback:vo,useContext:Dr,useEffect:qs,useImperativeHandle:Ws,useInsertionEffect:Rh,useLayoutEffect:ru,useMemo:Wa,useReducer:mt,useRef:gr,useState:function(){return mt(ut)},useDebugValue:Ys,useDeferredValue:function(d,m){var E=be();return Jl(E,In.memoizedState,d,m)},useTransition:function(){var d=mt(ut)[0],m=be().memoizedState;return[typeof d=="boolean"?d:Ne(d),m]},useSyncExternalStore:Ht,useId:$o};ua.useCacheRefresh=Bi,ua.useMemoCache=we,ua.useHostTransitionStatus=Yo,ua.useFormState=Ii,ua.useActionState=Ii,ua.useOptimistic=function(d,m){var E=be();return qt(E,In,d,m)};var Rc={readContext:Dr,use:ge,useCallback:vo,useContext:Dr,useEffect:qs,useImperativeHandle:Ws,useInsertionEffect:Rh,useLayoutEffect:ru,useMemo:Wa,useReducer:xt,useRef:gr,useState:function(){return xt(ut)},useDebugValue:Ys,useDeferredValue:function(d,m){var E=be();return In===null?Ql(E,d,m):Jl(E,In.memoizedState,d,m)},useTransition:function(){var d=xt(ut)[0],m=be().memoizedState;return[typeof d=="boolean"?d:Ne(d),m]},useSyncExternalStore:Ht,useId:$o};Rc.useCacheRefresh=Bi,Rc.useMemoCache=we,Rc.useHostTransitionStatus=Yo,Rc.useFormState=wi,Rc.useActionState=wi,Rc.useOptimistic=function(d,m){var E=be();return In!==null?qt(E,In,d,m):(E.baseState=d,[d,E.queue.dispatch])};var kf={isMounted:function(d){return(d=d._reactInternals)?p(d)===d:!1},enqueueSetState:function(d,m,E){d=d._reactInternals;var R=jr(),U=it(R);U.payload=m,E!=null&&(U.callback=E),m=Ze(d,U,R),m!==null&&(ii(m,d,R),$e(m,d,R))},enqueueReplaceState:function(d,m,E){d=d._reactInternals;var R=jr(),U=it(R);U.tag=1,U.payload=m,E!=null&&(U.callback=E),m=Ze(d,U,R),m!==null&&(ii(m,d,R),$e(m,d,R))},enqueueForceUpdate:function(d,m){d=d._reactInternals;var E=jr(),R=it(E);R.tag=2,m!=null&&(R.callback=m),m=Ze(d,R,E),m!==null&&(ii(m,d,E),$e(m,d,E))}},Oc=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)},Wv=Error(r(461)),ar=!1,cd={dehydrated:null,treeContext:null,retryLane:0},Ms=x(null),Dc=null,As=null,ud=typeof AbortController<"u"?AbortController:function(){var d=[],m=this.signal={aborted:!1,addEventListener:function(E,R){d.push(R)}};this.abort=function(){m.aborted=!0,d.forEach(function(E){return E()})}},Ti=Ka.unstable_scheduleCallback,Mw=Ka.unstable_NormalPriority,Oi={$$typeof:gc,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Yv=Yt.S;Yt.S=function(d,m){typeof m=="object"&&m!==null&&typeof m.then=="function"&&Ge(d,m),Yv!==null&&Yv(d,m)};var Au=x(null),wl=!1,en=!1,$n=!1,Sn=typeof WeakSet=="function"?WeakSet:Set,Vt=null,Qn=!1,Bn=null,Wi=!1,Zr=null,Uc=8192,Tl={getCacheForType:function(d){var m=Dr(Oi),E=m.data.get(d);return E===void 0&&(E=d(),m.data.set(d,E)),E}},di=0,ro=1,Oo=2,Ff=3,fa=4;if(typeof Symbol=="function"&&Symbol.for){var Do=Symbol.for;di=Do("selector.component"),ro=Do("selector.has_pseudo_class"),Oo=Do("selector.role"),Ff=Do("selector.test_id"),fa=Do("selector.text")}var fd=typeof WeakMap=="function"?WeakMap:Map,wn=0,Xn=null,mn=null,Tn=0,Wn=0,sr=null,Cs=!1,Rs=!1,Cu=!1,ao=0,_i=0,Os=0,Ml=0,ha=0,ts=0,or=0,Hf=null,Ds=null,cm=!1,$v=0,ns=1/0,Ru=null,Uo=null,Al=!1,Nc=null,Vf=0,um=0,hd=null,Ou=0,Xv=null;return En.attemptContinuousHydration=function(d){if(d.tag===13){var m=Ie(d,67108864);m!==null&&ii(m,d,67108864),Tf(d,67108864)}},En.attemptHydrationAtCurrentPriority=function(d){if(d.tag===13){var m=jr(),E=Ie(d,m);E!==null&&ii(E,d,m),Tf(d,m)}},En.attemptSynchronousHydration=function(d){switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var m=C(d.pendingLanes);if(m!==0){for(d.pendingLanes|=2,d.entangledLanes|=2;m;){var E=1<<31-Hi(m);d.entanglements[1]|=E,m&=~E}Pe(d),(wn&6)===0&&(ns=Qa()+500,$(0))}}break;case 13:m=Ie(d,2),m!==null&&ii(m,d,2),gv(),Tf(d,2)}},En.batchedUpdates=function(d,m){return d(m)},En.createComponentSelector=function(d){return{$$typeof:di,value:d}},En.createContainer=function(d,m,E,R,U,k,ie,pe,Re,tt){return ul(d,m,!1,null,E,R,k,ie,pe,Re,tt,null)},En.createHasPseudoClassSelector=function(d){return{$$typeof:ro,value:d}},En.createHydrationContainer=function(d,m,E,R,U,k,ie,pe,Re,tt,pt,Et,dt){return d=ul(E,R,!0,d,U,k,pe,Re,tt,pt,Et,dt),d.context=yv(null),E=d.current,R=jr(),U=it(R),U.callback=m??null,Ze(E,U,R),d.current.lanes=R,H(d,R),Pe(d),d},En.createPortal=function(d,m,E){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Eo,key:R==null?null:""+R,children:d,containerInfo:m,implementation:E}},En.createRoleSelector=function(d){return{$$typeof:Oo,value:d}},En.createTestNameSelector=function(d){return{$$typeof:Ff,value:d}},En.createTextSelector=function(d){return{$$typeof:fa,value:d}},En.defaultOnCaughtError=function(d){console.error(d)},En.defaultOnRecoverableError=function(d){Oc(d)},En.defaultOnUncaughtError=function(d){Oc(d)},En.deferredUpdates=function(d){var m=Yt.T,E=bc();try{return oa(32),Yt.T=null,d()}finally{oa(E),Yt.T=m}},En.discreteUpdates=function(d,m,E,R,U){var k=Yt.T,ie=bc();try{return oa(2),Yt.T=null,d(m,E,R,U)}finally{oa(ie),Yt.T=k,wn===0&&(ns=Qa()+500)}},En.findAllNodes=oc,En.findBoundingRects=function(d,m){if(!Of)throw Error(r(363));m=oc(d,m),d=[];for(var E=0;E<m.length;E++)d.push(xw(m[E]));for(m=d.length-1;0<m;m--){E=d[m];for(var R=E.x,U=R+E.width,k=E.y,ie=k+E.height,pe=m-1;0<=pe;pe--)if(m!==pe){var Re=d[pe],tt=Re.x,pt=tt+Re.width,Et=Re.y,dt=Et+Re.height;if(R>=tt&&k>=Et&&U<=pt&&ie<=dt){d.splice(m,1);break}else if(R!==tt||E.width!==Re.width||dt<k||Et>ie){if(!(k!==Et||E.height!==Re.height||pt<R||tt>U)){tt>R&&(Re.width+=tt-R,Re.x=R),pt<U&&(Re.width=U-tt),d.splice(m,1);break}}else{Et>k&&(Re.height+=Et-k,Re.y=k),dt<ie&&(Re.height=ie-Et),d.splice(m,1);break}}}return d},En.findHostInstance=fl,En.findHostInstanceWithNoPortals=function(d){return d=y(d),d=d!==null?S(d):null,d===null?null:yu(d.stateNode)},En.findHostInstanceWithWarning=function(d){return fl(d)},En.flushPassiveEffects=uc,En.flushSyncFromReconciler=function(d){var m=wn;wn|=1;var E=Yt.T,R=bc();try{if(oa(2),Yt.T=null,d)return d()}finally{oa(R),Yt.T=E,wn=m,(wn&6)===0&&$(0)}},En.flushSyncWork=gv,En.focusWithin=function(d,m){if(!Of)throw Error(r(363));for(d=sc(d),m=du(d,m),m=Array.from(m),d=0;d<m.length;){var E=m[d++],R=E.tag;if(!wo(E)){if((R===5||R===26||R===27)&&Wp(E.stateNode))return!0;for(E=E.child;E!==null;)m.push(E),E=E.sibling}}return!1},En.getFindAllNodesFailureDescription=function(d,m){if(!Of)throw Error(r(363));var E=0,R=[];d=[sc(d),0];for(var U=0;U<d.length;){var k=d[U++],ie=k.tag,pe=d[U++],Re=m[pe];if((ie!==5&&ie!==26&&ie!==27||!wo(k))&&(zp(k,Re)&&(R.push(Aa(Re)),pe++,pe>E&&(E=pe)),pe<m.length))for(k=k.child;k!==null;)d.push(k,pe),k=k.sibling}if(E<m.length){for(d=[];E<m.length;E++)d.push(Aa(m[E]));return`findAllNodes was able to match part of the selector:
  `+(R.join(" > ")+`

No matching component was found for:
  `)+d.join(" > ")}return null},En.getPublicRootInstance=function(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 27:case 5:return yu(d.child.stateNode);default:return d.child.stateNode}},En.injectIntoDevTools=function(){var d={bundleType:0,version:Cf,rendererPackageName:_w,currentDispatcherRef:Yt,findFiberByHostInstance:qp,reconcilerVersion:"19.0.0"};if(Ri!==null&&(d.rendererConfig=Ri),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")d=!1;else{var m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(m.isDisabled||!m.supportsFiber)d=!0;else{try{Pf=m.inject(d),rr=m}catch{}d=!!m.checkDCE}}return d},En.isAlreadyRendering=function(){return!1},En.observeVisibleRects=function(d,m,E,R){if(!Of)throw Error(r(363));d=oc(d,m);var U=Yp(d,E,R).disconnect;return{disconnect:function(){U()}}},En.shouldError=function(){return null},En.shouldSuspend=function(){return!1},En.startHostTransition=function(d,m,E,R){if(d.tag!==5)throw Error(r(476));var U=$s(d).queue;pf(d,U,m,_u,E===null?i:function(){var k=$s(d).next.queue;return gs(d,k,{},jr()),E(R)})},En.updateContainer=function(d,m,E,R){var U=m.current,k=jr();return xo(U,k,d,m,E,R),k},En.updateContainerSync=function(d,m,E,R){return m.tag===0&&uc(),xo(m.current,2,d,m,E,R),2},En},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(YT)),YT.exports}var XP;function aQ(){return XP||(XP=1,WT.exports=rQ()),WT.exports}var sQ=aQ();const oQ=kr(sQ);var KP=nD(),$T={exports:{}},_y={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZP;function lQ(){if(ZP)return _y;ZP=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,a){var s=null;if(a!==void 0&&(s=""+a),r.key!==void 0&&(s=""+r.key),"key"in r){a={};for(var o in r)o!=="key"&&(a[o]=r[o])}else a=r;return r=a.ref,{$$typeof:n,type:i,key:s,ref:r!==void 0?r:null,props:a}}return _y.Fragment=e,_y.jsx=t,_y.jsxs=t,_y}var QP;function cQ(){return QP||(QP=1,$T.exports=lQ()),$T.exports}var Pt=cQ();function ZD(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=ZD(i,e,t);if(r)return r;i=e?null:i.sibling}}function i6(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const QD=i6(F.createContext(null));let r6=class extends F.Component{render(){return F.createElement(QD.Provider,{value:this._reactInternals},this.props.children)}};function a6(){const n=F.useContext(QD);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=F.useId();return F.useMemo(()=>{for(const t of[n,n==null?void 0:n.alternate]){if(!t)continue;const i=ZD(t,!1,r=>{let a=r.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[n,e])}const uQ=Symbol.for("react.context"),fQ=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===uQ;function hQ(){const n=a6(),[e]=F.useState(()=>new Map);e.clear();let t=n;for(;t;){const i=t.type;fQ(i)&&i!==QD&&!e.has(i)&&e.set(i,F.use(i6(i))),t=t.return}return e}function dQ(){const n=hQ();return F.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>F.createElement(e,null,F.createElement(t.Provider,{...i,value:n.get(t)})),e=>F.createElement(r6,{...e})),[n])}function s6(n){let e=n.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const o6=n=>n&&n.isOrthographicCamera,pQ=n=>n&&n.hasOwnProperty("current"),mQ=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),s_=((n,e)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?F.useLayoutEffect:F.useEffect;function l6(n){const e=F.useRef(n);return s_(()=>void(e.current=n),[n]),e}function gQ(){const n=a6(),e=dQ();return F.useMemo(()=>({children:t})=>{const r=!!ZD(n,!0,a=>a.type===F.StrictMode)?F.StrictMode:F.Fragment;return Pt.jsx(r,{children:Pt.jsx(e,{children:t})})},[n,e])}function vQ({set:n}){return s_(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const yQ=(n=>(n=class extends F.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function c6(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}function Nm(n){var e;return(e=n.__r3f)==null?void 0:e.root.getState()}const Di={obj:n=>n===Object(n)&&!Di.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Di.str(n)||Di.num(n)||Di.boo(n))return n===e;const a=Di.obj(n);if(a&&i==="reference")return n===e;const s=Di.arr(n);if(s&&t==="reference")return n===e;if((s||a)&&n===e)return!0;let o;for(o in n)if(!(o in e))return!1;if(a&&t==="shallow"&&i==="shallow"){for(o in r?e:n)if(!Di.equ(n[o],e[o],{strict:r,objects:"reference"}))return!1}else for(o in r?e:n)if(n[o]!==e[o])return!1;if(Di.und(o)){if(s&&n.length===0&&e.length===0||a&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function _Q(n){const e={nodes:{},materials:{},meshes:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function bQ(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const e in n){const t=n[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const u6=["children","key","ref"];function SQ(n){const e={};for(const t in n)u6.includes(t)||(e[t]=n[t]);return e}function _1(n,e,t,i){const r=n;let a=r==null?void 0:r.__r3f;return a||(a={root:e,type:t,parent:null,children:[],props:SQ(i),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=a)),a}function x0(n,e){if(!e.includes("-"))return{root:n,key:e,target:n[e]};if(e in n)return{root:n,key:e,target:n[e]};let t=n;const i=e.split("-");for(const r of i){if(typeof t!="object"||t===null){if(t!==void 0){const a=i.slice(i.indexOf(r)).join("-");return{root:t,key:a,target:void 0}}return{root:n,key:e,target:void 0}}e=r,n=t,t=t[e]}return{root:n,key:e,target:t}}const JP=/-\d+$/;function b1(n,e){if(Di.str(e.props.attach)){if(JP.test(e.props.attach)){const r=e.props.attach.replace(JP,""),{root:a,key:s}=x0(n.object,r);Array.isArray(a[s])||(a[s]=[])}const{root:t,key:i}=x0(n.object,e.props.attach);e.previousAttach=t[i],t[i]=e.object}else Di.fun(e.props.attach)&&(e.previousAttach=e.props.attach(n.object,e.object))}function S1(n,e){if(Di.str(e.props.attach)){const{root:t,key:i}=x0(n.object,e.props.attach),r=e.previousAttach;r===void 0?delete t[i]:t[i]=r}else e.previousAttach==null||e.previousAttach(n.object,e.object);delete e.previousAttach}const KR=[...u6,"args","dispose","attach","object","onUpdate","dispose"],eL=new Map;function xQ(n){let e=eL.get(n.constructor);try{e||(e=new n.constructor,eL.set(n.constructor,e))}catch{}return e}function EQ(n,e){const t={};for(const i in e)if(!KR.includes(i)&&!Di.equ(e[i],n.props[i])){t[i]=e[i];for(const r in e)r.startsWith(`${i}-`)&&(t[r]=e[r])}for(const i in n.props){if(KR.includes(i)||e.hasOwnProperty(i))continue;const{root:r,key:a}=x0(n.object,i);if(r.constructor&&r.constructor.length===0){const s=xQ(r);Di.und(s)||(t[a]=s[a])}else t[a]=0}return t}const wQ=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],TQ=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function ch(n,e){var t;const i=n.__r3f,r=i&&s6(i).getState(),a=i==null?void 0:i.eventCount;for(const o in e){let l=e[o];if(KR.includes(o))continue;if(i&&TQ.test(o)){typeof l=="function"?i.handlers[o]=l:delete i.handlers[o],i.eventCount=Object.keys(i.handlers).length;continue}if(l===void 0)continue;let{root:u,key:h,target:p}=x0(n,o);if(p===void 0&&(typeof u!="object"||u===null))throw Error(`R3F: Cannot set "${o}". Ensure it is an object before setting "${h}".`);if(p instanceof yg&&l instanceof yg)p.mask=l.mask;else if(p instanceof yt&&mQ(l))p.set(l);else if(p!==null&&typeof p=="object"&&typeof p.set=="function"&&typeof p.copy=="function"&&l!=null&&l.constructor&&p.constructor===l.constructor)p.copy(l);else if(p!==null&&typeof p=="object"&&typeof p.set=="function"&&Array.isArray(l))typeof p.fromArray=="function"?p.fromArray(l):p.set(...l);else if(p!==null&&typeof p=="object"&&typeof p.set=="function"&&typeof l=="number")typeof p.setScalar=="function"?p.setScalar(l):p.set(l);else{var s;u[h]=l,r&&!r.linear&&wQ.includes(h)&&(s=u[h])!=null&&s.isTexture&&u[h].format===za&&u[h].type===Gl&&(u[h].colorSpace=ni)}}if(i!=null&&i.parent&&r!=null&&r.internal&&(t=i.object)!=null&&t.isObject3D&&a!==i.eventCount){const o=i.object,l=r.internal.interaction.indexOf(o);l>-1&&r.internal.interaction.splice(l,1),i.eventCount&&o.raycast!==null&&r.internal.interaction.push(o)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&Fg(i),n}function Fg(n){var e;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const t=(e=n.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function MQ(n,e){n.manual||(o6(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix())}const ls=n=>n==null?void 0:n.isObject3D;function HS(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function f6(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function AQ(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{f6(t.capturedMap,e,i,r)})}function CQ(n){function e(l){const{internal:u}=n.getState(),h=l.offsetX-u.initialClick[0],p=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(h*h+p*p))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(h=>{var p;return(p=u.__r3f)==null?void 0:p.handlers["onPointer"+h]}))}function i(l,u){const h=n.getState(),p=new Set,g=[],y=u?u(h.internal.interaction):h.internal.interaction;for(let w=0;w<y.length;w++){const T=Nm(y[w]);T&&(T.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function _(w){const T=Nm(w);if(!T||!T.events.enabled||T.raycaster.camera===null)return[];if(T.raycaster.camera===void 0){var M;T.events.compute==null||T.events.compute(l,T,(M=T.previousRoot)==null?void 0:M.getState()),T.raycaster.camera===void 0&&(T.raycaster.camera=null)}return T.raycaster.camera?T.raycaster.intersectObject(w,!0):[]}let S=y.flatMap(_).sort((w,T)=>{const M=Nm(w.object),C=Nm(T.object);return!M||!C?w.distance-T.distance:C.events.priority-M.events.priority||w.distance-T.distance}).filter(w=>{const T=HS(w);return p.has(T)?!1:(p.add(T),!0)});h.events.filter&&(S=h.events.filter(S,h));for(const w of S){let T=w.object;for(;T;){var x;(x=T.__r3f)!=null&&x.eventCount&&g.push({...w,eventObject:T}),T=T.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let w of h.internal.capturedMap.get(l.pointerId).values())p.has(HS(w.intersection))||g.push(w.intersection);return g}function r(l,u,h,p){if(l.length){const g={stopped:!1};for(const y of l){let _=Nm(y.object);if(_||y.object.traverseAncestors(S=>{const x=Nm(S);if(x)return _=x,!1}),_){const{raycaster:S,pointer:x,camera:w,internal:T}=_,M=new le(x.x,x.y,0).unproject(w),C=I=>{var L,H;return(L=(H=T.capturedMap.get(I))==null?void 0:H.has(y.eventObject))!=null?L:!1},N=I=>{const L={intersection:y,target:u.target};T.capturedMap.has(I)?T.capturedMap.get(I).set(y.eventObject,L):T.capturedMap.set(I,new Map([[y.eventObject,L]])),u.target.setPointerCapture(I)},D=I=>{const L=T.capturedMap.get(I);L&&f6(T.capturedMap,y.eventObject,L,I)};let P={};for(let I in u){let L=u[I];typeof L!="function"&&(P[I]=L)}let z={...y,...P,pointer:x,intersections:l,stopped:g.stopped,delta:h,unprojectedPoint:M,ray:S.ray,camera:w,stopPropagation(){const I="pointerId"in u&&T.capturedMap.get(u.pointerId);if((!I||I.has(y.eventObject))&&(z.stopped=g.stopped=!0,T.hovered.size&&Array.from(T.hovered.values()).find(L=>L.eventObject===y.eventObject))){const L=l.slice(0,l.indexOf(y));a([...L,y])}},target:{hasPointerCapture:C,setPointerCapture:N,releasePointerCapture:D},currentTarget:{hasPointerCapture:C,setPointerCapture:N,releasePointerCapture:D},nativeEvent:u};if(p(z),g.stopped===!0)break}}}return l}function a(l){const{internal:u}=n.getState();for(const h of u.hovered.values())if(!l.length||!l.find(p=>p.object===h.object&&p.index===h.index&&p.instanceId===h.instanceId)){const g=h.eventObject.__r3f;if(u.hovered.delete(HS(h)),g!=null&&g.eventCount){const y=g.handlers,_={...h,intersections:l};y.onPointerOut==null||y.onPointerOut(_),y.onPointerLeave==null||y.onPointerLeave(_)}}}function s(l,u){for(let h=0;h<u.length;h++){const p=u[h].__r3f;p==null||p.handlers.onPointerMissed==null||p.handlers.onPointerMissed(l)}}function o(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return u=>{const{internal:h}=n.getState();"pointerId"in u&&h.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(u.pointerId)&&(h.capturedMap.delete(u.pointerId),a([]))})}}return function(h){const{onPointerMissed:p,internal:g}=n.getState();g.lastEvent.current=h;const y=l==="onPointerMove",_=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",x=i(h,y?t:void 0),w=_?e(h):0;l==="onPointerDown"&&(g.initialClick=[h.offsetX,h.offsetY],g.initialHits=x.map(M=>M.eventObject)),_&&!x.length&&w<=2&&(s(h,g.interaction),p&&p(h)),y&&a(x);function T(M){const C=M.eventObject,N=C.__r3f;if(!(N!=null&&N.eventCount))return;const D=N.handlers;if(y){if(D.onPointerOver||D.onPointerEnter||D.onPointerOut||D.onPointerLeave){const P=HS(M),z=g.hovered.get(P);z?z.stopped&&M.stopPropagation():(g.hovered.set(P,M),D.onPointerOver==null||D.onPointerOver(M),D.onPointerEnter==null||D.onPointerEnter(M))}D.onPointerMove==null||D.onPointerMove(M)}else{const P=D[l];P?(!_||g.initialHits.includes(C))&&(s(h,g.interaction.filter(z=>!g.initialHits.includes(z))),P(M)):_&&g.initialHits.includes(C)&&s(h,g.interaction.filter(z=>!g.initialHits.includes(z)))}}r(x,h,w,T)}}return{handlePointer:o}}const tL=n=>!!(n!=null&&n.render),h6=F.createContext(null),RQ=(n,e)=>{const t=nQ((o,l)=>{const u=new le,h=new le,p=new le;function g(w=l().camera,T=h,M=l().size){const{width:C,height:N,top:D,left:P}=M,z=C/N;T.isVector3?p.copy(T):p.set(...T);const I=w.getWorldPosition(u).distanceTo(p);if(o6(w))return{width:C/w.zoom,height:N/w.zoom,top:D,left:P,factor:1,distance:I,aspect:z};{const L=w.fov*Math.PI/180,H=2*Math.tan(L/2)*I,j=H*(C/N);return{width:j,height:H,top:D,left:P,factor:C/j,distance:I,aspect:z}}}let y;const _=w=>o(T=>({performance:{...T.performance,current:w}})),S=new st;return{set:o,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(w=1)=>n(l(),w),advance:(w,T)=>e(w,T,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new GD,pointer:S,mouse:S,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const w=l();y&&clearTimeout(y),w.performance.current!==w.performance.min&&_(w.performance.min),y=setTimeout(()=>_(l().performance.max),w.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:g},setEvents:w=>o(T=>({...T,events:{...T.events,...w}})),setSize:(w,T,M=0,C=0)=>{const N=l().camera,D={width:w,height:T,top:M,left:C};o(P=>({size:D,viewport:{...P.viewport,...g(N,h,D)}}))},setDpr:w=>o(T=>{const M=c6(w);return{viewport:{...T.viewport,dpr:M,initialDpr:T.viewport.initialDpr||M}}}),setFrameloop:(w="always")=>{const T=l().clock;T.stop(),T.elapsedTime=0,w!=="never"&&(T.start(),T.elapsedTime=0),o(()=>({frameloop:w}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:F.createRef(),active:!1,frames:0,priority:0,subscribe:(w,T,M)=>{const C=l().internal;return C.priority=C.priority+(T>0?1:0),C.subscribers.push({ref:w,priority:T,store:M}),C.subscribers=C.subscribers.sort((N,D)=>N.priority-D.priority),()=>{const N=l().internal;N!=null&&N.subscribers&&(N.priority=N.priority-(T>0?1:0),N.subscribers=N.subscribers.filter(D=>D.ref!==w))}}}}}),i=t.getState();let r=i.size,a=i.viewport.dpr,s=i.camera;return t.subscribe(()=>{const{camera:o,size:l,viewport:u,gl:h,set:p}=t.getState();if(l.width!==r.width||l.height!==r.height||u.dpr!==a){r=l,a=u.dpr,MQ(o,l),u.dpr>0&&h.setPixelRatio(u.dpr);const g=typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,g)}o!==s&&(s=o,p(g=>({viewport:{...g.viewport,...g.viewport.getCurrentViewport(o)}})))}),t.subscribe(o=>n(o)),t};function d6(){const n=F.useContext(h6);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function zc(n=t=>t,e){return d6()(n,e)}function JD(n,e=0){const t=d6(),i=t.getState().internal.subscribe,r=l6(n);return s_(()=>i(r,e,t),[e,i,t]),null}const nL=new WeakMap,OQ=n=>{var e;return typeof n=="function"&&(n==null||(e=n.prototype)==null?void 0:e.constructor)===n};function p6(n,e){return function(t,...i){let r;return OQ(t)?(r=nL.get(t),r||(r=new t,nL.set(t,r))):r=t,n&&n(r),Promise.all(i.map(a=>new Promise((s,o)=>r.load(a,l=>{ls(l==null?void 0:l.scene)&&Object.assign(l,_Q(l.scene)),s(l)},e,l=>o(new Error(`Could not load ${a}: ${l==null?void 0:l.message}`))))))}}function e3(n,e,t,i){const r=Array.isArray(e)?e:[e],a=KD(p6(t,i),[n,...r],{equal:Di.equ});return Array.isArray(e)?a:a[0]}e3.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return t6(p6(t),[n,...i])};e3.clear=function(n,e){const t=Array.isArray(e)?e:[e];return n6([n,...t])};function DQ(n){const e=oQ(n);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:F.version}),e}const m6=0,Eg={},UQ=/^three(?=[A-Z])/,DE=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let NQ=0;const PQ=n=>typeof n=="function";function g6(n){if(PQ(n)){const e=`${NQ++}`;return Eg[e]=n,e}else Object.assign(Eg,n)}function v6(n,e){const t=DE(n),i=Eg[t];if(n!=="primitive"&&!i)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function LQ(n,e,t){var i;return n=DE(n)in Eg?n:n.replace(UQ,""),v6(n,e),n==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,_1(e.object,t,n,e)}function IQ(n){if(!n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?S1(n.parent,n):ls(n.object)&&(n.object.visible=!1),n.isHidden=!0,Fg(n)}}function y6(n){if(n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?b1(n.parent,n):ls(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,Fg(n)}}function t3(n,e,t){const i=e.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!e.object){var r,a;const s=Eg[DE(e.type)];e.object=(r=e.props.object)!=null?r:new s(...(a=e.props.args)!=null?a:[]),e.object.__r3f=e}if(ch(e.object,e.props),e.props.attach)b1(n,e);else if(ls(e.object)&&ls(n.object)){const s=n.object.children.indexOf(t==null?void 0:t.object);if(t&&s!==-1){const o=n.object.children.indexOf(e.object);if(o!==-1){n.object.children.splice(o,1);const l=o<s?s-1:s;n.object.children.splice(l,0,e.object)}else e.object.parent=n.object,n.object.children.splice(s,0,e.object),e.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:e.object})}else n.object.add(e.object)}for(const s of e.children)t3(e,s);Fg(e)}}function XT(n,e){e&&(e.parent=n,n.children.push(e),t3(n,e))}function iL(n,e,t){if(!e||!t)return;e.parent=n;const i=n.children.indexOf(t);i!==-1?n.children.splice(i,0,e):n.children.push(e),t3(n,e,t)}function _6(n){if(typeof n.dispose=="function"){const e=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():KP.unstable_scheduleCallback(KP.unstable_IdlePriority,e)}}function ZR(n,e,t){if(!e)return;e.parent=null;const i=n.children.indexOf(e);i!==-1&&n.children.splice(i,1),e.props.attach?S1(n,e):ls(e.object)&&ls(n.object)&&(n.object.remove(e.object),AQ(s6(e),e.object));const r=e.props.dispose!==null&&t!==!1;for(let a=e.children.length-1;a>=0;a--){const s=e.children[a];ZR(e,s,r)}e.children.length=0,delete e.object.__r3f,r&&e.type!=="primitive"&&e.object.type!=="Scene"&&_6(e.object),t===void 0&&Fg(e)}function BQ(n,e){for(const t of[n,n.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const i=t.ref(e);typeof i=="function"&&(t.refCleanup=i)}else t.ref&&(t.ref.current=e)}const mx=[];function zQ(){for(const[t]of mx){const i=t.parent;if(i){t.props.attach?S1(i,t):ls(t.object)&&ls(i.object)&&i.object.remove(t.object);for(const r of t.children)r.props.attach?S1(t,r):ls(r.object)&&ls(t.object)&&t.object.remove(r.object)}t.isHidden&&y6(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&_6(t.object)}for(const[t,i,r]of mx){t.props=i;const a=t.parent;if(a){var n,e;const s=Eg[DE(t.type)];t.object=(n=t.props.object)!=null?n:new s(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,BQ(r,t.object),ch(t.object,t.props),t.props.attach?b1(a,t):ls(t.object)&&ls(a.object)&&a.object.add(t.object);for(const o of t.children)o.props.attach?b1(t,o):ls(o.object)&&ls(t.object)&&t.object.add(o.object);Fg(t)}}mx.length=0}const KT=()=>{},rL={};let VS=m6;const kQ=0,FQ=4,QR=DQ({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:LQ,removeChild:ZR,appendChild:XT,appendInitialChild:XT,insertBefore:iL,appendChildToContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||XT(t,e)},removeChildFromContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||ZR(t,e)},insertInContainerBefore(n,e,t){const i=n.getState().scene.__r3f;!e||!t||!i||iL(i,e,t)},getRootHostContext:()=>rL,getChildHostContext:()=>rL,commitUpdate(n,e,t,i,r){var a,s,o;v6(e,i);let l=!1;if((n.type==="primitive"&&t.object!==i.object||((a=i.args)==null?void 0:a.length)!==((s=t.args)==null?void 0:s.length)||(o=i.args)!=null&&o.some((h,p)=>{var g;return h!==((g=t.args)==null?void 0:g[p])}))&&(l=!0),l)mx.push([n,{...i},r]);else{const h=EQ(n,i);Object.keys(h).length&&(Object.assign(n.props,h),ch(n.object,h))}(r.sibling===null||(r.flags&FQ)===kQ)&&zQ()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n==null?void 0:n.object,prepareForCommit:()=>null,preparePortalMount:n=>_1(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:IQ,unhideInstance:y6,createTextInstance:KT,hideTextInstance:KT,unhideTextInstance:KT,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:F.createContext(null),setCurrentUpdatePriority(n){VS=n},getCurrentUpdatePriority(){return VS},resolveUpdatePriority(){var n;if(VS!==m6)return VS;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return fx.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return fx.ContinuousEventPriority;default:return fx.DefaultEventPriority}},resetFormInstance(){}}),lp=new Map,Pm={objects:"shallow",strict:!1};function HQ(n,e){if(!e&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:r,left:a}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:a}}else if(!e&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function VQ(n){const e=lp.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,a=i||RQ(tO,sL),s=t||QR.createContainer(a,fx.ConcurrentRoot,null,!1,null,"",r,r,r,null);e||lp.set(n,{fiber:s,store:a});let o,l,u=!1,h=null;return{async configure(p={}){let g;h=new Promise(X=>g=X);let{gl:y,size:_,scene:S,events:x,onCreated:w,shadows:T=!1,linear:M=!1,flat:C=!1,legacy:N=!1,orthographic:D=!1,frameloop:P="always",dpr:z=[1,2],performance:I,raycaster:L,camera:H,onPointerMissed:j}=p,G=a.getState(),K=G.gl;if(!G.gl){const X={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},oe=typeof y=="function"?await y(X):y;tL(oe)?K=oe:K=new QH({...X,...y}),G.set({gl:K})}let ee=G.raycaster;ee||G.set({raycaster:ee=new YD});const{params:Y,...re}=L||{};if(Di.equ(re,ee,Pm)||ch(ee,{...re}),Di.equ(Y,ee.params,Pm)||ch(ee,{params:{...ee.params,...Y}}),!G.camera||G.camera===l&&!Di.equ(l,H,Pm)){l=H;const X=H==null?void 0:H.isCamera,oe=X?H:D?new a_(0,0,0,0,.1,1e3):new Ir(75,0,.1,1e3);X||(oe.position.z=5,H&&(ch(oe,H),oe.manual||("aspect"in H||"left"in H||"right"in H||"bottom"in H||"top"in H)&&(oe.manual=!0,oe.updateProjectionMatrix())),!G.camera&&!(H!=null&&H.rotation)&&oe.lookAt(0,0,0)),G.set({camera:oe}),ee.camera=oe}if(!G.scene){let X;S!=null&&S.isScene?(X=S,_1(X,a,"",{})):(X=new bD,_1(X,a,"",{}),S&&ch(X,S)),G.set({scene:X})}x&&!G.events.handlers&&G.set({events:x(a)});const J=HQ(n,_);if(Di.equ(J,G.size,Pm)||G.setSize(J.width,J.height,J.top,J.left),z&&G.viewport.dpr!==c6(z)&&G.setDpr(z),G.frameloop!==P&&G.setFrameloop(P),G.onPointerMissed||G.set({onPointerMissed:j}),I&&!Di.equ(I,G.performance,Pm)&&G.set(X=>({performance:{...X.performance,...I}})),!G.xr){var se;const X=(Z,ce)=>{const me=a.getState();me.frameloop!=="never"&&sL(Z,!0,me,ce)},oe=()=>{const Z=a.getState();Z.gl.xr.enabled=Z.gl.xr.isPresenting,Z.gl.xr.setAnimationLoop(Z.gl.xr.isPresenting?X:null),Z.gl.xr.isPresenting||tO(Z)},ue={connect(){const Z=a.getState().gl;Z.xr.addEventListener("sessionstart",oe),Z.xr.addEventListener("sessionend",oe)},disconnect(){const Z=a.getState().gl;Z.xr.removeEventListener("sessionstart",oe),Z.xr.removeEventListener("sessionend",oe)}};typeof((se=K.xr)==null?void 0:se.addEventListener)=="function"&&ue.connect(),G.set({xr:ue})}if(K.shadowMap){const X=K.shadowMap.enabled,oe=K.shadowMap.type;if(K.shadowMap.enabled=!!T,Di.boo(T))K.shadowMap.type=Hy;else if(Di.str(T)){var q;const ue={basic:c5,percentage:K1,soft:Hy,variance:Ll};K.shadowMap.type=(q=ue[T])!=null?q:Hy}else Di.obj(T)&&Object.assign(K.shadowMap,T);(X!==K.shadowMap.enabled||oe!==K.shadowMap.type)&&(K.shadowMap.needsUpdate=!0)}return cn.enabled=!N,u||(K.outputColorSpace=M?mh:ni,K.toneMapping=C?Vc:iD),G.legacy!==N&&G.set(()=>({legacy:N})),G.linear!==M&&G.set(()=>({linear:M})),G.flat!==C&&G.set(()=>({flat:C})),y&&!Di.fun(y)&&!tL(y)&&!Di.equ(y,K,Pm)&&ch(K,y),o=w,u=!0,g(),this},render(p){return!u&&!h&&this.configure(),h.then(()=>{QR.updateContainer(Pt.jsx(GQ,{store:a,children:p,onCreated:o,rootElement:n}),s,null,()=>{})}),a},unmount(){b6(n)}}}function GQ({store:n,children:e,onCreated:t,rootElement:i}){return s_(()=>{const r=n.getState();r.set(a=>({internal:{...a.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),Pt.jsx(h6.Provider,{value:n,children:e})}function b6(n,e){const t=lp.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),QR.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var a,s,o,l;r.events.disconnect==null||r.events.disconnect(),(a=r.gl)==null||(s=a.renderLists)==null||s.dispose==null||s.dispose(),(o=r.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),bQ(r.scene),lp.delete(n)}catch{}},500)})}}const jQ=new Set,qQ=new Set,WQ=new Set;function ZT(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Zy(n,e){switch(n){case"before":return ZT(jQ,e);case"after":return ZT(qQ,e);case"tail":return ZT(WQ,e)}}let QT,JT;function JR(n,e,t){let i=e.clock.getDelta();e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),QT=e.internal.subscribers;for(let r=0;r<QT.length;r++)JT=QT[r],JT.ref.current(JT.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let x1=!1,eO=!1,eM,aL,Lm;function S6(n){aL=requestAnimationFrame(S6),x1=!0,eM=0,Zy("before",n),eO=!0;for(const t of lp.values()){var e;Lm=t.store.getState(),Lm.internal.active&&(Lm.frameloop==="always"||Lm.internal.frames>0)&&!((e=Lm.gl.xr)!=null&&e.isPresenting)&&(eM+=JR(n,Lm))}if(eO=!1,Zy("after",n),eM===0)return Zy("tail",n),x1=!1,cancelAnimationFrame(aL)}function tO(n,e=1){var t;if(!n)return lp.forEach(i=>tO(i.store.getState(),e));(t=n.gl.xr)!=null&&t.isPresenting||!n.internal.active||n.frameloop==="never"||(e>1?n.internal.frames=Math.min(60,n.internal.frames+e):eO?n.internal.frames=2:n.internal.frames=1,x1||(x1=!0,requestAnimationFrame(S6)))}function sL(n,e=!0,t,i){if(e&&Zy("before",n),t)JR(n,t,i);else for(const r of lp.values())JR(n,r.store.getState());e&&Zy("after",n)}const tM={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function YQ(n){const{handlePointer:e}=CQ(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(tM).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{const{set:i,events:r}=n.getState();if(r.disconnect==null||r.disconnect(),i(a=>({events:{...a.events,connected:t}})),r.handlers)for(const a in r.handlers){const s=r.handlers[a],[o,l]=tM[a];t.addEventListener(o,s,{passive:l})}},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){if(i.handlers)for(const r in i.handlers){const a=i.handlers[r],[s]=tM[r];i.connected.removeEventListener(s,a)}t(r=>({events:{...r.events,connected:void 0}}))}}}}function oL(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function $Q({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,s]=F.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=F.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,u=n?typeof n=="number"?n:n.resize:null,h=F.useRef(!1);F.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[p,g,y]=F.useMemo(()=>{const w=()=>{if(!o.current.element)return;const{left:T,top:M,width:C,height:N,bottom:D,right:P,x:z,y:I}=o.current.element.getBoundingClientRect(),L={left:T,top:M,width:C,height:N,bottom:D,right:P,x:z,y:I};o.current.element instanceof HTMLElement&&i&&(L.height=o.current.element.offsetHeight,L.width=o.current.element.offsetWidth),Object.freeze(L),h.current&&!QQ(o.current.lastBounds,L)&&s(o.current.lastBounds=L)};return[w,u?oL(w,u):w,l?oL(w,l):w]},[s,i,l,u]);function _(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(w=>w.removeEventListener("scroll",y,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function S(){o.current.element&&(o.current.resizeObserver=new r(y),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(w=>w.addEventListener("scroll",y,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{y()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const x=w=>{!w||w===o.current.element||(_(),o.current.element=w,o.current.scrollContainers=x6(w),S())};return KQ(y,!!e),XQ(g),F.useEffect(()=>{_(),S()},[e,y,g]),F.useEffect(()=>_,[]),[x,a,p]}function XQ(n){F.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function KQ(n,e){F.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function x6(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(a=>a==="auto"||a==="scroll")&&e.push(n),[...e,...x6(n.parentElement)]}const ZQ=["x","y","top","bottom","left","right","width","height"],QQ=(n,e)=>ZQ.every(t=>n[t]===e[t]);function JQ({ref:n,children:e,fallback:t,resize:i,style:r,gl:a,events:s=YQ,eventSource:o,eventPrefix:l,shadows:u,linear:h,flat:p,legacy:g,orthographic:y,frameloop:_,dpr:S,performance:x,raycaster:w,camera:T,scene:M,onPointerMissed:C,onCreated:N,...D}){F.useMemo(()=>g6(qZ),[]);const P=gQ(),[z,I]=$Q({scroll:!0,debounce:{scroll:50,resize:0},...i}),L=F.useRef(null),H=F.useRef(null);F.useImperativeHandle(n,()=>L.current);const j=l6(C),[G,K]=F.useState(!1),[ee,Y]=F.useState(!1);if(G)throw G;if(ee)throw ee;const re=F.useRef(null);s_(()=>{const se=L.current;if(I.width>0&&I.height>0&&se){re.current||(re.current=VQ(se));async function q(){await re.current.configure({gl:a,scene:M,events:s,shadows:u,linear:h,flat:p,legacy:g,orthographic:y,frameloop:_,dpr:S,performance:x,raycaster:w,camera:T,size:I,onPointerMissed:(...X)=>j.current==null?void 0:j.current(...X),onCreated:X=>{X.events.connect==null||X.events.connect(o?pQ(o)?o.current:o:H.current),l&&X.setEvents({compute:(oe,ue)=>{const Z=oe[l+"X"],ce=oe[l+"Y"];ue.pointer.set(Z/ue.size.width*2-1,-(ce/ue.size.height)*2+1),ue.raycaster.setFromCamera(ue.pointer,ue.camera)}}),N==null||N(X)}}),re.current.render(Pt.jsx(P,{children:Pt.jsx(yQ,{set:Y,children:Pt.jsx(F.Suspense,{fallback:Pt.jsx(vQ,{set:K}),children:e??null})})}))}q()}}),F.useEffect(()=>{const se=L.current;if(se)return()=>b6(se)},[]);const J=o?"none":"auto";return Pt.jsx("div",{ref:H,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:J,...r},...D,children:Pt.jsx("div",{ref:z,style:{width:"100%",height:"100%"},children:Pt.jsx("canvas",{ref:L,style:{display:"block"},children:t})})})}function eJ(n){return Pt.jsx(r6,{children:Pt.jsx(JQ,{...n})})}function Ui(){return Ui=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ui.apply(null,arguments)}function tJ(n,e,t){return Math.max(e,Math.min(n,t))}const ka={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function lL(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function cL(n,e,t,i=.15){return i===0?tJ(n,e,t):n<e?-lL(e-n,t-e,i)+e:n>t?+lL(n-t,t-e,i)+t:n}function nJ(n,[e,t],[i,r]){const[[a,s],[o,l]]=n;return[cL(e,a,s,i),cL(t,o,l,r)]}function iJ(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function rJ(n){var e=iJ(n,"string");return typeof e=="symbol"?e:String(e)}function Is(n,e,t){return e=rJ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uL(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Qi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?uL(Object(t),!0).forEach(function(i){Is(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):uL(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const E6={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function fL(n){return n?n[0].toUpperCase()+n.slice(1):""}const aJ=["enter","leave"];function sJ(n=!1,e){return n&&!aJ.includes(e)}function oJ(n,e="",t=!1){const i=E6[n],r=i&&i[e]||e;return"on"+fL(n)+fL(r)+(sJ(t,r)?"Capture":"")}const lJ=["gotpointercapture","lostpointercapture"];function cJ(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const i=lJ.includes(e)?"capturecapture":"capture",r=!!~e.indexOf(i);return r&&(e=e.replace("capture","")),{device:e,capture:r,passive:t}}function uJ(n,e=""){const t=E6[n],i=t&&t[e]||e;return n+i}function UE(n){return"touches"in n}function w6(n){return UE(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function fJ(n){return Array.from(n.touches).filter(e=>{var t,i;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(i=t.contains)===null||i===void 0?void 0:i.call(t,e.target))})}function hJ(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function T6(n){return UE(n)?hJ(n)[0]:n}function dJ(n){return fJ(n).map(e=>e.identifier)}function nM(n){const e=T6(n);return UE(n)?e.identifier:e.pointerId}function hL(n){const e=T6(n);return[e.clientX,e.clientY]}function pJ(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:i,metaKey:r,ctrlKey:a}=n;Object.assign(e,{shiftKey:t,altKey:i,metaKey:r,ctrlKey:a})}return e}function E1(n,...e){return typeof n=="function"?n(...e):n}function mJ(){}function gJ(...n){return n.length===0?mJ:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function dL(n,e){return Object.assign({},e,n||{})}const vJ=32;class yJ{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:i,args:r}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?E1(i.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:i,shared:r}=this;t.args=this.args;let a=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,pJ(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,a=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const D=t._delta.map(Math.abs);ka.addTo(t._distance,D)}this.axisIntent&&this.axisIntent(e);const[s,o]=t._movement,[l,u]=i.threshold,{_step:h,values:p}=t;if(i.hasCustomTransform?(h[0]===!1&&(h[0]=Math.abs(s)>=l&&p[0]),h[1]===!1&&(h[1]=Math.abs(o)>=u&&p[1])):(h[0]===!1&&(h[0]=Math.abs(s)>=l&&Math.sign(s)*l),h[1]===!1&&(h[1]=Math.abs(o)>=u&&Math.sign(o)*u)),t.intentional=h[0]!==!1||h[1]!==!1,!t.intentional)return;const g=[0,0];if(i.hasCustomTransform){const[D,P]=p;g[0]=h[0]!==!1?D-h[0]:0,g[1]=h[1]!==!1?P-h[1]:0}else g[0]=h[0]!==!1?s-h[0]:0,g[1]=h[1]!==!1?o-h[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(g);const y=t.offset,_=t._active&&!t._blocked||t.active;_&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in i&&(t._bounds=E1(i.bounds,t)),this.setup&&this.setup()),t.movement=g,this.computeOffset()));const[S,x]=t.offset,[[w,T],[M,C]]=t._bounds;t.overflow=[S<w?-1:S>T?1:0,x<M?-1:x>C?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const N=t._active?i.rubberband||[0,0]:[0,0];if(t.offset=nJ(t._bounds,t.offset,N),t.delta=ka.sub(t.offset,y),this.computeMovement(),_&&(!t.last||a>vJ)){t.delta=ka.sub(t.offset,y);const D=t.delta.map(Math.abs);ka.addTo(t.distance,D),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&a>0&&(t.velocity=[D[0]/a,D[1]/a],t.timeDelta=a)}}emit(){const e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const r=this.handler(Qi(Qi(Qi({},t),e),{},{[this.aliasKey]:e.values}));r!==void 0&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function _J([n,e],t){const i=Math.abs(n),r=Math.abs(e);if(i>r&&i>t)return"x";if(r>i&&r>t)return"y"}class bJ extends yJ{constructor(...e){super(...e),Is(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=ka.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=ka.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,i=this.config;if(!t.axis&&e){const r=typeof i.axisThreshold=="object"?i.axisThreshold[w6(e)]:i.axisThreshold;t.axis=_J(t._movement,r)}t._blocked=(i.lockDirection||!!i.axis)&&!t.axis||!!i.axis&&i.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const SJ=n=>n,pL=.15,M6={enabled(n=!0){return n},eventOptions(n,e,t){return Qi(Qi({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[pL,pL];case!1:return[0,0];default:return ka.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return ka.toVector(n)},transform(n,e,t){const i=n||t.shared.transform;return this.hasCustomTransform=!!i,i||SJ},threshold(n){return ka.toVector(n,0)}},xJ=0,o_=Qi(Qi({},M6),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=xJ){return n},bounds(n={}){if(typeof n=="function")return a=>o_.bounds(n(a));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:i=-1/0,bottom:r=1/0}=n;return[[e,t],[i,r]]}}),mL={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class EJ extends bJ{constructor(...e){super(...e),Is(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),r={left:t.left-i.left+e.offset[0],right:t.right-i.right+e.offset[0],top:t.top-i.top+e.offset[1],bottom:t.bottom-i.bottom+e.offset[1]};e._bounds=o_.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(r&&r.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=nM(e),i._pointerActive=!0,this.computeValues(hL(e)),this.computeInitial(),t.preventScrollAxis&&w6(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,i=this.config;if(!t._pointerActive)return;const r=nM(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;const a=hL(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=ka.sub(a,t._values),this.computeValues(a)),ka.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,i=this.config;if(!t._active||!t._pointerActive)return;const r=nM(e);if(t._pointerId!==void 0&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[a,s]=t._distance;if(t.tap=a<=i.tapsThreshold&&s<=i.tapsThreshold,t.tap&&i.filterTaps)t._force=!0;else{const[o,l]=t._delta,[u,h]=t._movement,[p,g]=i.swipe.velocity,[y,_]=i.swipe.distance,S=i.swipe.duration;if(t.elapsedTime<S){const x=Math.abs(o/t.timeDelta),w=Math.abs(l/t.timeDelta);x>p&&Math.abs(u)>y&&(t.swipe[0]=Math.sign(o)),w>g&&Math.abs(h)>_&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,i=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,wJ(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=mL[e.key];if(t){const i=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=t(this.config.keyboardDisplacement,r),i._keyboardActive=!0,ka.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in mL&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function wJ(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const l_=typeof window<"u"&&window.document&&window.document.createElement;function A6(){return l_&&"ontouchstart"in window}function TJ(){return A6()||l_&&window.navigator.maxTouchPoints>1}function MJ(){return l_&&"onpointerdown"in window}function AJ(){return l_&&"exitPointerLock"in window.document}function CJ(){try{return"constructor"in GestureEvent}catch{return!1}}const Io={isBrowser:l_,gesture:CJ(),touch:A6(),touchscreen:TJ(),pointer:MJ(),pointerLock:AJ()},RJ=250,OJ=180,DJ=.5,UJ=50,NJ=250,PJ=10,gL={mouse:0,touch:0,pen:8},LJ=Qi(Qi({},o_),{},{device(n,e,{pointer:{touch:t=!1,lock:i=!1,mouse:r=!1}={}}){return this.pointerLock=i&&Io.pointerLock,Io.touch&&t?"touch":this.pointerLock?"mouse":Io.pointer&&!r?"pointer":Io.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?RJ:void 0,!(!Io.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:i=1,keys:r=!0}={}}){return this.pointerButtons=i,this.keys=r,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:i=3,axis:r=void 0}){const a=ka.toVector(n,t?i:r?1:0);return this.filterTaps=t,this.tapsThreshold=i,a},swipe({velocity:n=DJ,distance:e=UJ,duration:t=NJ}={}){return{velocity:this.transform(ka.toVector(n)),distance:this.transform(ka.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return OJ;case!1:return 0;default:return n}},axisThreshold(n){return n?Qi(Qi({},gL),n):gL},keyboardDisplacement(n=PJ){return n}});Qi(Qi({},M6),{},{device(n,e,{shared:t,pointer:{touch:i=!1}={}}){if(t.target&&!Io.touch&&Io.gesture)return"gesture";if(Io.touch&&i)return"touch";if(Io.touchscreen){if(Io.pointer)return"pointer";if(Io.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:i={}}){const r=s=>{const o=dL(E1(t,s),{min:-1/0,max:1/0});return[o.min,o.max]},a=s=>{const o=dL(E1(i,s),{min:-1/0,max:1/0});return[o.min,o.max]};return typeof t!="function"&&typeof i!="function"?[r(),a()]:s=>[r(s),a(s)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",ka.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});Qi(Qi({},o_),{},{mouseOnly:(n=!0)=>n});Qi(Qi({},o_),{},{mouseOnly:(n=!0)=>n});const C6=new Map,nO=new Map;function IJ(n){C6.set(n.key,n.engine),nO.set(n.key,n.resolver)}const BJ={key:"drag",engine:EJ,resolver:LJ};function zJ(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,a;for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function kJ(n,e){if(n==null)return{};var t=zJ(n,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}const FJ={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=Io.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},HJ=["target","eventOptions","window","enabled","transform"];function gx(n={},e){const t={};for(const[i,r]of Object.entries(e))switch(typeof r){case"function":t[i]=r.call(t,n[i],i,n);break;case"object":t[i]=gx(n[i],r);break;case"boolean":r&&(t[i]=n[i]);break}return t}function VJ(n,e,t={}){const i=n,{target:r,eventOptions:a,window:s,enabled:o,transform:l}=i,u=kJ(i,HJ);if(t.shared=gx({target:r,eventOptions:a,window:s,enabled:o,transform:l},FJ),e){const h=nO.get(e);t[e]=gx(Qi({shared:t.shared},u),h)}else for(const h in u){const p=nO.get(h);p&&(t[h]=gx(Qi({shared:t.shared},u[h]),p))}return t}class R6{constructor(e,t){Is(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,i,r,a){const s=this._listeners,o=uJ(t,i),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=Qi(Qi({},l),a);e.addEventListener(o,r,u);const h=()=>{e.removeEventListener(o,r,u),s.delete(h)};return s.add(h),h}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class GJ{constructor(){Is(this,"_timeouts",new Map)}add(e,t,i=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class jJ{constructor(e){Is(this,"gestures",new Set),Is(this,"_targetEventStore",new R6(this)),Is(this,"gestureEventStores",{}),Is(this,"gestureTimeoutStores",{}),Is(this,"handlers",{}),Is(this,"config",{}),Is(this,"pointerIds",new Set),Is(this,"touchIds",new Set),Is(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),qJ(this,e)}setEventIds(e){if(UE(e))return this.touchIds=new Set(dJ(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=VJ(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,i={};let r;if(!(t.target&&(r=t.target(),!r))){if(t.enabled){for(const s of this.gestures){const o=this.config[s],l=vL(i,o.eventOptions,!!r);if(o.enabled){const u=C6.get(s);new u(this,e,s).bind(l)}}const a=vL(i,t.eventOptions,!!r);for(const s in this.nativeHandlers)a(s,"",o=>this.nativeHandlers[s](Qi(Qi({},this.state.shared),{},{event:o,args:e})),void 0,!0)}for(const a in i)i[a]=gJ(...i[a]);if(!r)return i;for(const a in i){const{device:s,capture:o,passive:l}=cJ(a);this._targetEventStore.add(r,s,"",i[a],{capture:o,passive:l})}}}}function Im(n,e){n.gestures.add(e),n.gestureEventStores[e]=new R6(n,e),n.gestureTimeoutStores[e]=new GJ}function qJ(n,e){e.drag&&Im(n,"drag"),e.wheel&&Im(n,"wheel"),e.scroll&&Im(n,"scroll"),e.move&&Im(n,"move"),e.pinch&&Im(n,"pinch"),e.hover&&Im(n,"hover")}const vL=(n,e,t)=>(i,r,a,s={},o=!1)=>{var l,u;const h=(l=s.capture)!==null&&l!==void 0?l:e.capture,p=(u=s.passive)!==null&&u!==void 0?u:e.passive;let g=o?i:oJ(i,r,h);t&&p&&(g+="Passive"),n[g]=n[g]||[],n[g].push(a)};function WJ(n,e={},t,i){const r=B.useMemo(()=>new jJ(n),[]);if(r.applyHandlers(n,i),r.applyConfig(e,t),B.useEffect(r.effect.bind(r)),B.useEffect(()=>r.clean.bind(r),[]),e.target===void 0)return r.bind.bind(r)}function YJ(n,e){return IJ(BJ),WJ({drag:n},e||{},"drag")}var $J=Object.defineProperty,XJ=(n,e,t)=>e in n?$J(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,iM=(n,e,t)=>(XJ(n,typeof e!="symbol"?e+"":e,t),t);class KJ extends ia{constructor(e){super(e)}load(e,t,i,r){const a=new ql(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,s=>{if(typeof s!="string")throw new Error("unsupported data type");const o=JSON.parse(s),l=this.parse(o);t&&t(l)},i,r)}loadAsync(e,t){return super.loadAsync(e,t)}parse(e){return new ZJ(e)}}class ZJ{constructor(e){iM(this,"data"),iM(this,"isFont",!0),iM(this,"type","Font"),this.data=e}generateShapes(e,t=100,i){const r=[],a={letterSpacing:0,lineHeight:1,...i},s=QJ(e,t,this.data,a);for(let o=0,l=s.length;o<l;o++)Array.prototype.push.apply(r,s[o].toShapes(!1));return r}}function QJ(n,e,t,i){const r=Array.from(n),a=e/t.resolution,s=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*a,o=[];let l=0,u=0;for(let h=0;h<r.length;h++){const p=r[h];if(p===`
`)l=0,u-=s*i.lineHeight;else{const g=JJ(p,a,l,u,t);g&&(l+=g.offsetX+i.letterSpacing,o.push(g.path))}}return o}function JJ(n,e,t,i,r){const a=r.glyphs[n]||r.glyphs["?"];if(!a){console.error('THREE.Font: character "'+n+'" does not exists in font family '+r.familyName+".");return}const s=new qH;let o,l,u,h,p,g,y,_;if(a.o){const S=a._cachedOutline||(a._cachedOutline=a.o.split(" "));for(let x=0,w=S.length;x<w;)switch(S[x++]){case"m":o=parseInt(S[x++])*e+t,l=parseInt(S[x++])*e+i,s.moveTo(o,l);break;case"l":o=parseInt(S[x++])*e+t,l=parseInt(S[x++])*e+i,s.lineTo(o,l);break;case"q":u=parseInt(S[x++])*e+t,h=parseInt(S[x++])*e+i,p=parseInt(S[x++])*e+t,g=parseInt(S[x++])*e+i,s.quadraticCurveTo(p,g,u,h);break;case"b":u=parseInt(S[x++])*e+t,h=parseInt(S[x++])*e+i,p=parseInt(S[x++])*e+t,g=parseInt(S[x++])*e+i,y=parseInt(S[x++])*e+t,_=parseInt(S[x++])*e+i,s.bezierCurveTo(p,g,y,_,u,h);break}}return{offsetX:a.ha*e,path:s}}function eee(){var n=Object.create(null);function e(r,a){var s=r.id,o=r.name,l=r.dependencies;l===void 0&&(l=[]);var u=r.init;u===void 0&&(u=function(){});var h=r.getTransferables;if(h===void 0&&(h=null),!n[s])try{l=l.map(function(g){return g&&g.isWorkerModule&&(e(g,function(y){if(y instanceof Error)throw y}),g=n[g.id].value),g}),u=i("<"+o+">.init",u),h&&(h=i("<"+o+">.getTransferables",h));var p=null;typeof u=="function"?p=u.apply(void 0,l):console.error("worker module init function failed to rehydrate"),n[s]={id:s,value:p,getTransferables:h},a(p)}catch(g){g&&g.noLog||console.error(g),a(g)}}function t(r,a){var s,o=r.id,l=r.args;(!n[o]||typeof n[o].value!="function")&&a(new Error("Worker module "+o+": not found or its 'init' did not return a function"));try{var u=(s=n[o]).value.apply(s,l);u&&typeof u.then=="function"?u.then(h,function(p){return a(p instanceof Error?p:new Error(""+p))}):h(u)}catch(p){a(p)}function h(p){try{var g=n[o].getTransferables&&n[o].getTransferables(p);(!g||!Array.isArray(g)||!g.length)&&(g=void 0),a(p,g)}catch(y){console.error(y),a(y)}}}function i(r,a){var s=void 0;self.troikaDefine=function(l){return s=l};var o=URL.createObjectURL(new Blob(["/** "+r.replace(/\*/g,"")+` **/

troikaDefine(
`+a+`
)`],{type:"application/javascript"}));try{importScripts(o)}catch(l){console.error(l)}return URL.revokeObjectURL(o),delete self.troikaDefine,s}self.addEventListener("message",function(r){var a=r.data,s=a.messageId,o=a.action,l=a.data;try{o==="registerModule"&&e(l,function(u){u instanceof Error?postMessage({messageId:s,success:!1,error:u.message}):postMessage({messageId:s,success:!0,result:{isCallable:typeof u=="function"}})}),o==="callModule"&&t(l,function(u,h){u instanceof Error?postMessage({messageId:s,success:!1,error:u.message}):postMessage({messageId:s,success:!0,result:u},h||void 0)})}catch(u){postMessage({messageId:s,success:!1,error:u.stack})}})}function tee(n){var e=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return e._getInitResult().then(function(r){if(typeof r=="function")return r.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,i=n.init;t=Array.isArray(t)?t.map(function(a){return a&&(a=a.onMainThread||a,a._getInitResult&&(a=a._getInitResult())),a}):[];var r=Promise.all(t).then(function(a){return i.apply(null,a)});return e._getInitResult=function(){return r},r},e}var O6=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return O6=function(){return n},n},nee=0,iee=0,rM=!1,Qy=Object.create(null),Jy=Object.create(null),iO=Object.create(null);function Hg(n){if((!n||typeof n.init!="function")&&!rM)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,i=n.getTransferables,r=n.workerId,a=tee(n);r==null&&(r="#default");var s="workerModule"+ ++nee,o=n.name||s,l=null;e=e&&e.map(function(h){return typeof h=="function"&&!h.workerModuleData&&(rM=!0,h=Hg({workerId:r,name:"<"+o+"> function dependency: "+h.name,init:`function(){return (
`+vx(h)+`
)}`}),rM=!1),h&&h.workerModuleData&&(h=h.workerModuleData),h});function u(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];if(!O6())return a.apply(void 0,h);if(!l){l=yL(r,"registerModule",u.workerModuleData);var g=function(){l=null,Jy[r].delete(g)};(Jy[r]||(Jy[r]=new Set)).add(g)}return l.then(function(y){var _=y.isCallable;if(_)return yL(r,"callModule",{id:s,args:h});throw new Error("Worker module function was called but `init` did not return a callable function")})}return u.workerModuleData={isWorkerModule:!0,id:s,name:o,dependencies:e,init:vx(t),getTransferables:i&&vx(i)},u.onMainThread=a,u}function ree(n){Jy[n]&&Jy[n].forEach(function(e){e()}),Qy[n]&&(Qy[n].terminate(),delete Qy[n])}function vx(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function aee(n){var e=Qy[n];if(!e){var t=vx(eee);e=Qy[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(i){var r=i.data,a=r.messageId,s=iO[a];if(!s)throw new Error("WorkerModule response with empty or unknown messageId");delete iO[a],s(r)}}return e}function yL(n,e,t){return new Promise(function(i,r){var a=++iee;iO[a]=function(s){s.success?i(s.result):r(new Error("Error in worker "+e+" call: "+s.error))},aee(n).postMessage({messageId:a,action:e,data:t})})}function D6(){var n=(function(e){function t(se,q,X,oe,ue,Z,ce,me){var de=1-ce;me.x=de*de*se+2*de*ce*X+ce*ce*ue,me.y=de*de*q+2*de*ce*oe+ce*ce*Z}function i(se,q,X,oe,ue,Z,ce,me,de,ve){var We=1-de;ve.x=We*We*We*se+3*We*We*de*X+3*We*de*de*ue+de*de*de*ce,ve.y=We*We*We*q+3*We*We*de*oe+3*We*de*de*Z+de*de*de*me}function r(se,q){for(var X=/([MLQCZ])([^MLQCZ]*)/g,oe,ue,Z,ce,me;oe=X.exec(se);){var de=oe[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(ve){return parseFloat(ve)});switch(oe[1]){case"M":ce=ue=de[0],me=Z=de[1];break;case"L":(de[0]!==ce||de[1]!==me)&&q("L",ce,me,ce=de[0],me=de[1]);break;case"Q":{q("Q",ce,me,ce=de[2],me=de[3],de[0],de[1]);break}case"C":{q("C",ce,me,ce=de[4],me=de[5],de[0],de[1],de[2],de[3]);break}case"Z":(ce!==ue||me!==Z)&&q("L",ce,me,ue,Z);break}}}function a(se,q,X){X===void 0&&(X=16);var oe={x:0,y:0};r(se,function(ue,Z,ce,me,de,ve,We,ze,qe){switch(ue){case"L":q(Z,ce,me,de);break;case"Q":{for(var _e=Z,Ae=ce,te=1;te<X;te++)t(Z,ce,ve,We,me,de,te/(X-1),oe),q(_e,Ae,oe.x,oe.y),_e=oe.x,Ae=oe.y;break}case"C":{for(var ke=Z,De=ce,Ie=1;Ie<X;Ie++)i(Z,ce,ve,We,ze,qe,me,de,Ie/(X-1),oe),q(ke,De,oe.x,oe.y),ke=oe.x,De=oe.y;break}}})}var s="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",o="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,u={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function h(se,q){var X=se.getContext?se.getContext("webgl",u):se,oe=l.get(X);if(!oe){let ke=function($){var W=Z[$];if(!W&&(W=Z[$]=X.getExtension($),!W))throw new Error($+" not supported");return W},De=function($,W){var ae=X.createShader(W);return X.shaderSource(ae,$),X.compileShader(ae),ae},Ie=function($,W,ae,he){if(!ce[$]){var Se={},Oe={},je=X.createProgram();X.attachShader(je,De(W,X.VERTEX_SHADER)),X.attachShader(je,De(ae,X.FRAGMENT_SHADER)),X.linkProgram(je),ce[$]={program:je,transaction:function(Ke){X.useProgram(je),Ke({setUniform:function(Ye,ct){for(var it=[],Ze=arguments.length-2;Ze-- >0;)it[Ze]=arguments[Ze+2];var $e=Oe[ct]||(Oe[ct]=X.getUniformLocation(je,ct));X["uniform"+Ye].apply(X,[$e].concat(it))},setAttribute:function(Ye,ct,it,Ze,$e){var vt=Se[Ye];vt||(vt=Se[Ye]={buf:X.createBuffer(),loc:X.getAttribLocation(je,Ye),data:null}),X.bindBuffer(X.ARRAY_BUFFER,vt.buf),X.vertexAttribPointer(vt.loc,ct,X.FLOAT,!1,0,0),X.enableVertexAttribArray(vt.loc),ue?X.vertexAttribDivisor(vt.loc,Ze):ke("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(vt.loc,Ze),$e!==vt.data&&(X.bufferData(X.ARRAY_BUFFER,$e,it),vt.data=$e)}})}}}ce[$].transaction(he)},Te=function($,W){de++;try{X.activeTexture(X.TEXTURE0+de);var ae=me[$];ae||(ae=me[$]=X.createTexture(),X.bindTexture(X.TEXTURE_2D,ae),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MIN_FILTER,X.NEAREST),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MAG_FILTER,X.NEAREST)),X.bindTexture(X.TEXTURE_2D,ae),W(ae,de)}finally{de--}},Xe=function($,W,ae){var he=X.createFramebuffer();ve.push(he),X.bindFramebuffer(X.FRAMEBUFFER,he),X.activeTexture(X.TEXTURE0+W),X.bindTexture(X.TEXTURE_2D,$),X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_2D,$,0);try{ae(he)}finally{X.deleteFramebuffer(he),X.bindFramebuffer(X.FRAMEBUFFER,ve[--ve.length-1]||null)}},Pe=function(){Z={},ce={},me={},de=-1,ve.length=0};var We=ke,ze=De,qe=Ie,_e=Te,Ae=Xe,te=Pe,ue=typeof WebGL2RenderingContext<"u"&&X instanceof WebGL2RenderingContext,Z={},ce={},me={},de=-1,ve=[];X.canvas.addEventListener("webglcontextlost",function($){Pe(),$.preventDefault()},!1),l.set(X,oe={gl:X,isWebGL2:ue,getExtension:ke,withProgram:Ie,withTexture:Te,withTextureFramebuffer:Xe,handleContextLoss:Pe})}q(oe)}function p(se,q,X,oe,ue,Z,ce,me){ce===void 0&&(ce=15),me===void 0&&(me=null),h(se,function(de){var ve=de.gl,We=de.withProgram,ze=de.withTexture;ze("copy",function(qe,_e){ve.texImage2D(ve.TEXTURE_2D,0,ve.RGBA,ue,Z,0,ve.RGBA,ve.UNSIGNED_BYTE,q),We("copy",s,o,function(Ae){var te=Ae.setUniform,ke=Ae.setAttribute;ke("aUV",2,ve.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),te("1i","image",_e),ve.bindFramebuffer(ve.FRAMEBUFFER,me||null),ve.disable(ve.BLEND),ve.colorMask(ce&8,ce&4,ce&2,ce&1),ve.viewport(X,oe,ue,Z),ve.scissor(X,oe,ue,Z),ve.drawArrays(ve.TRIANGLES,0,3)})})})}function g(se,q,X){var oe=se.width,ue=se.height;h(se,function(Z){var ce=Z.gl,me=new Uint8Array(oe*ue*4);ce.readPixels(0,0,oe,ue,ce.RGBA,ce.UNSIGNED_BYTE,me),se.width=q,se.height=X,p(ce,me,0,0,oe,ue)})}var y=Object.freeze({__proto__:null,withWebGLContext:h,renderImageData:p,resizeWebGLCanvasWithoutClearing:g});function _(se,q,X,oe,ue,Z){Z===void 0&&(Z=1);var ce=new Uint8Array(se*q),me=oe[2]-oe[0],de=oe[3]-oe[1],ve=[];a(X,function(ke,De,Ie,Te){ve.push({x1:ke,y1:De,x2:Ie,y2:Te,minX:Math.min(ke,Ie),minY:Math.min(De,Te),maxX:Math.max(ke,Ie),maxY:Math.max(De,Te)})}),ve.sort(function(ke,De){return ke.maxX-De.maxX});for(var We=0;We<se;We++)for(var ze=0;ze<q;ze++){var qe=Ae(oe[0]+me*(We+.5)/se,oe[1]+de*(ze+.5)/q),_e=Math.pow(1-Math.abs(qe)/ue,Z)/2;qe<0&&(_e=1-_e),_e=Math.max(0,Math.min(255,Math.round(_e*255))),ce[ze*se+We]=_e}return ce;function Ae(ke,De){for(var Ie=1/0,Te=1/0,Xe=ve.length;Xe--;){var Pe=ve[Xe];if(Pe.maxX+Te<=ke)break;if(ke+Te>Pe.minX&&De-Te<Pe.maxY&&De+Te>Pe.minY){var $=w(ke,De,Pe.x1,Pe.y1,Pe.x2,Pe.y2);$<Ie&&(Ie=$,Te=Math.sqrt(Ie))}}return te(ke,De)&&(Te=-Te),Te}function te(ke,De){for(var Ie=0,Te=ve.length;Te--;){var Xe=ve[Te];if(Xe.maxX<=ke)break;var Pe=Xe.y1>De!=Xe.y2>De&&ke<(Xe.x2-Xe.x1)*(De-Xe.y1)/(Xe.y2-Xe.y1)+Xe.x1;Pe&&(Ie+=Xe.y1<Xe.y2?1:-1)}return Ie!==0}}function S(se,q,X,oe,ue,Z,ce,me,de,ve){Z===void 0&&(Z=1),me===void 0&&(me=0),de===void 0&&(de=0),ve===void 0&&(ve=0),x(se,q,X,oe,ue,Z,ce,null,me,de,ve)}function x(se,q,X,oe,ue,Z,ce,me,de,ve,We){Z===void 0&&(Z=1),de===void 0&&(de=0),ve===void 0&&(ve=0),We===void 0&&(We=0);for(var ze=_(se,q,X,oe,ue,Z),qe=new Uint8Array(ze.length*4),_e=0;_e<ze.length;_e++)qe[_e*4+We]=ze[_e];p(ce,qe,de,ve,se,q,1<<3-We,me)}function w(se,q,X,oe,ue,Z){var ce=ue-X,me=Z-oe,de=ce*ce+me*me,ve=de?Math.max(0,Math.min(1,((se-X)*ce+(q-oe)*me)/de)):0,We=se-(X+ve*ce),ze=q-(oe+ve*me);return We*We+ze*ze}var T=Object.freeze({__proto__:null,generate:_,generateIntoCanvas:S,generateIntoFramebuffer:x}),M="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",C="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",N="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",D=new Float32Array([0,0,2,0,0,2]),P=null,z=!1,I={},L=new WeakMap;function H(se){if(!z&&!ee(se))throw new Error("WebGL generation not supported")}function j(se,q,X,oe,ue,Z,ce){if(Z===void 0&&(Z=1),ce===void 0&&(ce=null),!ce&&(ce=P,!ce)){var me=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!me)throw new Error("OffscreenCanvas or DOM canvas not supported");ce=P=me.getContext("webgl",{depth:!1})}H(ce);var de=new Uint8Array(se*q*4);h(ce,function(qe){var _e=qe.gl,Ae=qe.withTexture,te=qe.withTextureFramebuffer;Ae("readable",function(ke,De){_e.texImage2D(_e.TEXTURE_2D,0,_e.RGBA,se,q,0,_e.RGBA,_e.UNSIGNED_BYTE,null),te(ke,De,function(Ie){K(se,q,X,oe,ue,Z,_e,Ie,0,0,0),_e.readPixels(0,0,se,q,_e.RGBA,_e.UNSIGNED_BYTE,de)})})});for(var ve=new Uint8Array(se*q),We=0,ze=0;We<de.length;We+=4)ve[ze++]=de[We];return ve}function G(se,q,X,oe,ue,Z,ce,me,de,ve){Z===void 0&&(Z=1),me===void 0&&(me=0),de===void 0&&(de=0),ve===void 0&&(ve=0),K(se,q,X,oe,ue,Z,ce,null,me,de,ve)}function K(se,q,X,oe,ue,Z,ce,me,de,ve,We){Z===void 0&&(Z=1),de===void 0&&(de=0),ve===void 0&&(ve=0),We===void 0&&(We=0),H(ce);var ze=[];a(X,function(qe,_e,Ae,te){ze.push(qe,_e,Ae,te)}),ze=new Float32Array(ze),h(ce,function(qe){var _e=qe.gl,Ae=qe.isWebGL2,te=qe.getExtension,ke=qe.withProgram,De=qe.withTexture,Ie=qe.withTextureFramebuffer,Te=qe.handleContextLoss;if(De("rawDistances",function(Xe,Pe){(se!==Xe._lastWidth||q!==Xe._lastHeight)&&_e.texImage2D(_e.TEXTURE_2D,0,_e.RGBA,Xe._lastWidth=se,Xe._lastHeight=q,0,_e.RGBA,_e.UNSIGNED_BYTE,null),ke("main",M,C,function($){var W=$.setAttribute,ae=$.setUniform,he=!Ae&&te("ANGLE_instanced_arrays"),Se=!Ae&&te("EXT_blend_minmax");W("aUV",2,_e.STATIC_DRAW,0,D),W("aLineSegment",4,_e.DYNAMIC_DRAW,1,ze),ae.apply(void 0,["4f","uGlyphBounds"].concat(oe)),ae("1f","uMaxDistance",ue),ae("1f","uExponent",Z),Ie(Xe,Pe,function(Oe){_e.enable(_e.BLEND),_e.colorMask(!0,!0,!0,!0),_e.viewport(0,0,se,q),_e.scissor(0,0,se,q),_e.blendFunc(_e.ONE,_e.ONE),_e.blendEquationSeparate(_e.FUNC_ADD,Ae?_e.MAX:Se.MAX_EXT),_e.clear(_e.COLOR_BUFFER_BIT),Ae?_e.drawArraysInstanced(_e.TRIANGLES,0,3,ze.length/4):he.drawArraysInstancedANGLE(_e.TRIANGLES,0,3,ze.length/4)})}),ke("post",s,N,function($){$.setAttribute("aUV",2,_e.STATIC_DRAW,0,D),$.setUniform("1i","tex",Pe),_e.bindFramebuffer(_e.FRAMEBUFFER,me),_e.disable(_e.BLEND),_e.colorMask(We===0,We===1,We===2,We===3),_e.viewport(de,ve,se,q),_e.scissor(de,ve,se,q),_e.drawArrays(_e.TRIANGLES,0,3)})}),_e.isContextLost())throw Te(),new Error("webgl context lost")})}function ee(se){var q=!se||se===P?I:se.canvas||se,X=L.get(q);if(X===void 0){z=!0;var oe=null;try{var ue=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],Z=j(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,se);X=Z&&ue.length===Z.length&&Z.every(function(ce,me){return ce===ue[me]}),X||(oe="bad trial run results",console.info(ue,Z))}catch(ce){X=!1,oe=ce.message}oe&&console.warn("WebGL SDF generation not supported:",oe),z=!1,L.set(q,X)}return X}var Y=Object.freeze({__proto__:null,generate:j,generateIntoCanvas:G,generateIntoFramebuffer:K,isSupported:ee});function re(se,q,X,oe,ue,Z){ue===void 0&&(ue=Math.max(oe[2]-oe[0],oe[3]-oe[1])/2),Z===void 0&&(Z=1);try{return j.apply(Y,arguments)}catch(ce){return console.info("WebGL SDF generation failed, falling back to JS",ce),_.apply(T,arguments)}}function J(se,q,X,oe,ue,Z,ce,me,de,ve){ue===void 0&&(ue=Math.max(oe[2]-oe[0],oe[3]-oe[1])/2),Z===void 0&&(Z=1),me===void 0&&(me=0),de===void 0&&(de=0),ve===void 0&&(ve=0);try{return G.apply(Y,arguments)}catch(We){return console.info("WebGL SDF generation failed, falling back to JS",We),S.apply(T,arguments)}}return e.forEachPathCommand=r,e.generate=re,e.generateIntoCanvas=J,e.javascript=T,e.pathToLineSegments=a,e.webgl=Y,e.webglUtils=y,Object.defineProperty(e,"__esModule",{value:!0}),e})({});return n}function see(){var n=(function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},r={};i.L=1,r[1]="L",Object.keys(t).forEach(function(Te,Xe){i[Te]=1<<Xe+1,r[i[Te]]=Te}),Object.freeze(i);var a=i.LRI|i.RLI|i.FSI,s=i.L|i.R|i.AL,o=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,l=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,u=i.S|i.WS|i.B|a|i.PDI|l,h=null;function p(){if(!h){h=new Map;var Te=function(Pe){if(t.hasOwnProperty(Pe)){var $=0;t[Pe].split(",").forEach(function(W){var ae=W.split("+"),he=ae[0],Se=ae[1];he=parseInt(he,36),Se=Se?parseInt(Se,36):0,h.set($+=he,i[Pe]);for(var Oe=0;Oe<Se;Oe++)h.set(++$,i[Pe])})}};for(var Xe in t)Te(Xe)}}function g(Te){return p(),h.get(Te.codePointAt(0))||i.L}function y(Te){return r[g(Te)]}var _={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function S(Te,Xe){var Pe=36,$=0,W=new Map,ae=Xe&&new Map,he;return Te.split(",").forEach(function Se(Oe){if(Oe.indexOf("+")!==-1)for(var je=+Oe;je--;)Se(he);else{he=Oe;var Ge=Oe.split(">"),Ke=Ge[0],_t=Ge[1];Ke=String.fromCodePoint($+=parseInt(Ke,Pe)),_t=String.fromCodePoint($+=parseInt(_t,Pe)),W.set(Ke,_t),Xe&&ae.set(_t,Ke)}}),{map:W,reverseMap:ae}}var x,w,T;function M(){if(!x){var Te=S(_.pairs,!0),Xe=Te.map,Pe=Te.reverseMap;x=Xe,w=Pe,T=S(_.canonical,!1).map}}function C(Te){return M(),x.get(Te)||null}function N(Te){return M(),w.get(Te)||null}function D(Te){return M(),T.get(Te)||null}var P=i.L,z=i.R,I=i.EN,L=i.ES,H=i.ET,j=i.AN,G=i.CS,K=i.B,ee=i.S,Y=i.ON,re=i.BN,J=i.NSM,se=i.AL,q=i.LRO,X=i.RLO,oe=i.LRE,ue=i.RLE,Z=i.PDF,ce=i.LRI,me=i.RLI,de=i.FSI,ve=i.PDI;function We(Te,Xe){for(var Pe=125,$=new Uint32Array(Te.length),W=0;W<Te.length;W++)$[W]=g(Te[W]);var ae=new Map;function he(Or,xa){var er=$[Or];$[Or]=xa,ae.set(er,ae.get(er)-1),er&o&&ae.set(o,ae.get(o)-1),ae.set(xa,(ae.get(xa)||0)+1),xa&o&&ae.set(o,(ae.get(o)||0)+1)}for(var Se=new Uint8Array(Te.length),Oe=new Map,je=[],Ge=null,Ke=0;Ke<Te.length;Ke++)Ge||je.push(Ge={start:Ke,end:Te.length-1,level:Xe==="rtl"?1:Xe==="ltr"?0:Oh(Ke,!1)}),$[Ke]&K&&(Ge.end=Ke,Ge=null);for(var _t=ue|oe|X|q|a|ve|Z|K,Ye=function(Or){return Or+(Or&1?1:2)},ct=function(Or){return Or+(Or&1?2:1)},it=0;it<je.length;it++){Ge=je[it];var Ze=[{_level:Ge.level,_override:0,_isolate:0}],$e=void 0,vt=0,gt=0,jt=0;ae.clear();for(var ye=Ge.start;ye<=Ge.end;ye++){var Je=$[ye];if($e=Ze[Ze.length-1],ae.set(Je,(ae.get(Je)||0)+1),Je&o&&ae.set(o,(ae.get(o)||0)+1),Je&_t)if(Je&(ue|oe)){Se[ye]=$e._level;var Ue=(Je===ue?ct:Ye)($e._level);Ue<=Pe&&!vt&&!gt?Ze.push({_level:Ue,_override:0,_isolate:0}):vt||gt++}else if(Je&(X|q)){Se[ye]=$e._level;var et=(Je===X?ct:Ye)($e._level);et<=Pe&&!vt&&!gt?Ze.push({_level:et,_override:Je&X?z:P,_isolate:0}):vt||gt++}else if(Je&a){Je&de&&(Je=Oh(ye+1,!0)===1?me:ce),Se[ye]=$e._level,$e._override&&he(ye,$e._override);var lt=(Je===me?ct:Ye)($e._level);lt<=Pe&&vt===0&&gt===0?(jt++,Ze.push({_level:lt,_override:0,_isolate:1,_isolInitIndex:ye})):vt++}else if(Je&ve){if(vt>0)vt--;else if(jt>0){for(gt=0;!Ze[Ze.length-1]._isolate;)Ze.pop();var rt=Ze[Ze.length-1]._isolInitIndex;rt!=null&&(Oe.set(rt,ye),Oe.set(ye,rt)),Ze.pop(),jt--}$e=Ze[Ze.length-1],Se[ye]=$e._level,$e._override&&he(ye,$e._override)}else Je&Z?(vt===0&&(gt>0?gt--:!$e._isolate&&Ze.length>1&&(Ze.pop(),$e=Ze[Ze.length-1])),Se[ye]=$e._level):Je&K&&(Se[ye]=Ge.level);else Se[ye]=$e._level,$e._override&&Je!==re&&he(ye,$e._override)}for(var Tt=[],Ft=null,At=Ge.start;At<=Ge.end;At++){var Ut=$[At];if(!(Ut&l)){var Ln=Se[At],Dn=Ut&a,ci=Ut===ve;Ft&&Ln===Ft._level?(Ft._end=At,Ft._endsWithIsolInit=Dn):Tt.push(Ft={_start:At,_end:At,_level:Ln,_startsWithPDI:ci,_endsWithIsolInit:Dn})}}for(var dr=[],Li=0;Li<Tt.length;Li++){var xi=Tt[Li];if(!xi._startsWithPDI||xi._startsWithPDI&&!Oe.has(xi._start)){for(var ra=[Ft=xi],pr=void 0;Ft&&Ft._endsWithIsolInit&&(pr=Oe.get(Ft._end))!=null;)for(var zn=Li+1;zn<Tt.length;zn++)if(Tt[zn]._start===pr){ra.push(Ft=Tt[zn]);break}for(var _n=[],Zt=0;Zt<ra.length;Zt++)for(var _a=ra[Zt],ps=_a._start;ps<=_a._end;ps++)_n.push(ps);for(var df=Se[_n[0]],tu=Ge.level,qo=_n[0]-1;qo>=0;qo--)if(!($[qo]&l)){tu=Se[qo];break}var qa=_n[_n.length-1],Wo=Se[qa],ba=Ge.level;if(!($[qa]&a)){for(var Q=qa+1;Q<=Ge.end;Q++)if(!($[Q]&l)){ba=Se[Q];break}}dr.push({_seqIndices:_n,_sosType:Math.max(tu,df)%2?z:P,_eosType:Math.max(ba,Wo)%2?z:P})}}for(var be=0;be<dr.length;be++){var Ne=dr[be],ge=Ne._seqIndices,we=Ne._sosType,ut=Ne._eosType,mt=Se[ge[0]]&1?z:P;if(ae.get(J))for(var St=0;St<ge.length;St++){var xt=ge[St];if($[xt]&J){for(var Ht=we,kt=St-1;kt>=0;kt--)if(!($[ge[kt]]&l)){Ht=$[ge[kt]];break}he(xt,Ht&(a|ve)?Y:Ht)}}if(ae.get(I))for(var Dt=0;Dt<ge.length;Dt++){var dn=ge[Dt];if($[dn]&I)for(var ln=Dt-1;ln>=-1;ln--){var jn=ln===-1?we:$[ge[ln]];if(jn&s){jn===se&&he(dn,j);break}}}if(ae.get(se))for(var bn=0;bn<ge.length;bn++){var qt=ge[bn];$[qt]&se&&he(qt,z)}if(ae.get(L)||ae.get(G))for(var Nt=1;Nt<ge.length-1;Nt++){var mi=ge[Nt];if($[mi]&(L|G)){for(var nn=0,mr=0,Rr=Nt-1;Rr>=0&&(nn=$[ge[Rr]],!!(nn&l));Rr--);for(var Ji=Nt+1;Ji<ge.length&&(mr=$[ge[Ji]],!!(mr&l));Ji++);nn===mr&&($[mi]===L?nn===I:nn&(I|j))&&he(mi,nn)}}if(ae.get(I))for(var Fn=0;Fn<ge.length;Fn++){var kn=ge[Fn];if($[kn]&I){for(var Ii=Fn-1;Ii>=0&&$[ge[Ii]]&(H|l);Ii--)he(ge[Ii],I);for(Fn++;Fn<ge.length&&$[ge[Fn]]&(H|l|I);Fn++)$[ge[Fn]]!==I&&he(ge[Fn],I)}}if(ae.get(H)||ae.get(L)||ae.get(G))for(var Ei=0;Ei<ge.length;Ei++){var ui=ge[Ei];if($[ui]&(H|L|G)){he(ui,Y);for(var wi=Ei-1;wi>=0&&$[ge[wi]]&l;wi--)he(ge[wi],Y);for(var Vr=Ei+1;Vr<ge.length&&$[ge[Vr]]&l;Vr++)he(ge[Vr],Y)}}if(ae.get(I))for(var gr=0,nu=we;gr<ge.length;gr++){var Zl=ge[gr],iu=$[Zl];iu&I?nu===P&&he(Zl,P):iu&s&&(nu=iu)}if(ae.get(o)){var qs=z|I|j,Rh=qs|P,ru=[];{for(var ms=[],Ws=0;Ws<ge.length;Ws++)if($[ge[Ws]]&o){var Ys=Te[ge[Ws]],vo=void 0;if(C(Ys)!==null)if(ms.length<63)ms.push({char:Ys,seqIndex:Ws});else break;else if((vo=N(Ys))!==null)for(var Wa=ms.length-1;Wa>=0;Wa--){var Ql=ms[Wa].char;if(Ql===vo||Ql===N(D(Ys))||C(D(Ql))===Ys){ru.push([ms[Wa].seqIndex,Ws]),ms.length=Wa;break}}}ru.sort(function(Or,xa){return Or[0]-xa[0]})}for(var Jl=0;Jl<ru.length;Jl++){for(var pf=ru[Jl],$s=pf[0],Yo=pf[1],$o=!1,Bi=0,au=$s+1;au<Yo;au++){var su=ge[au];if($[su]&Rh){$o=!0;var mf=$[su]&qs?z:P;if(mf===mt){Bi=mf;break}}}if($o&&!Bi){Bi=we;for(var gs=$s-1;gs>=0;gs--){var Xo=ge[gs];if($[Xo]&Rh){var ec=$[Xo]&qs?z:P;ec!==mt?Bi=ec:Bi=mt;break}}}if(Bi){if($[ge[$s]]=$[ge[Yo]]=Bi,Bi!==mt){for(var zi=$s+1;zi<ge.length;zi++)if(!($[ge[zi]]&l)){g(Te[ge[zi]])&J&&($[ge[zi]]=Bi);break}}if(Bi!==mt){for(var Sa=Yo+1;Sa<ge.length;Sa++)if(!($[ge[Sa]]&l)){g(Te[ge[Sa]])&J&&($[ge[Sa]]=Bi);break}}}}for(var aa=0;aa<ge.length;aa++)if($[ge[aa]]&o){for(var Ko=aa,gf=aa,Ya=we,vs=aa-1;vs>=0;vs--)if($[ge[vs]]&l)Ko=vs;else{Ya=$[ge[vs]]&qs?z:P;break}for(var Zo=ut,ys=aa+1;ys<ge.length;ys++)if($[ge[ys]]&(o|l))gf=ys;else{Zo=$[ge[ys]]&qs?z:P;break}for(var ou=Ko;ou<=gf;ou++)$[ge[ou]]=Ya===Zo?Ya:mt;aa=gf}}}for(var Gr=Ge.start;Gr<=Ge.end;Gr++){var Jg=Se[Gr],Ci=$[Gr];if(Jg&1?Ci&(P|I|j)&&Se[Gr]++:Ci&z?Se[Gr]++:Ci&(j|I)&&(Se[Gr]+=2),Ci&l&&(Se[Gr]=Gr===0?Ge.level:Se[Gr-1]),Gr===Ge.end||g(Te[Gr])&(ee|K))for(var Qo=Gr;Qo>=0&&g(Te[Qo])&u;Qo--)Se[Qo]=Ge.level}}return{levels:Se,paragraphs:je};function Oh(Or,xa){for(var er=Or;er<Te.length;er++){var $a=$[er];if($a&(z|se))return 1;if($a&(K|P)||xa&&$a===ve)return 0;if($a&a){var Dh=Ap(er);er=Dh===-1?Te.length:Dh}}return 0}function Ap(Or){for(var xa=1,er=Or+1;er<Te.length;er++){var $a=$[er];if($a&K)break;if($a&ve){if(--xa===0)return er}else $a&a&&xa++}return-1}}var ze="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",qe;function _e(){if(!qe){var Te=S(ze,!0),Xe=Te.map,Pe=Te.reverseMap;Pe.forEach(function($,W){Xe.set(W,$)}),qe=Xe}}function Ae(Te){return _e(),qe.get(Te)||null}function te(Te,Xe,Pe,$){var W=Te.length;Pe=Math.max(0,Pe==null?0:+Pe),$=Math.min(W-1,$==null?W-1:+$);for(var ae=new Map,he=Pe;he<=$;he++)if(Xe[he]&1){var Se=Ae(Te[he]);Se!==null&&ae.set(he,Se)}return ae}function ke(Te,Xe,Pe,$){var W=Te.length;Pe=Math.max(0,Pe==null?0:+Pe),$=Math.min(W-1,$==null?W-1:+$);var ae=[];return Xe.paragraphs.forEach(function(he){var Se=Math.max(Pe,he.start),Oe=Math.min($,he.end);if(Se<Oe){for(var je=Xe.levels.slice(Se,Oe+1),Ge=Oe;Ge>=Se&&g(Te[Ge])&u;Ge--)je[Ge]=he.level;for(var Ke=he.level,_t=1/0,Ye=0;Ye<je.length;Ye++){var ct=je[Ye];ct>Ke&&(Ke=ct),ct<_t&&(_t=ct|1)}for(var it=Ke;it>=_t;it--)for(var Ze=0;Ze<je.length;Ze++)if(je[Ze]>=it){for(var $e=Ze;Ze+1<je.length&&je[Ze+1]>=it;)Ze++;Ze>$e&&ae.push([$e+Se,Ze+Se])}}}),ae}function De(Te,Xe,Pe,$){var W=Ie(Te,Xe,Pe,$),ae=[].concat(Te);return W.forEach(function(he,Se){ae[Se]=(Xe.levels[he]&1?Ae(Te[he]):null)||Te[he]}),ae.join("")}function Ie(Te,Xe,Pe,$){for(var W=ke(Te,Xe,Pe,$),ae=[],he=0;he<Te.length;he++)ae[he]=he;return W.forEach(function(Se){for(var Oe=Se[0],je=Se[1],Ge=ae.slice(Oe,je+1),Ke=Ge.length;Ke--;)ae[je-Ke]=Ge[Ke]}),ae}return e.closingToOpeningBracket=N,e.getBidiCharType=g,e.getBidiCharTypeName=y,e.getCanonicalBracket=D,e.getEmbeddingLevels=We,e.getMirroredCharacter=Ae,e.getMirroredCharactersMap=te,e.getReorderSegments=ke,e.getReorderedIndices=Ie,e.getReorderedString=De,e.openingToClosingBracket=C,Object.defineProperty(e,"__esModule",{value:!0}),e})({});return n}const U6=/\bvoid\s+main\s*\(\s*\)\s*{/g;function rO(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(i,r){let a=fn[r];return a?rO(a):i}return n.replace(e,t)}const ma=[];for(let n=0;n<256;n++)ma[n]=(n<16?"0":"")+n.toString(16);function oee(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ma[n&255]+ma[n>>8&255]+ma[n>>16&255]+ma[n>>24&255]+"-"+ma[e&255]+ma[e>>8&255]+"-"+ma[e>>16&15|64]+ma[e>>24&255]+"-"+ma[t&63|128]+ma[t>>8&255]+"-"+ma[t>>16&255]+ma[t>>24&255]+ma[i&255]+ma[i>>8&255]+ma[i>>16&255]+ma[i>>24&255]).toUpperCase()}const Md=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let i=arguments[e];if(i)for(let r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},lee=Date.now(),_L=new WeakMap,bL=new Map;let cee=1e10;function aO(n,e){const t=dee(e);let i=_L.get(n);if(i||_L.set(n,i=Object.create(null)),i[t])return new i[t];const r=`_onBeforeCompile${t}`,a=function(u,h){n.onBeforeCompile.call(this,u,h);const p=this.customProgramCacheKey()+"|"+u.vertexShader+"|"+u.fragmentShader;let g=bL[p];if(!g){const y=uee(this,u,e,t);g=bL[p]=y}u.vertexShader=g.vertexShader,u.fragmentShader=g.fragmentShader,Md(u.uniforms,this.uniforms),e.timeUniform&&(u.uniforms[e.timeUniform]={get value(){return Date.now()-lee}}),this[r]&&this[r](u)},s=function(){return o(e.chained?n:n.clone())},o=function(u){const h=Object.create(u,l);return Object.defineProperty(h,"baseMaterial",{value:n}),Object.defineProperty(h,"id",{value:cee++}),h.uuid=oee(),h.uniforms=Md({},u.uniforms,e.uniforms),h.defines=Md({},u.defines,e.defines),h.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",h.extensions=Md({},u.extensions,e.extensions),h._listeners=void 0,h},l={constructor:{value:s},isDerivedMaterial:{value:!0},type:{get:()=>n.type,set:u=>{n.type=u}},isDerivedFrom:{writable:!0,configurable:!0,value:function(u){const h=this.baseMaterial;return u===h||h.isDerivedMaterial&&h.isDerivedFrom(u)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return a},set(u){this[r]=u}},copy:{writable:!0,configurable:!0,value:function(u){return n.copy.call(this,u),!n.isShaderMaterial&&!n.isDerivedMaterial&&(Md(this.extensions,u.extensions),Md(this.defines,u.defines),Md(this.uniforms,_D.clone(u.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const u=new n.constructor;return o(u).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let u=this._depthMaterial;return u||(u=this._depthMaterial=aO(n.isDerivedMaterial?n.getDepthMaterial():new AE({depthPacking:mD}),e),u.defines.IS_DEPTH_MATERIAL="",u.uniforms=this.uniforms),u}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let u=this._distanceMaterial;return u||(u=this._distanceMaterial=aO(n.isDerivedMaterial?n.getDistanceMaterial():new CE,e),u.defines.IS_DISTANCE_MATERIAL="",u.uniforms=this.uniforms),u}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:u,_distanceMaterial:h}=this;u&&u.dispose(),h&&h.dispose(),n.dispose.call(this)}}};return i[t]=s,new s}function uee(n,{vertexShader:e,fragmentShader:t},i,r){let{vertexDefs:a,vertexMainIntro:s,vertexMainOutro:o,vertexTransform:l,fragmentDefs:u,fragmentMainIntro:h,fragmentMainOutro:p,fragmentColorTransform:g,customRewriter:y,timeUniform:_}=i;if(a=a||"",s=s||"",o=o||"",u=u||"",h=h||"",p=p||"",(l||y)&&(e=rO(e)),(g||y)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=rO(t)),y){let S=y({vertexShader:e,fragmentShader:t});e=S.vertexShader,t=S.fragmentShader}if(g){let S=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,x=>(S.push(x),"")),p=`${g}
${S.join(`
`)}
${p}`}if(_){const S=`
uniform float ${_};
`;a=S+a,u=S+u}return l&&(e=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${e}
`,a=`${a}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,s=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${s}
`,e=e.replace(/\b(position|normal|uv)\b/g,(S,x,w,T)=>/\battribute\s+vec[23]\s+$/.test(T.substr(0,w))?x:`troika_${x}_${r}`),n.map&&n.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${r}`))),e=SL(e,r,a,s,o),t=SL(t,r,u,h,p),{vertexShader:e,fragmentShader:t}}function SL(n,e,t,i,r){return(i||r||t)&&(n=n.replace(U6,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${i}
  troikaOrigMain${e}();
  ${r}
}`),n}function fee(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let hee=0;const xL=new Map;function dee(n){const e=JSON.stringify(n,fee);let t=xL.get(e);return t==null&&xL.set(e,t=++hee),t}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function pee(){return typeof window>"u"&&(self.window=self),(function(n){var e={parse:function(r){var a=e._bin,s=new Uint8Array(r);if(a.readASCII(s,0,4)=="ttcf"){var o=4;a.readUshort(s,o),o+=2,a.readUshort(s,o),o+=2;var l=a.readUint(s,o);o+=4;for(var u=[],h=0;h<l;h++){var p=a.readUint(s,o);o+=4,u.push(e._readFont(s,p))}return u}return[e._readFont(s,0)]},_readFont:function(r,a){var s=e._bin,o=a;s.readFixed(r,a),a+=4;var l=s.readUshort(r,a);a+=2,s.readUshort(r,a),a+=2,s.readUshort(r,a),a+=2,s.readUshort(r,a),a+=2;for(var u=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],h={_data:r,_offset:o},p={},g=0;g<l;g++){var y=s.readASCII(r,a,4);a+=4,s.readUint(r,a),a+=4;var _=s.readUint(r,a);a+=4;var S=s.readUint(r,a);a+=4,p[y]={offset:_,length:S}}for(g=0;g<u.length;g++){var x=u[g];p[x]&&(h[x.trim()]=e[x.trim()].parse(r,p[x].offset,p[x].length,h))}return h},_tabOffset:function(r,a,s){for(var o=e._bin,l=o.readUshort(r,s+4),u=s+12,h=0;h<l;h++){var p=o.readASCII(r,u,4);u+=4,o.readUint(r,u),u+=4;var g=o.readUint(r,u);if(u+=4,o.readUint(r,u),u+=4,p==a)return g}return 0}};e._bin={readFixed:function(r,a){return(r[a]<<8|r[a+1])+(r[a+2]<<8|r[a+3])/65540},readF2dot14:function(r,a){return e._bin.readShort(r,a)/16384},readInt:function(r,a){return e._bin._view(r).getInt32(a)},readInt8:function(r,a){return e._bin._view(r).getInt8(a)},readShort:function(r,a){return e._bin._view(r).getInt16(a)},readUshort:function(r,a){return e._bin._view(r).getUint16(a)},readUshorts:function(r,a,s){for(var o=[],l=0;l<s;l++)o.push(e._bin.readUshort(r,a+2*l));return o},readUint:function(r,a){return e._bin._view(r).getUint32(a)},readUint64:function(r,a){return 4294967296*e._bin.readUint(r,a)+e._bin.readUint(r,a+4)},readASCII:function(r,a,s){for(var o="",l=0;l<s;l++)o+=String.fromCharCode(r[a+l]);return o},readUnicode:function(r,a,s){for(var o="",l=0;l<s;l++){var u=r[a++]<<8|r[a++];o+=String.fromCharCode(u)}return o},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,a,s){var o=e._bin._tdec;return o&&a==0&&s==r.length?o.decode(r):e._bin.readASCII(r,a,s)},readBytes:function(r,a,s){for(var o=[],l=0;l<s;l++)o.push(r[a+l]);return o},readASCIIArray:function(r,a,s){for(var o=[],l=0;l<s;l++)o.push(String.fromCharCode(r[a+l]));return o},_view:function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))}},e._lctf={},e._lctf.parse=function(r,a,s,o,l){var u=e._bin,h={},p=a;u.readFixed(r,a),a+=4;var g=u.readUshort(r,a);a+=2;var y=u.readUshort(r,a);a+=2;var _=u.readUshort(r,a);return a+=2,h.scriptList=e._lctf.readScriptList(r,p+g),h.featureList=e._lctf.readFeatureList(r,p+y),h.lookupList=e._lctf.readLookupList(r,p+_,l),h},e._lctf.readLookupList=function(r,a,s){var o=e._bin,l=a,u=[],h=o.readUshort(r,a);a+=2;for(var p=0;p<h;p++){var g=o.readUshort(r,a);a+=2;var y=e._lctf.readLookupTable(r,l+g,s);u.push(y)}return u},e._lctf.readLookupTable=function(r,a,s){var o=e._bin,l=a,u={tabs:[]};u.ltype=o.readUshort(r,a),a+=2,u.flag=o.readUshort(r,a),a+=2;var h=o.readUshort(r,a);a+=2;for(var p=u.ltype,g=0;g<h;g++){var y=o.readUshort(r,a);a+=2;var _=s(r,p,l+y,u);u.tabs.push(_)}return u},e._lctf.numOfOnes=function(r){for(var a=0,s=0;s<32;s++)(r>>>s&1)!=0&&a++;return a},e._lctf.readClassDef=function(r,a){var s=e._bin,o=[],l=s.readUshort(r,a);if(a+=2,l==1){var u=s.readUshort(r,a);a+=2;var h=s.readUshort(r,a);a+=2;for(var p=0;p<h;p++)o.push(u+p),o.push(u+p),o.push(s.readUshort(r,a)),a+=2}if(l==2){var g=s.readUshort(r,a);for(a+=2,p=0;p<g;p++)o.push(s.readUshort(r,a)),a+=2,o.push(s.readUshort(r,a)),a+=2,o.push(s.readUshort(r,a)),a+=2}return o},e._lctf.getInterval=function(r,a){for(var s=0;s<r.length;s+=3){var o=r[s],l=r[s+1];if(r[s+2],o<=a&&a<=l)return s}return-1},e._lctf.readCoverage=function(r,a){var s=e._bin,o={};o.fmt=s.readUshort(r,a),a+=2;var l=s.readUshort(r,a);return a+=2,o.fmt==1&&(o.tab=s.readUshorts(r,a,l)),o.fmt==2&&(o.tab=s.readUshorts(r,a,3*l)),o},e._lctf.coverageIndex=function(r,a){var s=r.tab;if(r.fmt==1)return s.indexOf(a);if(r.fmt==2){var o=e._lctf.getInterval(s,a);if(o!=-1)return s[o+2]+(a-s[o])}return-1},e._lctf.readFeatureList=function(r,a){var s=e._bin,o=a,l=[],u=s.readUshort(r,a);a+=2;for(var h=0;h<u;h++){var p=s.readASCII(r,a,4);a+=4;var g=s.readUshort(r,a);a+=2;var y=e._lctf.readFeatureTable(r,o+g);y.tag=p.trim(),l.push(y)}return l},e._lctf.readFeatureTable=function(r,a){var s=e._bin,o=a,l={},u=s.readUshort(r,a);a+=2,u>0&&(l.featureParams=o+u);var h=s.readUshort(r,a);a+=2,l.tab=[];for(var p=0;p<h;p++)l.tab.push(s.readUshort(r,a+2*p));return l},e._lctf.readScriptList=function(r,a){var s=e._bin,o=a,l={},u=s.readUshort(r,a);a+=2;for(var h=0;h<u;h++){var p=s.readASCII(r,a,4);a+=4;var g=s.readUshort(r,a);a+=2,l[p.trim()]=e._lctf.readScriptTable(r,o+g)}return l},e._lctf.readScriptTable=function(r,a){var s=e._bin,o=a,l={},u=s.readUshort(r,a);a+=2,u>0&&(l.default=e._lctf.readLangSysTable(r,o+u));var h=s.readUshort(r,a);a+=2;for(var p=0;p<h;p++){var g=s.readASCII(r,a,4);a+=4;var y=s.readUshort(r,a);a+=2,l[g.trim()]=e._lctf.readLangSysTable(r,o+y)}return l},e._lctf.readLangSysTable=function(r,a){var s=e._bin,o={};s.readUshort(r,a),a+=2,o.reqFeature=s.readUshort(r,a),a+=2;var l=s.readUshort(r,a);return a+=2,o.features=s.readUshorts(r,a,l),o},e.CFF={},e.CFF.parse=function(r,a,s){var o=e._bin;(r=new Uint8Array(r.buffer,a,s))[a=0],r[++a],r[++a],r[++a],a++;var l=[];a=e.CFF.readIndex(r,a,l);for(var u=[],h=0;h<l.length-1;h++)u.push(o.readASCII(r,a+l[h],l[h+1]-l[h]));a+=l[l.length-1];var p=[];a=e.CFF.readIndex(r,a,p);var g=[];for(h=0;h<p.length-1;h++)g.push(e.CFF.readDict(r,a+p[h],a+p[h+1]));a+=p[p.length-1];var y=g[0],_=[];a=e.CFF.readIndex(r,a,_);var S=[];for(h=0;h<_.length-1;h++)S.push(o.readASCII(r,a+_[h],_[h+1]-_[h]));if(a+=_[_.length-1],e.CFF.readSubrs(r,a,y),y.CharStrings){a=y.CharStrings,_=[],a=e.CFF.readIndex(r,a,_);var x=[];for(h=0;h<_.length-1;h++)x.push(o.readBytes(r,a+_[h],_[h+1]-_[h]));y.CharStrings=x}if(y.ROS){a=y.FDArray;var w=[];for(a=e.CFF.readIndex(r,a,w),y.FDArray=[],h=0;h<w.length-1;h++){var T=e.CFF.readDict(r,a+w[h],a+w[h+1]);e.CFF._readFDict(r,T,S),y.FDArray.push(T)}a+=w[w.length-1],a=y.FDSelect,y.FDSelect=[];var M=r[a];if(a++,M!=3)throw M;var C=o.readUshort(r,a);for(a+=2,h=0;h<C+1;h++)y.FDSelect.push(o.readUshort(r,a),r[a+2]),a+=3}return y.Encoding&&(y.Encoding=e.CFF.readEncoding(r,y.Encoding,y.CharStrings.length)),y.charset&&(y.charset=e.CFF.readCharset(r,y.charset,y.CharStrings.length)),e.CFF._readFDict(r,y,S),y},e.CFF._readFDict=function(r,a,s){var o;for(var l in a.Private&&(o=a.Private[1],a.Private=e.CFF.readDict(r,o,o+a.Private[0]),a.Private.Subrs&&e.CFF.readSubrs(r,o+a.Private.Subrs,a.Private)),a)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(a[l]=s[a[l]-426+35])},e.CFF.readSubrs=function(r,a,s){var o=e._bin,l=[];a=e.CFF.readIndex(r,a,l);var u,h=l.length;u=h<1240?107:h<33900?1131:32768,s.Bias=u,s.Subrs=[];for(var p=0;p<l.length-1;p++)s.Subrs.push(o.readBytes(r,a+l[p],l[p+1]-l[p]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(r,a){for(var s=0;s<r.charset.length;s++)if(r.charset[s]==a)return s;return-1},e.CFF.glyphBySE=function(r,a){return a<0||a>255?-1:e.CFF.glyphByUnicode(r,e.CFF.tableSE[a])},e.CFF.readEncoding=function(r,a,s){e._bin;var o=[".notdef"],l=r[a];if(a++,l!=0)throw"error: unknown encoding format: "+l;var u=r[a];a++;for(var h=0;h<u;h++)o.push(r[a+h]);return o},e.CFF.readCharset=function(r,a,s){var o=e._bin,l=[".notdef"],u=r[a];if(a++,u==0)for(var h=0;h<s;h++){var p=o.readUshort(r,a);a+=2,l.push(p)}else{if(u!=1&&u!=2)throw"error: format: "+u;for(;l.length<s;){p=o.readUshort(r,a),a+=2;var g=0;for(u==1?(g=r[a],a++):(g=o.readUshort(r,a),a+=2),h=0;h<=g;h++)l.push(p),p++}}return l},e.CFF.readIndex=function(r,a,s){var o=e._bin,l=o.readUshort(r,a)+1,u=r[a+=2];if(a++,u==1)for(var h=0;h<l;h++)s.push(r[a+h]);else if(u==2)for(h=0;h<l;h++)s.push(o.readUshort(r,a+2*h));else if(u==3)for(h=0;h<l;h++)s.push(16777215&o.readUint(r,a+3*h-1));else if(l!=1)throw"unsupported offset size: "+u+", count: "+l;return(a+=l*u)-1},e.CFF.getCharString=function(r,a,s){var o=e._bin,l=r[a],u=r[a+1];r[a+2],r[a+3],r[a+4];var h=1,p=null,g=null;l<=20&&(p=l,h=1),l==12&&(p=100*l+u,h=2),21<=l&&l<=27&&(p=l,h=1),l==28&&(g=o.readShort(r,a+1),h=3),29<=l&&l<=31&&(p=l,h=1),32<=l&&l<=246&&(g=l-139,h=1),247<=l&&l<=250&&(g=256*(l-247)+u+108,h=2),251<=l&&l<=254&&(g=256*-(l-251)-u-108,h=2),l==255&&(g=o.readInt(r,a+1)/65535,h=5),s.val=g??"o"+p,s.size=h},e.CFF.readCharString=function(r,a,s){for(var o=a+s,l=e._bin,u=[];a<o;){var h=r[a],p=r[a+1];r[a+2],r[a+3],r[a+4];var g=1,y=null,_=null;h<=20&&(y=h,g=1),h==12&&(y=100*h+p,g=2),h!=19&&h!=20||(y=h,g=2),21<=h&&h<=27&&(y=h,g=1),h==28&&(_=l.readShort(r,a+1),g=3),29<=h&&h<=31&&(y=h,g=1),32<=h&&h<=246&&(_=h-139,g=1),247<=h&&h<=250&&(_=256*(h-247)+p+108,g=2),251<=h&&h<=254&&(_=256*-(h-251)-p-108,g=2),h==255&&(_=l.readInt(r,a+1)/65535,g=5),u.push(_??"o"+y),a+=g}return u},e.CFF.readDict=function(r,a,s){for(var o=e._bin,l={},u=[];a<s;){var h=r[a],p=r[a+1];r[a+2],r[a+3],r[a+4];var g=1,y=null,_=null;if(h==28&&(_=o.readShort(r,a+1),g=3),h==29&&(_=o.readInt(r,a+1),g=5),32<=h&&h<=246&&(_=h-139,g=1),247<=h&&h<=250&&(_=256*(h-247)+p+108,g=2),251<=h&&h<=254&&(_=256*-(h-251)-p-108,g=2),h==255)throw _=o.readInt(r,a+1)/65535,g=5,"unknown number";if(h==30){var S=[];for(g=1;;){var x=r[a+g];g++;var w=x>>4,T=15&x;if(w!=15&&S.push(w),T!=15&&S.push(T),T==15)break}for(var M="",C=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],N=0;N<S.length;N++)M+=C[S[N]];_=parseFloat(M)}h<=21&&(y=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][h],g=1,h==12&&(y=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][p],g=2)),y!=null?(l[y]=u.length==1?u[0]:u,u=[]):u.push(_),a+=g}return l},e.cmap={},e.cmap.parse=function(r,a,s){r=new Uint8Array(r.buffer,a,s),a=0;var o=e._bin,l={};o.readUshort(r,a),a+=2;var u=o.readUshort(r,a);a+=2;var h=[];l.tables=[];for(var p=0;p<u;p++){var g=o.readUshort(r,a);a+=2;var y=o.readUshort(r,a);a+=2;var _=o.readUint(r,a);a+=4;var S="p"+g+"e"+y,x=h.indexOf(_);if(x==-1){var w;x=l.tables.length,h.push(_);var T=o.readUshort(r,_);T==0?w=e.cmap.parse0(r,_):T==4?w=e.cmap.parse4(r,_):T==6?w=e.cmap.parse6(r,_):T==12?w=e.cmap.parse12(r,_):console.debug("unknown format: "+T,g,y,_),l.tables.push(w)}if(l[S]!=null)throw"multiple tables for one platform+encoding";l[S]=x}return l},e.cmap.parse0=function(r,a){var s=e._bin,o={};o.format=s.readUshort(r,a),a+=2;var l=s.readUshort(r,a);a+=2,s.readUshort(r,a),a+=2,o.map=[];for(var u=0;u<l-6;u++)o.map.push(r[a+u]);return o},e.cmap.parse4=function(r,a){var s=e._bin,o=a,l={};l.format=s.readUshort(r,a),a+=2;var u=s.readUshort(r,a);a+=2,s.readUshort(r,a),a+=2;var h=s.readUshort(r,a);a+=2;var p=h/2;l.searchRange=s.readUshort(r,a),a+=2,l.entrySelector=s.readUshort(r,a),a+=2,l.rangeShift=s.readUshort(r,a),a+=2,l.endCount=s.readUshorts(r,a,p),a+=2*p,a+=2,l.startCount=s.readUshorts(r,a,p),a+=2*p,l.idDelta=[];for(var g=0;g<p;g++)l.idDelta.push(s.readShort(r,a)),a+=2;for(l.idRangeOffset=s.readUshorts(r,a,p),a+=2*p,l.glyphIdArray=[];a<o+u;)l.glyphIdArray.push(s.readUshort(r,a)),a+=2;return l},e.cmap.parse6=function(r,a){var s=e._bin,o={};o.format=s.readUshort(r,a),a+=2,s.readUshort(r,a),a+=2,s.readUshort(r,a),a+=2,o.firstCode=s.readUshort(r,a),a+=2;var l=s.readUshort(r,a);a+=2,o.glyphIdArray=[];for(var u=0;u<l;u++)o.glyphIdArray.push(s.readUshort(r,a)),a+=2;return o},e.cmap.parse12=function(r,a){var s=e._bin,o={};o.format=s.readUshort(r,a),a+=2,a+=2,s.readUint(r,a),a+=4,s.readUint(r,a),a+=4;var l=s.readUint(r,a);a+=4,o.groups=[];for(var u=0;u<l;u++){var h=a+12*u,p=s.readUint(r,h+0),g=s.readUint(r,h+4),y=s.readUint(r,h+8);o.groups.push([p,g,y])}return o},e.glyf={},e.glyf.parse=function(r,a,s,o){for(var l=[],u=0;u<o.maxp.numGlyphs;u++)l.push(null);return l},e.glyf._parseGlyf=function(r,a){var s=e._bin,o=r._data,l=e._tabOffset(o,"glyf",r._offset)+r.loca[a];if(r.loca[a]==r.loca[a+1])return null;var u={};if(u.noc=s.readShort(o,l),l+=2,u.xMin=s.readShort(o,l),l+=2,u.yMin=s.readShort(o,l),l+=2,u.xMax=s.readShort(o,l),l+=2,u.yMax=s.readShort(o,l),l+=2,u.xMin>=u.xMax||u.yMin>=u.yMax)return null;if(u.noc>0){u.endPts=[];for(var h=0;h<u.noc;h++)u.endPts.push(s.readUshort(o,l)),l+=2;var p=s.readUshort(o,l);if(l+=2,o.length-l<p)return null;u.instructions=s.readBytes(o,l,p),l+=p;var g=u.endPts[u.noc-1]+1;for(u.flags=[],h=0;h<g;h++){var y=o[l];if(l++,u.flags.push(y),(8&y)!=0){var _=o[l];l++;for(var S=0;S<_;S++)u.flags.push(y),h++}}for(u.xs=[],h=0;h<g;h++){var x=(2&u.flags[h])!=0,w=(16&u.flags[h])!=0;x?(u.xs.push(w?o[l]:-o[l]),l++):w?u.xs.push(0):(u.xs.push(s.readShort(o,l)),l+=2)}for(u.ys=[],h=0;h<g;h++)x=(4&u.flags[h])!=0,w=(32&u.flags[h])!=0,x?(u.ys.push(w?o[l]:-o[l]),l++):w?u.ys.push(0):(u.ys.push(s.readShort(o,l)),l+=2);var T=0,M=0;for(h=0;h<g;h++)T+=u.xs[h],M+=u.ys[h],u.xs[h]=T,u.ys[h]=M}else{var C;u.parts=[];do{C=s.readUshort(o,l),l+=2;var N={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(u.parts.push(N),N.glyphIndex=s.readUshort(o,l),l+=2,1&C){var D=s.readShort(o,l);l+=2;var P=s.readShort(o,l);l+=2}else D=s.readInt8(o,l),l++,P=s.readInt8(o,l),l++;2&C?(N.m.tx=D,N.m.ty=P):(N.p1=D,N.p2=P),8&C?(N.m.a=N.m.d=s.readF2dot14(o,l),l+=2):64&C?(N.m.a=s.readF2dot14(o,l),l+=2,N.m.d=s.readF2dot14(o,l),l+=2):128&C&&(N.m.a=s.readF2dot14(o,l),l+=2,N.m.b=s.readF2dot14(o,l),l+=2,N.m.c=s.readF2dot14(o,l),l+=2,N.m.d=s.readF2dot14(o,l),l+=2)}while(32&C);if(256&C){var z=s.readUshort(o,l);for(l+=2,u.instr=[],h=0;h<z;h++)u.instr.push(o[l]),l++}}return u},e.GDEF={},e.GDEF.parse=function(r,a,s,o){var l=a;a+=4;var u=e._bin.readUshort(r,a);return{glyphClassDef:u===0?null:e._lctf.readClassDef(r,l+u)}},e.GPOS={},e.GPOS.parse=function(r,a,s,o){return e._lctf.parse(r,a,s,o,e.GPOS.subt)},e.GPOS.subt=function(r,a,s,o){var l=e._bin,u=s,h={};if(h.fmt=l.readUshort(r,s),s+=2,a==1||a==2||a==3||a==7||a==8&&h.fmt<=2){var p=l.readUshort(r,s);s+=2,h.coverage=e._lctf.readCoverage(r,p+u)}if(a==1&&h.fmt==1){var g=l.readUshort(r,s);s+=2,g!=0&&(h.pos=e.GPOS.readValueRecord(r,s,g))}else if(a==2&&h.fmt>=1&&h.fmt<=2){g=l.readUshort(r,s),s+=2;var y=l.readUshort(r,s);s+=2;var _=e._lctf.numOfOnes(g),S=e._lctf.numOfOnes(y);if(h.fmt==1){h.pairsets=[];var x=l.readUshort(r,s);s+=2;for(var w=0;w<x;w++){var T=u+l.readUshort(r,s);s+=2;var M=l.readUshort(r,T);T+=2;for(var C=[],N=0;N<M;N++){var D=l.readUshort(r,T);T+=2,g!=0&&(j=e.GPOS.readValueRecord(r,T,g),T+=2*_),y!=0&&(G=e.GPOS.readValueRecord(r,T,y),T+=2*S),C.push({gid2:D,val1:j,val2:G})}h.pairsets.push(C)}}if(h.fmt==2){var P=l.readUshort(r,s);s+=2;var z=l.readUshort(r,s);s+=2;var I=l.readUshort(r,s);s+=2;var L=l.readUshort(r,s);for(s+=2,h.classDef1=e._lctf.readClassDef(r,u+P),h.classDef2=e._lctf.readClassDef(r,u+z),h.matrix=[],w=0;w<I;w++){var H=[];for(N=0;N<L;N++){var j=null,G=null;g!=0&&(j=e.GPOS.readValueRecord(r,s,g),s+=2*_),y!=0&&(G=e.GPOS.readValueRecord(r,s,y),s+=2*S),H.push({val1:j,val2:G})}h.matrix.push(H)}}}else if(a==4&&h.fmt==1)h.markCoverage=e._lctf.readCoverage(r,l.readUshort(r,s)+u),h.baseCoverage=e._lctf.readCoverage(r,l.readUshort(r,s+2)+u),h.markClassCount=l.readUshort(r,s+4),h.markArray=e.GPOS.readMarkArray(r,l.readUshort(r,s+6)+u),h.baseArray=e.GPOS.readBaseArray(r,l.readUshort(r,s+8)+u,h.markClassCount);else if(a==6&&h.fmt==1)h.mark1Coverage=e._lctf.readCoverage(r,l.readUshort(r,s)+u),h.mark2Coverage=e._lctf.readCoverage(r,l.readUshort(r,s+2)+u),h.markClassCount=l.readUshort(r,s+4),h.mark1Array=e.GPOS.readMarkArray(r,l.readUshort(r,s+6)+u),h.mark2Array=e.GPOS.readBaseArray(r,l.readUshort(r,s+8)+u,h.markClassCount);else{if(a==9&&h.fmt==1){var K=l.readUshort(r,s);s+=2;var ee=l.readUint(r,s);if(s+=4,o.ltype==9)o.ltype=K;else if(o.ltype!=K)throw"invalid extension substitution";return e.GPOS.subt(r,o.ltype,u+ee)}console.debug("unsupported GPOS table LookupType",a,"format",h.fmt)}return h},e.GPOS.readValueRecord=function(r,a,s){var o=e._bin,l=[];return l.push(1&s?o.readShort(r,a):0),a+=1&s?2:0,l.push(2&s?o.readShort(r,a):0),a+=2&s?2:0,l.push(4&s?o.readShort(r,a):0),a+=4&s?2:0,l.push(8&s?o.readShort(r,a):0),a+=8&s?2:0,l},e.GPOS.readBaseArray=function(r,a,s){var o=e._bin,l=[],u=a,h=o.readUshort(r,a);a+=2;for(var p=0;p<h;p++){for(var g=[],y=0;y<s;y++)g.push(e.GPOS.readAnchorRecord(r,u+o.readUshort(r,a))),a+=2;l.push(g)}return l},e.GPOS.readMarkArray=function(r,a){var s=e._bin,o=[],l=a,u=s.readUshort(r,a);a+=2;for(var h=0;h<u;h++){var p=e.GPOS.readAnchorRecord(r,s.readUshort(r,a+2)+l);p.markClass=s.readUshort(r,a),o.push(p),a+=4}return o},e.GPOS.readAnchorRecord=function(r,a){var s=e._bin,o={};return o.fmt=s.readUshort(r,a),o.x=s.readShort(r,a+2),o.y=s.readShort(r,a+4),o},e.GSUB={},e.GSUB.parse=function(r,a,s,o){return e._lctf.parse(r,a,s,o,e.GSUB.subt)},e.GSUB.subt=function(r,a,s,o){var l=e._bin,u=s,h={};if(h.fmt=l.readUshort(r,s),s+=2,a!=1&&a!=2&&a!=4&&a!=5&&a!=6)return null;if(a==1||a==2||a==4||a==5&&h.fmt<=2||a==6&&h.fmt<=2){var p=l.readUshort(r,s);s+=2,h.coverage=e._lctf.readCoverage(r,u+p)}if(a==1&&h.fmt>=1&&h.fmt<=2){if(h.fmt==1)h.delta=l.readShort(r,s),s+=2;else if(h.fmt==2){var g=l.readUshort(r,s);s+=2,h.newg=l.readUshorts(r,s,g),s+=2*h.newg.length}}else if(a==2&&h.fmt==1){g=l.readUshort(r,s),s+=2,h.seqs=[];for(var y=0;y<g;y++){var _=l.readUshort(r,s)+u;s+=2;var S=l.readUshort(r,_);h.seqs.push(l.readUshorts(r,_+2,S))}}else if(a==4)for(h.vals=[],g=l.readUshort(r,s),s+=2,y=0;y<g;y++){var x=l.readUshort(r,s);s+=2,h.vals.push(e.GSUB.readLigatureSet(r,u+x))}else if(a==5&&h.fmt==2){if(h.fmt==2){var w=l.readUshort(r,s);s+=2,h.cDef=e._lctf.readClassDef(r,u+w),h.scset=[];var T=l.readUshort(r,s);for(s+=2,y=0;y<T;y++){var M=l.readUshort(r,s);s+=2,h.scset.push(M==0?null:e.GSUB.readSubClassSet(r,u+M))}}}else if(a==6&&h.fmt==3){if(h.fmt==3){for(y=0;y<3;y++){g=l.readUshort(r,s),s+=2;for(var C=[],N=0;N<g;N++)C.push(e._lctf.readCoverage(r,u+l.readUshort(r,s+2*N)));s+=2*g,y==0&&(h.backCvg=C),y==1&&(h.inptCvg=C),y==2&&(h.ahedCvg=C)}g=l.readUshort(r,s),s+=2,h.lookupRec=e.GSUB.readSubstLookupRecords(r,s,g)}}else{if(a==7&&h.fmt==1){var D=l.readUshort(r,s);s+=2;var P=l.readUint(r,s);if(s+=4,o.ltype==9)o.ltype=D;else if(o.ltype!=D)throw"invalid extension substitution";return e.GSUB.subt(r,o.ltype,u+P)}console.debug("unsupported GSUB table LookupType",a,"format",h.fmt)}return h},e.GSUB.readSubClassSet=function(r,a){var s=e._bin.readUshort,o=a,l=[],u=s(r,a);a+=2;for(var h=0;h<u;h++){var p=s(r,a);a+=2,l.push(e.GSUB.readSubClassRule(r,o+p))}return l},e.GSUB.readSubClassRule=function(r,a){var s=e._bin.readUshort,o={},l=s(r,a),u=s(r,a+=2);a+=2,o.input=[];for(var h=0;h<l-1;h++)o.input.push(s(r,a)),a+=2;return o.substLookupRecords=e.GSUB.readSubstLookupRecords(r,a,u),o},e.GSUB.readSubstLookupRecords=function(r,a,s){for(var o=e._bin.readUshort,l=[],u=0;u<s;u++)l.push(o(r,a),o(r,a+2)),a+=4;return l},e.GSUB.readChainSubClassSet=function(r,a){var s=e._bin,o=a,l=[],u=s.readUshort(r,a);a+=2;for(var h=0;h<u;h++){var p=s.readUshort(r,a);a+=2,l.push(e.GSUB.readChainSubClassRule(r,o+p))}return l},e.GSUB.readChainSubClassRule=function(r,a){for(var s=e._bin,o={},l=["backtrack","input","lookahead"],u=0;u<l.length;u++){var h=s.readUshort(r,a);a+=2,u==1&&h--,o[l[u]]=s.readUshorts(r,a,h),a+=2*o[l[u]].length}return h=s.readUshort(r,a),a+=2,o.subst=s.readUshorts(r,a,2*h),a+=2*o.subst.length,o},e.GSUB.readLigatureSet=function(r,a){var s=e._bin,o=a,l=[],u=s.readUshort(r,a);a+=2;for(var h=0;h<u;h++){var p=s.readUshort(r,a);a+=2,l.push(e.GSUB.readLigature(r,o+p))}return l},e.GSUB.readLigature=function(r,a){var s=e._bin,o={chain:[]};o.nglyph=s.readUshort(r,a),a+=2;var l=s.readUshort(r,a);a+=2;for(var u=0;u<l-1;u++)o.chain.push(s.readUshort(r,a)),a+=2;return o},e.head={},e.head.parse=function(r,a,s){var o=e._bin,l={};return o.readFixed(r,a),a+=4,l.fontRevision=o.readFixed(r,a),a+=4,o.readUint(r,a),a+=4,o.readUint(r,a),a+=4,l.flags=o.readUshort(r,a),a+=2,l.unitsPerEm=o.readUshort(r,a),a+=2,l.created=o.readUint64(r,a),a+=8,l.modified=o.readUint64(r,a),a+=8,l.xMin=o.readShort(r,a),a+=2,l.yMin=o.readShort(r,a),a+=2,l.xMax=o.readShort(r,a),a+=2,l.yMax=o.readShort(r,a),a+=2,l.macStyle=o.readUshort(r,a),a+=2,l.lowestRecPPEM=o.readUshort(r,a),a+=2,l.fontDirectionHint=o.readShort(r,a),a+=2,l.indexToLocFormat=o.readShort(r,a),a+=2,l.glyphDataFormat=o.readShort(r,a),a+=2,l},e.hhea={},e.hhea.parse=function(r,a,s){var o=e._bin,l={};return o.readFixed(r,a),a+=4,l.ascender=o.readShort(r,a),a+=2,l.descender=o.readShort(r,a),a+=2,l.lineGap=o.readShort(r,a),a+=2,l.advanceWidthMax=o.readUshort(r,a),a+=2,l.minLeftSideBearing=o.readShort(r,a),a+=2,l.minRightSideBearing=o.readShort(r,a),a+=2,l.xMaxExtent=o.readShort(r,a),a+=2,l.caretSlopeRise=o.readShort(r,a),a+=2,l.caretSlopeRun=o.readShort(r,a),a+=2,l.caretOffset=o.readShort(r,a),a+=2,a+=8,l.metricDataFormat=o.readShort(r,a),a+=2,l.numberOfHMetrics=o.readUshort(r,a),a+=2,l},e.hmtx={},e.hmtx.parse=function(r,a,s,o){for(var l=e._bin,u={aWidth:[],lsBearing:[]},h=0,p=0,g=0;g<o.maxp.numGlyphs;g++)g<o.hhea.numberOfHMetrics&&(h=l.readUshort(r,a),a+=2,p=l.readShort(r,a),a+=2),u.aWidth.push(h),u.lsBearing.push(p);return u},e.kern={},e.kern.parse=function(r,a,s,o){var l=e._bin,u=l.readUshort(r,a);if(a+=2,u==1)return e.kern.parseV1(r,a-2,s,o);var h=l.readUshort(r,a);a+=2;for(var p={glyph1:[],rval:[]},g=0;g<h;g++){a+=2,s=l.readUshort(r,a),a+=2;var y=l.readUshort(r,a);a+=2;var _=y>>>8;if((_&=15)!=0)throw"unknown kern table format: "+_;a=e.kern.readFormat0(r,a,p)}return p},e.kern.parseV1=function(r,a,s,o){var l=e._bin;l.readFixed(r,a),a+=4;var u=l.readUint(r,a);a+=4;for(var h={glyph1:[],rval:[]},p=0;p<u;p++){l.readUint(r,a),a+=4;var g=l.readUshort(r,a);a+=2,l.readUshort(r,a),a+=2;var y=g>>>8;if((y&=15)!=0)throw"unknown kern table format: "+y;a=e.kern.readFormat0(r,a,h)}return h},e.kern.readFormat0=function(r,a,s){var o=e._bin,l=-1,u=o.readUshort(r,a);a+=2,o.readUshort(r,a),a+=2,o.readUshort(r,a),a+=2,o.readUshort(r,a),a+=2;for(var h=0;h<u;h++){var p=o.readUshort(r,a);a+=2;var g=o.readUshort(r,a);a+=2;var y=o.readShort(r,a);a+=2,p!=l&&(s.glyph1.push(p),s.rval.push({glyph2:[],vals:[]}));var _=s.rval[s.rval.length-1];_.glyph2.push(g),_.vals.push(y),l=p}return a},e.loca={},e.loca.parse=function(r,a,s,o){var l=e._bin,u=[],h=o.head.indexToLocFormat,p=o.maxp.numGlyphs+1;if(h==0)for(var g=0;g<p;g++)u.push(l.readUshort(r,a+(g<<1))<<1);if(h==1)for(g=0;g<p;g++)u.push(l.readUint(r,a+(g<<2)));return u},e.maxp={},e.maxp.parse=function(r,a,s){var o=e._bin,l={},u=o.readUint(r,a);return a+=4,l.numGlyphs=o.readUshort(r,a),a+=2,u==65536&&(l.maxPoints=o.readUshort(r,a),a+=2,l.maxContours=o.readUshort(r,a),a+=2,l.maxCompositePoints=o.readUshort(r,a),a+=2,l.maxCompositeContours=o.readUshort(r,a),a+=2,l.maxZones=o.readUshort(r,a),a+=2,l.maxTwilightPoints=o.readUshort(r,a),a+=2,l.maxStorage=o.readUshort(r,a),a+=2,l.maxFunctionDefs=o.readUshort(r,a),a+=2,l.maxInstructionDefs=o.readUshort(r,a),a+=2,l.maxStackElements=o.readUshort(r,a),a+=2,l.maxSizeOfInstructions=o.readUshort(r,a),a+=2,l.maxComponentElements=o.readUshort(r,a),a+=2,l.maxComponentDepth=o.readUshort(r,a),a+=2),l},e.name={},e.name.parse=function(r,a,s){var o=e._bin,l={};o.readUshort(r,a),a+=2;var u=o.readUshort(r,a);a+=2,o.readUshort(r,a);for(var h,p=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],g=a+=2,y=0;y<u;y++){var _=o.readUshort(r,a);a+=2;var S=o.readUshort(r,a);a+=2;var x=o.readUshort(r,a);a+=2;var w=o.readUshort(r,a);a+=2;var T=o.readUshort(r,a);a+=2;var M=o.readUshort(r,a);a+=2;var C,N=p[w],D=g+12*u+M;if(_==0)C=o.readUnicode(r,D,T/2);else if(_==3&&S==0)C=o.readUnicode(r,D,T/2);else if(S==0)C=o.readASCII(r,D,T);else if(S==1)C=o.readUnicode(r,D,T/2);else if(S==3)C=o.readUnicode(r,D,T/2);else{if(_!=1)throw"unknown encoding "+S+", platformID: "+_;C=o.readASCII(r,D,T),console.debug("reading unknown MAC encoding "+S+" as ASCII")}var P="p"+_+","+x.toString(16);l[P]==null&&(l[P]={}),l[P][N!==void 0?N:w]=C,l[P]._lang=x}for(var z in l)if(l[z].postScriptName!=null&&l[z]._lang==1033)return l[z];for(var z in l)if(l[z].postScriptName!=null&&l[z]._lang==0)return l[z];for(var z in l)if(l[z].postScriptName!=null&&l[z]._lang==3084)return l[z];for(var z in l)if(l[z].postScriptName!=null)return l[z];for(var z in l){h=z;break}return console.debug("returning name table with languageID "+l[h]._lang),l[h]},e["OS/2"]={},e["OS/2"].parse=function(r,a,s){var o=e._bin.readUshort(r,a);a+=2;var l={};if(o==0)e["OS/2"].version0(r,a,l);else if(o==1)e["OS/2"].version1(r,a,l);else if(o==2||o==3||o==4)e["OS/2"].version2(r,a,l);else{if(o!=5)throw"unknown OS/2 table version: "+o;e["OS/2"].version5(r,a,l)}return l},e["OS/2"].version0=function(r,a,s){var o=e._bin;return s.xAvgCharWidth=o.readShort(r,a),a+=2,s.usWeightClass=o.readUshort(r,a),a+=2,s.usWidthClass=o.readUshort(r,a),a+=2,s.fsType=o.readUshort(r,a),a+=2,s.ySubscriptXSize=o.readShort(r,a),a+=2,s.ySubscriptYSize=o.readShort(r,a),a+=2,s.ySubscriptXOffset=o.readShort(r,a),a+=2,s.ySubscriptYOffset=o.readShort(r,a),a+=2,s.ySuperscriptXSize=o.readShort(r,a),a+=2,s.ySuperscriptYSize=o.readShort(r,a),a+=2,s.ySuperscriptXOffset=o.readShort(r,a),a+=2,s.ySuperscriptYOffset=o.readShort(r,a),a+=2,s.yStrikeoutSize=o.readShort(r,a),a+=2,s.yStrikeoutPosition=o.readShort(r,a),a+=2,s.sFamilyClass=o.readShort(r,a),a+=2,s.panose=o.readBytes(r,a,10),a+=10,s.ulUnicodeRange1=o.readUint(r,a),a+=4,s.ulUnicodeRange2=o.readUint(r,a),a+=4,s.ulUnicodeRange3=o.readUint(r,a),a+=4,s.ulUnicodeRange4=o.readUint(r,a),a+=4,s.achVendID=[o.readInt8(r,a),o.readInt8(r,a+1),o.readInt8(r,a+2),o.readInt8(r,a+3)],a+=4,s.fsSelection=o.readUshort(r,a),a+=2,s.usFirstCharIndex=o.readUshort(r,a),a+=2,s.usLastCharIndex=o.readUshort(r,a),a+=2,s.sTypoAscender=o.readShort(r,a),a+=2,s.sTypoDescender=o.readShort(r,a),a+=2,s.sTypoLineGap=o.readShort(r,a),a+=2,s.usWinAscent=o.readUshort(r,a),a+=2,s.usWinDescent=o.readUshort(r,a),a+=2},e["OS/2"].version1=function(r,a,s){var o=e._bin;return a=e["OS/2"].version0(r,a,s),s.ulCodePageRange1=o.readUint(r,a),a+=4,s.ulCodePageRange2=o.readUint(r,a),a+=4},e["OS/2"].version2=function(r,a,s){var o=e._bin;return a=e["OS/2"].version1(r,a,s),s.sxHeight=o.readShort(r,a),a+=2,s.sCapHeight=o.readShort(r,a),a+=2,s.usDefault=o.readUshort(r,a),a+=2,s.usBreak=o.readUshort(r,a),a+=2,s.usMaxContext=o.readUshort(r,a),a+=2},e["OS/2"].version5=function(r,a,s){var o=e._bin;return a=e["OS/2"].version2(r,a,s),s.usLowerOpticalPointSize=o.readUshort(r,a),a+=2,s.usUpperOpticalPointSize=o.readUshort(r,a),a+=2},e.post={},e.post.parse=function(r,a,s){var o=e._bin,l={};return l.version=o.readFixed(r,a),a+=4,l.italicAngle=o.readFixed(r,a),a+=4,l.underlinePosition=o.readShort(r,a),a+=2,l.underlineThickness=o.readShort(r,a),a+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(r,a){var s=r.cmap,o=-1;if(s.p0e4!=null?o=s.p0e4:s.p3e1!=null?o=s.p3e1:s.p1e0!=null?o=s.p1e0:s.p0e3!=null&&(o=s.p0e3),o==-1)throw"no familiar platform and encoding!";var l=s.tables[o];if(l.format==0)return a>=l.map.length?0:l.map[a];if(l.format==4){for(var u=-1,h=0;h<l.endCount.length;h++)if(a<=l.endCount[h]){u=h;break}return u==-1||l.startCount[u]>a?0:65535&(l.idRangeOffset[u]!=0?l.glyphIdArray[a-l.startCount[u]+(l.idRangeOffset[u]>>1)-(l.idRangeOffset.length-u)]:a+l.idDelta[u])}if(l.format==12){if(a>l.groups[l.groups.length-1][1])return 0;for(h=0;h<l.groups.length;h++){var p=l.groups[h];if(p[0]<=a&&a<=p[1])return p[2]+(a-p[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(r,a){var s={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[a]){var o=r.SVG.entries[a];return o==null?s:(typeof o=="string"&&(o=e.SVG.toPath(o),r.SVG.entries[a]=o),o)}if(r.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},u=r.CFF,h=r.CFF.Private;if(u.ROS){for(var p=0;u.FDSelect[p+2]<=a;)p+=2;h=u.FDArray[u.FDSelect[p+1]].Private}e.U._drawCFF(r.CFF.CharStrings[a],l,u,h,s)}else r.glyf&&e.U._drawGlyf(a,r,s);return s},e.U._drawGlyf=function(r,a,s){var o=a.glyf[r];o==null&&(o=a.glyf[r]=e.glyf._parseGlyf(a,r)),o!=null&&(o.noc>-1?e.U._simpleGlyph(o,s):e.U._compoGlyph(o,a,s))},e.U._simpleGlyph=function(r,a){for(var s=0;s<r.noc;s++){for(var o=s==0?0:r.endPts[s-1]+1,l=r.endPts[s],u=o;u<=l;u++){var h=u==o?l:u-1,p=u==l?o:u+1,g=1&r.flags[u],y=1&r.flags[h],_=1&r.flags[p],S=r.xs[u],x=r.ys[u];if(u==o)if(g){if(!y){e.U.P.moveTo(a,S,x);continue}e.U.P.moveTo(a,r.xs[h],r.ys[h])}else y?e.U.P.moveTo(a,r.xs[h],r.ys[h]):e.U.P.moveTo(a,(r.xs[h]+S)/2,(r.ys[h]+x)/2);g?y&&e.U.P.lineTo(a,S,x):_?e.U.P.qcurveTo(a,S,x,r.xs[p],r.ys[p]):e.U.P.qcurveTo(a,S,x,(S+r.xs[p])/2,(x+r.ys[p])/2)}e.U.P.closePath(a)}},e.U._compoGlyph=function(r,a,s){for(var o=0;o<r.parts.length;o++){var l={cmds:[],crds:[]},u=r.parts[o];e.U._drawGlyf(u.glyphIndex,a,l);for(var h=u.m,p=0;p<l.crds.length;p+=2){var g=l.crds[p],y=l.crds[p+1];s.crds.push(g*h.a+y*h.b+h.tx),s.crds.push(g*h.c+y*h.d+h.ty)}for(p=0;p<l.cmds.length;p++)s.cmds.push(l.cmds[p])}},e.U._getGlyphClass=function(r,a){var s=e._lctf.getInterval(a,r);return s==-1?0:a[s+2]},e.U._applySubs=function(r,a,s,o){for(var l=r.length-a-1,u=0;u<s.tabs.length;u++)if(s.tabs[u]!=null){var h,p=s.tabs[u];if(!p.coverage||(h=e._lctf.coverageIndex(p.coverage,r[a]))!=-1){if(s.ltype==1)r[a],p.fmt==1?r[a]=r[a]+p.delta:r[a]=p.newg[h];else if(s.ltype==4)for(var g=p.vals[h],y=0;y<g.length;y++){var _=g[y],S=_.chain.length;if(!(S>l)){for(var x=!0,w=0,T=0;T<S;T++){for(;r[a+w+(1+T)]==-1;)w++;_.chain[T]!=r[a+w+(1+T)]&&(x=!1)}if(x){for(r[a]=_.nglyph,T=0;T<S+w;T++)r[a+T+1]=-1;break}}}else if(s.ltype==5&&p.fmt==2)for(var M=e._lctf.getInterval(p.cDef,r[a]),C=p.cDef[M+2],N=p.scset[C],D=0;D<N.length;D++){var P=N[D],z=P.input;if(!(z.length>l)){for(x=!0,T=0;T<z.length;T++){var I=e._lctf.getInterval(p.cDef,r[a+1+T]);if(M==-1&&p.cDef[I+2]!=z[T]){x=!1;break}}if(x){var L=P.substLookupRecords;for(y=0;y<L.length;y+=2)L[y],L[y+1]}}}else if(s.ltype==6&&p.fmt==3){if(!e.U._glsCovered(r,p.backCvg,a-p.backCvg.length)||!e.U._glsCovered(r,p.inptCvg,a)||!e.U._glsCovered(r,p.ahedCvg,a+p.inptCvg.length))continue;var H=p.lookupRec;for(D=0;D<H.length;D+=2){M=H[D];var j=o[H[D+1]];e.U._applySubs(r,a+M,j,o)}}}}},e.U._glsCovered=function(r,a,s){for(var o=0;o<a.length;o++)if(e._lctf.coverageIndex(a[o],r[s+o])==-1)return!1;return!0},e.U.glyphsToPath=function(r,a,s){for(var o={cmds:[],crds:[]},l=0,u=0;u<a.length;u++){var h=a[u];if(h!=-1){for(var p=u<a.length-1&&a[u+1]!=-1?a[u+1]:0,g=e.U.glyphToPath(r,h),y=0;y<g.crds.length;y+=2)o.crds.push(g.crds[y]+l),o.crds.push(g.crds[y+1]);for(s&&o.cmds.push(s),y=0;y<g.cmds.length;y++)o.cmds.push(g.cmds[y]);s&&o.cmds.push("X"),l+=r.hmtx.aWidth[h],u<a.length-1&&(l+=e.U.getPairAdjustment(r,h,p))}}return o},e.U.P={},e.U.P.moveTo=function(r,a,s){r.cmds.push("M"),r.crds.push(a,s)},e.U.P.lineTo=function(r,a,s){r.cmds.push("L"),r.crds.push(a,s)},e.U.P.curveTo=function(r,a,s,o,l,u,h){r.cmds.push("C"),r.crds.push(a,s,o,l,u,h)},e.U.P.qcurveTo=function(r,a,s,o,l){r.cmds.push("Q"),r.crds.push(a,s,o,l)},e.U.P.closePath=function(r){r.cmds.push("Z")},e.U._drawCFF=function(r,a,s,o,l){for(var u=a.stack,h=a.nStems,p=a.haveWidth,g=a.width,y=a.open,_=0,S=a.x,x=a.y,w=0,T=0,M=0,C=0,N=0,D=0,P=0,z=0,I=0,L=0,H={val:0,size:0};_<r.length;){e.CFF.getCharString(r,_,H);var j=H.val;if(_+=H.size,j=="o1"||j=="o18")u.length%2!=0&&!p&&(g=u.shift()+o.nominalWidthX),h+=u.length>>1,u.length=0,p=!0;else if(j=="o3"||j=="o23")u.length%2!=0&&!p&&(g=u.shift()+o.nominalWidthX),h+=u.length>>1,u.length=0,p=!0;else if(j=="o4")u.length>1&&!p&&(g=u.shift()+o.nominalWidthX,p=!0),y&&e.U.P.closePath(l),x+=u.pop(),e.U.P.moveTo(l,S,x),y=!0;else if(j=="o5")for(;u.length>0;)S+=u.shift(),x+=u.shift(),e.U.P.lineTo(l,S,x);else if(j=="o6"||j=="o7")for(var G=u.length,K=j=="o6",ee=0;ee<G;ee++){var Y=u.shift();K?S+=Y:x+=Y,K=!K,e.U.P.lineTo(l,S,x)}else if(j=="o8"||j=="o24"){G=u.length;for(var re=0;re+6<=G;)w=S+u.shift(),T=x+u.shift(),M=w+u.shift(),C=T+u.shift(),S=M+u.shift(),x=C+u.shift(),e.U.P.curveTo(l,w,T,M,C,S,x),re+=6;j=="o24"&&(S+=u.shift(),x+=u.shift(),e.U.P.lineTo(l,S,x))}else{if(j=="o11")break;if(j=="o1234"||j=="o1235"||j=="o1236"||j=="o1237")j=="o1234"&&(T=x,M=(w=S+u.shift())+u.shift(),L=C=T+u.shift(),D=C,z=x,S=(P=(N=(I=M+u.shift())+u.shift())+u.shift())+u.shift(),e.U.P.curveTo(l,w,T,M,C,I,L),e.U.P.curveTo(l,N,D,P,z,S,x)),j=="o1235"&&(w=S+u.shift(),T=x+u.shift(),M=w+u.shift(),C=T+u.shift(),I=M+u.shift(),L=C+u.shift(),N=I+u.shift(),D=L+u.shift(),P=N+u.shift(),z=D+u.shift(),S=P+u.shift(),x=z+u.shift(),u.shift(),e.U.P.curveTo(l,w,T,M,C,I,L),e.U.P.curveTo(l,N,D,P,z,S,x)),j=="o1236"&&(w=S+u.shift(),T=x+u.shift(),M=w+u.shift(),L=C=T+u.shift(),D=C,P=(N=(I=M+u.shift())+u.shift())+u.shift(),z=D+u.shift(),S=P+u.shift(),e.U.P.curveTo(l,w,T,M,C,I,L),e.U.P.curveTo(l,N,D,P,z,S,x)),j=="o1237"&&(w=S+u.shift(),T=x+u.shift(),M=w+u.shift(),C=T+u.shift(),I=M+u.shift(),L=C+u.shift(),N=I+u.shift(),D=L+u.shift(),P=N+u.shift(),z=D+u.shift(),Math.abs(P-S)>Math.abs(z-x)?S=P+u.shift():x=z+u.shift(),e.U.P.curveTo(l,w,T,M,C,I,L),e.U.P.curveTo(l,N,D,P,z,S,x));else if(j=="o14"){if(u.length>0&&!p&&(g=u.shift()+s.nominalWidthX,p=!0),u.length==4){var J=u.shift(),se=u.shift(),q=u.shift(),X=u.shift(),oe=e.CFF.glyphBySE(s,q),ue=e.CFF.glyphBySE(s,X);e.U._drawCFF(s.CharStrings[oe],a,s,o,l),a.x=J,a.y=se,e.U._drawCFF(s.CharStrings[ue],a,s,o,l)}y&&(e.U.P.closePath(l),y=!1)}else if(j=="o19"||j=="o20")u.length%2!=0&&!p&&(g=u.shift()+o.nominalWidthX),h+=u.length>>1,u.length=0,p=!0,_+=h+7>>3;else if(j=="o21")u.length>2&&!p&&(g=u.shift()+o.nominalWidthX,p=!0),x+=u.pop(),S+=u.pop(),y&&e.U.P.closePath(l),e.U.P.moveTo(l,S,x),y=!0;else if(j=="o22")u.length>1&&!p&&(g=u.shift()+o.nominalWidthX,p=!0),S+=u.pop(),y&&e.U.P.closePath(l),e.U.P.moveTo(l,S,x),y=!0;else if(j=="o25"){for(;u.length>6;)S+=u.shift(),x+=u.shift(),e.U.P.lineTo(l,S,x);w=S+u.shift(),T=x+u.shift(),M=w+u.shift(),C=T+u.shift(),S=M+u.shift(),x=C+u.shift(),e.U.P.curveTo(l,w,T,M,C,S,x)}else if(j=="o26")for(u.length%2&&(S+=u.shift());u.length>0;)w=S,T=x+u.shift(),S=M=w+u.shift(),x=(C=T+u.shift())+u.shift(),e.U.P.curveTo(l,w,T,M,C,S,x);else if(j=="o27")for(u.length%2&&(x+=u.shift());u.length>0;)T=x,M=(w=S+u.shift())+u.shift(),C=T+u.shift(),S=M+u.shift(),x=C,e.U.P.curveTo(l,w,T,M,C,S,x);else if(j=="o10"||j=="o29"){var Z=j=="o10"?o:s;if(u.length==0)console.debug("error: empty stack");else{var ce=u.pop(),me=Z.Subrs[ce+Z.Bias];a.x=S,a.y=x,a.nStems=h,a.haveWidth=p,a.width=g,a.open=y,e.U._drawCFF(me,a,s,o,l),S=a.x,x=a.y,h=a.nStems,p=a.haveWidth,g=a.width,y=a.open}}else if(j=="o30"||j=="o31"){var de=u.length,ve=(re=0,j=="o31");for(re+=de-(G=-3&de);re<G;)ve?(T=x,M=(w=S+u.shift())+u.shift(),x=(C=T+u.shift())+u.shift(),G-re==5?(S=M+u.shift(),re++):S=M,ve=!1):(w=S,T=x+u.shift(),M=w+u.shift(),C=T+u.shift(),S=M+u.shift(),G-re==5?(x=C+u.shift(),re++):x=C,ve=!0),e.U.P.curveTo(l,w,T,M,C,S,x),re+=4}else{if((j+"").charAt(0)=="o")throw console.debug("Unknown operation: "+j,r),j;u.push(j)}}}a.x=S,a.y=x,a.nStems=h,a.haveWidth=p,a.width=g,a.open=y};var t=e,i={Typr:t};return n.Typr=t,n.default=i,Object.defineProperty(n,"__esModule",{value:!0}),n})({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function mee(){return(function(n){var e=Uint8Array,t=Uint16Array,i=Uint32Array,r=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),a=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=function(j,G){for(var K=new t(31),ee=0;ee<31;++ee)K[ee]=G+=1<<j[ee-1];var Y=new i(K[30]);for(ee=1;ee<30;++ee)for(var re=K[ee];re<K[ee+1];++re)Y[re]=re-K[ee]<<5|ee;return[K,Y]},l=o(r,2),u=l[0],h=l[1];u[28]=258,h[258]=28;for(var p=o(a,0)[0],g=new t(32768),y=0;y<32768;++y){var _=(43690&y)>>>1|(21845&y)<<1;_=(61680&(_=(52428&_)>>>2|(13107&_)<<2))>>>4|(3855&_)<<4,g[y]=((65280&_)>>>8|(255&_)<<8)>>>1}var S=function(j,G,K){for(var ee=j.length,Y=0,re=new t(G);Y<ee;++Y)++re[j[Y]-1];var J,se=new t(G);for(Y=0;Y<G;++Y)se[Y]=se[Y-1]+re[Y-1]<<1;{J=new t(1<<G);var q=15-G;for(Y=0;Y<ee;++Y)if(j[Y])for(var X=Y<<4|j[Y],oe=G-j[Y],ue=se[j[Y]-1]++<<oe,Z=ue|(1<<oe)-1;ue<=Z;++ue)J[g[ue]>>>q]=X}return J},x=new e(288);for(y=0;y<144;++y)x[y]=8;for(y=144;y<256;++y)x[y]=9;for(y=256;y<280;++y)x[y]=7;for(y=280;y<288;++y)x[y]=8;var w=new e(32);for(y=0;y<32;++y)w[y]=5;var T=S(x,9),M=S(w,5),C=function(j){for(var G=j[0],K=1;K<j.length;++K)j[K]>G&&(G=j[K]);return G},N=function(j,G,K){var ee=G/8|0;return(j[ee]|j[ee+1]<<8)>>(7&G)&K},D=function(j,G){var K=G/8|0;return(j[K]|j[K+1]<<8|j[K+2]<<16)>>(7&G)},P=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],z=function(j,G,K){var ee=new Error(G||P[j]);if(ee.code=j,Error.captureStackTrace&&Error.captureStackTrace(ee,z),!K)throw ee;return ee},I=function(j,G,K){var ee=j.length;if(!ee||K&&!K.l&&ee<5)return G||new e(0);var Y=!G||K,re=!K||K.i;K||(K={}),G||(G=new e(3*ee));var J,se=function($e){var vt=G.length;if($e>vt){var gt=new e(Math.max(2*vt,$e));gt.set(G),G=gt}},q=K.f||0,X=K.p||0,oe=K.b||0,ue=K.l,Z=K.d,ce=K.m,me=K.n,de=8*ee;do{if(!ue){K.f=q=N(j,X,1);var ve=N(j,X+1,3);if(X+=3,!ve){var We=j[(Pe=((J=X)/8|0)+(7&J&&1)+4)-4]|j[Pe-3]<<8,ze=Pe+We;if(ze>ee){re&&z(0);break}Y&&se(oe+We),G.set(j.subarray(Pe,ze),oe),K.b=oe+=We,K.p=X=8*ze;continue}if(ve==1)ue=T,Z=M,ce=9,me=5;else if(ve==2){var qe=N(j,X,31)+257,_e=N(j,X+10,15)+4,Ae=qe+N(j,X+5,31)+1;X+=14;for(var te=new e(Ae),ke=new e(19),De=0;De<_e;++De)ke[s[De]]=N(j,X+3*De,7);X+=3*_e;var Ie=C(ke),Te=(1<<Ie)-1,Xe=S(ke,Ie);for(De=0;De<Ae;){var Pe,$=Xe[N(j,X,Te)];if(X+=15&$,(Pe=$>>>4)<16)te[De++]=Pe;else{var W=0,ae=0;for(Pe==16?(ae=3+N(j,X,3),X+=2,W=te[De-1]):Pe==17?(ae=3+N(j,X,7),X+=3):Pe==18&&(ae=11+N(j,X,127),X+=7);ae--;)te[De++]=W}}var he=te.subarray(0,qe),Se=te.subarray(qe);ce=C(he),me=C(Se),ue=S(he,ce),Z=S(Se,me)}else z(1);if(X>de){re&&z(0);break}}Y&&se(oe+131072);for(var Oe=(1<<ce)-1,je=(1<<me)-1,Ge=X;;Ge=X){var Ke=(W=ue[D(j,X)&Oe])>>>4;if((X+=15&W)>de){re&&z(0);break}if(W||z(2),Ke<256)G[oe++]=Ke;else{if(Ke==256){Ge=X,ue=null;break}var _t=Ke-254;if(Ke>264){var Ye=r[De=Ke-257];_t=N(j,X,(1<<Ye)-1)+u[De],X+=Ye}var ct=Z[D(j,X)&je],it=ct>>>4;if(ct||z(3),X+=15&ct,Se=p[it],it>3&&(Ye=a[it],Se+=D(j,X)&(1<<Ye)-1,X+=Ye),X>de){re&&z(0);break}Y&&se(oe+131072);for(var Ze=oe+_t;oe<Ze;oe+=4)G[oe]=G[oe-Se],G[oe+1]=G[oe+1-Se],G[oe+2]=G[oe+2-Se],G[oe+3]=G[oe+3-Se];oe=Ze}}K.l=ue,K.p=Ge,K.b=oe,ue&&(q=1,K.m=ce,K.d=Z,K.n=me)}while(!q);return oe==G.length?G:(function($e,vt,gt){(gt==null||gt>$e.length)&&(gt=$e.length);var jt=new($e instanceof t?t:$e instanceof i?i:e)(gt-vt);return jt.set($e.subarray(vt,gt)),jt})(G,0,oe)},L=new e(0),H=typeof TextDecoder<"u"&&new TextDecoder;try{H.decode(L,{stream:!0})}catch{}return n.convert_streams=function(j){var G=new DataView(j),K=0;function ee(){var qe=G.getUint16(K);return K+=2,qe}function Y(){var qe=G.getUint32(K);return K+=4,qe}function re(qe){We.setUint16(ze,qe),ze+=2}function J(qe){We.setUint32(ze,qe),ze+=4}for(var se={signature:Y(),flavor:Y(),length:Y(),numTables:ee(),reserved:ee(),totalSfntSize:Y(),majorVersion:ee(),minorVersion:ee(),metaOffset:Y(),metaLength:Y(),metaOrigLength:Y(),privOffset:Y(),privLength:Y()},q=0;Math.pow(2,q)<=se.numTables;)q++;q--;for(var X=16*Math.pow(2,q),oe=16*se.numTables-X,ue=12,Z=[],ce=0;ce<se.numTables;ce++)Z.push({tag:Y(),offset:Y(),compLength:Y(),origLength:Y(),origChecksum:Y()}),ue+=16;var me,de=new Uint8Array(12+16*Z.length+Z.reduce((function(qe,_e){return qe+_e.origLength+4}),0)),ve=de.buffer,We=new DataView(ve),ze=0;return J(se.flavor),re(se.numTables),re(X),re(q),re(oe),Z.forEach((function(qe){J(qe.tag),J(qe.origChecksum),J(ue),J(qe.origLength),qe.outOffset=ue,(ue+=qe.origLength)%4!=0&&(ue+=4-ue%4)})),Z.forEach((function(qe){var _e,Ae=j.slice(qe.offset,qe.offset+qe.compLength);if(qe.compLength!=qe.origLength){var te=new Uint8Array(qe.origLength);_e=new Uint8Array(Ae,2),I(_e,te)}else te=new Uint8Array(Ae);de.set(te,qe.outOffset);var ke=0;(ue=qe.outOffset+qe.origLength)%4!=0&&(ke=4-ue%4),de.set(new Uint8Array(ke).buffer,qe.outOffset+qe.origLength),me=ue+ke})),ve.slice(0,me)},Object.defineProperty(n,"__esModule",{value:!0}),n})({}).convert_streams}function gee(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},r=1,a=2,s=4,o=8,l=16,u=32;let h;function p(P){if(!h){const z={R:a,L:r,D:s,C:l,U:u,T:o};h=new Map;for(let I in i){let L=0;i[I].split(",").forEach(H=>{let[j,G]=H.split("+");j=parseInt(j,36),G=G?parseInt(G,36):0,h.set(L+=j,z[I]);for(let K=G;K--;)h.set(++L,z[I])})}}return h.get(P)||u}const g=1,y=2,_=3,S=4,x=[null,"isol","init","fina","medi"];function w(P){const z=new Uint8Array(P.length);let I=u,L=g,H=-1;for(let j=0;j<P.length;j++){const G=P.codePointAt(j);let K=p(G)|0,ee=g;K&o||(I&(r|s|l)?K&(a|s|l)?(ee=_,(L===g||L===_)&&z[H]++):K&(r|u)&&(L===y||L===S)&&z[H]--:I&(a|u)&&(L===y||L===S)&&z[H]--,L=z[j]=ee,I=K,H=j,G>65535&&j++)}return z}function T(P,z){const I=[];for(let H=0;H<z.length;H++){const j=z.codePointAt(H);j>65535&&H++,I.push(n.U.codeToGlyph(P,j))}const L=P.GSUB;if(L){const{lookupList:H,featureList:j}=L;let G;const K=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,ee=[];j.forEach(Y=>{if(K.test(Y.tag))for(let re=0;re<Y.tab.length;re++){if(ee[Y.tab[re]])continue;ee[Y.tab[re]]=!0;const J=H[Y.tab[re]],se=/^(isol|init|fina|medi)$/.test(Y.tag);se&&!G&&(G=w(z));for(let q=0;q<I.length;q++)(!G||!se||x[G[q]]===Y.tag)&&n.U._applySubs(I,q,J,H)}})}return I}function M(P,z){const I=new Int16Array(z.length*3);let L=0;for(;L<z.length;L++){const K=z[L];if(K===-1)continue;I[L*3+2]=P.hmtx.aWidth[K];const ee=P.GPOS;if(ee){const Y=ee.lookupList;for(let re=0;re<Y.length;re++){const J=Y[re];for(let se=0;se<J.tabs.length;se++){const q=J.tabs[se];if(J.ltype===1){if(n._lctf.coverageIndex(q.coverage,K)!==-1&&q.pos){G(q.pos,L);break}}else if(J.ltype===2){let X=null,oe=H();if(oe!==-1){const ue=n._lctf.coverageIndex(q.coverage,z[oe]);if(ue!==-1){if(q.fmt===1){const Z=q.pairsets[ue];for(let ce=0;ce<Z.length;ce++)Z[ce].gid2===K&&(X=Z[ce])}else if(q.fmt===2){const Z=n.U._getGlyphClass(z[oe],q.classDef1),ce=n.U._getGlyphClass(K,q.classDef2);X=q.matrix[Z][ce]}if(X){X.val1&&G(X.val1,oe),X.val2&&G(X.val2,L);break}}}}else if(J.ltype===4){const X=n._lctf.coverageIndex(q.markCoverage,K);if(X!==-1){const oe=H(j),ue=oe===-1?-1:n._lctf.coverageIndex(q.baseCoverage,z[oe]);if(ue!==-1){const Z=q.markArray[X],ce=q.baseArray[ue][Z.markClass];I[L*3]=ce.x-Z.x+I[oe*3]-I[oe*3+2],I[L*3+1]=ce.y-Z.y+I[oe*3+1];break}}}else if(J.ltype===6){const X=n._lctf.coverageIndex(q.mark1Coverage,K);if(X!==-1){const oe=H();if(oe!==-1){const ue=z[oe];if(C(P,ue)===3){const Z=n._lctf.coverageIndex(q.mark2Coverage,ue);if(Z!==-1){const ce=q.mark1Array[X],me=q.mark2Array[Z][ce.markClass];I[L*3]=me.x-ce.x+I[oe*3]-I[oe*3+2],I[L*3+1]=me.y-ce.y+I[oe*3+1];break}}}}}}}}else if(P.kern&&!P.cff){const Y=H();if(Y!==-1){const re=P.kern.glyph1.indexOf(z[Y]);if(re!==-1){const J=P.kern.rval[re].glyph2.indexOf(K);J!==-1&&(I[Y*3+2]+=P.kern.rval[re].vals[J])}}}}return I;function H(K){for(let ee=L-1;ee>=0;ee--)if(z[ee]!==-1&&(!K||K(z[ee])))return ee;return-1}function j(K){return C(P,K)===1}function G(K,ee){for(let Y=0;Y<3;Y++)I[ee*3+Y]+=K[Y]||0}}function C(P,z){const I=P.GDEF&&P.GDEF.glyphClassDef;return I?n.U._getGlyphClass(z,I):0}function N(...P){for(let z=0;z<P.length;z++)if(typeof P[z]=="number")return P[z]}function D(P){const z=Object.create(null),I=P["OS/2"],L=P.hhea,H=P.head.unitsPerEm,j=N(I&&I.sTypoAscender,L&&L.ascender,H),G={unitsPerEm:H,ascender:j,descender:N(I&&I.sTypoDescender,L&&L.descender,0),capHeight:N(I&&I.sCapHeight,j),xHeight:N(I&&I.sxHeight,j),lineGap:N(I&&I.sTypoLineGap,L&&L.lineGap),supportsCodePoint(K){return n.U.codeToGlyph(P,K)>0},forEachGlyph(K,ee,Y,re){let J=0;const se=1/G.unitsPerEm*ee,q=T(P,K);let X=0;const oe=M(P,q);return q.forEach((ue,Z)=>{if(ue!==-1){let ce=z[ue];if(!ce){const{cmds:me,crds:de}=n.U.glyphToPath(P,ue);let ve="",We=0;for(let te=0,ke=me.length;te<ke;te++){const De=t[me[te]];ve+=me[te];for(let Ie=1;Ie<=De;Ie++)ve+=(Ie>1?",":"")+de[We++]}let ze,qe,_e,Ae;if(de.length){ze=qe=1/0,_e=Ae=-1/0;for(let te=0,ke=de.length;te<ke;te+=2){let De=de[te],Ie=de[te+1];De<ze&&(ze=De),Ie<qe&&(qe=Ie),De>_e&&(_e=De),Ie>Ae&&(Ae=Ie)}}else ze=_e=qe=Ae=0;ce=z[ue]={index:ue,advanceWidth:P.hmtx.aWidth[ue],xMin:ze,yMin:qe,xMax:_e,yMax:Ae,path:ve}}re.call(null,ce,J+oe[Z*3]*se,oe[Z*3+1]*se,X),J+=oe[Z*3+2]*se,Y&&(J+=Y*ee)}X+=K.codePointAt(X)>65535?2:1}),J}};return G}return function(z){const I=new Uint8Array(z,0,4),L=n._bin.readASCII(I,0,4);if(L==="wOFF")z=e(z);else if(L==="wOF2")throw new Error("woff2 fonts not supported");return D(n.parse(z)[0])}}const vee=Hg({name:"Typr Font Parser",dependencies:[pee,mee,gee],init(n,e,t){const i=n(),r=e();return t(i,r)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function yee(){return(function(n){var e=function(){this.buckets=new Map};e.prototype.add=function(M){var C=M>>5;this.buckets.set(C,(this.buckets.get(C)||0)|1<<(31&M))},e.prototype.has=function(M){var C=this.buckets.get(M>>5);return C!==void 0&&(C&1<<(31&M))!=0},e.prototype.serialize=function(){var M=[];return this.buckets.forEach((function(C,N){M.push((+N).toString(36)+":"+C.toString(36))})),M.join(",")},e.prototype.deserialize=function(M){var C=this;this.buckets.clear(),M.split(",").forEach((function(N){var D=N.split(":");C.buckets.set(parseInt(D[0],36),parseInt(D[1],36))}))};var t=Math.pow(2,8),i=t-1,r=~i;function a(M){var C=(function(D){return D&r})(M).toString(16),N=(function(D){return(D&r)+t-1})(M).toString(16);return"codepoint-index/plane"+(M>>16)+"/"+C+"-"+N+".json"}function s(M,C){var N=M&i,D=C.codePointAt(N/6|0);return((D=(D||48)-48)&1<<N%6)!=0}function o(M,C){var N;(N=M,N.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map((function(D){return D.split("-").map((function(P){return parseInt(P.trim(),16)}))}))).forEach((function(D){var P=D[0],z=D[1];z===void 0&&(z=P),C(P,z)}))}function l(M,C){o(M,(function(N,D){for(var P=N;P<=D;P++)C(P)}))}var u={},h={},p=new WeakMap,g="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function y(M){var C=p.get(M);return C||(C=new e,l(M.ranges,(function(N){return C.add(N)})),p.set(M,C)),C}var _,S=new Map;function x(M,C,N){return M[C]?C:M[N]?N:(function(D){for(var P in D)return P})(M)}function w(M,C){var N=C;if(!M.includes(N)){N=1/0;for(var D=0;D<M.length;D++)Math.abs(M[D]-C)<Math.abs(N-C)&&(N=M[D])}return N}function T(M){return _||(_=new Set,l("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",(function(C){_.add(C)}))),_.has(M)}return n.CodePointSet=e,n.clearCache=function(){u={},h={}},n.getFontsForString=function(M,C){C===void 0&&(C={});var N,D=C.lang;D===void 0&&(D=new RegExp("\\p{Script=Hangul}","u").test(N=M)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(N)?"ja":"en");var P=C.category;P===void 0&&(P="sans-serif");var z=C.style;z===void 0&&(z="normal");var I=C.weight;I===void 0&&(I=400);var L=(C.dataUrl||g).replace(/\/$/g,""),H=new Map,j=new Uint8Array(M.length),G={},K={},ee=new Array(M.length),Y=new Map,re=!1;function J(X){var oe=S.get(X);return oe||(oe=fetch(L+"/"+X).then((function(ue){if(!ue.ok)throw new Error(ue.statusText);return ue.json().then((function(Z){if(!Array.isArray(Z)||Z[0]!==1)throw new Error("Incorrect schema version; need 1, got "+Z[0]);return Z[1]}))})).catch((function(ue){if(L!==g)return re||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+L+'", trying default CDN. '+ue.message),re=!0),L=g,S.delete(X),J(X);throw ue})),S.set(X,oe)),oe}for(var se=function(X){var oe=M.codePointAt(X),ue=a(oe);ee[X]=ue,u[ue]||Y.has(ue)||Y.set(ue,J(ue).then((function(Z){u[ue]=Z}))),oe>65535&&(X++,q=X)},q=0;q<M.length;q++)se(q);return Promise.all(Y.values()).then((function(){Y.clear();for(var X=function(ue){var Z=M.codePointAt(ue),ce=null,me=u[ee[ue]],de=void 0;for(var ve in me){var We=K[ve];if(We===void 0&&(We=K[ve]=new RegExp(ve).test(D||"en")),We){for(var ze in de=ve,me[ve])if(s(Z,me[ve][ze])){ce=ze;break}break}}if(!ce){e:for(var qe in me)if(qe!==de){for(var _e in me[qe])if(s(Z,me[qe][_e])){ce=_e;break e}}}ce||(console.debug("No font coverage for U+"+Z.toString(16)),ce="latin"),ee[ue]=ce,h[ce]||Y.has(ce)||Y.set(ce,J("font-meta/"+ce+".json").then((function(Ae){h[ce]=Ae}))),Z>65535&&(ue++,oe=ue)},oe=0;oe<M.length;oe++)X(oe);return Promise.all(Y.values())})).then((function(){for(var X,oe=null,ue=0;ue<M.length;ue++){var Z=M.codePointAt(ue);if(oe&&(T(Z)||y(oe).has(Z)))j[ue]=j[ue-1];else{oe=h[ee[ue]];var ce=G[oe.id];if(!ce){var me=oe.typeforms,de=x(me,P,"sans-serif"),ve=x(me[de],z,"normal"),We=w((X=me[de])===null||X===void 0?void 0:X[ve],I);ce=G[oe.id]=L+"/font-files/"+oe.id+"/"+de+"."+ve+"."+We+".woff"}var ze=H.get(ce);ze==null&&(ze=H.size,H.set(ce,ze)),j[ue]=ze}Z>65535&&(ue++,j[ue]=j[ue-1])}return{fontUrls:Array.from(H.keys()),chars:j}}))},Object.defineProperty(n,"__esModule",{value:!0}),n})({})}function _ee(n,e){const t=Object.create(null),i=Object.create(null);function r(s,o){const l=u=>{console.error(`Failure loading font ${s}`,u)};try{const u=new XMLHttpRequest;u.open("get",s,!0),u.responseType="arraybuffer",u.onload=function(){if(u.status>=400)l(new Error(u.statusText));else if(u.status>0)try{const h=n(u.response);h.src=s,o(h)}catch(h){l(h)}},u.onerror=l,u.send()}catch(u){l(u)}}function a(s,o){let l=t[s];l?o(l):i[s]?i[s].push(o):(i[s]=[o],r(s,u=>{u.src=s,t[s]=u,i[s].forEach(h=>h(u)),delete i[s]}))}return function(s,o,{lang:l,fonts:u=[],style:h="normal",weight:p="normal",unicodeFontsURL:g}={}){const y=new Uint8Array(s.length),_=[];s.length||T();const S=new Map,x=[];if(h!=="italic"&&(h="normal"),typeof p!="number"&&(p=p==="bold"?700:400),u&&!Array.isArray(u)&&(u=[u]),u=u.slice().filter(C=>!C.lang||C.lang.test(l)).reverse(),u.length){let P=0;(function z(I=0){for(let L=I,H=s.length;L<H;L++){const j=s.codePointAt(L);if(P===1&&_[y[L-1]].supportsCodePoint(j)||L>0&&/\s/.test(s[L]))y[L]=y[L-1],P===2&&(x[x.length-1][1]=L);else for(let G=y[L],K=u.length;G<=K;G++)if(G===K){const ee=P===2?x[x.length-1]:x[x.length]=[L,L];ee[1]=L,P=2}else{y[L]=G;const{src:ee,unicodeRange:Y}=u[G];if(!Y||M(j,Y)){const re=t[ee];if(!re){a(ee,()=>{z(L)});return}if(re.supportsCodePoint(j)){let J=S.get(re);typeof J!="number"&&(J=_.length,_.push(re),S.set(re,J)),y[L]=J,P=1;break}}}j>65535&&L+1<H&&(y[L+1]=y[L],L++,P===2&&(x[x.length-1][1]=L))}w()})()}else x.push([0,s.length-1]),w();function w(){if(x.length){const C=x.map(N=>s.substring(N[0],N[1]+1)).join(`
`);e.getFontsForString(C,{lang:l||void 0,style:h,weight:p,dataUrl:g}).then(({fontUrls:N,chars:D})=>{const P=_.length;let z=0;x.forEach(L=>{for(let H=0,j=L[1]-L[0];H<=j;H++)y[L[0]+H]=D[z++]+P;z++});let I=0;N.forEach((L,H)=>{a(L,j=>{_[H+P]=j,++I===N.length&&T()})})})}else T()}function T(){o({chars:y,fonts:_})}function M(C,N){for(let D=0;D<N.length;D++){const[P,z=P]=N[D];if(P<=C&&C<=z)return!0}return!1}}}const bee=Hg({name:"FontResolver",dependencies:[_ee,vee,yee],init(n,e,t){return n(e,t())}});function See(n,e){const i=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,r="[^\\S\\u00A0]",a=new RegExp(`${r}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function s({text:_,lang:S,fonts:x,style:w,weight:T,preResolvedFonts:M,unicodeFontsURL:C},N){const D=({chars:P,fonts:z})=>{let I,L;const H=[];for(let j=0;j<P.length;j++)P[j]!==L?(L=P[j],H.push(I={start:j,end:j,fontObj:z[P[j]]})):I.end=j;N(H)};M?D(M):n(_,D,{lang:S,fonts:x,style:w,weight:T,unicodeFontsURL:C})}function o({text:_="",font:S,lang:x,sdfGlyphSize:w=64,fontSize:T=400,fontWeight:M=1,fontStyle:C="normal",letterSpacing:N=0,lineHeight:D="normal",maxWidth:P=1/0,direction:z,textAlign:I="left",textIndent:L=0,whiteSpace:H="normal",overflowWrap:j="normal",anchorX:G=0,anchorY:K=0,metricsOnly:ee=!1,unicodeFontsURL:Y,preResolvedFonts:re=null,includeCaretPositions:J=!1,chunkedBoundsSize:se=8192,colorRanges:q=null},X){const oe=p(),ue={fontLoad:0,typesetting:0};_.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),_=_.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),T=+T,N=+N,P=+P,D=D||"normal",L=+L,s({text:_,lang:x,style:C,weight:M,fonts:typeof S=="string"?[{src:S}]:S,unicodeFontsURL:Y,preResolvedFonts:re},Z=>{ue.fontLoad=p()-oe;const ce=isFinite(P);let me=null,de=null,ve=null,We=null,ze=null,qe=null,_e=null,Ae=null,te=0,ke=0,De=H!=="nowrap";const Ie=new Map,Te=p();let Xe=L,Pe=0,$=new g;const W=[$];Z.forEach(je=>{const{fontObj:Ge}=je,{ascender:Ke,descender:_t,unitsPerEm:Ye,lineGap:ct,capHeight:it,xHeight:Ze}=Ge;let $e=Ie.get(Ge);if(!$e){const Je=T/Ye,Ue=D==="normal"?(Ke-_t+ct)*Je:D*T,et=(Ue-(Ke-_t)*Je)/2,lt=Math.min(Ue,(Ke-_t)*Je),rt=(Ke+_t)/2*Je+lt/2;$e={index:Ie.size,src:Ge.src,fontObj:Ge,fontSizeMult:Je,unitsPerEm:Ye,ascender:Ke*Je,descender:_t*Je,capHeight:it*Je,xHeight:Ze*Je,lineHeight:Ue,baseline:-et-Ke*Je,caretTop:rt,caretBottom:rt-lt},Ie.set(Ge,$e)}const{fontSizeMult:vt}=$e,gt=_.slice(je.start,je.end+1);let jt,ye;Ge.forEachGlyph(gt,T,N,(Je,Ue,et,lt)=>{Ue+=Pe,lt+=je.start,jt=Ue,ye=Je;const rt=_.charAt(lt),Tt=Je.advanceWidth*vt,Ft=$.count;let At;if("isEmpty"in Je||(Je.isWhitespace=!!rt&&new RegExp(r).test(rt),Je.canBreakAfter=!!rt&&a.test(rt),Je.isEmpty=Je.xMin===Je.xMax||Je.yMin===Je.yMax||i.test(rt)),!Je.isWhitespace&&!Je.isEmpty&&ke++,De&&ce&&!Je.isWhitespace&&Ue+Tt+Xe>P&&Ft){if($.glyphAt(Ft-1).glyphObj.canBreakAfter)At=new g,Xe=-Ue;else for(let Ln=Ft;Ln--;)if(Ln===0&&j==="break-word"){At=new g,Xe=-Ue;break}else if($.glyphAt(Ln).glyphObj.canBreakAfter){At=$.splitAt(Ln+1);const Dn=At.glyphAt(0).x;Xe-=Dn;for(let ci=At.count;ci--;)At.glyphAt(ci).x-=Dn;break}At&&($.isSoftWrapped=!0,$=At,W.push($),te=P)}let Ut=$.glyphAt($.count);Ut.glyphObj=Je,Ut.x=Ue+Xe,Ut.y=et,Ut.width=Tt,Ut.charIndex=lt,Ut.fontData=$e,rt===`
`&&($=new g,W.push($),Xe=-(Ue+Tt+N*T)+L)}),Pe=jt+ye.advanceWidth*vt+N*T});let ae=0;W.forEach(je=>{let Ge=!0;for(let Ke=je.count;Ke--;){const _t=je.glyphAt(Ke);Ge&&!_t.glyphObj.isWhitespace&&(je.width=_t.x+_t.width,je.width>te&&(te=je.width),Ge=!1);let{lineHeight:Ye,capHeight:ct,xHeight:it,baseline:Ze}=_t.fontData;Ye>je.lineHeight&&(je.lineHeight=Ye);const $e=Ze-je.baseline;$e<0&&(je.baseline+=$e,je.cap+=$e,je.ex+=$e),je.cap=Math.max(je.cap,je.baseline+ct),je.ex=Math.max(je.ex,je.baseline+it)}je.baseline-=ae,je.cap-=ae,je.ex-=ae,ae+=je.lineHeight});let he=0,Se=0;if(G&&(typeof G=="number"?he=-G:typeof G=="string"&&(he=-te*(G==="left"?0:G==="center"?.5:G==="right"?1:u(G)))),K&&(typeof K=="number"?Se=-K:typeof K=="string"&&(Se=K==="top"?0:K==="top-baseline"?-W[0].baseline:K==="top-cap"?-W[0].cap:K==="top-ex"?-W[0].ex:K==="middle"?ae/2:K==="bottom"?ae:K==="bottom-baseline"?-W[W.length-1].baseline:u(K)*ae)),!ee){const je=e.getEmbeddingLevels(_,z);me=new Uint16Array(ke),de=new Uint8Array(ke),ve=new Float32Array(ke*2),We={},_e=[1/0,1/0,-1/0,-1/0],Ae=[],J&&(qe=new Float32Array(_.length*4)),q&&(ze=new Uint8Array(ke*3));let Ge=0,Ke=-1,_t=-1,Ye,ct;if(W.forEach((it,Ze)=>{let{count:$e,width:vt}=it;if($e>0){let gt=0;for(let lt=$e;lt--&&it.glyphAt(lt).glyphObj.isWhitespace;)gt++;let jt=0,ye=0;if(I==="center")jt=(te-vt)/2;else if(I==="right")jt=te-vt;else if(I==="justify"&&it.isSoftWrapped){let lt=0;for(let rt=$e-gt;rt--;)it.glyphAt(rt).glyphObj.isWhitespace&&lt++;ye=(te-vt)/lt}if(ye||jt){let lt=0;for(let rt=0;rt<$e;rt++){let Tt=it.glyphAt(rt);const Ft=Tt.glyphObj;Tt.x+=jt+lt,ye!==0&&Ft.isWhitespace&&rt<$e-gt&&(lt+=ye,Tt.width+=ye)}}const Je=e.getReorderSegments(_,je,it.glyphAt(0).charIndex,it.glyphAt(it.count-1).charIndex);for(let lt=0;lt<Je.length;lt++){const[rt,Tt]=Je[lt];let Ft=1/0,At=-1/0;for(let Ut=0;Ut<$e;Ut++)if(it.glyphAt(Ut).charIndex>=rt){let Ln=Ut,Dn=Ut;for(;Dn<$e;Dn++){let ci=it.glyphAt(Dn);if(ci.charIndex>Tt)break;Dn<$e-gt&&(Ft=Math.min(Ft,ci.x),At=Math.max(At,ci.x+ci.width))}for(let ci=Ln;ci<Dn;ci++){const dr=it.glyphAt(ci);dr.x=At-(dr.x+dr.width-Ft)}break}}let Ue;const et=lt=>Ue=lt;for(let lt=0;lt<$e;lt++){const rt=it.glyphAt(lt);Ue=rt.glyphObj;const Tt=Ue.index,Ft=je.levels[rt.charIndex]&1;if(Ft){const At=e.getMirroredCharacter(_[rt.charIndex]);At&&rt.fontData.fontObj.forEachGlyph(At,0,0,et)}if(J){const{charIndex:At,fontData:Ut}=rt,Ln=rt.x+he,Dn=rt.x+rt.width+he;qe[At*4]=Ft?Dn:Ln,qe[At*4+1]=Ft?Ln:Dn,qe[At*4+2]=it.baseline+Ut.caretBottom+Se,qe[At*4+3]=it.baseline+Ut.caretTop+Se;const ci=At-Ke;ci>1&&h(qe,Ke,ci),Ke=At}if(q){const{charIndex:At}=rt;for(;At>_t;)_t++,q.hasOwnProperty(_t)&&(ct=q[_t])}if(!Ue.isWhitespace&&!Ue.isEmpty){const At=Ge++,{fontSizeMult:Ut,src:Ln,index:Dn}=rt.fontData,ci=We[Ln]||(We[Ln]={});ci[Tt]||(ci[Tt]={path:Ue.path,pathBounds:[Ue.xMin,Ue.yMin,Ue.xMax,Ue.yMax]});const dr=rt.x+he,Li=rt.y+it.baseline+Se;ve[At*2]=dr,ve[At*2+1]=Li;const xi=dr+Ue.xMin*Ut,ra=Li+Ue.yMin*Ut,pr=dr+Ue.xMax*Ut,zn=Li+Ue.yMax*Ut;xi<_e[0]&&(_e[0]=xi),ra<_e[1]&&(_e[1]=ra),pr>_e[2]&&(_e[2]=pr),zn>_e[3]&&(_e[3]=zn),At%se===0&&(Ye={start:At,end:At,rect:[1/0,1/0,-1/0,-1/0]},Ae.push(Ye)),Ye.end++;const _n=Ye.rect;if(xi<_n[0]&&(_n[0]=xi),ra<_n[1]&&(_n[1]=ra),pr>_n[2]&&(_n[2]=pr),zn>_n[3]&&(_n[3]=zn),me[At]=Tt,de[At]=Dn,q){const Zt=At*3;ze[Zt]=ct>>16&255,ze[Zt+1]=ct>>8&255,ze[Zt+2]=ct&255}}}}}),qe){const it=_.length-Ke;it>1&&h(qe,Ke,it)}}const Oe=[];Ie.forEach(({index:je,src:Ge,unitsPerEm:Ke,ascender:_t,descender:Ye,lineHeight:ct,capHeight:it,xHeight:Ze})=>{Oe[je]={src:Ge,unitsPerEm:Ke,ascender:_t,descender:Ye,lineHeight:ct,capHeight:it,xHeight:Ze}}),ue.typesetting=p()-Te,X({glyphIds:me,glyphFontIndices:de,glyphPositions:ve,glyphData:We,fontData:Oe,caretPositions:qe,glyphColors:ze,chunkedBounds:Ae,fontSize:T,topBaseline:Se+W[0].baseline,blockBounds:[he,Se-ae,he+te,Se],visibleBounds:_e,timings:ue})})}function l(_,S){o({..._,metricsOnly:!0},x=>{const[w,T,M,C]=x.blockBounds;S({width:M-w,height:C-T})})}function u(_){let S=_.match(/^([\d.]+)%$/),x=S?parseFloat(S[1]):NaN;return isNaN(x)?0:x/100}function h(_,S,x){const w=_[S*4],T=_[S*4+1],M=_[S*4+2],C=_[S*4+3],N=(T-w)/x;for(let D=0;D<x;D++){const P=(S+D)*4;_[P]=w+N*D,_[P+1]=w+N*(D+1),_[P+2]=M,_[P+3]=C}}function p(){return(self.performance||Date).now()}function g(){this.data=[]}const y=["glyphObj","x","y","width","charIndex","fontData"];return g.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/y.length)},glyphAt(_){let S=g.flyweight;return S.data=this.data,S.index=_,S},splitAt(_){let S=new g;return S.data=this.data.splice(_*y.length),S}},g.flyweight=y.reduce((_,S,x,w)=>(Object.defineProperty(_,S,{get(){return this.data[this.index*y.length+x]},set(T){this.data[this.index*y.length+x]=T}}),_),{data:null,index:0}),{typeset:o,measure:l}}const Xd=()=>(self.performance||Date).now(),NE=D6();let EL;function xee(n,e,t,i,r,a,s,o,l,u,h=!0){return h?wee(n,e,t,i,r,a,s,o,l,u).then(null,p=>(EL||(console.warn("WebGL SDF generation failed, falling back to JS",p),EL=!0),TL(n,e,t,i,r,a,s,o,l,u))):TL(n,e,t,i,r,a,s,o,l,u)}const yx=[],Eee=5;let sO=0;function N6(){const n=Xd();for(;yx.length&&Xd()-n<Eee;)yx.shift()();sO=yx.length?setTimeout(N6,0):0}const wee=(...n)=>new Promise((e,t)=>{yx.push(()=>{const i=Xd();try{NE.webgl.generateIntoCanvas(...n),e({timing:Xd()-i})}catch(r){t(r)}}),sO||(sO=setTimeout(N6,0))}),Tee=4,Mee=2e3,wL={};let Aee=0;function TL(n,e,t,i,r,a,s,o,l,u){const h="TroikaTextSDFGenerator_JS_"+Aee++%Tee;let p=wL[h];return p||(p=wL[h]={workerModule:Hg({name:h,workerId:h,dependencies:[D6,Xd],init(g,y){const _=g().javascript.generate;return function(...S){const x=y();return{textureData:_(...S),timing:y()-x}}},getTransferables(g){return[g.textureData.buffer]}}),requests:0,idleTimer:null}),p.requests++,clearTimeout(p.idleTimer),p.workerModule(n,e,t,i,r,a).then(({textureData:g,timing:y})=>{const _=Xd(),S=new Uint8Array(g.length*4);for(let x=0;x<g.length;x++)S[x*4+u]=g[x];return NE.webglUtils.renderImageData(s,S,o,l,n,e,1<<3-u),y+=Xd()-_,--p.requests===0&&(p.idleTimer=setTimeout(()=>{ree(h)},Mee)),{timing:y}})}function Cee(n){n._warm||(NE.webgl.isSupported(n),n._warm=!0)}const Ree=NE.webglUtils.resizeWebGLCanvasWithoutClearing,Py={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},Oee=new yt;function Bm(){return(self.performance||Date).now()}const ML=Object.create(null);function P6(n,e){n=Nee({},n);const t=Bm(),i=[];if(n.font&&i.push({label:"user",src:Pee(n.font)}),n.font=i,n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||Py.sdfGlyphSize,n.unicodeFontsURL=n.unicodeFontsURL||Py.unicodeFontsURL,n.colorRanges!=null){let g={};for(let y in n.colorRanges)if(n.colorRanges.hasOwnProperty(y)){let _=n.colorRanges[y];typeof _!="number"&&(_=Oee.set(_).getHex()),g[y]=_}n.colorRanges=g}Object.freeze(n);const{textureWidth:r,sdfExponent:a}=Py,{sdfGlyphSize:s}=n,o=r/s*4;let l=ML[s];if(!l){const g=document.createElement("canvas");g.width=r,g.height=s*256/o,l=ML[s]={glyphCount:0,sdfGlyphSize:s,sdfCanvas:g,sdfTexture:new Pi(g,void 0,void 0,void 0,Sr,Sr),contextLost:!1,glyphsByFont:new Map},l.sdfTexture.generateMipmaps=!1,Dee(l)}const{sdfTexture:u,sdfCanvas:h}=l;B6(n).then(g=>{const{glyphIds:y,glyphFontIndices:_,fontData:S,glyphPositions:x,fontSize:w,timings:T}=g,M=[],C=new Float32Array(y.length*4);let N=0,D=0;const P=Bm(),z=S.map(G=>{let K=l.glyphsByFont.get(G.src);return K||l.glyphsByFont.set(G.src,K=new Map),K});y.forEach((G,K)=>{const ee=_[K],{src:Y,unitsPerEm:re}=S[ee];let J=z[ee].get(G);if(!J){const{path:ue,pathBounds:Z}=g.glyphData[Y][G],ce=Math.max(Z[2]-Z[0],Z[3]-Z[1])/s*(Py.sdfMargin*s+.5),me=l.glyphCount++,de=[Z[0]-ce,Z[1]-ce,Z[2]+ce,Z[3]+ce];z[ee].set(G,J={path:ue,atlasIndex:me,sdfViewBox:de}),M.push(J)}const{sdfViewBox:se}=J,q=x[D++],X=x[D++],oe=w/re;C[N++]=q+se[0]*oe,C[N++]=X+se[1]*oe,C[N++]=q+se[2]*oe,C[N++]=X+se[3]*oe,y[K]=J.atlasIndex}),T.quads=(T.quads||0)+(Bm()-P);const I=Bm();T.sdf={};const L=h.height,H=Math.ceil(l.glyphCount/o),j=Math.pow(2,Math.ceil(Math.log2(H*s)));j>L&&(console.info(`Increasing SDF texture size ${L}->${j}`),Ree(h,r,j),u.dispose()),Promise.all(M.map(G=>L6(G,l,n.gpuAccelerateSDF).then(({timing:K})=>{T.sdf[G.atlasIndex]=K}))).then(()=>{M.length&&!l.contextLost&&(I6(l),u.needsUpdate=!0),T.sdfTotal=Bm()-I,T.total=Bm()-t,e(Object.freeze({parameters:n,sdfTexture:u,sdfGlyphSize:s,sdfExponent:a,glyphBounds:C,glyphAtlasIndices:y,glyphColors:g.glyphColors,caretPositions:g.caretPositions,chunkedBounds:g.chunkedBounds,ascender:g.ascender,descender:g.descender,lineHeight:g.lineHeight,capHeight:g.capHeight,xHeight:g.xHeight,topBaseline:g.topBaseline,blockBounds:g.blockBounds,visibleBounds:g.visibleBounds,timings:g.timings}))})}),Promise.resolve().then(()=>{l.contextLost||Cee(h)})}function L6({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:i,sdfCanvas:r,contextLost:a},s){if(a)return Promise.resolve({timing:-1});const{textureWidth:o,sdfExponent:l}=Py,u=Math.max(t[2]-t[0],t[3]-t[1]),h=Math.floor(e/4),p=h%(o/i)*i,g=Math.floor(h/(o/i))*i,y=e%4;return xee(i,i,n,t,u,l,r,p,g,y,s)}function Dee(n){const e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;const i=[];n.glyphsByFont.forEach(r=>{r.forEach(a=>{i.push(L6(a,n,!0))})}),Promise.all(i).then(()=>{I6(n),n.sdfTexture.needsUpdate=!0})})}function Uee({font:n,characters:e,sdfGlyphSize:t},i){let r=Array.isArray(e)?e.join(`
`):""+e;P6({font:n,sdfGlyphSize:t,text:r},i)}function Nee(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let GS;function Pee(n){return GS||(GS=typeof document>"u"?{}:document.createElement("a")),GS.href=n,GS.href}function I6(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=n,{width:i,height:r}=e,a=n.sdfCanvas.getContext("webgl");let s=t.image.data;(!s||s.length!==i*r*4)&&(s=new Uint8Array(i*r*4),t.image={width:i,height:r,data:s},t.flipY=!1,t.isDataTexture=!0),a.readPixels(0,0,i,r,a.RGBA,a.UNSIGNED_BYTE,s)}}const Lee=Hg({name:"Typesetter",dependencies:[See,bee,see],init(n,e,t){return n(e,t())}}),B6=Hg({name:"Typesetter",dependencies:[Lee],init(n){return function(e){return new Promise(t=>{n.typeset(e,t)})}},getTransferables(n){const e=[];for(let t in n)n[t]&&n[t].buffer&&e.push(n[t].buffer);return e}});B6.onMainThread;const AL={};function Iee(n){let e=AL[n];return e||(e=AL[n]=new lf(1,1,n,n).translate(.5,.5,0)),e}const Bee="aTroikaGlyphBounds",CL="aTroikaGlyphIndex",zee="aTroikaGlyphColor";class kee extends HD{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new na,this.boundingBox=new ta}computeBoundingSphere(){}computeBoundingBox(){}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=Iee(e);["position","normal","uv"].forEach(i=>{this.attributes[i]=t.attributes[i].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,i,r,a){this.updateAttributeData(Bee,e,4),this.updateAttributeData(CL,t,1),this.updateAttributeData(zee,a,3),this._blockBounds=i,this._chunkedBounds=r,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:i}=this;if(t){const{PI:r,floor:a,min:s,max:o,sin:l,cos:u}=Math,h=r/2,p=r*2,g=Math.abs(t),y=e[0]/g,_=e[2]/g,S=a((y+h)/p)!==a((_+h)/p)?-g:s(l(y)*g,l(_)*g),x=a((y-h)/p)!==a((_-h)/p)?g:o(l(y)*g,l(_)*g),w=a((y+r)/p)!==a((_+r)/p)?g*2:o(g-u(y)*g,g-u(_)*g);i.min.set(S,e[1],t<0?-w:0),i.max.set(x,e[3],t<0?0:w)}else i.min.set(e[0],e[1],0),i.max.set(e[2],e[3],0);i.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(CL).count,i=this._chunkedBounds;if(i)for(let r=i.length;r--;){t=i[r].end;let a=i[r].rect;if(a[1]<e.w&&a[3]>e.y&&a[0]<e.z&&a[2]>e.x)break}this.instanceCount=t}updateAttributeData(e,t,i){const r=this.getAttribute(e);t?r&&r.array.length===t.length?(r.array.set(t),r.needsUpdate=!0):(this.setAttribute(e,new ap(t,i)),delete this._maxInstanceCount,this.dispose()):r&&this.deleteAttribute(e)}}const Fee=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,Hee=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,Vee=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,Gee=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function jee(n){const e=aO(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new st},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new yn(0,0,0,0)},uTroikaClipRect:{value:new yn(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new st},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new yt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new rn},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:Fee,vertexTransform:Hee,fragmentDefs:Vee,fragmentColorTransform:Gee,customRewriter({vertexShader:t,fragmentShader:i}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(i)&&(i=i.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(t)||(t=t.replace(U6,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:i}}});return e.transparent=!0,e.forceSinglePass=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const n3=new of({color:16777215,side:Fl,transparent:!0}),RL=8421504,OL=new Mt,jS=new le,aM=new le,by=[],qee=new le,sM="+x+y";function DL(n){return Array.isArray(n)?n[0]:n}let z6=()=>{const n=new Ni(new lf(1,1),n3);return z6=()=>n,n},k6=()=>{const n=new Ni(new lf(1,1,32,1),n3);return k6=()=>n,n};const Wee={type:"syncstart"},Yee={type:"synccomplete"},F6=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],$ee=F6.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let H6=class extends Ni{constructor(){const e=new kee;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=RL,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=sM,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(Wee),P6({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{i.forEach(r=>r&&r())})),this.dispatchEvent(Yee),e&&e()})))}onBeforeRender(e,t,i,r,a,s){this.sync(),a.isTroikaTextMaterial&&this._prepareForRender(a)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(e){return jee(e)}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=n3.clone());if((!e||!e.isDerivedFrom(t))&&(e=this._derivedMaterial=this.createDerivedMaterial(t),t.addEventListener("dispose",function i(){t.removeEventListener("dispose",i),e.dispose()})),this.hasOutline()){let i=e._outlineMtl;return i||(i=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),i.isTextOutlineMaterial=!0,i.depthWrite=!1,i.map=null,e.addEventListener("dispose",function r(){e.removeEventListener("dispose",r),i.dispose()})),[i,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return DL(this.material).getDepthMaterial()}set customDepthMaterial(e){}get customDistanceMaterial(){return DL(this.material).getDistanceMaterial()}set customDistanceMaterial(e){}_prepareForRender(e){const t=e.isTextOutlineMaterial,i=e.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:o,blockBounds:l}=r;i.uTroikaSDFTexture.value=o,i.uTroikaSDFTextureSize.value.set(o.image.width,o.image.height),i.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,i.uTroikaSDFExponent.value=r.sdfExponent,i.uTroikaTotalBounds.value.fromArray(l),i.uTroikaUseGlyphColors.value=!t&&!!r.glyphColors;let u=0,h=0,p=0,g,y,_,S=0,x=0;if(t){let{outlineWidth:T,outlineOffsetX:M,outlineOffsetY:C,outlineBlur:N,outlineOpacity:D}=this;u=this._parsePercent(T)||0,h=Math.max(0,this._parsePercent(N)||0),g=D,S=this._parsePercent(M)||0,x=this._parsePercent(C)||0}else p=Math.max(0,this._parsePercent(this.strokeWidth)||0),p&&(_=this.strokeColor,i.uTroikaStrokeColor.value.set(_??RL),y=this.strokeOpacity,y==null&&(y=1)),g=this.fillOpacity;i.uTroikaEdgeOffset.value=u,i.uTroikaPositionOffset.value.set(S,x),i.uTroikaBlurRadius.value=h,i.uTroikaStrokeWidth.value=p,i.uTroikaStrokeOpacity.value=y,i.uTroikaFillOpacity.value=g??1,i.uTroikaCurveRadius.value=this.curveRadius||0;let w=this.clipRect;if(w&&Array.isArray(w)&&w.length===4)i.uTroikaClipRect.value.fromArray(w);else{const T=(this.fontSize||.1)*100;i.uTroikaClipRect.value.set(l[0]-T,l[1]-T,l[2]+T,l[3]+T)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const a=t?this.outlineColor||0:this.color;if(a==null)delete e.color;else{const o=e.hasOwnProperty("color")?e.color:e.color=new yt;(a!==o._input||typeof a=="object")&&o.set(o._input=a)}let s=this.orientation||sM;if(s!==e._orientation){let o=i.uTroikaOrient.value;s=s.replace(/[^-+xyz]/g,"");let l=s!==sM&&s.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,u,h,p,g]=l;jS.set(0,0,0)[h]=u==="-"?1:-1,aM.set(0,0,0)[g]=p==="-"?-1:1,OL.lookAt(qee,jS.cross(aM),aM),o.setFromMatrix4(OL)}else o.identity();e._orientation=s}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),i=t?parseFloat(t[1]):NaN;e=(isNaN(i)?0:i/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new st){t.copy(e);const i=this.curveRadius;return i&&(t.x=Math.atan2(e.x,Math.abs(i)-Math.abs(e.z))*Math.abs(i)),t}worldPositionToTextCoords(e,t=new st){return jS.copy(e),this.localPositionToTextCoords(this.worldToLocal(jS),t)}raycast(e,t){const{textRenderInfo:i,curveRadius:r}=this;if(i){const a=i.blockBounds,s=r?k6():z6(),o=s.geometry,{position:l,uv:u}=o.attributes;for(let h=0;h<u.count;h++){let p=a[0]+u.getX(h)*(a[2]-a[0]);const g=a[1]+u.getY(h)*(a[3]-a[1]);let y=0;r&&(y=r-Math.cos(p/r)*r,p=Math.sin(p/r)*r),l.setXYZ(h,p,g,y)}o.boundingSphere=this.geometry.boundingSphere,o.boundingBox=this.geometry.boundingBox,s.matrixWorld=this.matrixWorld,s.material.side=this.material.side,by.length=0,s.raycast(e,by);for(let h=0;h<by.length;h++)by[h].object=this,t.push(by[h])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,$ee.forEach(i=>{this[i]=e[i]}),this}clone(){return new this.constructor().copy(this)}};F6.forEach(n=>{const e="_private_"+n;Object.defineProperty(H6.prototype,n,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});new ta;new yt;const V6=F.forwardRef(({sdfGlyphSize:n=64,anchorX:e="center",anchorY:t="middle",font:i,fontSize:r=1,children:a,characters:s,onSync:o,...l},u)=>{const h=zc(({invalidate:_})=>_),[p]=F.useState(()=>new H6),[g,y]=F.useMemo(()=>{const _=[];let S="";return F.Children.forEach(a,x=>{typeof x=="string"||typeof x=="number"?S+=x:_.push(x)}),[_,S]},[a]);return KD(()=>new Promise(_=>Uee({font:i,characters:s},_)),["troika-text",i,s]),F.useLayoutEffect(()=>void p.sync(()=>{h(),o&&o(p)})),F.useEffect(()=>()=>p.dispose(),[p]),F.createElement("primitive",Ui({object:p,ref:u,font:i,text:y,anchorX:e,anchorY:t,fontSize:r,sdfGlyphSize:n},l),g)});let oM=null;async function Xee(n){return typeof n=="string"?await(await fetch(n)).json():n}function Kee(n){return oM||(oM=new KJ),oM.parse(n)}async function G6(n){const e=await Xee(n);return Kee(e)}function i3(n){return KD(G6,[n])}i3.preload=n=>t6(G6,[n]);i3.clear=n=>n6([n]);/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const Yi={LEFT:1,RIGHT:2,MIDDLE:4},Fe=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,SCREEN_PAN:4,OFFSET:8,DOLLY:16,ZOOM:32,TOUCH_ROTATE:64,TOUCH_TRUCK:128,TOUCH_SCREEN_PAN:256,TOUCH_OFFSET:512,TOUCH_DOLLY:1024,TOUCH_ZOOM:2048,TOUCH_DOLLY_TRUCK:4096,TOUCH_DOLLY_SCREEN_PAN:8192,TOUCH_DOLLY_OFFSET:16384,TOUCH_DOLLY_ROTATE:32768,TOUCH_ZOOM_TRUCK:65536,TOUCH_ZOOM_OFFSET:131072,TOUCH_ZOOM_SCREEN_PAN:262144,TOUCH_ZOOM_ROTATE:524288}),zm={NONE:0,IN:1,OUT:-1};function Ad(n){return n.isPerspectiveCamera}function ah(n){return n.isOrthographicCamera}const nh=Math.PI*2,UL=Math.PI/2,j6=1e-5,Sy=Math.PI/180;function Nl(n,e,t){return Math.max(e,Math.min(t,n))}function bi(n,e=j6){return Math.abs(n)<e}function Zn(n,e,t=j6){return bi(n-e,t)}function NL(n,e){return Math.round(n/e)*e}function xy(n){return isFinite(n)?n:n<0?-Number.MAX_VALUE:Number.MAX_VALUE}function Ey(n){return Math.abs(n)<Number.MAX_VALUE?n:n*(1/0)}function qS(n,e,t,i,r=1/0,a){i=Math.max(1e-4,i);const s=2/i,o=s*a,l=1/(1+o+.48*o*o+.235*o*o*o);let u=n-e;const h=e,p=r*i;u=Nl(u,-p,p),e=n-u;const g=(t.value+s*u)*a;t.value=(t.value-s*g)*l;let y=e+(u+g)*l;return h-n>0==y>h&&(y=h,t.value=(y-h)/a),y}function PL(n,e,t,i,r=1/0,a,s){i=Math.max(1e-4,i);const o=2/i,l=o*a,u=1/(1+l+.48*l*l+.235*l*l*l);let h=e.x,p=e.y,g=e.z,y=n.x-h,_=n.y-p,S=n.z-g;const x=h,w=p,T=g,M=r*i,C=M*M,N=y*y+_*_+S*S;if(N>C){const ee=Math.sqrt(N);y=y/ee*M,_=_/ee*M,S=S/ee*M}h=n.x-y,p=n.y-_,g=n.z-S;const D=(t.x+o*y)*a,P=(t.y+o*_)*a,z=(t.z+o*S)*a;t.x=(t.x-o*D)*u,t.y=(t.y-o*P)*u,t.z=(t.z-o*z)*u,s.x=h+(y+D)*u,s.y=p+(_+P)*u,s.z=g+(S+z)*u;const I=x-n.x,L=w-n.y,H=T-n.z,j=s.x-x,G=s.y-w,K=s.z-T;return I*j+L*G+H*K>0&&(s.x=x,s.y=w,s.z=T,t.x=(s.x-x)/a,t.y=(s.y-w)/a,t.z=(s.z-T)/a),s}function lM(n,e){e.set(0,0),n.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=n.length,e.y/=n.length}function cM(n,e){return ah(n)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}class Zee{constructor(){bt(this,"_listeners",{})}addEventListener(e,t){const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners[e];if(r!==void 0){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,s=r.length;a<s;a++)r[a].call(this,e)}}}const Qee="3.1.2",WS=1/8;var a5;const Jee=/Mac/.test((a5=globalThis==null?void 0:globalThis.navigator)==null?void 0:a5.platform);let Qt,LL,YS,uM,Ps,vn,Gn,km,wy,Lc,Ic,Cd,IL,BL,lo,Fm,Hm,zL,fM,kL,hM,dM,$S,ete=class oO extends Zee{constructor(t,i){super();bt(this,"minPolarAngle",0);bt(this,"maxPolarAngle",Math.PI);bt(this,"minAzimuthAngle",-1/0);bt(this,"maxAzimuthAngle",1/0);bt(this,"minDistance",Number.EPSILON);bt(this,"maxDistance",1/0);bt(this,"infinityDolly",!1);bt(this,"minZoom",.01);bt(this,"maxZoom",1/0);bt(this,"smoothTime",.25);bt(this,"draggingSmoothTime",.125);bt(this,"maxSpeed",1/0);bt(this,"azimuthRotateSpeed",1);bt(this,"polarRotateSpeed",1);bt(this,"dollySpeed",1);bt(this,"dollyDragInverted",!1);bt(this,"truckSpeed",2);bt(this,"dollyToCursor",!1);bt(this,"dragToOffset",!1);bt(this,"boundaryFriction",0);bt(this,"restThreshold",.01);bt(this,"colliderMeshes",[]);bt(this,"mouseButtons");bt(this,"touches");bt(this,"cancel",()=>{});bt(this,"lockPointer");bt(this,"unlockPointer");bt(this,"_enabled",!0);bt(this,"_camera");bt(this,"_yAxisUpSpace");bt(this,"_yAxisUpSpaceInverse");bt(this,"_state",Fe.NONE);bt(this,"_domElement");bt(this,"_viewport",null);bt(this,"_target");bt(this,"_targetEnd");bt(this,"_focalOffset");bt(this,"_focalOffsetEnd");bt(this,"_spherical");bt(this,"_sphericalEnd");bt(this,"_lastDistance");bt(this,"_zoom");bt(this,"_zoomEnd");bt(this,"_lastZoom");bt(this,"_cameraUp0");bt(this,"_target0");bt(this,"_position0");bt(this,"_zoom0");bt(this,"_focalOffset0");bt(this,"_dollyControlCoord");bt(this,"_changedDolly",0);bt(this,"_changedZoom",0);bt(this,"_nearPlaneCorners");bt(this,"_hasRested",!0);bt(this,"_boundary");bt(this,"_boundaryEnclosesCamera",!1);bt(this,"_needsUpdate",!0);bt(this,"_updatedLastTime",!1);bt(this,"_elementRect",new DOMRect);bt(this,"_isDragging",!1);bt(this,"_dragNeedsUpdate",!0);bt(this,"_activePointers",[]);bt(this,"_lockedPointer",null);bt(this,"_interactiveArea",new DOMRect(0,0,1,1));bt(this,"_isUserControllingRotate",!1);bt(this,"_isUserControllingDolly",!1);bt(this,"_isUserControllingTruck",!1);bt(this,"_isUserControllingOffset",!1);bt(this,"_isUserControllingZoom",!1);bt(this,"_lastDollyDirection",zm.NONE);bt(this,"_thetaVelocity",{value:0});bt(this,"_phiVelocity",{value:0});bt(this,"_radiusVelocity",{value:0});bt(this,"_targetVelocity",new Qt.Vector3);bt(this,"_focalOffsetVelocity",new Qt.Vector3);bt(this,"_zoomVelocity",{value:0});bt(this,"_truckInternal",(t,i,r,a)=>{let s,o;if(Ad(this._camera)){const l=vn.copy(this._camera.position).sub(this._target),u=this._camera.getEffectiveFOV()*Sy,h=l.length()*Math.tan(u*.5);s=this.truckSpeed*t*h/this._elementRect.height,o=this.truckSpeed*i*h/this._elementRect.height}else if(ah(this._camera)){const l=this._camera;s=this.truckSpeed*t*(l.right-l.left)/l.zoom/this._elementRect.width,o=this.truckSpeed*i*(l.top-l.bottom)/l.zoom/this._elementRect.height}else return;a?(r?this.setFocalOffset(this._focalOffsetEnd.x+s,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(s,0,!0),this.forward(-o,!0)):r?this.setFocalOffset(this._focalOffsetEnd.x+s,this._focalOffsetEnd.y+o,this._focalOffsetEnd.z,!0):this.truck(s,o,!0)});bt(this,"_rotateInternal",(t,i)=>{const r=nh*this.azimuthRotateSpeed*t/this._elementRect.height,a=nh*this.polarRotateSpeed*i/this._elementRect.height;this.rotate(r,a,!0)});bt(this,"_dollyInternal",(t,i,r)=>{const a=Math.pow(.95,-t*this.dollySpeed),s=this._sphericalEnd.radius,o=this._sphericalEnd.radius*a,l=Nl(o,this.minDistance,this.maxDistance),u=l-o;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(o,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(u,!0),this._dollyToNoClamp(l,!0)):this._dollyToNoClamp(l,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?o:l)-s,this._dollyControlCoord.set(i,r)),this._lastDollyDirection=Math.sign(-t)});bt(this,"_zoomInternal",(t,i,r)=>{const a=Math.pow(.95,t*this.dollySpeed),s=this._zoom,o=this._zoom*a;this.zoomTo(o,!0),this.dollyToCursor&&(this._changedZoom+=o-s,this._dollyControlCoord.set(i,r))});typeof Qt>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=t,this._yAxisUpSpace=new Qt.Quaternion().setFromUnitVectors(this._camera.up,YS),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=Fe.NONE,this._target=new Qt.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new Qt.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new Qt.Spherical().setFromVector3(vn.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new Qt.Vector3,new Qt.Vector3,new Qt.Vector3,new Qt.Vector3],this._updateNearPlaneCorners(),this._boundary=new Qt.Box3(new Qt.Vector3(-1/0,-1/0,-1/0),new Qt.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new Qt.Vector2,this.mouseButtons={left:Fe.ROTATE,middle:Fe.DOLLY,right:Fe.TRUCK,wheel:Ad(this._camera)?Fe.DOLLY:ah(this._camera)?Fe.ZOOM:Fe.NONE},this.touches={one:Fe.TOUCH_ROTATE,two:Ad(this._camera)?Fe.TOUCH_DOLLY_TRUCK:ah(this._camera)?Fe.TOUCH_ZOOM_TRUCK:Fe.NONE,three:Fe.TOUCH_TRUCK};const r=new Qt.Vector2,a=new Qt.Vector2,s=new Qt.Vector2,o=T=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const N=this._domElement.getBoundingClientRect(),D=T.clientX/N.width,P=T.clientY/N.height;if(D<this._interactiveArea.left||D>this._interactiveArea.right||P<this._interactiveArea.top||P>this._interactiveArea.bottom)return}const M=T.pointerType!=="mouse"?null:(T.buttons&Yi.LEFT)===Yi.LEFT?Yi.LEFT:(T.buttons&Yi.MIDDLE)===Yi.MIDDLE?Yi.MIDDLE:(T.buttons&Yi.RIGHT)===Yi.RIGHT?Yi.RIGHT:null;if(M!==null){const N=this._findPointerByMouseButton(M);N&&this._disposePointer(N)}if((T.buttons&Yi.LEFT)===Yi.LEFT&&this._lockedPointer)return;const C={pointerId:T.pointerId,clientX:T.clientX,clientY:T.clientY,deltaX:0,deltaY:0,mouseButton:M};this._activePointers.push(C),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.addEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),this._isDragging=!0,y(T)},l=T=>{T.cancelable&&T.preventDefault();const M=T.pointerId,C=this._lockedPointer||this._findPointerById(M);if(C){if(C.clientX=T.clientX,C.clientY=T.clientY,C.deltaX=T.movementX,C.deltaY=T.movementY,this._state=0,T.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(T.buttons&Yi.LEFT)===Yi.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(T.buttons&Yi.MIDDLE)===Yi.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(T.buttons&Yi.RIGHT)===Yi.RIGHT&&(this._state=this._state|this.mouseButtons.right);_()}},u=T=>{const M=this._findPointerById(T.pointerId);if(!(M&&M===this._lockedPointer)){if(M&&this._disposePointer(M),T.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=Fe.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=Fe.NONE;S()}};let h=-1;const p=T=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===Fe.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const z=this._domElement.getBoundingClientRect(),I=T.clientX/z.width,L=T.clientY/z.height;if(I<this._interactiveArea.left||I>this._interactiveArea.right||L<this._interactiveArea.top||L>this._interactiveArea.bottom)return}if(T.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===Fe.ROTATE||this.mouseButtons.wheel===Fe.TRUCK){const z=performance.now();h-z<1e3&&this._getClientRect(this._elementRect),h=z}const M=Jee?-1:-3,C=T.deltaMode===1&&!T.ctrlKey?T.deltaY/M:T.deltaY/(M*10),N=this.dollyToCursor?(T.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,D=this.dollyToCursor?(T.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(T.ctrlKey?Fe.ZOOM:this.mouseButtons.wheel){case Fe.ROTATE:{this._rotateInternal(T.deltaX,T.deltaY),this._isUserControllingRotate=!0;break}case Fe.TRUCK:{this._truckInternal(T.deltaX,T.deltaY,!1,!1),this._isUserControllingTruck=!0;break}case Fe.SCREEN_PAN:{this._truckInternal(T.deltaX,T.deltaY,!1,!0),this._isUserControllingTruck=!0;break}case Fe.OFFSET:{this._truckInternal(T.deltaX,T.deltaY,!0,!1),this._isUserControllingOffset=!0;break}case Fe.DOLLY:{this._dollyInternal(-C,N,D),this._isUserControllingDolly=!0;break}case Fe.ZOOM:{this._zoomInternal(-C,N,D),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},g=T=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===oO.ACTION.NONE){const M=T instanceof PointerEvent?T.pointerId:0,C=this._findPointerById(M);C&&this._disposePointer(C),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u);return}T.preventDefault()}},y=T=>{if(!this._enabled)return;if(lM(this._activePointers,Ps),this._getClientRect(this._elementRect),r.copy(Ps),a.copy(Ps),this._activePointers.length>=2){const C=Ps.x-this._activePointers[1].clientX,N=Ps.y-this._activePointers[1].clientY,D=Math.sqrt(C*C+N*N);s.set(0,D);const P=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,z=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;a.set(P,z)}if(this._state=0,!T)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in T&&T.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(T.buttons&Yi.LEFT)===Yi.LEFT&&(this._state=this._state|this.mouseButtons.left),(T.buttons&Yi.MIDDLE)===Yi.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(T.buttons&Yi.RIGHT)===Yi.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&Fe.ROTATE)===Fe.ROTATE||(this._state&Fe.TOUCH_ROTATE)===Fe.TOUCH_ROTATE||(this._state&Fe.TOUCH_DOLLY_ROTATE)===Fe.TOUCH_DOLLY_ROTATE||(this._state&Fe.TOUCH_ZOOM_ROTATE)===Fe.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&Fe.TRUCK)===Fe.TRUCK||(this._state&Fe.SCREEN_PAN)===Fe.SCREEN_PAN||(this._state&Fe.TOUCH_TRUCK)===Fe.TOUCH_TRUCK||(this._state&Fe.TOUCH_SCREEN_PAN)===Fe.TOUCH_SCREEN_PAN||(this._state&Fe.TOUCH_DOLLY_TRUCK)===Fe.TOUCH_DOLLY_TRUCK||(this._state&Fe.TOUCH_DOLLY_SCREEN_PAN)===Fe.TOUCH_DOLLY_SCREEN_PAN||(this._state&Fe.TOUCH_ZOOM_TRUCK)===Fe.TOUCH_ZOOM_TRUCK||(this._state&Fe.TOUCH_ZOOM_SCREEN_PAN)===Fe.TOUCH_DOLLY_SCREEN_PAN)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&Fe.DOLLY)===Fe.DOLLY||(this._state&Fe.TOUCH_DOLLY)===Fe.TOUCH_DOLLY||(this._state&Fe.TOUCH_DOLLY_TRUCK)===Fe.TOUCH_DOLLY_TRUCK||(this._state&Fe.TOUCH_DOLLY_SCREEN_PAN)===Fe.TOUCH_DOLLY_SCREEN_PAN||(this._state&Fe.TOUCH_DOLLY_OFFSET)===Fe.TOUCH_DOLLY_OFFSET||(this._state&Fe.TOUCH_DOLLY_ROTATE)===Fe.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&Fe.ZOOM)===Fe.ZOOM||(this._state&Fe.TOUCH_ZOOM)===Fe.TOUCH_ZOOM||(this._state&Fe.TOUCH_ZOOM_TRUCK)===Fe.TOUCH_ZOOM_TRUCK||(this._state&Fe.TOUCH_ZOOM_SCREEN_PAN)===Fe.TOUCH_ZOOM_SCREEN_PAN||(this._state&Fe.TOUCH_ZOOM_OFFSET)===Fe.TOUCH_ZOOM_OFFSET||(this._state&Fe.TOUCH_ZOOM_ROTATE)===Fe.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&Fe.OFFSET)===Fe.OFFSET||(this._state&Fe.TOUCH_OFFSET)===Fe.TOUCH_OFFSET||(this._state&Fe.TOUCH_DOLLY_OFFSET)===Fe.TOUCH_DOLLY_OFFSET||(this._state&Fe.TOUCH_ZOOM_OFFSET)===Fe.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},_=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,lM(this._activePointers,Ps);const M=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,C=M?-M.deltaX:a.x-Ps.x,N=M?-M.deltaY:a.y-Ps.y;if(a.copy(Ps),((this._state&Fe.ROTATE)===Fe.ROTATE||(this._state&Fe.TOUCH_ROTATE)===Fe.TOUCH_ROTATE||(this._state&Fe.TOUCH_DOLLY_ROTATE)===Fe.TOUCH_DOLLY_ROTATE||(this._state&Fe.TOUCH_ZOOM_ROTATE)===Fe.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(C,N),this._isUserControllingRotate=!0),(this._state&Fe.DOLLY)===Fe.DOLLY||(this._state&Fe.ZOOM)===Fe.ZOOM){const D=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,P=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0,z=this.dollyDragInverted?-1:1;(this._state&Fe.DOLLY)===Fe.DOLLY?(this._dollyInternal(z*N*WS,D,P),this._isUserControllingDolly=!0):(this._zoomInternal(z*N*WS,D,P),this._isUserControllingZoom=!0)}if((this._state&Fe.TOUCH_DOLLY)===Fe.TOUCH_DOLLY||(this._state&Fe.TOUCH_ZOOM)===Fe.TOUCH_ZOOM||(this._state&Fe.TOUCH_DOLLY_TRUCK)===Fe.TOUCH_DOLLY_TRUCK||(this._state&Fe.TOUCH_ZOOM_TRUCK)===Fe.TOUCH_ZOOM_TRUCK||(this._state&Fe.TOUCH_DOLLY_SCREEN_PAN)===Fe.TOUCH_DOLLY_SCREEN_PAN||(this._state&Fe.TOUCH_ZOOM_SCREEN_PAN)===Fe.TOUCH_ZOOM_SCREEN_PAN||(this._state&Fe.TOUCH_DOLLY_OFFSET)===Fe.TOUCH_DOLLY_OFFSET||(this._state&Fe.TOUCH_ZOOM_OFFSET)===Fe.TOUCH_ZOOM_OFFSET||(this._state&Fe.TOUCH_DOLLY_ROTATE)===Fe.TOUCH_DOLLY_ROTATE||(this._state&Fe.TOUCH_ZOOM_ROTATE)===Fe.TOUCH_ZOOM_ROTATE){const D=Ps.x-this._activePointers[1].clientX,P=Ps.y-this._activePointers[1].clientY,z=Math.sqrt(D*D+P*P),I=s.y-z;s.set(0,z);const L=this.dollyToCursor?(a.x-this._elementRect.x)/this._elementRect.width*2-1:0,H=this.dollyToCursor?(a.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&Fe.TOUCH_DOLLY)===Fe.TOUCH_DOLLY||(this._state&Fe.TOUCH_DOLLY_ROTATE)===Fe.TOUCH_DOLLY_ROTATE||(this._state&Fe.TOUCH_DOLLY_TRUCK)===Fe.TOUCH_DOLLY_TRUCK||(this._state&Fe.TOUCH_DOLLY_SCREEN_PAN)===Fe.TOUCH_DOLLY_SCREEN_PAN||(this._state&Fe.TOUCH_DOLLY_OFFSET)===Fe.TOUCH_DOLLY_OFFSET?(this._dollyInternal(I*WS,L,H),this._isUserControllingDolly=!0):(this._zoomInternal(I*WS,L,H),this._isUserControllingZoom=!0)}((this._state&Fe.TRUCK)===Fe.TRUCK||(this._state&Fe.TOUCH_TRUCK)===Fe.TOUCH_TRUCK||(this._state&Fe.TOUCH_DOLLY_TRUCK)===Fe.TOUCH_DOLLY_TRUCK||(this._state&Fe.TOUCH_ZOOM_TRUCK)===Fe.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(C,N,!1,!1),this._isUserControllingTruck=!0),((this._state&Fe.SCREEN_PAN)===Fe.SCREEN_PAN||(this._state&Fe.TOUCH_SCREEN_PAN)===Fe.TOUCH_SCREEN_PAN||(this._state&Fe.TOUCH_DOLLY_SCREEN_PAN)===Fe.TOUCH_DOLLY_SCREEN_PAN||(this._state&Fe.TOUCH_ZOOM_SCREEN_PAN)===Fe.TOUCH_ZOOM_SCREEN_PAN)&&(this._truckInternal(C,N,!1,!0),this._isUserControllingTruck=!0),((this._state&Fe.OFFSET)===Fe.OFFSET||(this._state&Fe.TOUCH_OFFSET)===Fe.TOUCH_OFFSET||(this._state&Fe.TOUCH_DOLLY_OFFSET)===Fe.TOUCH_DOLLY_OFFSET||(this._state&Fe.TOUCH_ZOOM_OFFSET)===Fe.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(C,N,!0,!1),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},S=()=>{lM(this._activePointers,Ps),a.copy(Ps),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",x),this._domElement.ownerDocument.addEventListener("pointerlockerror",w),this._domElement.ownerDocument.addEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",u),y())},this.unlockPointer=()=>{var T,M,C;this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),(T=this._domElement)==null||T.ownerDocument.exitPointerLock(),(M=this._domElement)==null||M.ownerDocument.removeEventListener("pointerlockchange",x),(C=this._domElement)==null||C.ownerDocument.removeEventListener("pointerlockerror",w),this.cancel()};const x=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},w=()=>{this.unlockPointer()};this._addAllEventListeners=T=>{this._domElement=T,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",o),this._domElement.addEventListener("pointercancel",u),this._domElement.addEventListener("wheel",p,{passive:!1}),this._domElement.addEventListener("contextmenu",g)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",o),this._domElement.removeEventListener("pointercancel",u),this._domElement.removeEventListener("wheel",p,{passive:!1}),this._domElement.removeEventListener("contextmenu",g),this._domElement.ownerDocument.removeEventListener("pointermove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",u),this._domElement.ownerDocument.removeEventListener("pointerlockchange",x),this._domElement.ownerDocument.removeEventListener("pointerlockerror",w))},this.cancel=()=>{this._state!==Fe.NONE&&(this._state=Fe.NONE,this._activePointers.length=0,S())},i&&this.connect(i),this.update(0)}static install(t){Qt=t.THREE,LL=Object.freeze(new Qt.Vector3(0,0,0)),YS=Object.freeze(new Qt.Vector3(0,1,0)),uM=Object.freeze(new Qt.Vector3(0,0,1)),Ps=new Qt.Vector2,vn=new Qt.Vector3,Gn=new Qt.Vector3,km=new Qt.Vector3,wy=new Qt.Vector3,Lc=new Qt.Vector3,Ic=new Qt.Vector3,Cd=new Qt.Vector3,IL=new Qt.Vector3,BL=new Qt.Vector3,lo=new Qt.Spherical,Fm=new Qt.Spherical,Hm=new Qt.Box3,zL=new Qt.Box3,fM=new Qt.Sphere,kL=new Qt.Quaternion,hM=new Qt.Quaternion,dM=new Qt.Matrix4,$S=new Qt.Raycaster}static get ACTION(){return Fe}set verticalDragToForward(t){console.warn("camera-controls: `verticalDragToForward` was removed. Use `mouseButtons.left = CameraControls.ACTION.SCREEN_PAN` instead.")}get camera(){return this._camera}set camera(t){this._camera=t,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._domElement&&(t?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(t){this._spherical.radius===t&&this._sphericalEnd.radius===t||(this._spherical.radius=t,this._sphericalEnd.radius=t,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(t){this._spherical.theta===t&&this._sphericalEnd.theta===t||(this._spherical.theta=t,this._sphericalEnd.theta=t,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(t){this._spherical.phi===t&&this._sphericalEnd.phi===t||(this._spherical.phi=t,this._sphericalEnd.phi=t,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(t){this._boundaryEnclosesCamera=t,this._needsUpdate=!0}set interactiveArea(t){this._interactiveArea.width=Nl(t.width,0,1),this._interactiveArea.height=Nl(t.height,0,1),this._interactiveArea.x=Nl(t.x,0,1-this._interactiveArea.width),this._interactiveArea.y=Nl(t.y,0,1-this._interactiveArea.height)}addEventListener(t,i){super.addEventListener(t,i)}removeEventListener(t,i){super.removeEventListener(t,i)}rotate(t,i,r=!1){return this.rotateTo(this._sphericalEnd.theta+t,this._sphericalEnd.phi+i,r)}rotateAzimuthTo(t,i=!1){return this.rotateTo(t,this._sphericalEnd.phi,i)}rotatePolarTo(t,i=!1){return this.rotateTo(this._sphericalEnd.theta,t,i)}rotateTo(t,i,r=!1){this._isUserControllingRotate=!1;const a=Nl(t,this.minAzimuthAngle,this.maxAzimuthAngle),s=Nl(i,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=a,this._sphericalEnd.phi=s,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,r||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!r||Zn(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Zn(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(t,i=!1){return this.dollyTo(this._sphericalEnd.radius-t,i)}dollyTo(t,i=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=zm.NONE,this._changedDolly=0,this._dollyToNoClamp(Nl(t,this.minDistance,this.maxDistance),i)}_dollyToNoClamp(t,i=!1){const r=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const o=this._collisionTest(),l=Zn(o,this._spherical.radius);if(!(r>t)&&l)return Promise.resolve();this._sphericalEnd.radius=Math.min(t,o)}else this._sphericalEnd.radius=t;this._needsUpdate=!0,i||(this._spherical.radius=this._sphericalEnd.radius);const s=!i||Zn(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(s)}dollyInFixed(t,i=!1){this._targetEnd.add(this._getCameraDirection(wy).multiplyScalar(t)),i||this._target.copy(this._targetEnd);const r=!i||Zn(this._target.x,this._targetEnd.x,this.restThreshold)&&Zn(this._target.y,this._targetEnd.y,this.restThreshold)&&Zn(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(r)}zoom(t,i=!1){return this.zoomTo(this._zoomEnd+t,i)}zoomTo(t,i=!1){this._isUserControllingZoom=!1,this._zoomEnd=Nl(t,this.minZoom,this.maxZoom),this._needsUpdate=!0,i||(this._zoom=this._zoomEnd);const r=!i||Zn(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(r)}pan(t,i,r=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(t,i,r)}truck(t,i,r=!1){this._camera.updateMatrix(),Lc.setFromMatrixColumn(this._camera.matrix,0),Ic.setFromMatrixColumn(this._camera.matrix,1),Lc.multiplyScalar(t),Ic.multiplyScalar(-i);const a=vn.copy(Lc).add(Ic),s=Gn.copy(this._targetEnd).add(a);return this.moveTo(s.x,s.y,s.z,r)}forward(t,i=!1){vn.setFromMatrixColumn(this._camera.matrix,0),vn.crossVectors(this._camera.up,vn),vn.multiplyScalar(t);const r=Gn.copy(this._targetEnd).add(vn);return this.moveTo(r.x,r.y,r.z,i)}elevate(t,i=!1){return vn.copy(this._camera.up).multiplyScalar(t),this.moveTo(this._targetEnd.x+vn.x,this._targetEnd.y+vn.y,this._targetEnd.z+vn.z,i)}moveTo(t,i,r,a=!1){this._isUserControllingTruck=!1;const s=vn.set(t,i,r).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,s,this.boundaryFriction),this._needsUpdate=!0,a||this._target.copy(this._targetEnd);const o=!a||Zn(this._target.x,this._targetEnd.x,this.restThreshold)&&Zn(this._target.y,this._targetEnd.y,this.restThreshold)&&Zn(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(t,i,r,a=!1){const l=vn.set(t,i,r).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(l.x,l.y,l.z,a)}fitToBox(t,i,{cover:r=!1,paddingLeft:a=0,paddingRight:s=0,paddingBottom:o=0,paddingTop:l=0}={}){const u=[],h=t.isBox3?Hm.copy(t):Hm.setFromObject(t);h.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const p=NL(this._sphericalEnd.theta,UL),g=NL(this._sphericalEnd.phi,UL);u.push(this.rotateTo(p,g,i));const y=vn.setFromSpherical(this._sphericalEnd).normalize(),_=kL.setFromUnitVectors(y,uM),S=Zn(Math.abs(y.y),1);S&&_.multiply(hM.setFromAxisAngle(YS,p)),_.multiply(this._yAxisUpSpaceInverse);const x=zL.makeEmpty();Gn.copy(h.min).applyQuaternion(_),x.expandByPoint(Gn),Gn.copy(h.min).setX(h.max.x).applyQuaternion(_),x.expandByPoint(Gn),Gn.copy(h.min).setY(h.max.y).applyQuaternion(_),x.expandByPoint(Gn),Gn.copy(h.max).setZ(h.min.z).applyQuaternion(_),x.expandByPoint(Gn),Gn.copy(h.min).setZ(h.max.z).applyQuaternion(_),x.expandByPoint(Gn),Gn.copy(h.max).setY(h.min.y).applyQuaternion(_),x.expandByPoint(Gn),Gn.copy(h.max).setX(h.min.x).applyQuaternion(_),x.expandByPoint(Gn),Gn.copy(h.max).applyQuaternion(_),x.expandByPoint(Gn),x.min.x-=a,x.min.y-=o,x.max.x+=s,x.max.y+=l,_.setFromUnitVectors(uM,y),S&&_.premultiply(hM.invert()),_.premultiply(this._yAxisUpSpace);const w=x.getSize(vn),T=x.getCenter(Gn).applyQuaternion(_);if(Ad(this._camera)){const M=this.getDistanceToFitBox(w.x,w.y,w.z,r);u.push(this.moveTo(T.x,T.y,T.z,i)),u.push(this.dollyTo(M,i)),u.push(this.setFocalOffset(0,0,0,i))}else if(ah(this._camera)){const M=this._camera,C=M.right-M.left,N=M.top-M.bottom,D=r?Math.max(C/w.x,N/w.y):Math.min(C/w.x,N/w.y);u.push(this.moveTo(T.x,T.y,T.z,i)),u.push(this.zoomTo(D,i)),u.push(this.setFocalOffset(0,0,0,i))}return Promise.all(u)}fitToSphere(t,i){const r=[],s="isObject3D"in t?oO.createBoundingSphere(t,fM):fM.copy(t);if(r.push(this.moveTo(s.center.x,s.center.y,s.center.z,i)),Ad(this._camera)){const o=this.getDistanceToFitSphere(s.radius);r.push(this.dollyTo(o,i))}else if(ah(this._camera)){const o=this._camera.right-this._camera.left,l=this._camera.top-this._camera.bottom,u=2*s.radius,h=Math.min(o/u,l/u);r.push(this.zoomTo(h,i))}return r.push(this.setFocalOffset(0,0,0,i)),Promise.all(r)}setLookAt(t,i,r,a,s,o,l=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=zm.NONE,this._changedDolly=0;const u=Gn.set(a,s,o),h=vn.set(t,i,r);this._targetEnd.copy(u),this._sphericalEnd.setFromVector3(h.sub(u).applyQuaternion(this._yAxisUpSpace)),this._needsUpdate=!0,l||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const p=!l||Zn(this._target.x,this._targetEnd.x,this.restThreshold)&&Zn(this._target.y,this._targetEnd.y,this.restThreshold)&&Zn(this._target.z,this._targetEnd.z,this.restThreshold)&&Zn(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Zn(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Zn(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(p)}lerp(t,i,r,a=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=zm.NONE,this._changedDolly=0;const s=vn.set(...t.target);if("spherical"in t)lo.set(...t.spherical);else{const g=Gn.set(...t.position);lo.setFromVector3(g.sub(s).applyQuaternion(this._yAxisUpSpace))}const o=km.set(...i.target);if("spherical"in i)Fm.set(...i.spherical);else{const g=Gn.set(...i.position);Fm.setFromVector3(g.sub(o).applyQuaternion(this._yAxisUpSpace))}this._targetEnd.copy(s.lerp(o,r));const l=Fm.theta-lo.theta,u=Fm.phi-lo.phi,h=Fm.radius-lo.radius;this._sphericalEnd.set(lo.radius+h*r,lo.phi+u*r,lo.theta+l*r),this._needsUpdate=!0,a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const p=!a||Zn(this._target.x,this._targetEnd.x,this.restThreshold)&&Zn(this._target.y,this._targetEnd.y,this.restThreshold)&&Zn(this._target.z,this._targetEnd.z,this.restThreshold)&&Zn(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&Zn(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&Zn(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(p)}lerpLookAt(t,i,r,a,s,o,l,u,h,p,g,y,_,S=!1){return this.lerp({position:[t,i,r],target:[a,s,o]},{position:[l,u,h],target:[p,g,y]},_,S)}setPosition(t,i,r,a=!1){return this.setLookAt(t,i,r,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,a)}setTarget(t,i,r,a=!1){const s=this.getPosition(vn),o=this.setLookAt(s.x,s.y,s.z,t,i,r,a);return this._sphericalEnd.phi=Nl(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(t,i,r,a=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(t,i,r),this._needsUpdate=!0,a||this._focalOffset.copy(this._focalOffsetEnd);const s=!a||Zn(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&Zn(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&Zn(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}setOrbitPoint(t,i,r){this._camera.updateMatrixWorld(),Lc.setFromMatrixColumn(this._camera.matrixWorldInverse,0),Ic.setFromMatrixColumn(this._camera.matrixWorldInverse,1),Cd.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const a=vn.set(t,i,r),s=a.distanceTo(this._camera.position),o=a.sub(this._camera.position);Lc.multiplyScalar(o.x),Ic.multiplyScalar(o.y),Cd.multiplyScalar(o.z),vn.copy(Lc).add(Ic).add(Cd),vn.z=vn.z+s,this.dollyTo(s,!1),this.setFocalOffset(-vn.x,vn.y,-vn.z,!1),this.moveTo(t,i,r,!1)}setBoundary(t){if(!t){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(t),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(t,i,r,a){if(t===null){this._viewport=null;return}this._viewport=this._viewport||new Qt.Vector4,typeof t=="number"?this._viewport.set(t,i,r,a):this._viewport.copy(t)}getDistanceToFitBox(t,i,r,a=!1){if(cM(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const s=t/i,o=this._camera.getEffectiveFOV()*Sy,l=this._camera.aspect;return((a?s>l:s<l)?i:t/l)*.5/Math.tan(o*.5)+r*.5}getDistanceToFitSphere(t){if(cM(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const i=this._camera.getEffectiveFOV()*Sy,r=Math.atan(Math.tan(i*.5)*this._camera.aspect)*2,a=1<this._camera.aspect?i:r;return t/Math.sin(a*.5)}getTarget(t,i=!0){return(t&&t.isVector3?t:new Qt.Vector3).copy(i?this._targetEnd:this._target)}getPosition(t,i=!0){return(t&&t.isVector3?t:new Qt.Vector3).setFromSpherical(i?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(i?this._targetEnd:this._target)}getSpherical(t,i=!0){return(t||new Qt.Spherical).copy(i?this._sphericalEnd:this._spherical)}getFocalOffset(t,i=!0){return(t&&t.isVector3?t:new Qt.Vector3).copy(i?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){return this._sphericalEnd.theta=(this._sphericalEnd.theta%nh+nh)%nh,this._sphericalEnd.theta>Math.PI&&(this._sphericalEnd.theta-=nh),this._spherical.theta+=nh*Math.round((this._sphericalEnd.theta-this._spherical.theta)/nh),this}stop(){this._focalOffset.copy(this._focalOffsetEnd),this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd),this._zoom=this._zoomEnd}reset(t=!1){if(!Zn(this._camera.up.x,this._cameraUp0.x)||!Zn(this._camera.up.y,this._cameraUp0.y)||!Zn(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const r=this.getPosition(vn);this.updateCameraUp(),this.setPosition(r.x,r.y,r.z)}const i=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,t),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,t),this.zoomTo(this._zoom0,t)];return Promise.all(i)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,YS),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const t=vn.subVectors(this._target,this._camera.position).normalize(),i=Gn.crossVectors(t,this._camera.up);this._camera.up.crossVectors(i,t).normalize(),this._camera.updateMatrixWorld();const r=this.getPosition(vn);this.updateCameraUp(),this.setPosition(r.x,r.y,r.z)}update(t){const i=this._sphericalEnd.theta-this._spherical.theta,r=this._sphericalEnd.phi-this._spherical.phi,a=this._sphericalEnd.radius-this._spherical.radius,s=IL.subVectors(this._targetEnd,this._target),o=BL.subVectors(this._focalOffsetEnd,this._focalOffset),l=this._zoomEnd-this._zoom;if(bi(i))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const g=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=qS(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,g,1/0,t),this._needsUpdate=!0}if(bi(r))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const g=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=qS(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,g,1/0,t),this._needsUpdate=!0}if(bi(a))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const g=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=qS(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,g,this.maxSpeed,t),this._needsUpdate=!0}if(bi(s.x)&&bi(s.y)&&bi(s.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const g=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;PL(this._target,this._targetEnd,this._targetVelocity,g,this.maxSpeed,t,this._target),this._needsUpdate=!0}if(bi(o.x)&&bi(o.y)&&bi(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const g=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;PL(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,g,this.maxSpeed,t,this._focalOffset),this._needsUpdate=!0}if(bi(l))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const g=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=qS(this._zoom,this._zoomEnd,this._zoomVelocity,g,1/0,t)}if(this.dollyToCursor){if(Ad(this._camera)&&this._changedDolly!==0){const g=this._spherical.radius-this._lastDistance,y=this._camera,_=this._getCameraDirection(wy),S=vn.copy(_).cross(y.up).normalize();S.lengthSq()===0&&(S.x=1);const x=Gn.crossVectors(S,_),w=this._sphericalEnd.radius*Math.tan(y.getEffectiveFOV()*Sy*.5),M=(this._sphericalEnd.radius-g-this._sphericalEnd.radius)/this._sphericalEnd.radius,C=km.copy(this._targetEnd).add(S.multiplyScalar(this._dollyControlCoord.x*w*y.aspect)).add(x.multiplyScalar(this._dollyControlCoord.y*w)),N=vn.copy(this._targetEnd).lerp(C,M),D=this._lastDollyDirection===zm.IN&&this._spherical.radius<=this.minDistance,P=this._lastDollyDirection===zm.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(D||P)){this._sphericalEnd.radius-=g,this._spherical.radius-=g;const I=Gn.copy(_).multiplyScalar(-g);N.add(I)}this._boundary.clampPoint(N,N);const z=Gn.subVectors(N,this._targetEnd);this._targetEnd.copy(N),this._target.add(z),this._changedDolly-=g,bi(this._changedDolly)&&(this._changedDolly=0)}else if(ah(this._camera)&&this._changedZoom!==0){const g=this._zoom-this._lastZoom,y=this._camera,_=vn.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(y.near+y.far)/(y.near-y.far)).unproject(y),S=Gn.set(0,0,-1).applyQuaternion(y.quaternion),x=km.copy(_).add(S.multiplyScalar(-_.dot(y.up))),T=-(this._zoom-g-this._zoom)/this._zoom,M=this._getCameraDirection(wy),C=this._targetEnd.dot(M),N=vn.copy(this._targetEnd).lerp(x,T),D=N.dot(M),P=M.multiplyScalar(D-C);N.sub(P),this._boundary.clampPoint(N,N);const z=Gn.subVectors(N,this._targetEnd);this._targetEnd.copy(N),this._target.add(z),this._changedZoom-=g,bi(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const u=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,u),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!bi(this._focalOffset.x)||!bi(this._focalOffset.y)||!bi(this._focalOffset.z))&&(this._camera.matrix.compose(this._camera.position,this._camera.quaternion,this._camera.scale),Lc.setFromMatrixColumn(this._camera.matrix,0),Ic.setFromMatrixColumn(this._camera.matrix,1),Cd.setFromMatrixColumn(this._camera.matrix,2),Lc.multiplyScalar(this._focalOffset.x),Ic.multiplyScalar(-this._focalOffset.y),Cd.multiplyScalar(this._focalOffset.z),vn.copy(Lc).add(Ic).add(Cd),this._camera.position.add(vn),this._camera.updateMatrixWorld()),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),vn.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const p=this._needsUpdate;return p&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):p?(this.dispatchEvent({type:"update"}),bi(i,this.restThreshold)&&bi(r,this.restThreshold)&&bi(a,this.restThreshold)&&bi(s.x,this.restThreshold)&&bi(s.y,this.restThreshold)&&bi(s.z,this.restThreshold)&&bi(o.x,this.restThreshold)&&bi(o.y,this.restThreshold)&&bi(o.z,this.restThreshold)&&bi(l,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!p&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=p,this._needsUpdate=!1,p}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:xy(this.maxDistance),minZoom:this.minZoom,maxZoom:xy(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:xy(this.maxPolarAngle),minAzimuthAngle:xy(this.minAzimuthAngle),maxAzimuthAngle:xy(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,target:this._targetEnd.toArray(),position:vn.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(t,i=!1){const r=JSON.parse(t);this.enabled=r.enabled,this.minDistance=r.minDistance,this.maxDistance=Ey(r.maxDistance),this.minZoom=r.minZoom,this.maxZoom=Ey(r.maxZoom),this.minPolarAngle=r.minPolarAngle,this.maxPolarAngle=Ey(r.maxPolarAngle),this.minAzimuthAngle=Ey(r.minAzimuthAngle),this.maxAzimuthAngle=Ey(r.maxAzimuthAngle),this.smoothTime=r.smoothTime,this.draggingSmoothTime=r.draggingSmoothTime,this.dollySpeed=r.dollySpeed,this.truckSpeed=r.truckSpeed,this.dollyToCursor=r.dollyToCursor,this._target0.fromArray(r.target0),this._position0.fromArray(r.position0),this._zoom0=r.zoom0,this._focalOffset0.fromArray(r.focalOffset0),this.moveTo(r.target[0],r.target[1],r.target[2],i),lo.setFromVector3(vn.fromArray(r.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(lo.theta,lo.phi,i),this.dollyTo(lo.radius,i),this.zoomTo(r.zoom,i),this.setFocalOffset(r.focalOffset[0],r.focalOffset[1],r.focalOffset[2],i),this._needsUpdate=!0}connect(t){if(this._domElement){console.warn("camera-controls is already connected.");return}t.setAttribute("data-camera-controls-version",Qee),this._addAllEventListeners(t),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(t){return t.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(t){return this._getTargetDirection(t).negate()}_findPointerById(t){return this._activePointers.find(i=>i.pointerId===t)}_findPointerByMouseButton(t){return this._activePointers.find(i=>i.mouseButton===t)}_disposePointer(t){this._activePointers.splice(this._activePointers.indexOf(t),1)}_encloseToBoundary(t,i,r){const a=i.lengthSq();if(a===0)return t;const s=Gn.copy(i).add(t),l=this._boundary.clampPoint(s,km).sub(s),u=l.lengthSq();if(u===0)return t.add(i);if(u===a)return t;if(r===0)return t.add(i).add(l);{const h=1+r*u/i.dot(l);return t.add(Gn.copy(i).multiplyScalar(h)).add(l.multiplyScalar(1-r))}}_updateNearPlaneCorners(){if(Ad(this._camera)){const t=this._camera,i=t.near,r=t.getEffectiveFOV()*Sy,a=Math.tan(r*.5)*i,s=a*t.aspect;this._nearPlaneCorners[0].set(-s,-a,0),this._nearPlaneCorners[1].set(s,-a,0),this._nearPlaneCorners[2].set(s,a,0),this._nearPlaneCorners[3].set(-s,a,0)}else if(ah(this._camera)){const t=this._camera,i=1/t.zoom,r=t.left*i,a=t.right*i,s=t.top*i,o=t.bottom*i;this._nearPlaneCorners[0].set(r,s,0),this._nearPlaneCorners[1].set(a,s,0),this._nearPlaneCorners[2].set(a,o,0),this._nearPlaneCorners[3].set(r,o,0)}}_collisionTest(){let t=1/0;if(!(this.colliderMeshes.length>=1)||cM(this._camera,"_collisionTest"))return t;const r=this._getTargetDirection(wy);dM.lookAt(LL,r,this._camera.up);for(let a=0;a<4;a++){const s=Gn.copy(this._nearPlaneCorners[a]);s.applyMatrix4(dM);const o=km.addVectors(this._target,s);$S.set(o,r),$S.far=this._spherical.radius+1;const l=$S.intersectObjects(this.colliderMeshes);l.length!==0&&l[0].distance<t&&(t=l[0].distance)}return t}_getClientRect(t){if(!this._domElement)return;const i=this._domElement.getBoundingClientRect();return t.x=i.left,t.y=i.top,this._viewport?(t.x+=this._viewport.x,t.y+=i.height-this._viewport.w-this._viewport.y,t.width=this._viewport.z,t.height=this._viewport.w):(t.width=i.width,t.height=i.height),t}_createOnRestPromise(t){return t?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(i=>{const r=()=>{this.removeEventListener("rest",r),i()};this.addEventListener("rest",r)}))}_addAllEventListeners(t){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(t){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(t){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(t,i=new Qt.Sphere){const r=i,a=r.center;Hm.makeEmpty(),t.traverseVisible(o=>{o.isMesh&&Hm.expandByObject(o)}),Hm.getCenter(a);let s=0;return t.traverseVisible(o=>{if(!o.isMesh)return;const l=o;if(!l.geometry)return;const u=l.geometry.clone();u.applyMatrix4(l.matrixWorld);const p=u.attributes.position;for(let g=0,y=p.count;g<y;g++)vn.fromBufferAttribute(p,g),s=Math.max(s,a.distanceToSquared(vn))}),r.radius=Math.sqrt(s),r}};const tte=F.forwardRef((n,e)=>{const{impl:t,camera:i,domElement:r,makeDefault:a,onControlStart:s,onControl:o,onControlEnd:l,onTransitionStart:u,onUpdate:h,onWake:p,onRest:g,onSleep:y,onStart:_,onEnd:S,onChange:x,regress:w,...T}=n,M=t??ete;F.useMemo(()=>{const ee={Box3:ta,MathUtils:{clamp:Lr.clamp},Matrix4:Mt,Quaternion:Ki,Raycaster:YD,Sphere:na,Spherical:GH,Vector2:st,Vector3:le,Vector4:yn};M.install({THREE:ee}),g6({CameraControlsImpl:M})},[M]);const C=zc(ee=>ee.camera),N=zc(ee=>ee.gl),D=zc(ee=>ee.invalidate),P=zc(ee=>ee.events),z=zc(ee=>ee.setEvents),I=zc(ee=>ee.set),L=zc(ee=>ee.get),H=zc(ee=>ee.performance),j=i||C,G=r||P.connected||N.domElement,K=F.useMemo(()=>new M(j),[M,j]);return JD((ee,Y)=>{K.update(Y)},-1),F.useEffect(()=>(K.connect(G),()=>void K.disconnect()),[G,K]),F.useEffect(()=>{function ee(){D(),w&&H.regress()}const Y=Z=>{ee(),s==null||s(Z),_==null||_(Z)},re=Z=>{ee(),o==null||o(Z),x==null||x(Z)},J=Z=>{l==null||l(Z),S==null||S(Z)},se=Z=>{ee(),u==null||u(Z),x==null||x(Z)},q=Z=>{ee(),h==null||h(Z),x==null||x(Z)},X=Z=>{ee(),p==null||p(Z),x==null||x(Z)},oe=Z=>{g==null||g(Z)},ue=Z=>{y==null||y(Z)};return K.addEventListener("controlstart",Y),K.addEventListener("control",re),K.addEventListener("controlend",J),K.addEventListener("transitionstart",se),K.addEventListener("update",q),K.addEventListener("wake",X),K.addEventListener("rest",oe),K.addEventListener("sleep",ue),()=>{K.removeEventListener("controlstart",Y),K.removeEventListener("control",re),K.removeEventListener("controlend",J),K.removeEventListener("transitionstart",se),K.removeEventListener("update",q),K.removeEventListener("wake",X),K.removeEventListener("rest",oe),K.removeEventListener("sleep",ue)}},[K,D,z,w,H,s,o,l,u,h,p,g,y,x,_,S]),F.useEffect(()=>{if(a){const ee=L().controls;return I({controls:K}),()=>I({controls:ee})}},[a,K]),F.createElement("primitive",Ui({ref:e,object:K},T))}),nte=F.forwardRef(({children:n,enabled:e=!0,speed:t=1,rotationIntensity:i=1,floatIntensity:r=1,floatingRange:a=[-.1,.1],autoInvalidate:s=!1,...o},l)=>{const u=F.useRef(null);F.useImperativeHandle(l,()=>u.current,[]);const h=F.useRef(Math.random()*1e4);return JD(p=>{var g,y;if(!e||t===0)return;s&&p.invalidate();const _=h.current+p.clock.elapsedTime;u.current.rotation.x=Math.cos(_/4*t)/8*i,u.current.rotation.y=Math.sin(_/4*t)/8*i,u.current.rotation.z=Math.sin(_/4*t)/20*i;let S=Math.sin(_/4*t)/10;S=Lr.mapLinear(S,-.1,.1,(g=a==null?void 0:a[0])!==null&&g!==void 0?g:-.1,(y=a==null?void 0:a[1])!==null&&y!==void 0?y:.1),u.current.position.y=S*r,u.current.updateMatrix()}),F.createElement("group",o,F.createElement("group",{ref:u,matrixAutoUpdate:!1},n))});var si="colors",rs="sizes",Rt="space",ite={gap:Rt,gridGap:Rt,columnGap:Rt,gridColumnGap:Rt,rowGap:Rt,gridRowGap:Rt,inset:Rt,insetBlock:Rt,insetBlockEnd:Rt,insetBlockStart:Rt,insetInline:Rt,insetInlineEnd:Rt,insetInlineStart:Rt,margin:Rt,marginTop:Rt,marginRight:Rt,marginBottom:Rt,marginLeft:Rt,marginBlock:Rt,marginBlockEnd:Rt,marginBlockStart:Rt,marginInline:Rt,marginInlineEnd:Rt,marginInlineStart:Rt,padding:Rt,paddingTop:Rt,paddingRight:Rt,paddingBottom:Rt,paddingLeft:Rt,paddingBlock:Rt,paddingBlockEnd:Rt,paddingBlockStart:Rt,paddingInline:Rt,paddingInlineEnd:Rt,paddingInlineStart:Rt,top:Rt,right:Rt,bottom:Rt,left:Rt,scrollMargin:Rt,scrollMarginTop:Rt,scrollMarginRight:Rt,scrollMarginBottom:Rt,scrollMarginLeft:Rt,scrollMarginX:Rt,scrollMarginY:Rt,scrollMarginBlock:Rt,scrollMarginBlockEnd:Rt,scrollMarginBlockStart:Rt,scrollMarginInline:Rt,scrollMarginInlineEnd:Rt,scrollMarginInlineStart:Rt,scrollPadding:Rt,scrollPaddingTop:Rt,scrollPaddingRight:Rt,scrollPaddingBottom:Rt,scrollPaddingLeft:Rt,scrollPaddingX:Rt,scrollPaddingY:Rt,scrollPaddingBlock:Rt,scrollPaddingBlockEnd:Rt,scrollPaddingBlockStart:Rt,scrollPaddingInline:Rt,scrollPaddingInlineEnd:Rt,scrollPaddingInlineStart:Rt,fontSize:"fontSizes",background:si,backgroundColor:si,backgroundImage:si,borderImage:si,border:si,borderBlock:si,borderBlockEnd:si,borderBlockStart:si,borderBottom:si,borderBottomColor:si,borderColor:si,borderInline:si,borderInlineEnd:si,borderInlineStart:si,borderLeft:si,borderLeftColor:si,borderRight:si,borderRightColor:si,borderTop:si,borderTopColor:si,caretColor:si,color:si,columnRuleColor:si,fill:si,outline:si,outlineColor:si,stroke:si,textDecorationColor:si,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:rs,minBlockSize:rs,maxBlockSize:rs,inlineSize:rs,minInlineSize:rs,maxInlineSize:rs,width:rs,minWidth:rs,maxWidth:rs,height:rs,minHeight:rs,maxHeight:rs,flexBasis:rs,gridTemplateColumns:rs,gridTemplateRows:rs,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},rte=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,Vg=()=>{const n=Object.create(null);return(e,t,...i)=>{const r=(a=>JSON.stringify(a,rte))(e);return r in n?n[r]:n[r]=t(e,...i)}},Kd=Symbol.for("sxs.internal"),r3=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),FL=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:ate}=Object.prototype,lO=n=>n.includes("-")?n:n.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase())),ste=/\s+(?![^()]*\))/,Vm=n=>e=>n(...typeof e=="string"?String(e).split(ste):[e]),HL={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:Vm(((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n}))),marginInline:Vm(((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n}))),maxSize:Vm(((n,e)=>({maxBlockSize:n,maxInlineSize:e||n}))),minSize:Vm(((n,e)=>({minBlockSize:n,minInlineSize:e||n}))),paddingBlock:Vm(((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n}))),paddingInline:Vm(((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n})))},pM=/([\d.]+)([^]*)/,ote=(n,e)=>n.length?n.reduce(((t,i)=>(t.push(...e.map((r=>r.includes("&")?r.replace(/&/g,/[ +>|~]/.test(i)&&/&.*&/.test(r)?`:is(${i})`:i):i+" "+r))),t)),[]):e,lte=(n,e)=>n in cte&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,((t,i,r,a)=>i+(r==="stretch"?`-moz-available${a};${lO(n)}:${i}-webkit-fill-available`:`-moz-fit-content${a};${lO(n)}:${i}fit-content`)+a)):String(e),cte={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},tf=n=>n?n+"-":"",q6=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,((i,r,a,s,o)=>s=="$"==!!a?i:(r||s=="--"?"calc(":"")+"var(--"+(s==="$"?tf(e)+(o.includes("$")?"":tf(t))+o.replace(/\$/g,"-"):o)+")"+(r||s=="--"?"*"+(r||"")+(a||"1")+")":""))),ute=/\s*,\s*(?![^()]*\))/,fte=Object.prototype.toString,lg=(n,e,t,i,r)=>{let a,s,o;const l=(u,h,p)=>{let g,y;const _=S=>{for(g in S){const T=g.charCodeAt(0)===64,M=T&&Array.isArray(S[g])?S[g]:[S[g]];for(y of M){const C=/[A-Z]/.test(w=g)?w:w.replace(/-[^]/g,(D=>D[1].toUpperCase())),N=typeof y=="object"&&y&&y.toString===fte&&(!i.utils[C]||!h.length);if(C in i.utils&&!N){const D=i.utils[C];if(D!==s){s=D,_(D(y)),s=null;continue}}else if(C in HL){const D=HL[C];if(D!==o){o=D,_(D(y)),o=null;continue}}if(T&&(x=g.slice(1)in i.media?"@media "+i.media[g.slice(1)]:g,g=x.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,((D,P,z,I,L,H)=>{const j=pM.test(P),G=.0625*(j?-1:1),[K,ee]=j?[I,P]:[P,I];return"("+(z[0]==="="?"":z[0]===">"===j?"max-":"min-")+K+":"+(z[0]!=="="&&z.length===1?ee.replace(pM,((Y,re,J)=>Number(re)+G*(z===">"?1:-1)+J)):ee)+(L?") and ("+(L[0]===">"?"min-":"max-")+K+":"+(L.length===1?H.replace(pM,((Y,re,J)=>Number(re)+G*(L===">"?-1:1)+J)):H):"")+")"}))),N){const D=T?p.concat(g):[...p],P=T?[...h]:ote(h,g.split(ute));a!==void 0&&r(VL(...a)),a=void 0,l(y,P,D)}else a===void 0&&(a=[[],h,p]),g=T||g.charCodeAt(0)!==36?g:`--${tf(i.prefix)}${g.slice(1).replace(/\$/g,"-")}`,y=N?y:typeof y=="number"?y&&C in hte?String(y)+"px":String(y):q6(lte(C,y??""),i.prefix,i.themeMap[C]),a[0].push(`${T?`${g} `:`${lO(g)}:`}${y}`)}}var x,w};_(u),a!==void 0&&r(VL(...a)),a=void 0};l(n,e,t)},VL=(n,e,t)=>`${t.map((i=>`${i}{`)).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,hte={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},GL=n=>String.fromCharCode(n+(n>25?39:97)),Zd=n=>(e=>{let t,i="";for(t=Math.abs(e);t>52;t=t/52|0)i=GL(t%52)+i;return GL(t%52)+i})(((e,t)=>{let i=t.length;for(;i;)e=33*e^t.charCodeAt(--i);return e})(5381,JSON.stringify(n))>>>0),Ly=["themed","global","styled","onevar","resonevar","allvar","inline"],dte=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},pte=n=>{let e;const t=()=>{const{cssRules:r}=e.sheet;return[].map.call(r,((a,s)=>{const{cssText:o}=a;let l="";if(o.startsWith("--sxs"))return"";if(r[s-1]&&(l=r[s-1].cssText).startsWith("--sxs")){if(!a.cssRules.length)return"";for(const u in e.rules)if(e.rules[u].group===a)return`--sxs{--sxs:${[...e.rules[u].cache].join(" ")}}${o}`;return a.cssRules.length?`${l}${o}`:""}return o})).join("")},i=()=>{if(e){const{rules:o,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const u in o)delete o[u]}const r=Object(n).styleSheets||[];for(const o of r)if(dte(o)){for(let l=0,u=o.cssRules;u[l];++l){const h=Object(u[l]);if(h.type!==1)continue;const p=Object(u[l+1]);if(p.type!==4)continue;++l;const{cssText:g}=h;if(!g.startsWith("--sxs"))continue;const y=g.slice(14,-3).trim().split(/\s+/),_=Ly[y[0]];_&&(e||(e={sheet:o,reset:i,rules:{},toString:t}),e.rules[_]={group:p,index:l,cache:new Set(y)})}if(e)break}if(!e){const o=(l,u)=>({type:u,cssRules:[],insertRule(h,p){this.cssRules.splice(p,0,o(h,{import:3,undefined:1}[(h.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,(h=>h.cssText)).join("")}}`:l}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:o("","text/css"),rules:{},reset:i,toString:t}}const{sheet:a,rules:s}=e;for(let o=Ly.length-1;o>=0;--o){const l=Ly[o];if(!s[l]){const u=Ly[o+1],h=s[u]?s[u].index:a.cssRules.length;a.insertRule("@media{}",h),a.insertRule(`--sxs{--sxs:${o}}`,h),s[l]={group:a.cssRules[h+1],index:h,cache:new Set([o])}}mte(s[l])}};return i(),e},mte=n=>{const e=n.group;let t=e.cssRules.length;n.apply=i=>{try{e.insertRule(i,t),++t}catch{}}},Ty=Symbol(),gte=Vg(),jL=(n,e)=>gte(n,(()=>(...t)=>{let i={type:null,composers:new Set};for(const r of t)if(r!=null)if(r[Kd]){i.type==null&&(i.type=r[Kd].type);for(const a of r[Kd].composers)i.composers.add(a)}else r.constructor!==Object||r.$$typeof?i.type==null&&(i.type=r):i.composers.add(vte(r,n));return i.type==null&&(i.type="span"),i.composers.size||i.composers.add(["PJLV",{},[],[],{},[]]),yte(n,i,e)})),vte=({variants:n,compoundVariants:e,defaultVariants:t,...i},r)=>{const a=`${tf(r.prefix)}c-${Zd(i)}`,s=[],o=[],l=Object.create(null),u=[];for(const g in t)l[g]=String(t[g]);if(typeof n=="object"&&n)for(const g in n){h=l,p=g,ate.call(h,p)||(l[g]="undefined");const y=n[g];for(const _ in y){const S={[g]:String(_)};String(_)==="undefined"&&u.push(g);const x=y[_],w=[S,x,!FL(x)];s.push(w)}}var h,p;if(typeof e=="object"&&e)for(const g of e){let{css:y,..._}=g;y=typeof y=="object"&&y||{};for(const x in _)_[x]=String(_[x]);const S=[_,y,!FL(y)];o.push(S)}return[a,i,s,o,l,u]},yte=(n,e,t)=>{const[i,r,a,s]=_te(e.composers),o=typeof e.type=="function"||e.type.$$typeof?(p=>{function g(){for(let y=0;y<g[Ty].length;y++){const[_,S]=g[Ty][y];p.rules[_].apply(S)}return g[Ty]=[],null}return g[Ty]=[],g.rules={},Ly.forEach((y=>g.rules[y]={apply:_=>g[Ty].push([y,_])})),g})(t):null,l=(o||t).rules,u=`.${i}${r.length>1?`:where(.${r.slice(1).join(".")})`:""}`,h=p=>{p=typeof p=="object"&&p||bte;const{css:g,...y}=p,_={};for(const w in a)if(delete y[w],w in p){let T=p[w];typeof T=="object"&&T?_[w]={"@initial":a[w],...T}:(T=String(T),_[w]=T!=="undefined"||s.has(w)?T:a[w])}else _[w]=a[w];const S=new Set([...r]);for(const[w,T,M,C]of e.composers){t.rules.styled.cache.has(w)||(t.rules.styled.cache.add(w),lg(T,[`.${w}`],[],n,(P=>{l.styled.apply(P)})));const N=qL(M,_,n.media),D=qL(C,_,n.media,!0);for(const P of N)if(P!==void 0)for(const[z,I,L]of P){const H=`${w}-${Zd(I)}-${z}`;S.add(H);const j=(L?t.rules.resonevar:t.rules.onevar).cache,G=L?l.resonevar:l.onevar;j.has(H)||(j.add(H),lg(I,[`.${H}`],[],n,(K=>{G.apply(K)})))}for(const P of D)if(P!==void 0)for(const[z,I]of P){const L=`${w}-${Zd(I)}-${z}`;S.add(L),t.rules.allvar.cache.has(L)||(t.rules.allvar.cache.add(L),lg(I,[`.${L}`],[],n,(H=>{l.allvar.apply(H)})))}}if(typeof g=="object"&&g){const w=`${i}-i${Zd(g)}-css`;S.add(w),t.rules.inline.cache.has(w)||(t.rules.inline.cache.add(w),lg(g,[`.${w}`],[],n,(T=>{l.inline.apply(T)})))}for(const w of String(p.className||"").trim().split(/\s+/))w&&S.add(w);const x=y.className=[...S].join(" ");return{type:e.type,className:x,selector:u,props:y,toString:()=>x,deferredInjector:o}};return r3(h,{className:i,selector:u,[Kd]:e,toString:()=>(t.rules.styled.cache.has(i)||h(),i)})},_te=n=>{let e="";const t=[],i={},r=[];for(const[a,,,,s,o]of n){e===""&&(e=a),t.push(a),r.push(...o);for(const l in s){const u=s[l];(i[l]===void 0||u!=="undefined"||o.includes(u))&&(i[l]=u)}}return[e,t,i,new Set(r)]},qL=(n,e,t,i)=>{const r=[];e:for(let[a,s,o]of n){if(o)continue;let l,u=0,h=!1;for(l in a){const p=a[l];let g=e[l];if(g!==p){if(typeof g!="object"||!g)continue e;{let y,_,S=0;for(const x in g){if(p===String(g[x])){if(x!=="@initial"){const w=x.slice(1);(_=_||[]).push(w in t?t[w]:x.replace(/^@media ?/,"")),h=!0}u+=S,y=!0}++S}if(_&&_.length&&(s={["@media "+_.join(", ")]:s}),!y)continue e}}}(r[u]=r[u]||[]).push([i?"cv":`${l}-${a[l]}`,s,h])}return r},bte={},Ste=Vg(),xte=(n,e)=>Ste(n,(()=>(...t)=>{const i=()=>{for(let r of t){r=typeof r=="object"&&r||{};let a=Zd(r);if(!e.rules.global.cache.has(a)){if(e.rules.global.cache.add(a),"@import"in r){let s=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let o of[].concat(r["@import"]))o=o.includes('"')||o.includes("'")?o:`"${o}"`,e.sheet.insertRule(`@import ${o};`,s++);delete r["@import"]}lg(r,[],[],n,(s=>{e.rules.global.apply(s)}))}}return""};return r3(i,{toString:i})})),Ete=Vg(),wte=(n,e)=>Ete(n,(()=>t=>{const i=`${tf(n.prefix)}k-${Zd(t)}`,r=()=>{if(!e.rules.global.cache.has(i)){e.rules.global.cache.add(i);const a=[];lg(t,[],[],n,(o=>a.push(o)));const s=`@keyframes ${i}{${a.join("")}}`;e.rules.global.apply(s)}return i};return r3(r,{get name(){return r()},toString:r})})),Tte=class{constructor(n,e,t,i){this.token=n==null?"":String(n),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=i==null?"":String(i)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+tf(this.prefix)+tf(this.scale)+this.token}toString(){return this.computedValue}},Mte=Vg(),Ate=(n,e)=>Mte(n,(()=>(t,i)=>{i=typeof t=="object"&&t||Object(i);const r=`.${t=(t=typeof t=="string"?t:"")||`${tf(n.prefix)}t-${Zd(i)}`}`,a={},s=[];for(const l in i){a[l]={};for(const u in i[l]){const h=`--${tf(n.prefix)}${l}-${u}`,p=q6(String(i[l][u]),n.prefix,l);a[l][u]=new Tte(u,p,l,n.prefix),s.push(`${h}:${p}`)}}const o=()=>{if(s.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const l=`${i===n.theme?":root,":""}.${t}{${s.join(";")}}`;e.rules.themed.apply(l)}return t};return{...a,get className(){return o()},selector:r,toString:o}})),Cte=Vg(),Rte=Vg(),Ote=n=>{const e=(t=>{let i=!1;const r=Cte(t,(a=>{i=!0;const s="prefix"in(a=typeof a=="object"&&a||{})?String(a.prefix):"",o=typeof a.media=="object"&&a.media||{},l=typeof a.root=="object"?a.root||null:globalThis.document||null,u=typeof a.theme=="object"&&a.theme||{},h={prefix:s,media:o,theme:u,themeMap:typeof a.themeMap=="object"&&a.themeMap||{...ite},utils:typeof a.utils=="object"&&a.utils||{}},p=pte(l),g={css:jL(h,p),globalCss:xte(h,p),keyframes:wte(h,p),createTheme:Ate(h,p),reset(){p.reset(),g.theme.toString()},theme:{},sheet:p,config:h,prefix:s,getCssText:p.toString,toString:p.toString};return String(g.theme=g.createTheme(u)),g}));return i||r.reset(),r})(n);return e.styled=(({config:t,sheet:i})=>Rte(t,(()=>{const r=jL(t,i);return(...a)=>{const s=r(...a),o=s[Kd].type,l=B.forwardRef(((u,h)=>{const p=u&&u.as||o,{props:g,deferredInjector:y}=s(u);return delete g.as,g.ref=h,y?B.createElement(B.Fragment,null,B.createElement(p,g),B.createElement(y,null)):B.createElement(p,g)}));return l.className=s.className,l.displayName=`Styled.${o.displayName||o.name||o}`,l.selector=s.selector,l.toString=()=>s.selector,l[Kd]=s[Kd],l}})))(e),e},mM={exports:{}},gM,WL;function Dte(){if(WL)return gM;WL=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return gM=n,gM}var vM,YL;function Ute(){if(YL)return vM;YL=1;var n=Dte();function e(){}function t(){}return t.resetWarningCache=e,vM=function(){function i(s,o,l,u,h,p){if(p!==n){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}i.isRequired=i;function r(){return i}var a={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},vM}var $L;function Nte(){return $L||($L=1,mM.exports=Ute()()),mM.exports}var Pte=Nte();const at=kr(Pte),Lte=[{label:"Login",action:()=>console.log("Login"),target:"login"},{label:"Sign Up",action:()=>console.log("Sign Up"),target:"signup"},{label:"Students",action:()=>console.log("Students"),target:"students"},{label:"Teachers",action:()=>console.log("Teachers"),target:"teachers"},{label:"Parents",action:()=>console.log("Parents"),target:"parents"}];i3.preload("/jersey-15-v4-latin-regular.ttf");function Ite({label:n,onClick:e,index:t,onNavigate:i,target:r}){const[a,s]=F.useState(!1),o=F.useRef(),l=F.useRef(1),u=F.useRef(!1),g=2-t*3;F.useEffect(()=>(document.body.style.cursor=a?"pointer":"auto",()=>{document.body.style.cursor="auto"}),[a]),JD((_,S)=>{if(o.current){const x=o.current.scale.x,w=Lr.lerp(x,l.current,Math.min(1,12*S));o.current.scale.set(w,w,w)}});const y=()=>{u.current||(u.current=!0,e&&e(),l.current=.8,setTimeout(()=>{l.current=1,u.current=!1,i&&i(r)},300))};return B.createElement("group",{position:[-2,g,0]},B.createElement(V6,{ref:o,font:"/jersey-15-v4-latin-regular.ttf",fontSize:3.5,color:a?"#ff6b6b":"black",anchorX:"left",anchorY:"middle",onPointerOver:()=>s(!0),onPointerOut:()=>s(!1),onClick:y},n))}function Bte({onNavigate:n}){const{viewport:e}=zc();return B.createElement("group",{position:[30,8,0]},Lte.map((t,i)=>B.createElement(Ite,{key:t.label,label:t.label,onClick:t.action,onNavigate:n,target:t.target,index:i})))}function zte({onNavigate:n}){const e=F.useRef();return F.useEffect(()=>{(async()=>{e.current.dolly(-22),e.current.smoothTime=.8,e.current.dolly(22,!0)})()},[]),B.createElement(B.Fragment,null,B.createElement(tte,{ref:e,minPolarAngle:Math.PI/2.5,maxPolarAngle:Math.PI/2.5}),B.createElement("directionalLight",{position:[1,2,3],intensity:4.5}),B.createElement("ambientLight",{intensity:1.5}),B.createElement(nte,{speed:3},B.createElement(V6,{"position-x":-24,"position-y":9,"position-z":9,color:"black",font:"./jersey-15-v4-latin-regular.ttf",scale:5},"Deutsch",`
`,"    im",`
`,"Ausland")),B.createElement(Bte,{onNavigate:n}))}function PE(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function xp(n,e,t,i){function r(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(h){try{u(i.next(h))}catch(p){s(p)}}function l(h){try{u(i.throw(h))}catch(p){s(p)}}function u(h){h.done?a(h.value):r(h.value).then(o,l)}u((i=i.apply(n,e||[])).next())})}function Gg(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,r,a,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=o(0),s.throw=o(1),s.return=o(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(h){return l([u,h])}}function l(u){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(t=0)),t;)try{if(i=1,r&&(a=u[0]&2?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,r=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){t.label=u[1];break}if(u[0]===6&&t.label<a[1]){t.label=a[1],a=u;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(u);break}a[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(h){u=[6,h],r=0}finally{i=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function kte(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,a=[],s;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(o){s={error:o}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(s)throw s.error}}return a}function Fte(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(kte(arguments[e]));return n}const Hte=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);class a3 extends Error{constructor(e,t="FunctionsError",i){super(e),this.name=t,this.context=i}}class Vte extends a3{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class XL extends a3{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class KL extends a3{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var cO;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(cO||(cO={}));class Gte{constructor(e,{headers:t={},customFetch:i,region:r=cO.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=Hte(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return xp(this,arguments,void 0,function*(t,i={}){var r;let a,s;try{const{headers:o,method:l,body:u,signal:h,timeout:p}=i;let g={},{region:y}=i;y||(y=this.region);const _=new URL(`${this.url}/${t}`);y&&y!=="any"&&(g["x-region"]=y,_.searchParams.set("forceFunctionRegion",y));let S;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(g["Content-Type"]="application/octet-stream",S=u):typeof u=="string"?(g["Content-Type"]="text/plain",S=u):typeof FormData<"u"&&u instanceof FormData?S=u:(g["Content-Type"]="application/json",S=JSON.stringify(u)):S=u;let x=h;p&&(s=new AbortController,a=setTimeout(()=>s.abort(),p),h?(x=s.signal,h.addEventListener("abort",()=>s.abort())):x=s.signal);const w=yield this.fetch(_.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},g),this.headers),o),body:S,signal:x}).catch(N=>{throw new Vte(N)}),T=w.headers.get("x-relay-error");if(T&&T==="true")throw new XL(w);if(!w.ok)throw new KL(w);let M=((r=w.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),C;return M==="application/json"?C=yield w.json():M==="application/octet-stream"||M==="application/pdf"?C=yield w.blob():M==="text/event-stream"?C=w:M==="multipart/form-data"?C=yield w.formData():C=yield w.text(),{data:C,error:null,response:w}}catch(o){return{data:null,error:o,response:o instanceof KL||o instanceof XL?o.context:void 0}}finally{a&&clearTimeout(a)}})}}var jte=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},qte=class{constructor(n){var e,t;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(e=n.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=n.signal,this.isMaybeSingle=(t=n.isMaybeSingle)!==null&&t!==void 0?t:!1,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,e){return this.headers=new Headers(this.headers),this.headers.set(n,e),this}then(n,e){var t=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let r=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let s=null,o=null,l=null,u=a.status,h=a.statusText;if(a.ok){var p,g;if(t.method!=="HEAD"){var y;const w=await a.text();w===""||(t.headers.get("Accept")==="text/csv"||t.headers.get("Accept")&&(!((y=t.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?o=w:o=JSON.parse(w))}const S=(p=t.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),x=(g=a.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");S&&x&&x.length>1&&(l=parseInt(x[1])),t.isMaybeSingle&&t.method==="GET"&&Array.isArray(o)&&(o.length>1?(s={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,u=406,h="Not Acceptable"):o.length===1?o=o[0]:o=null)}else{var _;const S=await a.text();try{s=JSON.parse(S),Array.isArray(s)&&a.status===404&&(o=[],s=null,u=200,h="OK")}catch{a.status===404&&S===""?(u=204,h="No Content"):s={message:S}}if(s&&t.isMaybeSingle&&(!(s==null||(_=s.details)===null||_===void 0)&&_.includes("0 rows"))&&(s=null,u=200,h="OK"),s&&t.shouldThrowOnError)throw new jte(s)}return{error:s,data:o,count:l,status:u,statusText:h}});return this.shouldThrowOnError||(r=r.catch(a=>{var s;let o="";const l=a==null?void 0:a.cause;if(l){var u,h,p,g;const _=(u=l==null?void 0:l.message)!==null&&u!==void 0?u:"",S=(h=l==null?void 0:l.code)!==null&&h!==void 0?h:"";o=`${(p=a==null?void 0:a.name)!==null&&p!==void 0?p:"FetchError"}: ${a==null?void 0:a.message}`,o+=`

Caused by: ${(g=l==null?void 0:l.name)!==null&&g!==void 0?g:"Error"}: ${_}`,S&&(o+=` (${S})`),l!=null&&l.stack&&(o+=`
${l.stack}`)}else{var y;o=(y=a==null?void 0:a.stack)!==null&&y!==void 0?y:""}return{error:{message:`${(s=a==null?void 0:a.name)!==null&&s!==void 0?s:"FetchError"}: ${a==null?void 0:a.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),r.then(n,e)}returns(){return this}overrideTypes(){return this}},Wte=class extends qte{select(n){let e=!1;const t=(n??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:e=!0,nullsFirst:t,foreignTable:i,referencedTable:r=i}={}){const a=r?`${r}.order`:"order",s=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${s?`${s},`:""}${n}.${e?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:e,referencedTable:t=e}={}){const i=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(i,`${n}`),this}range(n,e,{foreignTable:t,referencedTable:i=t}={}){const r=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${n}`),this.url.searchParams.set(a,`${e-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:e=!1,settings:t=!1,buffers:i=!1,wal:r=!1,format:a="text"}={}){var s;const o=[n?"analyze":null,e?"verbose":null,t?"settings":null,i?"buffers":null,r?"wal":null].filter(Boolean).join("|"),l=(s=this.headers.get("Accept"))!==null&&s!==void 0?s:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${l}"; options=${o};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const ZL=new RegExp("[,()]");var Qm=class extends Wte{eq(n,e){return this.url.searchParams.append(n,`eq.${e}`),this}neq(n,e){return this.url.searchParams.append(n,`neq.${e}`),this}gt(n,e){return this.url.searchParams.append(n,`gt.${e}`),this}gte(n,e){return this.url.searchParams.append(n,`gte.${e}`),this}lt(n,e){return this.url.searchParams.append(n,`lt.${e}`),this}lte(n,e){return this.url.searchParams.append(n,`lte.${e}`),this}like(n,e){return this.url.searchParams.append(n,`like.${e}`),this}likeAllOf(n,e){return this.url.searchParams.append(n,`like(all).{${e.join(",")}}`),this}likeAnyOf(n,e){return this.url.searchParams.append(n,`like(any).{${e.join(",")}}`),this}ilike(n,e){return this.url.searchParams.append(n,`ilike.${e}`),this}ilikeAllOf(n,e){return this.url.searchParams.append(n,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(n,e){return this.url.searchParams.append(n,`ilike(any).{${e.join(",")}}`),this}regexMatch(n,e){return this.url.searchParams.append(n,`match.${e}`),this}regexIMatch(n,e){return this.url.searchParams.append(n,`imatch.${e}`),this}is(n,e){return this.url.searchParams.append(n,`is.${e}`),this}isDistinct(n,e){return this.url.searchParams.append(n,`isdistinct.${e}`),this}in(n,e){const t=Array.from(new Set(e)).map(i=>typeof i=="string"&&ZL.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(n,`in.(${t})`),this}notIn(n,e){const t=Array.from(new Set(e)).map(i=>typeof i=="string"&&ZL.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(n,`not.in.(${t})`),this}contains(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cs.{${e.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(e)}`),this}containedBy(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cd.{${e.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(e)}`),this}rangeGt(n,e){return this.url.searchParams.append(n,`sr.${e}`),this}rangeGte(n,e){return this.url.searchParams.append(n,`nxl.${e}`),this}rangeLt(n,e){return this.url.searchParams.append(n,`sl.${e}`),this}rangeLte(n,e){return this.url.searchParams.append(n,`nxr.${e}`),this}rangeAdjacent(n,e){return this.url.searchParams.append(n,`adj.${e}`),this}overlaps(n,e){return typeof e=="string"?this.url.searchParams.append(n,`ov.${e}`):this.url.searchParams.append(n,`ov.{${e.join(",")}}`),this}textSearch(n,e,{config:t,type:i}={}){let r="";i==="plain"?r="pl":i==="phrase"?r="ph":i==="websearch"&&(r="w");const a=t===void 0?"":`(${t})`;return this.url.searchParams.append(n,`${r}fts${a}.${e}`),this}match(n){return Object.entries(n).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(n,e,t){return this.url.searchParams.append(n,`not.${e}.${t}`),this}or(n,{foreignTable:e,referencedTable:t=e}={}){const i=t?`${t}.or`:"or";return this.url.searchParams.append(i,`(${n})`),this}filter(n,e,t){return this.url.searchParams.append(n,`${e}.${t}`),this}},Yte=class{constructor(n,{headers:e={},schema:t,fetch:i}){this.url=n,this.headers=new Headers(e),this.schema=t,this.fetch=i}select(n,e){const{head:t=!1,count:i}=e??{},r=t?"HEAD":"GET";let a=!1;const s=(n??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",s),i&&this.headers.append("Prefer",`count=${i}`),new Qm({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(n,{count:e,defaultToNull:t=!0}={}){var i;const r="POST";if(e&&this.headers.append("Prefer",`count=${e}`),t||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const a=n.reduce((s,o)=>s.concat(Object.keys(o)),[]);if(a.length>0){const s=[...new Set(a)].map(o=>`"${o}"`);this.url.searchParams.set("columns",s.join(","))}}return new Qm({method:r,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(n,{onConflict:e,ignoreDuplicates:t=!1,count:i,defaultToNull:r=!0}={}){var a;const s="POST";if(this.headers.append("Prefer",`resolution=${t?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),i&&this.headers.append("Prefer",`count=${i}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const o=n.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(o.length>0){const l=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new Qm({method:s,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(n,{count:e}={}){var t;const i="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Qm({method:i,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}delete({count:n}={}){var e;const t="DELETE";return n&&this.headers.append("Prefer",`count=${n}`),new Qm({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},$te=class W6{constructor(e,{headers:t={},schema:i,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=i,this.fetch=r}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Yte(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new W6(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:i=!1,get:r=!1,count:a}={}){var s;let o;const l=new URL(`${this.url}/rpc/${e}`);let u;i||r?(o=i?"HEAD":"GET",Object.entries(t).filter(([p,g])=>g!==void 0).map(([p,g])=>[p,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([p,g])=>{l.searchParams.append(p,g)})):(o="POST",u=t);const h=new Headers(this.headers);return a&&h.set("Prefer",`count=${a}`),new Qm({method:o,url:l,headers:h,schema:this.schemaName,body:u,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};class Xte{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const i=t.node,r=parseInt(i.replace(/^v/,"").split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const i=this.getWebSocketConstructor();return new i(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Kte="2.88.0",Zte=`realtime-js/${Kte}`,Y6="1.0.0",Qte="2.0.0",QL=Y6,uO=1e4,Jte=1e3,ene=100;var oh;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(oh||(oh={}));var Pr;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Pr||(Pr={}));var zl;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(zl||(zl={}));var fO;(function(n){n.websocket="websocket"})(fO||(fO={}));var Bd;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Bd||(Bd={}));class tne{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let i=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,i;const r=(i=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(e){var t,i;const r=(i=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&i!==void 0?i:{},s=new TextEncoder().encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(e,t,i){var r,a;const s=e.topic,o=(r=e.ref)!==null&&r!==void 0?r:"",l=(a=e.join_ref)!==null&&a!==void 0?a:"",u=e.payload.event,h=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},p=Object.keys(h).length===0?"":JSON.stringify(h);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`metadata length ${p.length} exceeds maximum of 255`);const g=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+o.length+s.length+u.length+p.length,y=new ArrayBuffer(this.HEADER_LENGTH+g);let _=new DataView(y),S=0;_.setUint8(S++,this.KINDS.userBroadcastPush),_.setUint8(S++,l.length),_.setUint8(S++,o.length),_.setUint8(S++,s.length),_.setUint8(S++,u.length),_.setUint8(S++,p.length),_.setUint8(S++,t),Array.from(l,w=>_.setUint8(S++,w.charCodeAt(0))),Array.from(o,w=>_.setUint8(S++,w.charCodeAt(0))),Array.from(s,w=>_.setUint8(S++,w.charCodeAt(0))),Array.from(u,w=>_.setUint8(S++,w.charCodeAt(0))),Array.from(p,w=>_.setUint8(S++,w.charCodeAt(0)));var x=new Uint8Array(y.byteLength+i.byteLength);return x.set(new Uint8Array(y),0),x.set(new Uint8Array(i),y.byteLength),x.buffer}decode(e,t){if(this._isArrayBuffer(e)){let i=this._binaryDecode(e);return t(i)}if(typeof e=="string"){const i=JSON.parse(e),[r,a,s,o,l]=i;return t({join_ref:r,ref:a,topic:s,event:o,payload:l})}return t({})}_binaryDecode(e){const t=new DataView(e),i=t.getUint8(0),r=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,r)}}_decodeUserBroadcast(e,t,i){const r=t.getUint8(1),a=t.getUint8(2),s=t.getUint8(3),o=t.getUint8(4);let l=this.HEADER_LENGTH+4;const u=i.decode(e.slice(l,l+r));l=l+r;const h=i.decode(e.slice(l,l+a));l=l+a;const p=i.decode(e.slice(l,l+s));l=l+s;const g=e.slice(l,e.byteLength),y=o===this.JSON_ENCODING?JSON.parse(i.decode(g)):g,_={type:this.BROADCAST_EVENT,event:h,payload:y};return s>0&&(_.meta=JSON.parse(p)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:_}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([i])=>t.includes(i)))}}class $6{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Si;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Si||(Si={}));const JL=(n,e,t={})=>{var i;const r=(i=t.skipTypes)!==null&&i!==void 0?i:[];return e?Object.keys(e).reduce((a,s)=>(a[s]=nne(s,n,e,r),a),{}):{}},nne=(n,e,t,i)=>{const r=e.find(o=>o.name===n),a=r==null?void 0:r.type,s=t[n];return a&&!i.includes(a)?X6(a,s):hO(s)},X6=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return sne(e,t)}switch(n){case Si.bool:return ine(e);case Si.float4:case Si.float8:case Si.int2:case Si.int4:case Si.int8:case Si.numeric:case Si.oid:return rne(e);case Si.json:case Si.jsonb:return ane(e);case Si.timestamp:return one(e);case Si.abstime:case Si.date:case Si.daterange:case Si.int4range:case Si.int8range:case Si.money:case Si.reltime:case Si.text:case Si.time:case Si.timestamptz:case Si.timetz:case Si.tsrange:case Si.tstzrange:return hO(e);default:return hO(e)}},hO=n=>n,ine=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},rne=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},ane=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},sne=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,i=n[t];if(n[0]==="{"&&i==="}"){let a;const s=n.slice(1,t);try{a=JSON.parse("["+s+"]")}catch{a=s?s.split(","):[]}return a.map(o=>X6(e,o))}return n},one=n=>typeof n=="string"?n.replace(" ","T"):n,K6=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class yM{constructor(e,t,i={},r=uO){this.channel=e,this.event=t,this.payload=i,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var i;return this._hasReceived(e)&&t((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var eI;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(eI||(eI={}));class e0{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},r=>{const{onJoin:a,onLeave:s,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=e0.syncState(this.state,r,a,s),this.pendingDiffs.forEach(l=>{this.state=e0.syncDiff(this.state,l,a,s)}),this.pendingDiffs=[],o()}),this.channel._on(i.diff,{},r=>{const{onJoin:a,onLeave:s,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=e0.syncDiff(this.state,r,a,s),o())}),this.onJoin((r,a,s)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:a,newPresences:s})}),this.onLeave((r,a,s)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:a,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,i,r){const a=this.cloneDeep(e),s=this.transformState(t),o={},l={};return this.map(a,(u,h)=>{s[u]||(l[u]=h)}),this.map(s,(u,h)=>{const p=a[u];if(p){const g=h.map(x=>x.presence_ref),y=p.map(x=>x.presence_ref),_=h.filter(x=>y.indexOf(x.presence_ref)<0),S=p.filter(x=>g.indexOf(x.presence_ref)<0);_.length>0&&(o[u]=_),S.length>0&&(l[u]=S)}else o[u]=h}),this.syncDiff(a,{joins:o,leaves:l},i,r)}static syncDiff(e,t,i,r){const{joins:a,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return i||(i=()=>{}),r||(r=()=>{}),this.map(a,(o,l)=>{var u;const h=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(l),h.length>0){const p=e[o].map(y=>y.presence_ref),g=h.filter(y=>p.indexOf(y.presence_ref)<0);e[o].unshift(...g)}i(o,h,l)}),this.map(s,(o,l)=>{let u=e[o];if(!u)return;const h=l.map(p=>p.presence_ref);u=u.filter(p=>h.indexOf(p.presence_ref)<0),e[o]=u,r(o,u,l),u.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(i=>t(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,i)=>{const r=e[i];return"metas"in r?t[i]=r.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[i]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var tI;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(tI||(tI={}));var t0;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(t0||(t0={}));var Vu;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Vu||(Vu={}));class cg{constructor(e,t={config:{}},i){var r,a;if(this.topic=e,this.params=t,this.socket=i,this.bindings={},this.state=Pr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new yM(this,zl.join,this.params,this.timeout),this.rejoinTimer=new $6(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Pr.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Pr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Pr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Pr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(zl.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new e0(this),this.broadcastEndpointURL=K6(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(r=this.params.config)===null||r===void 0?void 0:r.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var i,r,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Pr.closed){const{config:{broadcast:s,presence:o,private:l}}=this.params,u=(r=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(y=>y.filter))!==null&&r!==void 0?r:[],h=!!this.bindings[t0.PRESENCE]&&this.bindings[t0.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,p={},g={broadcast:s,presence:Object.assign(Object.assign({},o),{enabled:h}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(y=>e==null?void 0:e(Vu.CHANNEL_ERROR,y)),this._onClose(()=>e==null?void 0:e(Vu.CLOSED)),this.updateJoinPayload(Object.assign({config:g},p)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:y})=>{var _;if(this.socket._isManualToken()||this.socket.setAuth(),y===void 0){e==null||e(Vu.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,x=(_=S==null?void 0:S.length)!==null&&_!==void 0?_:0,w=[];for(let T=0;T<x;T++){const M=S[T],{filter:{event:C,schema:N,table:D,filter:P}}=M,z=y&&y[T];if(z&&z.event===C&&cg.isFilterValueEqual(z.schema,N)&&cg.isFilterValueEqual(z.table,D)&&cg.isFilterValueEqual(z.filter,P))w.push(Object.assign(Object.assign({},M),{id:z.id}));else{this.unsubscribe(),this.state=Pr.errored,e==null||e(Vu.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(Vu.SUBSCRIBED);return}}).receive("error",y=>{this.state=Pr.errored,e==null||e(Vu.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Vu.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,i){return this.state===Pr.joined&&e===t0.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,i)}async httpSend(e,t,i={}){var r;if(t==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const s={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(r=i.timeout)!==null&&r!==void 0?r:this.timeout);if(o.status===202)return{success:!0};let l=o.statusText;try{const u=await o.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(e,t={}){var i,r;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:s}=e,o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:s,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=t.timeout)!==null&&i!==void 0?i:this.timeout);return await((r=u.body)===null||r===void 0?void 0:r.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var s,o,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(s=this.params)===null||s===void 0?void 0:s.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Pr.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(zl.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(r=>{i=new yM(this,zl.leave,{},e),i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Pr.closed,this.bindings={}}async _fetchWithTimeout(e,t,i){const r=new AbortController,a=setTimeout(()=>r.abort(),i),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(a),s}_push(e,t,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new yM(this,e,t,i);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>ene){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,i){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,i){var r,a;const s=e.toLocaleLowerCase(),{close:o,error:l,leave:u,join:h}=zl;if(i&&[o,l,u,h].indexOf(s)>=0&&i!==this._joinRef())return;let g=this._onMessage(s,t,i);if(t&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(y=>{var _,S,x;return((_=y.filter)===null||_===void 0?void 0:_.event)==="*"||((x=(S=y.filter)===null||S===void 0?void 0:S.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===s}).map(y=>y.callback(g,i)):(a=this.bindings[s])===null||a===void 0||a.filter(y=>{var _,S,x,w,T,M;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in y){const C=y.id,N=(_=y.filter)===null||_===void 0?void 0:_.event;return C&&((S=t.ids)===null||S===void 0?void 0:S.includes(C))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((x=t.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const C=(T=(w=y==null?void 0:y.filter)===null||w===void 0?void 0:w.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return C==="*"||C===((M=t==null?void 0:t.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===s}).map(y=>{if(typeof g=="object"&&"ids"in g){const _=g.data,{schema:S,table:x,commit_timestamp:w,type:T,errors:M}=_;g=Object.assign(Object.assign({},{schema:S,table:x,commit_timestamp:w,eventType:T,new:{},old:{},errors:M}),this._getPayloadRecords(_))}y.callback(g,i)})}_isClosed(){return this.state===Pr.closed}_isJoined(){return this.state===Pr.joined}_isJoining(){return this.state===Pr.joining}_isLeaving(){return this.state===Pr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,i){const r=e.toLocaleLowerCase(),a={type:r,filter:t,callback:i};return this.bindings[r]?this.bindings[r].push(a):this.bindings[r]=[a],this}_off(e,t){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(r=>{var a;return!(((a=r.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===i&&cg.isEqual(r.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(e[i]!==t[i])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(zl.close,{},e)}_onError(e){this._on(zl.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=JL(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=JL(e.columns,e.old_record)),t}}const _M=()=>{},XS={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},lne=[1e3,2e3,5e3,1e4],cne=1e4,une=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fne{constructor(e,t){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=uO,this.transport=null,this.heartbeatIntervalMs=XS.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=_M,this.ref=0,this.reconnectTimer=null,this.vsn=QL,this.logger=_M,this.conn=null,this.sendBuffer=[],this.serializer=new tne,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=r=>r?(...a)=>r(...a):(...a)=>fetch(...a),!(!((i=t==null?void 0:t.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${fO.websocket}`,this.httpEndpoint=K6(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Xte.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,i){this.logger(e,t,i)}connectionState(){switch(this.conn&&this.conn.readyState){case oh.connecting:return Bd.Connecting;case oh.open:return Bd.Open;case oh.closing:return Bd.Closing;default:return Bd.Closed}}isConnected(){return this.connectionState()===Bd.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const i=`realtime:${e}`,r=this.getChannels().find(a=>a.topic===i);if(r)return r;{const a=new cg(`realtime:${e}`,t,this);return this.channels.push(a),a}}push(e){const{topic:t,event:i,payload:r,ref:a}=e,s=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${t} ${i} (${a})`,r),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Jte,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},XS.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:r,payload:a,ref:s}=t,o=s?`(${s})`:"",l=a.status||"";this.log("receive",`${l} ${i} ${r} ${o}`.trim(),a),this.channels.filter(u=>u._isMember(i)).forEach(u=>u._trigger(r,a,s)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===oh.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===oh.open||this.conn.readyState===oh.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(zl.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const i=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${i}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const i=new Blob([une],{type:"application/javascript"});t=URL.createObjectURL(i)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,i=!1;if(e)t=e,i=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(r){this.log("error","Error fetching access token from callback",r),t=this.accessTokenValue}else t=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const a={access_token:t,version:Zte};t&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(zl.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(t)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new $6(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},XS.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,i,r,a,s,o,l,u,h,p,g,y;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(i=e==null?void 0:e.timeout)!==null&&i!==void 0?i:uO,this.heartbeatIntervalMs=(r=e==null?void 0:e.heartbeatIntervalMs)!==null&&r!==void 0?r:XS.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(s=e==null?void 0:e.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(o=e==null?void 0:e.heartbeatCallback)!==null&&o!==void 0?o:_M,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:QL,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:(_=>lne[_-1]||cne),this.vsn){case Y6:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:((_,S)=>S(JSON.stringify(_))),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:((_,S)=>S(JSON.parse(_)));break;case Qte:this.encode=(g=e==null?void 0:e.encode)!==null&&g!==void 0?g:this.serializer.encode.bind(this.serializer),this.decode=(y=e==null?void 0:e.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var E0=class extends Error{constructor(n,e){var t;super(n),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function hne(n,e,t){const i=new URL(e,n);if(t)for(const[r,a]of Object.entries(t))a!==void 0&&i.searchParams.set(r,a);return i.toString()}async function dne(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function pne(n){const e=n.fetchImpl??globalThis.fetch;return{async request({method:t,path:i,query:r,body:a,headers:s}){const o=hne(n.baseUrl,i,r),l=await dne(n.auth),u=await e(o,{method:t,headers:{...a?{"Content-Type":"application/json"}:{},...l,...s},body:a?JSON.stringify(a):void 0}),h=await u.text(),p=(u.headers.get("content-type")||"").includes("application/json"),g=p&&h?JSON.parse(h):h;if(!u.ok){const y=p?g:void 0,_=y==null?void 0:y.error;throw new E0((_==null?void 0:_.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:_==null?void 0:_.type,icebergCode:_==null?void 0:_.code,details:y})}return{status:u.status,headers:u.headers,data:g}}}}function KS(n){return n.join("")}var mne=class{constructor(n,e=""){this.client=n,this.prefix=e}async listNamespaces(n){const e=n?{parent:KS(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(n,e){const t={namespace:n.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${KS(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${KS(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${KS(n.namespace)}`}),!0}catch(e){if(e instanceof E0&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(n,e){try{return await this.createNamespace(n,e)}catch(t){if(t instanceof E0&&t.status===409)return;throw t}}};function Gm(n){return n.join("")}var gne=class{constructor(n,e="",t){this.client=n,this.prefix=e,this.accessDelegation=t}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Gm(n.namespace)}/tables`})).data.identifiers}async createTable(n,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Gm(n.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(n,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Gm(n.namespace)}/tables/${n.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(n,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Gm(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(n){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Gm(n.namespace)}/tables/${n.name}`,headers:e})).data.metadata}async tableExists(n){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Gm(n.namespace)}/tables/${n.name}`,headers:e}),!0}catch(t){if(t instanceof E0&&t.status===404)return!1;throw t}}async createTableIfNotExists(n,e){try{return await this.createTable(n,e)}catch(t){if(t instanceof E0&&t.status===409)return await this.loadTable({namespace:n.namespace,name:e.name});throw t}}},vne=class{constructor(n){var i;let e="v1";n.catalogName&&(e+=`/${n.catalogName}`);const t=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=pne({baseUrl:t,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(i=n.accessDelegation)==null?void 0:i.join(","),this.namespaceOps=new mne(this.client,e),this.tableOps=new gne(this.client,e,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,e){return this.namespaceOps.createNamespace(n,e)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,e){return this.tableOps.createTable(n,e)}async updateTable(n,e){return this.tableOps.updateTable(n,e)}async dropTable(n,e){await this.tableOps.dropTable(n,e)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,e){return this.namespaceOps.createNamespaceIfNotExists(n,e)}async createTableIfNotExists(n,e){return this.tableOps.createTableIfNotExists(n,e)}},LE=class extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}};function Xi(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var yne=class extends LE{constructor(n,e,t){super(n),this.name="StorageApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},dO=class extends LE{constructor(n,e){super(n),this.name="StorageUnknownError",this.originalError=e}};const s3=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),_ne=()=>Response,pO=n=>{if(Array.isArray(n))return n.map(t=>pO(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,i])=>{const r=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[r]=pO(i)}),e},bne=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Sne=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function w0(n){"@babel/helpers - typeof";return w0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w0(n)}function xne(n,e){if(w0(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(w0(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ene(n){var e=xne(n,"string");return w0(e)=="symbol"?e:e+""}function wne(n,e,t){return(e=Ene(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Kt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?nI(Object(t),!0).forEach(function(i){wne(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):nI(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const bM=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},Tne=async(n,e,t)=>{n instanceof await _ne()&&!(t!=null&&t.noResolveJson)?n.json().then(i=>{const r=n.status||500,a=(i==null?void 0:i.statusCode)||r+"";e(new yne(bM(i),r,a))}).catch(i=>{e(new dO(bM(i),i))}):e(new dO(bM(n),n))},Mne=(n,e,t,i)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!i?r:(bne(i)?(r.headers=Kt({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(i)):r.body=i,e!=null&&e.duplex&&(r.duplex=e.duplex),Kt(Kt({},r),t))};async function c_(n,e,t,i,r,a){return new Promise((s,o)=>{n(t,Mne(e,i,r,a)).then(l=>{if(!l.ok)throw l;return i!=null&&i.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>Tne(l,o,i))})}async function T0(n,e,t,i){return c_(n,"GET",e,t,i)}async function Il(n,e,t,i,r){return c_(n,"POST",e,i,r,t)}async function mO(n,e,t,i,r){return c_(n,"PUT",e,i,r,t)}async function Ane(n,e,t,i){return c_(n,"HEAD",e,Kt(Kt({},t),{},{noResolveJson:!0}),i)}async function o3(n,e,t,i,r){return c_(n,"DELETE",e,i,r,t)}var Cne=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e}then(n,e){return this.execute().then(n,e)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(Xi(e))return{data:null,error:e};throw e}}};let Z6;Z6=Symbol.toStringTag;var Rne=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e,this[Z6]="BlobDownloadBuilder",this.promise=null}asStream(){return new Cne(this.downloadFn,this.shouldThrowOnError)}then(n,e){return this.getPromise().then(n,e)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(Xi(e))return{data:null,error:e};throw e}}};const One={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},iI={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Dne=class{constructor(n,e={},t,i){this.shouldThrowOnError=!1,this.url=n,this.headers=e,this.bucketId=t,this.fetch=s3(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(n,e,t,i){var r=this;try{let a;const s=Kt(Kt({},iI),i);let o=Kt(Kt({},r.headers),n==="POST"&&{"x-upsert":String(s.upsert)});const l=s.metadata;typeof Blob<"u"&&t instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),l&&a.append("metadata",r.encodeMetadata(l)),a.append("",t)):typeof FormData<"u"&&t instanceof FormData?(a=t,a.has("cacheControl")||a.append("cacheControl",s.cacheControl),l&&!a.has("metadata")&&a.append("metadata",r.encodeMetadata(l))):(a=t,o["cache-control"]=`max-age=${s.cacheControl}`,o["content-type"]=s.contentType,l&&(o["x-metadata"]=r.toBase64(r.encodeMetadata(l))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!s.duplex&&(s.duplex="half")),i!=null&&i.headers&&(o=Kt(Kt({},o),i.headers));const u=r._removeEmptyFolders(e),h=r._getFinalPath(u),p=await(n=="PUT"?mO:Il)(r.fetch,`${r.url}/object/${h}`,a,Kt({headers:o},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{data:{path:u,id:p.Id,fullPath:p.Key},error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(Xi(a))return{data:null,error:a};throw a}}async upload(n,e,t){return this.uploadOrUpdate("POST",n,e,t)}async uploadToSignedUrl(n,e,t,i){var r=this;const a=r._removeEmptyFolders(n),s=r._getFinalPath(a),o=new URL(r.url+`/object/upload/sign/${s}`);o.searchParams.set("token",e);try{let l;const u=Kt({upsert:iI.upsert},i),h=Kt(Kt({},r.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&t instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",t)):typeof FormData<"u"&&t instanceof FormData?(l=t,l.append("cacheControl",u.cacheControl)):(l=t,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType),{data:{path:a,fullPath:(await mO(r.fetch,o.toString(),l,{headers:h})).Key},error:null}}catch(l){if(r.shouldThrowOnError)throw l;if(Xi(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(n,e){var t=this;try{let i=t._getFinalPath(n);const r=Kt({},t.headers);e!=null&&e.upsert&&(r["x-upsert"]="true");const a=await Il(t.fetch,`${t.url}/object/upload/sign/${i}`,{},{headers:r}),s=new URL(t.url+a.url),o=s.searchParams.get("token");if(!o)throw new LE("No token returned by API");return{data:{signedUrl:s.toString(),path:n,token:o},error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(Xi(i))return{data:null,error:i};throw i}}async update(n,e,t){return this.uploadOrUpdate("PUT",n,e,t)}async move(n,e,t){var i=this;try{return{data:await Il(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:n,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:i.headers}),error:null}}catch(r){if(i.shouldThrowOnError)throw r;if(Xi(r))return{data:null,error:r};throw r}}async copy(n,e,t){var i=this;try{return{data:{path:(await Il(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:n,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:i.headers})).Key},error:null}}catch(r){if(i.shouldThrowOnError)throw r;if(Xi(r))return{data:null,error:r};throw r}}async createSignedUrl(n,e,t){var i=this;try{let r=i._getFinalPath(n),a=await Il(i.fetch,`${i.url}/object/sign/${r}`,Kt({expiresIn:e},t!=null&&t.transform?{transform:t.transform}:{}),{headers:i.headers});const s=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return a={signedUrl:encodeURI(`${i.url}${a.signedURL}${s}`)},{data:a,error:null}}catch(r){if(i.shouldThrowOnError)throw r;if(Xi(r))return{data:null,error:r};throw r}}async createSignedUrls(n,e,t){var i=this;try{const r=await Il(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:e,paths:n},{headers:i.headers}),a=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return{data:r.map(s=>Kt(Kt({},s),{},{signedUrl:s.signedURL?encodeURI(`${i.url}${s.signedURL}${a}`):null})),error:null}}catch(r){if(i.shouldThrowOnError)throw r;if(Xi(r))return{data:null,error:r};throw r}}download(n,e){const t=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),r=i?`?${i}`:"",a=this._getFinalPath(n),s=()=>T0(this.fetch,`${this.url}/${t}/${a}${r}`,{headers:this.headers,noResolveJson:!0});return new Rne(s,this.shouldThrowOnError)}async info(n){var e=this;const t=e._getFinalPath(n);try{return{data:pO(await T0(e.fetch,`${e.url}/object/info/${t}`,{headers:e.headers})),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Xi(i))return{data:null,error:i};throw i}}async exists(n){var e=this;const t=e._getFinalPath(n);try{return await Ane(e.fetch,`${e.url}/object/${t}`,{headers:e.headers}),{data:!0,error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Xi(i)&&i instanceof dO){const r=i.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:i}}throw i}}getPublicUrl(n,e){const t=this._getFinalPath(n),i=[],r=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";r!==""&&i.push(r);const a=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",s=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});s!==""&&i.push(s);let o=i.join("&");return o!==""&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${t}${o}`)}}}async remove(n){var e=this;try{return{data:await o3(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:n},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Xi(t))return{data:null,error:t};throw t}}async list(n,e,t){var i=this;try{const r=Kt(Kt(Kt({},One),e),{},{prefix:n||""});return{data:await Il(i.fetch,`${i.url}/object/list/${i.bucketId}`,r,{headers:i.headers},t),error:null}}catch(r){if(i.shouldThrowOnError)throw r;if(Xi(r))return{data:null,error:r};throw r}}async listV2(n,e){var t=this;try{const i=Kt({},n);return{data:await Il(t.fetch,`${t.url}/object/list-v2/${t.bucketId}`,i,{headers:t.headers},e),error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(Xi(i))return{data:null,error:i};throw i}}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const e=[];return n.width&&e.push(`width=${n.width}`),n.height&&e.push(`height=${n.height}`),n.resize&&e.push(`resize=${n.resize}`),n.format&&e.push(`format=${n.format}`),n.quality&&e.push(`quality=${n.quality}`),e.join("&")}};const Q6="2.88.0",J6={"X-Client-Info":`storage-js/${Q6}`};var Une=class{constructor(n,e={},t,i){this.shouldThrowOnError=!1;const r=new URL(n);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase.")),this.url=r.href.replace(/\/$/,""),this.headers=Kt(Kt({},J6),e),this.fetch=s3(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(n){var e=this;try{const t=e.listBucketOptionsToQueryString(n);return{data:await T0(e.fetch,`${e.url}/bucket${t}`,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Xi(t))return{data:null,error:t};throw t}}async getBucket(n){var e=this;try{return{data:await T0(e.fetch,`${e.url}/bucket/${n}`,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Xi(t))return{data:null,error:t};throw t}}async createBucket(n,e={public:!1}){var t=this;try{return{data:await Il(t.fetch,`${t.url}/bucket`,{id:n,name:n,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}),error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(Xi(i))return{data:null,error:i};throw i}}async updateBucket(n,e){var t=this;try{return{data:await mO(t.fetch,`${t.url}/bucket/${n}`,{id:n,name:n,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}),error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(Xi(i))return{data:null,error:i};throw i}}async emptyBucket(n){var e=this;try{return{data:await Il(e.fetch,`${e.url}/bucket/${n}/empty`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Xi(t))return{data:null,error:t};throw t}}async deleteBucket(n){var e=this;try{return{data:await o3(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Xi(t))return{data:null,error:t};throw t}}listBucketOptionsToQueryString(n){const e={};return n&&("limit"in n&&(e.limit=String(n.limit)),"offset"in n&&(e.offset=String(n.offset)),n.search&&(e.search=n.search),n.sortColumn&&(e.sortColumn=n.sortColumn),n.sortOrder&&(e.sortOrder=n.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},Nne=class{constructor(n,e={},t){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Kt(Kt({},J6),e),this.fetch=s3(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var e=this;try{return{data:await Il(e.fetch,`${e.url}/bucket`,{name:n},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Xi(t))return{data:null,error:t};throw t}}async listBuckets(n){var e=this;try{const t=new URLSearchParams;(n==null?void 0:n.limit)!==void 0&&t.set("limit",n.limit.toString()),(n==null?void 0:n.offset)!==void 0&&t.set("offset",n.offset.toString()),n!=null&&n.sortColumn&&t.set("sortColumn",n.sortColumn),n!=null&&n.sortOrder&&t.set("sortOrder",n.sortOrder),n!=null&&n.search&&t.set("search",n.search);const i=t.toString(),r=i?`${e.url}/bucket?${i}`:`${e.url}/bucket`;return{data:await T0(e.fetch,r,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Xi(t))return{data:null,error:t};throw t}}async deleteBucket(n){var e=this;try{return{data:await o3(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Xi(t))return{data:null,error:t};throw t}}from(n){var e=this;if(!Sne(n))throw new LE("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new vne({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(t,{get(r,a){const s=r[a];return typeof s!="function"?s:async(...o)=>{try{return{data:await s.apply(r,o),error:null}}catch(l){if(i)throw l;return{data:null,error:l}}}}})}};const l3={"X-Client-Info":`storage-js/${Q6}`,"Content-Type":"application/json"};var eV=class extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function fo(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}var SM=class extends eV{constructor(n,e,t){super(n),this.name="StorageVectorsApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Pne=class extends eV{constructor(n,e){super(n),this.name="StorageVectorsUnknownError",this.originalError=e}};const c3=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),Lne=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},rI=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Ine=async(n,e,t)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(t!=null&&t.noResolveJson)){const i=n.status||500,r=n;if(typeof r.json=="function")r.json().then(a=>{const s=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||i+"";e(new SM(rI(a),i,s))}).catch(()=>{const a=i+"";e(new SM(r.statusText||`HTTP ${i} error`,i,a))});else{const a=i+"";e(new SM(r.statusText||`HTTP ${i} error`,i,a))}}else e(new Pne(rI(n),n))},Bne=(n,e,t,i)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return i?(Lne(i)?(r.headers=Kt({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(i)):r.body=i,Kt(Kt({},r),t)):r};async function zne(n,e,t,i,r,a){return new Promise((s,o)=>{n(t,Bne(e,i,r,a)).then(l=>{if(!l.ok)throw l;if(i!=null&&i.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>s(l)).catch(l=>Ine(l,o,i))})}async function ho(n,e,t,i,r){return zne(n,"POST",e,i,r,t)}var kne=class{constructor(n,e={},t){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Kt(Kt({},l3),e),this.fetch=c3(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(n){var e=this;try{return{data:await ho(e.fetch,`${e.url}/CreateIndex`,n,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(fo(t))return{data:null,error:t};throw t}}async getIndex(n,e){var t=this;try{return{data:await ho(t.fetch,`${t.url}/GetIndex`,{vectorBucketName:n,indexName:e},{headers:t.headers}),error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(fo(i))return{data:null,error:i};throw i}}async listIndexes(n){var e=this;try{return{data:await ho(e.fetch,`${e.url}/ListIndexes`,n,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(fo(t))return{data:null,error:t};throw t}}async deleteIndex(n,e){var t=this;try{return{data:await ho(t.fetch,`${t.url}/DeleteIndex`,{vectorBucketName:n,indexName:e},{headers:t.headers})||{},error:null}}catch(i){if(t.shouldThrowOnError)throw i;if(fo(i))return{data:null,error:i};throw i}}},Fne=class{constructor(n,e={},t){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Kt(Kt({},l3),e),this.fetch=c3(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(n){var e=this;try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await ho(e.fetch,`${e.url}/PutVectors`,n,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(fo(t))return{data:null,error:t};throw t}}async getVectors(n){var e=this;try{return{data:await ho(e.fetch,`${e.url}/GetVectors`,n,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(fo(t))return{data:null,error:t};throw t}}async listVectors(n){var e=this;try{if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return{data:await ho(e.fetch,`${e.url}/ListVectors`,n,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(fo(t))return{data:null,error:t};throw t}}async queryVectors(n){var e=this;try{return{data:await ho(e.fetch,`${e.url}/QueryVectors`,n,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(fo(t))return{data:null,error:t};throw t}}async deleteVectors(n){var e=this;try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await ho(e.fetch,`${e.url}/DeleteVectors`,n,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(fo(t))return{data:null,error:t};throw t}}},Hne=class{constructor(n,e={},t){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Kt(Kt({},l3),e),this.fetch=c3(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var e=this;try{return{data:await ho(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(fo(t))return{data:null,error:t};throw t}}async getBucket(n){var e=this;try{return{data:await ho(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:n},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(fo(t))return{data:null,error:t};throw t}}async listBuckets(n={}){var e=this;try{return{data:await ho(e.fetch,`${e.url}/ListVectorBuckets`,n,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(fo(t))return{data:null,error:t};throw t}}async deleteBucket(n){var e=this;try{return{data:await ho(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(fo(t))return{data:null,error:t};throw t}}},Vne=class extends Hne{constructor(n,e={}){super(n,e.headers||{},e.fetch)}from(n){return new Gne(this.url,this.headers,n,this.fetch)}async createBucket(n){var e=()=>super.createBucket,t=this;return e().call(t,n)}async getBucket(n){var e=()=>super.getBucket,t=this;return e().call(t,n)}async listBuckets(n={}){var e=()=>super.listBuckets,t=this;return e().call(t,n)}async deleteBucket(n){var e=()=>super.deleteBucket,t=this;return e().call(t,n)}},Gne=class extends kne{constructor(n,e,t,i){super(n,e,i),this.vectorBucketName=t}async createIndex(n){var e=()=>super.createIndex,t=this;return e().call(t,Kt(Kt({},n),{},{vectorBucketName:t.vectorBucketName}))}async listIndexes(n={}){var e=()=>super.listIndexes,t=this;return e().call(t,Kt(Kt({},n),{},{vectorBucketName:t.vectorBucketName}))}async getIndex(n){var e=()=>super.getIndex,t=this;return e().call(t,t.vectorBucketName,n)}async deleteIndex(n){var e=()=>super.deleteIndex,t=this;return e().call(t,t.vectorBucketName,n)}index(n){return new jne(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},jne=class extends Fne{constructor(n,e,t,i,r){super(n,e,r),this.vectorBucketName=t,this.indexName=i}async putVectors(n){var e=()=>super.putVectors,t=this;return e().call(t,Kt(Kt({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(n){var e=()=>super.getVectors,t=this;return e().call(t,Kt(Kt({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(n={}){var e=()=>super.listVectors,t=this;return e().call(t,Kt(Kt({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(n){var e=()=>super.queryVectors,t=this;return e().call(t,Kt(Kt({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(n){var e=()=>super.deleteVectors,t=this;return e().call(t,Kt(Kt({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},qne=class extends Une{constructor(n,e={},t,i){super(n,e,t,i)}from(n){return new Dne(this.url,this.headers,n,this.fetch)}get vectors(){return new Vne(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Nne(this.url+"/iceberg",this.headers,this.fetch)}};const tV="2.88.0",Jm=30*1e3,gO=3,xM=gO*Jm,Wne="http://localhost:9999",Yne="supabase.auth.token",$ne={"X-Client-Info":`gotrue-js/${tV}`},vO="X-Supabase-Api-Version",nV={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Xne=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Kne=600*1e3;class M0 extends Error{constructor(e,t,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=i}}function Bt(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class Zne extends M0{constructor(e,t,i){super(e,t,i),this.name="AuthApiError",this.status=t,this.code=i}}function Qne(n){return Bt(n)&&n.name==="AuthApiError"}class zd extends M0{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class cf extends M0{constructor(e,t,i,r){super(e,i,r),this.name=t,this.status=i}}class co extends cf{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Jne(n){return Bt(n)&&n.name==="AuthSessionMissingError"}class jm extends cf{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ZS extends cf{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class QS extends cf{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function eie(n){return Bt(n)&&n.name==="AuthImplicitGrantRedirectError"}class aI extends cf{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class tie extends cf{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class yO extends cf{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function EM(n){return Bt(n)&&n.name==="AuthRetryableFetchError"}class sI extends cf{constructor(e,t,i){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=i}}class _O extends cf{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const w1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),oI=` 	
\r=`.split(""),nie=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<oI.length;e+=1)n[oI[e].charCodeAt(0)]=-2;for(let e=0;e<w1.length;e+=1)n[w1[e].charCodeAt(0)]=e;return n})();function lI(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(w1[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(w1[i]),e.queuedBits-=6}}function iV(n,e,t){const i=nie[n];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function cI(n){const e=[],t=s=>{e.push(String.fromCodePoint(s))},i={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},a=s=>{aie(s,i,t)};for(let s=0;s<n.length;s+=1)iV(n.charCodeAt(s),r,a);return e.join("")}function iie(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function rie(n,e){for(let t=0;t<n.length;t+=1){let i=n.charCodeAt(t);if(i>55295&&i<=56319){const r=(i-55296)*1024&65535;i=(n.charCodeAt(t+1)-56320&65535|r)+65536,t+=1}iie(i,e)}}function aie(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let i=1;i<6;i+=1)if((n>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function hg(n){const e=[],t={queue:0,queuedBits:0},i=r=>{e.push(r)};for(let r=0;r<n.length;r+=1)iV(n.charCodeAt(r),t,i);return new Uint8Array(e)}function sie(n){const e=[];return rie(n,t=>e.push(t)),new Uint8Array(e)}function jd(n){const e=[],t={queue:0,queuedBits:0},i=r=>{e.push(r)};return n.forEach(r=>lI(r,t,i)),lI(null,t,i),e.join("")}function oie(n){return Math.round(Date.now()/1e3)+n}function lie(){return Symbol("auth-callback")}const ga=()=>typeof window<"u"&&typeof document<"u",Rd={tested:!1,writable:!1},rV=()=>{if(!ga())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Rd.tested)return Rd.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Rd.tested=!0,Rd.writable=!0}catch{Rd.tested=!0,Rd.writable=!1}return Rd.writable};function cie(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,a)=>{e[a]=r})}catch{}return t.searchParams.forEach((i,r)=>{e[r]=i}),e}const aV=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),uie=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",eg=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Od=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},pa=async(n,e)=>{await n.removeItem(e)};class IE{constructor(){this.promise=new IE.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}IE.promiseConstructor=Promise;function wM(n){const e=n.split(".");if(e.length!==3)throw new _O("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!Xne.test(e[i]))throw new _O("JWT not in base64url format");return{header:JSON.parse(cI(e[0])),payload:JSON.parse(cI(e[1])),signature:hg(e[2]),raw:{header:e[0],payload:e[1]}}}async function fie(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function hie(n,e){return new Promise((i,r)=>{(async()=>{for(let a=0;a<1/0;a++)try{const s=await n(a);if(!e(a,null,s)){i(s);return}}catch(s){if(!e(a,s)){r(s);return}}})()})}function die(n){return("0"+n.toString(16)).substr(-2)}function pie(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=t.length;let r="";for(let a=0;a<56;a++)r+=t.charAt(Math.floor(Math.random()*i));return r}return crypto.getRandomValues(e),Array.from(e,die).join("")}async function mie(n){const t=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(i);return Array.from(r).map(a=>String.fromCharCode(a)).join("")}async function gie(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await mie(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function qm(n,e,t=!1){const i=pie();let r=i;t&&(r+="/PASSWORD_RECOVERY"),await eg(n,`${e}-code-verifier`,r);const a=await gie(i);return[a,i===a?"plain":"s256"]}const vie=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function yie(n){const e=n.headers.get(vO);if(!e||!e.match(vie))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function _ie(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function bie(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Sie=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Wm(n){if(!Sie.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function TM(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const i=t.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function xie(n,e){return new Proxy(n,{get:(t,i,r)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const a=i.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,i,r)}return!e.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,i,r)}})}function uI(n){return JSON.parse(JSON.stringify(n))}const Pd=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Eie=[502,503,504];async function fI(n){var e;if(!uie(n))throw new yO(Pd(n),0);if(Eie.includes(n.status))throw new yO(Pd(n),n.status);let t;try{t=await n.json()}catch(a){throw new zd(Pd(a),a)}let i;const r=yie(n);if(r&&r.getTime()>=nV["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?i=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(i=t.error_code),i){if(i==="weak_password")throw new sI(Pd(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new co}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0))throw new sI(Pd(t),n.status,t.weak_password.reasons);throw new Zne(Pd(t),n.status||500,i)}const wie=(n,e,t,i)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),t))};async function Xt(n,e,t,i){var r;const a=Object.assign({},i==null?void 0:i.headers);a[vO]||(a[vO]=nV["2024-01-01"].name),i!=null&&i.jwt&&(a.Authorization=`Bearer ${i.jwt}`);const s=(r=i==null?void 0:i.query)!==null&&r!==void 0?r:{};i!=null&&i.redirectTo&&(s.redirect_to=i.redirectTo);const o=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=await Tie(n,e,t+o,{headers:a,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(l):{data:Object.assign({},l),error:null}}async function Tie(n,e,t,i,r,a){const s=wie(e,i,r,a);let o;try{o=await n(t,Object.assign({},s))}catch(l){throw console.error(l),new yO(Pd(l),0)}if(o.ok||await fI(o),i!=null&&i.noResolveJson)return o;try{return await o.json()}catch(l){await fI(l)}}function Pl(n){var e;let t=null;Cie(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=oie(n.expires_in)));const i=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:i},error:null}}function hI(n){const e=Pl(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,i)=>t&&typeof i=="string",!0)&&(e.data.weak_password=n.weak_password),e}function uh(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Mie(n){return{data:n,error:null}}function Aie(n){const{action_link:e,email_otp:t,hashed_token:i,redirect_to:r,verification_type:a}=n,s=PE(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:i,redirect_to:r,verification_type:a},l=Object.assign({},s);return{data:{properties:o,user:l},error:null}}function dI(n){return n}function Cie(n){return n.access_token&&n.refresh_token&&n.expires_in}const MM=["global","local","others"];class Rie{constructor({url:e="",headers:t={},fetch:i}){this.url=e,this.headers=t,this.fetch=aV(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=MM[0]){if(MM.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${MM.join(", ")}`);try{return await Xt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Bt(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,t={}){try{return await Xt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:uh})}catch(i){if(Bt(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:t}=e,i=PE(e,["options"]),r=Object.assign(Object.assign({},i),t);return"newEmail"in i&&(r.new_email=i==null?void 0:i.newEmail,delete r.newEmail),await Xt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Aie,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Bt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Xt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:uh})}catch(t){if(Bt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,i,r,a,s,o,l;try{const u={nextPage:null,lastPage:0,total:0},h=await Xt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(a=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:""},xform:dI});if(h.error)throw h.error;const p=await h.json(),g=(s=h.headers.get("x-total-count"))!==null&&s!==void 0?s:0,y=(l=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return y.length>0&&(y.forEach(_=>{const S=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(_.split(";")[1].split("=")[1]);u[`${x}Page`]=S}),u.total=parseInt(g)),{data:Object.assign(Object.assign({},p),u),error:null}}catch(u){if(Bt(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Wm(e);try{return await Xt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:uh})}catch(t){if(Bt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Wm(e);try{return await Xt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:uh})}catch(i){if(Bt(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,t=!1){Wm(e);try{return await Xt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:uh})}catch(i){if(Bt(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){Wm(e.userId);try{const{data:t,error:i}=await Xt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:i}}catch(t){if(Bt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Wm(e.userId),Wm(e.id);try{return{data:await Xt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Bt(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,i,r,a,s,o,l;try{const u={nextPage:null,lastPage:0,total:0},h=await Xt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(a=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:""},xform:dI});if(h.error)throw h.error;const p=await h.json(),g=(s=h.headers.get("x-total-count"))!==null&&s!==void 0?s:0,y=(l=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return y.length>0&&(y.forEach(_=>{const S=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(_.split(";")[1].split("=")[1]);u[`${x}Page`]=S}),u.total=parseInt(g)),{data:Object.assign(Object.assign({},p),u),error:null}}catch(u){if(Bt(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await Xt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Bt(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Xt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Bt(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Xt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Bt(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(e){try{return await Xt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(Bt(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Xt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Bt(t))return{data:null,error:t};throw t}}}function pI(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const Ym={debug:!!(globalThis&&rV()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class sV extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Oie extends sV{}async function Die(n,e,t){Ym.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),Ym.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async r=>{if(r){Ym.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,r.name);try{return await t()}finally{Ym.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,r.name)}}else{if(e===0)throw Ym.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Oie(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Ym.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function Uie(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function oV(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function Nie(n){return parseInt(n,16)}function Pie(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function Lie(n){var e;const{chainId:t,domain:i,expirationTime:r,issuedAt:a=new Date,nonce:s,notBefore:o,requestId:l,resources:u,scheme:h,uri:p,version:g}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(g!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${g}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const y=oV(n.address),_=h?`${h}://${i}`:i,S=n.statement?`${n.statement}
`:"",x=`${_} wants you to sign in with your Ethereum account:
${y}

${S}`;let w=`URI: ${p}
Version: ${g}
Chain ID: ${t}${s?`
Nonce: ${s}`:""}
Issued At: ${a.toISOString()}`;if(r&&(w+=`
Expiration Time: ${r.toISOString()}`),o&&(w+=`
Not Before: ${o.toISOString()}`),l&&(w+=`
Request ID: ${l}`),u){let T=`
Resources:`;for(const M of u){if(!M||typeof M!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${M}`);T+=`
- ${M}`}w+=T}return`${x}
${w}`}class Mr extends Error{constructor({message:e,code:t,cause:i,name:r}){var a;super(e,{cause:i}),this.__isWebAuthnError=!0,this.name=(a=r??(i instanceof Error?i.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=t}}class T1 extends Mr{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function Iie({error:n,options:e}){var t,i,r;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Mr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=a.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Mr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Mr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Mr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Mr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Mr({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return a.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new Mr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Mr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const s=window.location.hostname;if(lV(s)){if(a.rp.id!==s)return new Mr({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Mr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Mr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Mr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Mr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function Bie({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Mr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Mr({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const i=window.location.hostname;if(lV(i)){if(t.rpId!==i)return new Mr({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Mr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Mr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Mr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class zie{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const kie=new zie;function Fie(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:i}=n,r=PE(n,["challenge","user","excludeCredentials"]),a=hg(e).buffer,s=Object.assign(Object.assign({},t),{id:hg(t.id).buffer}),o=Object.assign(Object.assign({},r),{challenge:a,user:s});if(i&&i.length>0){o.excludeCredentials=new Array(i.length);for(let l=0;l<i.length;l++){const u=i[l];o.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:hg(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function Hie(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,i=PE(n,["challenge","allowCredentials"]),r=hg(e).buffer,a=Object.assign(Object.assign({},i),{challenge:r});if(t&&t.length>0){a.allowCredentials=new Array(t.length);for(let s=0;s<t.length;s++){const o=t[s];a.allowCredentials[s]=Object.assign(Object.assign({},o),{id:hg(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return a}function Vie(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:jd(new Uint8Array(n.response.attestationObject)),clientDataJSON:jd(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Gie(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,i=n.getClientExtensionResults(),r=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:jd(new Uint8Array(r.authenticatorData)),clientDataJSON:jd(new Uint8Array(r.clientDataJSON)),signature:jd(new Uint8Array(r.signature)),userHandle:r.userHandle?jd(new Uint8Array(r.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function lV(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function mI(){var n,e;return!!(ga()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function jie(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new T1("Browser returned unexpected credential type",e)}:{data:null,error:new T1("Empty credential response",e)}}catch(e){return{data:null,error:Iie({error:e,options:n})}}}async function qie(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new T1("Browser returned unexpected credential type",e)}:{data:null,error:new T1("Empty credential response",e)}}catch(e){return{data:null,error:Bie({error:e,options:n})}}}const Wie={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Yie={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function M1(...n){const e=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),t=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),i={};for(const r of n)if(r)for(const a in r){const s=r[a];if(s!==void 0)if(Array.isArray(s))i[a]=s;else if(t(s))i[a]=s;else if(e(s)){const o=i[a];e(o)?i[a]=M1(o,s):i[a]=M1(s)}else i[a]=s}return i}function $ie(n,e){return M1(Wie,n,e||{})}function Xie(n,e){return M1(Yie,n,e||{})}class Kie{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:i,signal:r},a){try{const{data:s,error:o}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!s)return{data:null,error:o};const l=r??kie.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:u}=s.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${i}`),u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{const u=$ie(s.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:h,error:p}=await jie({publicKey:u,signal:l});return h?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}case"request":{const u=Xie(s.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:h,error:p}=await qie(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:l}));return h?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}}}catch(s){return Bt(s)?{data:null,error:s}:{data:null,error:new zd("Unexpected error in challenge",s)}}}async _verify({challengeId:e,factorId:t,webauthn:i}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:i})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},a){if(!t)return{data:null,error:new M0("rpId is required for WebAuthn authentication")};try{if(!mI())return{data:null,error:new zd("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:i},signal:r},{request:a});if(!s)return{data:null,error:o};const{webauthn:l}=s;return this._verify({factorId:e,challengeId:s.challengeId,webauthn:{type:l.type,rpId:t,rpOrigins:i,credential_response:l.credential_response}})}catch(s){return Bt(s)?{data:null,error:s}:{data:null,error:new zd("Unexpected error in authenticate",s)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},a){if(!t)return{data:null,error:new M0("rpId is required for WebAuthn registration")};try{if(!mI())return{data:null,error:new zd("Browser does not support WebAuthn",null)};const{data:s,error:o}=await this._enroll({friendlyName:e});if(!s)return await this.client.mfa.listFactors().then(h=>{var p;return(p=h.data)===null||p===void 0?void 0:p.all.find(g=>g.factor_type==="webauthn"&&g.friendly_name===e&&g.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:o};const{data:l,error:u}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:t,rpOrigins:i},signal:r},{create:a});return l?this._verify({factorId:s.id,challengeId:l.challengeId,webauthn:{rpId:t,rpOrigins:i,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(s){return Bt(s)?{data:null,error:s}:{data:null,error:new zd("Unexpected error in register",s)}}}}Uie();const Zie={url:Wne,storageKey:Yne,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:$ne,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function gI(n,e,t){return await t()}const $m={};class A0{get jwks(){var e,t;return(t=(e=$m[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){$m[this.storageKey]=Object.assign(Object.assign({},$m[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=$m[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){$m[this.storageKey]=Object.assign(Object.assign({},$m[this.storageKey]),{cachedAt:e})}constructor(e){var t,i,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},Zie),e);if(this.storageKey=a.storageKey,this.instanceID=(t=A0.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,A0.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&ga()){const s=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(s),this.logDebugMessages&&console.trace(s)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Rie({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=aV(a.fetch),this.lock=a.lock||gI,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:this.persistSession&&ga()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=Die:this.lock=gI,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Kie(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:rV()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=pI(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=pI(this.memoryStorage)),ga()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${tV}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},i="none";if(ga()&&(t=cie(window.location.href),this._isImplicitGrantCallback(t)?i="implicit":await this._isPKCECallback(t)&&(i="pkce")),ga()&&this.detectSessionInUrl&&i!=="none"){const{data:r,error:a}=await this._getSessionFromURL(t,i);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),eie(a)){const l=(e=a.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:s,redirectType:o}=r;return this._debug("#_initialize()","detected session in URL",s,"redirect type",o),await this._saveSession(s),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Bt(t)?this._returnResult({error:t}):this._returnResult({error:new zd("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,i,r;try{const a=await Xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:Pl}),{data:s,error:o}=a;if(o||!s)return this._returnResult({data:{user:null,session:null},error:o});const l=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(a){if(Bt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var t,i,r;try{let a;if("email"in e){const{email:h,password:p,options:g}=e;let y=null,_=null;this.flowType==="pkce"&&([y,_]=await qm(this.storage,this.storageKey)),a=await Xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:h,password:p,data:(t=g==null?void 0:g.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:y,code_challenge_method:_},xform:Pl})}else if("phone"in e){const{phone:h,password:p,options:g}=e;a=await Xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(i=g==null?void 0:g.data)!==null&&i!==void 0?i:{},channel:(r=g==null?void 0:g.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Pl})}else throw new ZS("You must provide either an email or phone number and a password");const{data:s,error:o}=a;if(o||!s)return await pa(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const l=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(a){if(await pa(this.storage,`${this.storageKey}-code-verifier`),Bt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:s,options:o}=e;t=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:hI})}else if("phone"in e){const{phone:a,password:s,options:o}=e;t=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:hI})}else throw new ZS("You must provide either an email or phone number and a password");const{data:i,error:r}=t;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!i||!i.session||!i.user){const a=new jm;return this._returnResult({data:{user:null,session:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:r})}catch(t){if(Bt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,i,r,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,i,r,a,s,o,l,u,h,p,g;let y,_;if("message"in e)y=e.message,_=e.signature;else{const{chain:S,wallet:x,statement:w,options:T}=e;let M;if(ga())if(typeof x=="object")M=x;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")M=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(T!=null&&T.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=x}const C=new URL((t=T==null?void 0:T.url)!==null&&t!==void 0?t:window.location.href),N=await M.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const D=oV(N[0]);let P=(i=T==null?void 0:T.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!P){const I=await M.request({method:"eth_chainId"});P=Nie(I)}const z={domain:C.host,address:D,statement:w,uri:C.href,version:"1",chainId:P,nonce:(r=T==null?void 0:T.signInWithEthereum)===null||r===void 0?void 0:r.nonce,issuedAt:(s=(a=T==null?void 0:T.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(o=T==null?void 0:T.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(l=T==null?void 0:T.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=T==null?void 0:T.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(h=T==null?void 0:T.signInWithEthereum)===null||h===void 0?void 0:h.resources};y=Lie(z),_=await M.request({method:"personal_sign",params:[Pie(y),D]})}try{const{data:S,error:x}=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:_},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Pl});if(x)throw x;if(!S||!S.session||!S.user){const w=new jm;return this._returnResult({data:{user:null,session:null},error:w})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:x})}catch(S){if(Bt(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async signInWithSolana(e){var t,i,r,a,s,o,l,u,h,p,g,y;let _,S;if("message"in e)_=e.message,S=e.signature;else{const{chain:x,wallet:w,statement:T,options:M}=e;let C;if(ga())if(typeof w=="object")C=w;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))C=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(M!=null&&M.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=w}const N=new URL((t=M==null?void 0:M.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in C&&C.signIn){const D=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},M==null?void 0:M.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),T?{statement:T}:null));let P;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")P=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)P=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)_=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),S=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${N.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...T?["",T,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(r=(i=M==null?void 0:M.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((a=M==null?void 0:M.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${M.signInWithSolana.notBefore}`]:[],...!((s=M==null?void 0:M.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${M.signInWithSolana.expirationTime}`]:[],...!((o=M==null?void 0:M.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${M.signInWithSolana.chainId}`]:[],...!((l=M==null?void 0:M.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${M.signInWithSolana.nonce}`]:[],...!((u=M==null?void 0:M.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${M.signInWithSolana.requestId}`]:[],...!((p=(h=M==null?void 0:M.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||p===void 0)&&p.length?["Resources",...M.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const D=await C.signMessage(new TextEncoder().encode(_),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=D}}try{const{data:x,error:w}=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:jd(S)},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Pl});if(w)throw w;if(!x||!x.session||!x.user){const T=new jm;return this._returnResult({data:{user:null,session:null},error:T})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:w})}catch(x){if(Bt(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(e){const t=await Od(this.storage,`${this.storageKey}-code-verifier`),[i,r]=(t??"").split("/");try{if(!i&&this.flowType==="pkce")throw new tie;const{data:a,error:s}=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:Pl});if(await pa(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!a||!a.session||!a.user){const o=new jm;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:r??null}),error:s})}catch(a){if(await pa(this.storage,`${this.storageKey}-code-verifier`),Bt(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:t,provider:i,token:r,access_token:a,nonce:s}=e,o=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:r,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Pl}),{data:l,error:u}=o;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const h=new jm;return this._returnResult({data:{user:null,session:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(t){if(Bt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,i,r,a,s;try{if("email"in e){const{email:o,options:l}=e;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await qm(this.storage,this.storageKey));const{error:p}=await Xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in e){const{phone:o,options:l}=e,{data:u,error:h}=await Xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(a=l==null?void 0:l.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(s=l==null?void 0:l.channel)!==null&&s!==void 0?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h})}throw new ZS("You must provide either an email or phone number.")}catch(o){if(await pa(this.storage,`${this.storageKey}-code-verifier`),Bt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(e){var t,i;try{let r,a;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:s,error:o}=await Xt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:r,xform:Pl});if(o)throw o;if(!s)throw new Error("An error occurred on token verification.");const l=s.session,u=s.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(r){if(Bt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(e){var t,i,r,a,s;try{let o=null,l=null;this.flowType==="pkce"&&([o,l]=await qm(this.storage,this.storageKey));const u=await Xt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&i!==void 0?i:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:Mie});return!((a=u.data)===null||a===void 0)&&a.url&&ga()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(o){if(await pa(this.storage,`${this.storageKey}-code-verifier`),Bt(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:i}=e;if(i)throw i;if(!t)throw new co;const{error:r}=await Xt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(e){if(Bt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:i,type:r,options:a}=e,{error:s}=await Xt(this.fetch,"POST",t,{headers:this.headers,body:{email:i,type:r,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}else if("phone"in e){const{phone:i,type:r,options:a}=e,{data:s,error:o}=await Xt(this.fetch,"POST",t,{headers:this.headers,body:{phone:i,type:r,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:o})}throw new ZS("You must provide either an email or phone number and a type")}catch(t){if(Bt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await i,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=t();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Od(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<xM:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const s=await Od(this.userStorage,this.storageKey+"-user");s!=null&&s.user?e.user=s.user:e.user=TM()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};e.user=xie(e.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(-1,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await Xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:uh}):await this._useSession(async t=>{var i,r,a;const{data:s,error:o}=t;if(o)throw o;return!(!((i=s.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new co}:await Xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0,xform:uh})})}catch(t){if(Bt(t))return Jne(t)&&(await this._removeSession(),await pa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async i=>{const{data:r,error:a}=i;if(a)throw a;if(!r.session)throw new co;const s=r.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await qm(this.storage,this.storageKey));const{data:u,error:h}=await Xt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:s.access_token,xform:uh});if(h)throw h;return s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(i){if(await pa(this.storage,`${this.storageKey}-code-verifier`),Bt(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new co;const t=Date.now()/1e3;let i=t,r=!0,a=null;const{payload:s}=wM(e.access_token);if(s.exp&&(i=s.exp,r=i<=t),r){const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;a={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:i-t,expires_at:i},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(t){if(Bt(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var i;if(!e){const{data:s,error:o}=t;if(o)throw o;e=(i=s.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new co;const{data:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(Bt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!ga())throw new QS("No browser detected.");if(e.error||e.error_description||e.error_code)throw new QS(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new aI("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new QS("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new aI("No code detected.");const{data:T,error:M}=await this._exchangeCodeForSession(e.code);if(M)throw M;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:T.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:r,access_token:a,refresh_token:s,expires_in:o,expires_at:l,token_type:u}=e;if(!a||!o||!s||!u)throw new QS("No session defined in URL");const h=Math.round(Date.now()/1e3),p=parseInt(o);let g=h+p;l&&(g=parseInt(l));const y=g-h;y*1e3<=Jm&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${p}s`);const _=g-p;h-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,g,h):h-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,g,h);const{data:S,error:x}=await this._getUser(a);if(x)throw x;const w={provider_token:i,provider_refresh_token:r,access_token:a,expires_in:p,expires_at:g,refresh_token:s,token_type:u,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:w,redirectType:e.type},error:null})}catch(i){if(Bt(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Od(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var i;const{data:r,error:a}=t;if(a)return this._returnResult({error:a});const s=(i=r.session)===null||i===void 0?void 0:i.access_token;if(s){const{error:o}=await this.admin.signOut(s,e);if(o&&!(Qne(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return e!=="others"&&(await this._removeSession(),await pa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=lie(),i={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async t=>{var i,r;try{const{data:{session:a},error:s}=t;if(s)throw s;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let i=null,r=null;this.flowType==="pkce"&&([i,r]=await qm(this.storage,this.storageKey,!0));try{return await Xt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(await pa(this.storage,`${this.storageKey}-code-verifier`),Bt(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:t,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(Bt(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:i,error:r}=await this._useSession(async a=>{var s,o,l,u,h;const{data:p,error:g}=a;if(g)throw g;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Xt(this.fetch,"GET",y,{headers:this.headers,jwt:(h=(u=p.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(r)throw r;return ga()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:e.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(Bt(i))return this._returnResult({data:{provider:e.provider,url:null},error:i});throw i}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var i;try{const{error:r,data:{session:a}}=t;if(r)throw r;const{options:s,provider:o,token:l,access_token:u,nonce:h}=e,p=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=a==null?void 0:a.access_token)!==null&&i!==void 0?i:void 0,body:{provider:o,id_token:l,access_token:u,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Pl}),{data:g,error:y}=p;return y?this._returnResult({data:{user:null,session:null},error:y}):!g||!g.session||!g.user?this._returnResult({data:{user:null,session:null},error:new jm}):(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("USER_UPDATED",g.session)),this._returnResult({data:g,error:y}))}catch(r){if(await pa(this.storage,`${this.storageKey}-code-verifier`),Bt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var i,r;const{data:a,error:s}=t;if(s)throw s;return await Xt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(Bt(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await hie(async r=>(r>0&&await fie(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await Xt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Pl})),(r,a)=>{const s=200*Math.pow(2,r);return a&&EM(a)&&Date.now()+s-i<Jm})}catch(i){if(this._debug(t,"error",i),Bt(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",i),ga()&&!t.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,t;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const r=await Od(this.storage,this.storageKey);if(r&&this.userStorage){let s=await Od(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:r.user},await eg(this.userStorage,this.storageKey+"-user",s)),r.user=(e=s==null?void 0:s.user)!==null&&e!==void 0?e:TM()}else if(r&&!r.user&&!r.user){const s=await Od(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(r.user=s.user,await pa(this.storage,this.storageKey+"-user"),await eg(this.storage,this.storageKey,r)):r.user=TM()}if(this._debug(i,"session from storage",r),!this._isValidSession(r)){this._debug(i,"session is not valid"),r!==null&&await this._removeSession();return}const a=((t=r.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<xM;if(this._debug(i,`session has${a?"":" not"} expired with margin of ${xM}s`),a){if(this.autoRefreshToken&&r.refresh_token){const{error:s}=await this._callRefreshToken(r.refresh_token);s&&(console.error(s),EM(s)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:o}=await this._getUser(r.access_token);!o&&(s!=null&&s.user)?(r.user=s.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(i,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(i,"error",r),console.error(r);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var t,i;if(!e)throw new co;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new IE;const{data:a,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!a.session)throw new co;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={data:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(r,"error",a),Bt(a)){const s={data:null,error:a};return EM(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(s),s}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(a),a}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,i=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],s=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(l){a.push(l)}});if(await Promise.all(s),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await pa(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),i=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&t.user&&await eg(this.userStorage,this.storageKey+"-user",{user:t.user});const r=Object.assign({},t);delete r.user;const a=uI(r);await eg(this.storage,this.storageKey,a)}else{const r=uI(t);await eg(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await pa(this.storage,this.storageKey),await pa(this.storage,this.storageKey+"-code-verifier"),await pa(this.storage,this.storageKey+"-user"),this.userStorage&&await pa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ga()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Jm);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:i}}=t;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((i.expires_at*1e3-e)/Jm);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Jm}ms, refresh threshold is ${gO} ticks`),r<=gO&&await this._callRefreshToken(i.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof sV)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ga()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,i){const r=[`provider=${encodeURIComponent(t)}`];if(i!=null&&i.redirectTo&&r.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&r.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[a,s]=await qm(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(s)}`});r.push(o.toString())}if(i!=null&&i.queryParams){const a=new URLSearchParams(i.queryParams);r.push(a.toString())}return i!=null&&i.skipBrowserRedirect&&r.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var i;const{data:r,error:a}=t;return a?this._returnResult({data:null,error:a}):await Xt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(t){if(Bt(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var i,r;const{data:a,error:s}=t;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await Xt(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&l.type==="totp"&&(!((r=l==null?void 0:l.totp)===null||r===void 0)&&r.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(t){if(Bt(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:r,error:a}=t;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Vie(e.webauthn.credential_response):Gie(e.webauthn.credential_response)})}:{code:e.code}),{data:o,error:l}=await Xt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:s,headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:l}))})}catch(t){if(Bt(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:r,error:a}=t;if(a)return this._returnResult({data:null,error:a});const s=await Xt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});if(s.error)return s;const{data:o}=s;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Fie(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Hie(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(Bt(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:i}=await this._challenge({factorId:e.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:i}=await this.getUser();if(i)return{data:null,error:i};const r={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])r.all.push(a),a.status==="verified"&&r[a.factor_type].push(a);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:i},error:r}=await this.getSession();if(r)return this._returnResult({data:null,error:r});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=wM(i.access_token);let s=null;a.aal&&(s=a.aal);let o=s;((t=(e=i.user.factors)===null||e===void 0?void 0:e.filter(h=>h.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(o="aal2");const u=a.amr||[];return{data:{currentLevel:s,nextLevel:o,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:i},error:r}=t;return r?this._returnResult({data:null,error:r}):i?await Xt(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new co})})}catch(t){if(Bt(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async i=>{const{data:{session:r},error:a}=i;if(a)return this._returnResult({data:null,error:a});if(!r)return this._returnResult({data:null,error:new co});const s=await Xt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&ga()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(i){if(Bt(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(e,t){try{return await this._useSession(async i=>{const{data:{session:r},error:a}=i;if(a)return this._returnResult({data:null,error:a});if(!r)return this._returnResult({data:null,error:new co});const s=await Xt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return s.data&&s.data.redirect_url&&ga()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(i){if(Bt(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:i}=e;return i?this._returnResult({data:null,error:i}):t?await Xt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new co})})}catch(e){if(Bt(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:i},error:r}=t;return r?this._returnResult({data:null,error:r}):i?(await Xt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new co})})}catch(t){if(Bt(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let i=t.keys.find(o=>o.kid===e);if(i)return i;const r=Date.now();if(i=this.jwks.keys.find(o=>o.kid===e),i&&this.jwks_cached_at+Kne>r)return i;const{data:a,error:s}=await Xt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=r,i=a.keys.find(o=>o.kid===e),!i)?null:i}async getClaims(e,t={}){try{let i=e;if(!i){const{data:y,error:_}=await this.getSession();if(_||!y.session)return this._returnResult({data:null,error:_});i=y.session.access_token}const{header:r,payload:a,signature:s,raw:{header:o,payload:l}}=wM(i);t!=null&&t.allowExpired||_ie(a.exp);const u=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!u){const{error:y}=await this.getUser(i);if(y)throw y;return{data:{claims:a,header:r,signature:s},error:null}}const h=bie(r.alg),p=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,p,s,sie(`${o}.${l}`)))throw new _O("Invalid JWT signature");return{data:{claims:a,header:r,signature:s},error:null}}catch(i){if(Bt(i))return this._returnResult({data:null,error:i});throw i}}}A0.nextInstanceID={};const Qie=A0,Jie="2.88.0";let Iy="";typeof Deno<"u"?Iy="deno":typeof document<"u"?Iy="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Iy="react-native":Iy="node";const ere={"X-Client-Info":`supabase-js-${Iy}/${Jie}`},tre={headers:ere},nre={schema:"public"},ire={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},rre={};function C0(n){"@babel/helpers - typeof";return C0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C0(n)}function are(n,e){if(C0(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(C0(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function sre(n){var e=are(n,"string");return C0(e)=="symbol"?e:e+""}function ore(n,e,t){return(e=sre(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function ur(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vI(Object(t),!0).forEach(function(i){ore(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):vI(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const lre=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),cre=()=>Headers,ure=(n,e,t)=>{const i=lre(t),r=cre();return async(a,s)=>{var o;const l=(o=await e())!==null&&o!==void 0?o:n;let u=new r(s==null?void 0:s.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),i(a,ur(ur({},s),{},{headers:u}))}};function fre(n){return n.endsWith("/")?n:n+"/"}function hre(n,e){var t,i;const{db:r,auth:a,realtime:s,global:o}=n,{db:l,auth:u,realtime:h,global:p}=e,g={db:ur(ur({},l),r),auth:ur(ur({},u),a),realtime:ur(ur({},h),s),storage:{},global:ur(ur(ur({},p),o),{},{headers:ur(ur({},(t=p==null?void 0:p.headers)!==null&&t!==void 0?t:{}),(i=o==null?void 0:o.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return n.accessToken?g.accessToken=n.accessToken:delete g.accessToken,g}function dre(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(fre(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var pre=class extends Qie{constructor(n){super(n)}},mre=class{constructor(n,e,t){var i,r;this.supabaseUrl=n,this.supabaseKey=e;const a=dre(n);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const s=`sb-${a.hostname.split(".")[0]}-auth-token`,o={db:nre,realtime:rre,auth:ur(ur({},ire),{},{storageKey:s}),global:tre},l=hre(t??{},o);if(this.storageKey=(i=l.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(r=l.global.headers)!==null&&r!==void 0?r:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=l.auth)!==null&&u!==void 0?u:{},this.headers,l.global.fetch)}this.fetch=ure(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(ur({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new $te(new URL("rest/v1",a).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new qne(this.storageUrl.href,this.headers,this.fetch,t==null?void 0:t.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Gte(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,e={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,e,t)}channel(n,e={config:{}}){return this.realtime.channel(n,e)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,e,t;if(n.accessToken)return await n.accessToken();const{data:i}=await n.auth.getSession();return(e=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:e,detectSessionInUrl:t,storage:i,userStorage:r,storageKey:a,flowType:s,lock:o,debug:l,throwOnError:u},h,p){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new pre({url:this.authUrl.href,headers:ur(ur({},g),h),storageKey:a,autoRefreshToken:n,persistSession:e,detectSessionInUrl:t,storage:i,userStorage:r,flowType:s,lock:o,debug:l,throwOnError:u,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new fne(this.realtimeUrl.href,ur(ur({},n),{},{params:ur(ur({},{apikey:this.supabaseKey}),n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,e)=>{this._handleTokenChanged(n,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(n,e,t){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==t?(this.changedAccessToken=t,this.realtime.setAuth(t)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const gre=(n,e,t)=>new mre(n,e,t);function vre(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}vre()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const yre="https://icdlmnvjrsdrincalvqv.supabase.co",_re="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImljZGxtbnZqcnNkcmluY2FsdnF2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU5NjM0ODMsImV4cCI6MjA4MTUzOTQ4M30.uI123BHz8pscOMwdzyleDrmSb1vZXOXie_ffjq7y6o0",Bs=gre(yre,_re);async function bre(n){if(!n)return null;const{data:e,error:t}=await Bs.from("profiles").select("id,email,display_name,role,requested_role,created_at").eq("id",n).maybeSingle();if(t)throw t;return e||null}function Sre({children:n}){const[e,t]=F.useState(null),[i,r]=F.useState(null),[a,s]=F.useState(null),[o,l]=F.useState(null),[u,h]=F.useState(!0),[p,g]=F.useState(null),y=async M=>{const C=M||(i==null?void 0:i.id);if(!C)return s(null),l(null),null;const N=await bre(C);return s(N),l((N==null?void 0:N.role)||null),N},_=async()=>{const{error:M}=await Bs.rpc("ensure_profile");M&&console.error("ensure_profile failed",M)};F.useEffect(()=>{let M=!0;(async()=>{var D,P,z;try{const{data:I,error:L}=await Bs.auth.getSession();if(L)throw L;if(!M)return;t(I.session),r(((D=I.session)==null?void 0:D.user)||null),(z=(P=I.session)==null?void 0:P.user)!=null&&z.id?(await _(),await y(I.session.user.id)):(s(null),l(null))}catch(I){console.error("Supabase session init failed",I)}finally{M&&h(!1)}})();const{data:N}=Bs.auth.onAuthStateChange(async(D,P)=>{var z;if(t(P),r((P==null?void 0:P.user)||null),D==="SIGNED_OUT"){s(null),l(null);return}if((z=P==null?void 0:P.user)!=null&&z.id)try{await _(),await y(P.user.id)}catch(I){console.error("Profile refresh failed",I)}});return()=>{var D;M=!1,(D=N==null?void 0:N.subscription)==null||D.unsubscribe()}},[]);const S=async(M,C)=>{g(null);const{data:N,error:D}=await Bs.auth.signInWithPassword({email:M,password:C});return D?(g(D),{data:null,error:D}):{data:N,error:null}},x=async(M,C,N)=>{g(null);const{data:D,error:P}=await Bs.auth.signUp({email:M,password:C,options:{data:{requested_role:N}}});if(P)return g(P),{data:null,error:P,needsEmailConfirmation:!1};const z=!D.session;return{data:D,error:null,needsEmailConfirmation:z}},w=async()=>{g(null);const{error:M}=await Bs.auth.signOut();return M&&g(M),{error:M||null}},T=F.useMemo(()=>({session:e,user:i,profile:a,role:o,loading:u,authError:p,signInWithPassword:S,signUpWithPassword:x,signOut:w,refreshProfile:y}),[e,i,a,o,u,p]);return B.createElement(SupabaseAuthContext.Provider,{value:T},n)}function Ep(){return F.useContext(SupabaseAuthContext)}var u3=s5();const f3=kr(u3);function yI(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function wp(...n){return e=>{let t=!1;const i=n.map(r=>{const a=yI(r,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let r=0;r<i.length;r++){const a=i[r];typeof a=="function"?a():yI(n[r],null)}}}}function Tp(...n){return F.useCallback(wp(...n),n)}var xre=Symbol.for("react.lazy"),A1=tD[" use ".trim().toString()];function Ere(n){return typeof n=="object"&&n!==null&&"then"in n}function cV(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===xre&&"_payload"in n&&Ere(n._payload)}function wre(n){const e=Tre(n),t=F.forwardRef((i,r)=>{let{children:a,...s}=i;cV(a)&&typeof A1=="function"&&(a=A1(a._payload));const o=F.Children.toArray(a),l=o.find(Are);if(l){const u=l.props.children,h=o.map(p=>p===l?F.Children.count(u)>1?F.Children.only(null):F.isValidElement(u)?u.props.children:null:p);return Pt.jsx(e,{...s,ref:r,children:F.isValidElement(u)?F.cloneElement(u,void 0,h):null})}return Pt.jsx(e,{...s,ref:r,children:a})});return t.displayName=`${n}.Slot`,t}function Tre(n){const e=F.forwardRef((t,i)=>{let{children:r,...a}=t;if(cV(r)&&typeof A1=="function"&&(r=A1(r._payload)),F.isValidElement(r)){const s=Rre(r),o=Cre(a,r.props);return r.type!==F.Fragment&&(o.ref=i?wp(i,s):s),F.cloneElement(r,o)}return F.Children.count(r)>1?F.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var Mre=Symbol("radix.slottable");function Are(n){return F.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===Mre}function Cre(n,e){const t={...e};for(const i in e){const r=n[i],a=e[i];/^on[A-Z]/.test(i)?r&&a?t[i]=(...o)=>{const l=a(...o);return r(...o),l}:r&&(t[i]=r):i==="style"?t[i]={...r,...a}:i==="className"&&(t[i]=[r,a].filter(Boolean).join(" "))}return{...n,...t}}function Rre(n){var i,r;let e=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Ore=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Dre=Ore.reduce((n,e)=>{const t=wre(`Primitive.${e}`),i=F.forwardRef((r,a)=>{const{asChild:s,...o}=r,l=s?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),Pt.jsx(l,{...o,ref:a})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{}),gh=globalThis!=null&&globalThis.document?F.useLayoutEffect:()=>{},Ure="Portal",uV=F.forwardRef((n,e)=>{var o;const{container:t,...i}=n,[r,a]=F.useState(!1);gh(()=>a(!0),[]);const s=t||r&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return s?f3.createPortal(Pt.jsx(Dre.div,{...i,ref:e}),s):null});uV.displayName=Ure;var Nre=uV,_I=Object.prototype.hasOwnProperty;function R0(n,e){var t,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((i=n.length)===e.length)for(;i--&&R0(n[i],e[i]););return i===-1}if(!t||typeof n=="object"){i=0;for(t in n)if(_I.call(n,t)&&++i&&!_I.call(e,t)||!(t in e)||!R0(n[t],e[t]))return!1;return Object.keys(e).length===i}}return n!==n&&e!==e}function fV(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!Object.is(n[t[i]],e[t[i]]))return!1;return!0}var BE=function(e,t,i,r){this.name=e,this.fn=t,this.args=i,this.modifiers=r};BE.prototype._test=function(e){var t=this.fn;try{dg(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return dg(this.modifiers.slice(),t,this)(e)}catch{return!1}};BE.prototype._check=function(e){try{dg(this.modifiers.slice(),this.fn,this)(e)}catch{if(dg(this.modifiers.slice(),function(i){return i},this)(!1))return}if(!dg(this.modifiers.slice(),this.fn,this)(e))throw null};BE.prototype._testAsync=function(e){var t=this;return new Promise(function(i,r){dV(t.modifiers.slice(),t.fn,t)(e).then(function(a){a?i(e):r(null)}).catch(function(a){return r(a)})})};function hV(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function dg(n,e,t){if(n.length){var i=n.shift(),r=dg(n,e,t);return i.perform(r,t)}else return hV(e)}function dV(n,e,t){if(n.length){var i=n.shift(),r=dV(n,e,t);return i.performAsync(r,t)}else return function(a){return Promise.resolve(hV(e,"async")(a))}}var Pre=function(e,t,i){this.name=e,this.perform=t,this.performAsync=i},h3=(function(n){function e(t,i,r,a){for(var s=[],o=arguments.length-4;o-- >0;)s[o]=arguments[o+4];n.call(this,s),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=i,this.cause=r,this.target=a}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e})(Error),$c=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};$c.prototype._applyRule=function(e,t){var i=this;return function(){for(var r=[],a=arguments.length;a--;)r[a]=arguments[a];return i.chain.push(new BE(t,e.apply(i,r),r,i.nextRuleModifiers)),i.nextRuleModifiers=[],i}};$c.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new Pre(t,e.simple,e.async)),this};$c.prototype._clone=function(){return new $c(this.chain.slice(),this.nextRuleModifiers.slice())};$c.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};$c.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(i){try{i._check(e)}catch(r){t.push(new h3(i,e,r))}}),t};$c.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(i){throw new h3(t,e,i)}})};$c.prototype.testAsync=function(e){var t=this;return new Promise(function(i,r){pV(e,t.chain.slice(),i,r)})};function pV(n,e,t,i){if(e.length){var r=e.shift();r._testAsync(n).then(function(){pV(n,e,t,i)},function(a){i(new h3(r,n,a))})}else t(n)}var bI=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function Lre(n,e){return e===void 0&&(e=!1),{simple:function(t){return bI(t,e)||n.check(t)===void 0},async:function(t){return bI(t,e)||n.testAsync(t)}}}function Hs(){return typeof Proxy<"u"?mV(new $c):bO(new $c)}var O0={};Hs.extend=function(n){Object.assign(O0,n)};Hs.clearCustomRules=function(){O0={}};function mV(n){return new Proxy(n,{get:function(t,i){if(i in t)return t[i];var r=mV(n._clone());if(i in C1)return r._applyModifier(C1[i],i);if(i in O0)return r._applyRule(O0[i],i);if(i in SO)return r._applyRule(SO[i],i)}})}function bO(n){var e=function(r,a){return Object.keys(r).forEach(function(s){a[s]=function(){for(var o=[],l=arguments.length;l--;)o[l]=arguments[l];var u=bO(a._clone()),h=u._applyRule(r[s],s).apply(void 0,o);return h}}),a},t=e(SO,n),i=e(O0,t);return Object.keys(C1).forEach(function(r){Object.defineProperty(i,r,{get:function(){var a=bO(i._clone());return a._applyModifier(C1[r],r)}})}),i}var C1={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return JS(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(JS(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&JS(e).every(n)}},async:function(n){return function(e){return Promise.all(JS(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return SI(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(i){return SI(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&i:i}).catch(function(){return!1})}}}};function SI(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function JS(n){return typeof n=="string"?n.split(""):n}var SO={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||Ire;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return Xm("string")},boolean:function(){return Xm("boolean")},undefined:function(){return Xm("undefined")},null:function(){return Xm("null")},array:function(){return Xm("array")},object:function(){return Xm("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return Bre(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(i){return i.test(t)})}},optional:Lre};function Xm(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function Ire(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function Bre(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(i){var r=n[i];try{r.check((e||{})[i])}catch(a){a.target=i,t.push(a)}}),t.length>0)throw t;return!0},async:function(e){var t=[],i=Object.keys(n).map(function(r){var a=n[r];return a.testAsync((e||{})[r]).catch(function(s){s.target=r,t.push(s)})});return Promise.all(i).then(function(){if(t.length>0)throw t;return!0})}}}function Gu(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n==null||n(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function gV(n,e=[]){let t=[];function i(a,s){const o=F.createContext(s),l=t.length;t=[...t,s];const u=p=>{var w;const{scope:g,children:y,..._}=p,S=((w=g==null?void 0:g[n])==null?void 0:w[l])||o,x=F.useMemo(()=>_,Object.values(_));return Pt.jsx(S.Provider,{value:x,children:y})};u.displayName=a+"Provider";function h(p,g){var S;const y=((S=g==null?void 0:g[n])==null?void 0:S[l])||o,_=F.useContext(y);if(_)return _;if(s!==void 0)return s;throw new Error(`\`${p}\` must be used within \`${a}\``)}return[u,h]}const r=()=>{const a=t.map(s=>F.createContext(s));return function(o){const l=(o==null?void 0:o[n])||a;return F.useMemo(()=>({[`__scope${n}`]:{...o,[n]:l}}),[o,l])}};return r.scopeName=n,[i,zre(r,...e)]}function zre(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(a){const s=i.reduce((o,{useScope:l,scopeName:u})=>{const p=l(a)[`__scope${u}`];return{...o,...p}},{});return F.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return t.scopeName=e.scopeName,t}function kre(n){const e=Fre(n),t=F.forwardRef((i,r)=>{const{children:a,...s}=i,o=F.Children.toArray(a),l=o.find(Vre);if(l){const u=l.props.children,h=o.map(p=>p===l?F.Children.count(u)>1?F.Children.only(null):F.isValidElement(u)?u.props.children:null:p);return Pt.jsx(e,{...s,ref:r,children:F.isValidElement(u)?F.cloneElement(u,void 0,h):null})}return Pt.jsx(e,{...s,ref:r,children:a})});return t.displayName=`${n}.Slot`,t}function Fre(n){const e=F.forwardRef((t,i)=>{const{children:r,...a}=t;if(F.isValidElement(r)){const s=jre(r),o=Gre(a,r.props);return r.type!==F.Fragment&&(o.ref=i?wp(i,s):s),F.cloneElement(r,o)}return F.Children.count(r)>1?F.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var Hre=Symbol("radix.slottable");function Vre(n){return F.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===Hre}function Gre(n,e){const t={...e};for(const i in e){const r=n[i],a=e[i];/^on[A-Z]/.test(i)?r&&a?t[i]=(...o)=>{const l=a(...o);return r(...o),l}:r&&(t[i]=r):i==="style"?t[i]={...r,...a}:i==="className"&&(t[i]=[r,a].filter(Boolean).join(" "))}return{...n,...t}}function jre(n){var i,r;let e=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var qre=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],vV=qre.reduce((n,e)=>{const t=kre(`Primitive.${e}`),i=F.forwardRef((r,a)=>{const{asChild:s,...o}=r,l=s?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),Pt.jsx(l,{...o,ref:a})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{});function Wre(n,e){n&&u3.flushSync(()=>n.dispatchEvent(e))}function zE(n){const e=F.useRef(n);return F.useEffect(()=>{e.current=n}),F.useMemo(()=>(...t)=>{var i;return(i=e.current)==null?void 0:i.call(e,...t)},[])}function Yre(n,e=globalThis==null?void 0:globalThis.document){const t=zE(n);F.useEffect(()=>{const i=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[t,e])}var $re="DismissableLayer",xO="dismissableLayer.update",Xre="dismissableLayer.pointerDownOutside",Kre="dismissableLayer.focusOutside",xI,yV=F.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),_V=F.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:a,onInteractOutside:s,onDismiss:o,...l}=n,u=F.useContext(yV),[h,p]=F.useState(null),g=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=F.useState({}),_=Tp(e,P=>p(P)),S=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=S.indexOf(x),T=h?S.indexOf(h):-1,M=u.layersWithOutsidePointerEventsDisabled.size>0,C=T>=w,N=Jre(P=>{const z=P.target,I=[...u.branches].some(L=>L.contains(z));!C||I||(r==null||r(P),s==null||s(P),P.defaultPrevented||o==null||o())},g),D=eae(P=>{const z=P.target;[...u.branches].some(L=>L.contains(z))||(a==null||a(P),s==null||s(P),P.defaultPrevented||o==null||o())},g);return Yre(P=>{T===u.layers.size-1&&(i==null||i(P),!P.defaultPrevented&&o&&(P.preventDefault(),o()))},g),F.useEffect(()=>{if(h)return t&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(xI=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),EI(),()=>{t&&u.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=xI)}},[h,g,t,u]),F.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),EI())},[h,u]),F.useEffect(()=>{const P=()=>y({});return document.addEventListener(xO,P),()=>document.removeEventListener(xO,P)},[]),Pt.jsx(vV.div,{...l,ref:_,style:{pointerEvents:M?C?"auto":"none":void 0,...n.style},onFocusCapture:Gu(n.onFocusCapture,D.onFocusCapture),onBlurCapture:Gu(n.onBlurCapture,D.onBlurCapture),onPointerDownCapture:Gu(n.onPointerDownCapture,N.onPointerDownCapture)})});_V.displayName=$re;var Zre="DismissableLayerBranch",Qre=F.forwardRef((n,e)=>{const t=F.useContext(yV),i=F.useRef(null),r=Tp(e,i);return F.useEffect(()=>{const a=i.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),Pt.jsx(vV.div,{...n,ref:r})});Qre.displayName=Zre;function Jre(n,e=globalThis==null?void 0:globalThis.document){const t=zE(n),i=F.useRef(!1),r=F.useRef(()=>{});return F.useEffect(()=>{const a=o=>{if(o.target&&!i.current){let l=function(){bV(Xre,t,u,{discrete:!0})};const u={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);i.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",a),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>i.current=!0}}function eae(n,e=globalThis==null?void 0:globalThis.document){const t=zE(n),i=F.useRef(!1);return F.useEffect(()=>{const r=a=>{a.target&&!i.current&&bV(Kre,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function EI(){const n=new CustomEvent(xO);document.dispatchEvent(n)}function bV(n,e,t,{discrete:i}){const r=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),i?Wre(r,a):r.dispatchEvent(a)}var tae=tD[" useId ".trim().toString()]||(()=>{}),nae=0;function iae(n){const[e,t]=F.useState(tae());return gh(()=>{t(i=>i??String(nae++))},[n]),e?`radix-${e}`:""}const rae=["top","right","bottom","left"],vh=Math.min,uo=Math.max,R1=Math.round,ex=Math.floor,jc=n=>({x:n,y:n}),aae={left:"right",right:"left",bottom:"top",top:"bottom"},sae={start:"end",end:"start"};function EO(n,e,t){return uo(n,vh(e,t))}function nf(n,e){return typeof n=="function"?n(e):n}function rf(n){return n.split("-")[0]}function jg(n){return n.split("-")[1]}function d3(n){return n==="x"?"y":"x"}function p3(n){return n==="y"?"height":"width"}const oae=new Set(["top","bottom"]);function Hc(n){return oae.has(rf(n))?"y":"x"}function m3(n){return d3(Hc(n))}function lae(n,e,t){t===void 0&&(t=!1);const i=jg(n),r=m3(n),a=p3(r);let s=r==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(s=O1(s)),[s,O1(s)]}function cae(n){const e=O1(n);return[wO(n),e,wO(e)]}function wO(n){return n.replace(/start|end/g,e=>sae[e])}const wI=["left","right"],TI=["right","left"],uae=["top","bottom"],fae=["bottom","top"];function hae(n,e,t){switch(n){case"top":case"bottom":return t?e?TI:wI:e?wI:TI;case"left":case"right":return e?uae:fae;default:return[]}}function dae(n,e,t,i){const r=jg(n);let a=hae(rf(n),t==="start",i);return r&&(a=a.map(s=>s+"-"+r),e&&(a=a.concat(a.map(wO)))),a}function O1(n){return n.replace(/left|right|bottom|top/g,e=>aae[e])}function pae(n){return{top:0,right:0,bottom:0,left:0,...n}}function SV(n){return typeof n!="number"?pae(n):{top:n,right:n,bottom:n,left:n}}function D1(n){const{x:e,y:t,width:i,height:r}=n;return{width:i,height:r,top:t,left:e,right:e+i,bottom:t+r,x:e,y:t}}function MI(n,e,t){let{reference:i,floating:r}=n;const a=Hc(e),s=m3(e),o=p3(s),l=rf(e),u=a==="y",h=i.x+i.width/2-r.width/2,p=i.y+i.height/2-r.height/2,g=i[o]/2-r[o]/2;let y;switch(l){case"top":y={x:h,y:i.y-r.height};break;case"bottom":y={x:h,y:i.y+i.height};break;case"right":y={x:i.x+i.width,y:p};break;case"left":y={x:i.x-r.width,y:p};break;default:y={x:i.x,y:i.y}}switch(jg(e)){case"start":y[s]-=g*(t&&u?-1:1);break;case"end":y[s]+=g*(t&&u?-1:1);break}return y}const mae=async(n,e,t)=>{const{placement:i="bottom",strategy:r="absolute",middleware:a=[],platform:s}=t,o=a.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let u=await s.getElementRects({reference:n,floating:e,strategy:r}),{x:h,y:p}=MI(u,i,l),g=i,y={},_=0;for(let S=0;S<o.length;S++){const{name:x,fn:w}=o[S],{x:T,y:M,data:C,reset:N}=await w({x:h,y:p,initialPlacement:i,placement:g,strategy:r,middlewareData:y,rects:u,platform:s,elements:{reference:n,floating:e}});h=T??h,p=M??p,y={...y,[x]:{...y[x],...C}},N&&_<=50&&(_++,typeof N=="object"&&(N.placement&&(g=N.placement),N.rects&&(u=N.rects===!0?await s.getElementRects({reference:n,floating:e,strategy:r}):N.rects),{x:h,y:p}=MI(u,g,l)),S=-1)}return{x:h,y:p,placement:g,strategy:r,middlewareData:y}};async function D0(n,e){var t;e===void 0&&(e={});const{x:i,y:r,platform:a,rects:s,elements:o,strategy:l}=n,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:g=!1,padding:y=0}=nf(e,n),_=SV(y),x=o[g?p==="floating"?"reference":"floating":p],w=D1(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(x)))==null||t?x:x.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(o.floating)),boundary:u,rootBoundary:h,strategy:l})),T=p==="floating"?{x:i,y:r,width:s.floating.width,height:s.floating.height}:s.reference,M=await(a.getOffsetParent==null?void 0:a.getOffsetParent(o.floating)),C=await(a.isElement==null?void 0:a.isElement(M))?await(a.getScale==null?void 0:a.getScale(M))||{x:1,y:1}:{x:1,y:1},N=D1(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:T,offsetParent:M,strategy:l}):T);return{top:(w.top-N.top+_.top)/C.y,bottom:(N.bottom-w.bottom+_.bottom)/C.y,left:(w.left-N.left+_.left)/C.x,right:(N.right-w.right+_.right)/C.x}}const gae=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:i,placement:r,rects:a,platform:s,elements:o,middlewareData:l}=e,{element:u,padding:h=0}=nf(n,e)||{};if(u==null)return{};const p=SV(h),g={x:t,y:i},y=m3(r),_=p3(y),S=await s.getDimensions(u),x=y==="y",w=x?"top":"left",T=x?"bottom":"right",M=x?"clientHeight":"clientWidth",C=a.reference[_]+a.reference[y]-g[y]-a.floating[_],N=g[y]-a.reference[y],D=await(s.getOffsetParent==null?void 0:s.getOffsetParent(u));let P=D?D[M]:0;(!P||!await(s.isElement==null?void 0:s.isElement(D)))&&(P=o.floating[M]||a.floating[_]);const z=C/2-N/2,I=P/2-S[_]/2-1,L=vh(p[w],I),H=vh(p[T],I),j=L,G=P-S[_]-H,K=P/2-S[_]/2+z,ee=EO(j,K,G),Y=!l.arrow&&jg(r)!=null&&K!==ee&&a.reference[_]/2-(K<j?L:H)-S[_]/2<0,re=Y?K<j?K-j:K-G:0;return{[y]:g[y]+re,data:{[y]:ee,centerOffset:K-ee-re,...Y&&{alignmentOffset:re}},reset:Y}}}),vae=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,i;const{placement:r,middlewareData:a,rects:s,initialPlacement:o,platform:l,elements:u}=e,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:g,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:S=!0,...x}=nf(n,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const w=rf(r),T=Hc(o),M=rf(o)===o,C=await(l.isRTL==null?void 0:l.isRTL(u.floating)),N=g||(M||!S?[O1(o)]:cae(o)),D=_!=="none";!g&&D&&N.push(...dae(o,S,_,C));const P=[o,...N],z=await D0(e,x),I=[];let L=((i=a.flip)==null?void 0:i.overflows)||[];if(h&&I.push(z[w]),p){const K=lae(r,s,C);I.push(z[K[0]],z[K[1]])}if(L=[...L,{placement:r,overflows:I}],!I.every(K=>K<=0)){var H,j;const K=(((H=a.flip)==null?void 0:H.index)||0)+1,ee=P[K];if(ee&&(!(p==="alignment"?T!==Hc(ee):!1)||L.every(J=>Hc(J.placement)===T?J.overflows[0]>0:!0)))return{data:{index:K,overflows:L},reset:{placement:ee}};let Y=(j=L.filter(re=>re.overflows[0]<=0).sort((re,J)=>re.overflows[1]-J.overflows[1])[0])==null?void 0:j.placement;if(!Y)switch(y){case"bestFit":{var G;const re=(G=L.filter(J=>{if(D){const se=Hc(J.placement);return se===T||se==="y"}return!0}).map(J=>[J.placement,J.overflows.filter(se=>se>0).reduce((se,q)=>se+q,0)]).sort((J,se)=>J[1]-se[1])[0])==null?void 0:G[0];re&&(Y=re);break}case"initialPlacement":Y=o;break}if(r!==Y)return{reset:{placement:Y}}}return{}}}};function AI(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function CI(n){return rae.some(e=>n[e]>=0)}const yae=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:i="referenceHidden",...r}=nf(n,e);switch(i){case"referenceHidden":{const a=await D0(e,{...r,elementContext:"reference"}),s=AI(a,t.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:CI(s)}}}case"escaped":{const a=await D0(e,{...r,altBoundary:!0}),s=AI(a,t.floating);return{data:{escapedOffsets:s,escaped:CI(s)}}}default:return{}}}}},xV=new Set(["left","top"]);async function _ae(n,e){const{placement:t,platform:i,elements:r}=n,a=await(i.isRTL==null?void 0:i.isRTL(r.floating)),s=rf(t),o=jg(t),l=Hc(t)==="y",u=xV.has(s)?-1:1,h=a&&l?-1:1,p=nf(e,n);let{mainAxis:g,crossAxis:y,alignmentAxis:_}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return o&&typeof _=="number"&&(y=o==="end"?_*-1:_),l?{x:y*h,y:g*u}:{x:g*u,y:y*h}}const bae=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,i;const{x:r,y:a,placement:s,middlewareData:o}=e,l=await _ae(e,n);return s===((t=o.offset)==null?void 0:t.placement)&&(i=o.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:a+l.y,data:{...l,placement:s}}}}},Sae=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:r}=e,{mainAxis:a=!0,crossAxis:s=!1,limiter:o={fn:x=>{let{x:w,y:T}=x;return{x:w,y:T}}},...l}=nf(n,e),u={x:t,y:i},h=await D0(e,l),p=Hc(rf(r)),g=d3(p);let y=u[g],_=u[p];if(a){const x=g==="y"?"top":"left",w=g==="y"?"bottom":"right",T=y+h[x],M=y-h[w];y=EO(T,y,M)}if(s){const x=p==="y"?"top":"left",w=p==="y"?"bottom":"right",T=_+h[x],M=_-h[w];_=EO(T,_,M)}const S=o.fn({...e,[g]:y,[p]:_});return{...S,data:{x:S.x-t,y:S.y-i,enabled:{[g]:a,[p]:s}}}}}},xae=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:i,placement:r,rects:a,middlewareData:s}=e,{offset:o=0,mainAxis:l=!0,crossAxis:u=!0}=nf(n,e),h={x:t,y:i},p=Hc(r),g=d3(p);let y=h[g],_=h[p];const S=nf(o,e),x=typeof S=="number"?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(l){const M=g==="y"?"height":"width",C=a.reference[g]-a.floating[M]+x.mainAxis,N=a.reference[g]+a.reference[M]-x.mainAxis;y<C?y=C:y>N&&(y=N)}if(u){var w,T;const M=g==="y"?"width":"height",C=xV.has(rf(r)),N=a.reference[p]-a.floating[M]+(C&&((w=s.offset)==null?void 0:w[p])||0)+(C?0:x.crossAxis),D=a.reference[p]+a.reference[M]+(C?0:((T=s.offset)==null?void 0:T[p])||0)-(C?x.crossAxis:0);_<N?_=N:_>D&&(_=D)}return{[g]:y,[p]:_}}}},Eae=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,i;const{placement:r,rects:a,platform:s,elements:o}=e,{apply:l=()=>{},...u}=nf(n,e),h=await D0(e,u),p=rf(r),g=jg(r),y=Hc(r)==="y",{width:_,height:S}=a.floating;let x,w;p==="top"||p==="bottom"?(x=p,w=g===(await(s.isRTL==null?void 0:s.isRTL(o.floating))?"start":"end")?"left":"right"):(w=p,x=g==="end"?"top":"bottom");const T=S-h.top-h.bottom,M=_-h.left-h.right,C=vh(S-h[x],T),N=vh(_-h[w],M),D=!e.middlewareData.shift;let P=C,z=N;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(z=M),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(P=T),D&&!g){const L=uo(h.left,0),H=uo(h.right,0),j=uo(h.top,0),G=uo(h.bottom,0);y?z=_-2*(L!==0||H!==0?L+H:uo(h.left,h.right)):P=S-2*(j!==0||G!==0?j+G:uo(h.top,h.bottom))}await l({...e,availableWidth:z,availableHeight:P});const I=await s.getDimensions(o.floating);return _!==I.width||S!==I.height?{reset:{rects:!0}}:{}}}};function kE(){return typeof window<"u"}function qg(n){return EV(n)?(n.nodeName||"").toLowerCase():"#document"}function mo(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Jc(n){var e;return(e=(EV(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function EV(n){return kE()?n instanceof Node||n instanceof mo(n).Node:!1}function Wl(n){return kE()?n instanceof Element||n instanceof mo(n).Element:!1}function Xc(n){return kE()?n instanceof HTMLElement||n instanceof mo(n).HTMLElement:!1}function RI(n){return!kE()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof mo(n).ShadowRoot}const wae=new Set(["inline","contents"]);function u_(n){const{overflow:e,overflowX:t,overflowY:i,display:r}=Yl(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!wae.has(r)}const Tae=new Set(["table","td","th"]);function Mae(n){return Tae.has(qg(n))}const Aae=[":popover-open",":modal"];function FE(n){return Aae.some(e=>{try{return n.matches(e)}catch{return!1}})}const Cae=["transform","translate","scale","rotate","perspective"],Rae=["transform","translate","scale","rotate","perspective","filter"],Oae=["paint","layout","strict","content"];function g3(n){const e=v3(),t=Wl(n)?Yl(n):n;return Cae.some(i=>t[i]?t[i]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||Rae.some(i=>(t.willChange||"").includes(i))||Oae.some(i=>(t.contain||"").includes(i))}function Dae(n){let e=yh(n);for(;Xc(e)&&!wg(e);){if(g3(e))return e;if(FE(e))return null;e=yh(e)}return null}function v3(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Uae=new Set(["html","body","#document"]);function wg(n){return Uae.has(qg(n))}function Yl(n){return mo(n).getComputedStyle(n)}function HE(n){return Wl(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function yh(n){if(qg(n)==="html")return n;const e=n.assignedSlot||n.parentNode||RI(n)&&n.host||Jc(n);return RI(e)?e.host:e}function wV(n){const e=yh(n);return wg(e)?n.ownerDocument?n.ownerDocument.body:n.body:Xc(e)&&u_(e)?e:wV(e)}function U0(n,e,t){var i;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=wV(n),a=r===((i=n.ownerDocument)==null?void 0:i.body),s=mo(r);if(a){const o=TO(s);return e.concat(s,s.visualViewport||[],u_(r)?r:[],o&&t?U0(o):[])}return e.concat(r,U0(r,[],t))}function TO(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function TV(n){const e=Yl(n);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=Xc(n),a=r?n.offsetWidth:t,s=r?n.offsetHeight:i,o=R1(t)!==a||R1(i)!==s;return o&&(t=a,i=s),{width:t,height:i,$:o}}function y3(n){return Wl(n)?n:n.contextElement}function pg(n){const e=y3(n);if(!Xc(e))return jc(1);const t=e.getBoundingClientRect(),{width:i,height:r,$:a}=TV(e);let s=(a?R1(t.width):t.width)/i,o=(a?R1(t.height):t.height)/r;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const Nae=jc(0);function MV(n){const e=mo(n);return!v3()||!e.visualViewport?Nae:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Pae(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==mo(n)?!1:e}function cp(n,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=n.getBoundingClientRect(),a=y3(n);let s=jc(1);e&&(i?Wl(i)&&(s=pg(i)):s=pg(n));const o=Pae(a,t,i)?MV(a):jc(0);let l=(r.left+o.x)/s.x,u=(r.top+o.y)/s.y,h=r.width/s.x,p=r.height/s.y;if(a){const g=mo(a),y=i&&Wl(i)?mo(i):i;let _=g,S=TO(_);for(;S&&i&&y!==_;){const x=pg(S),w=S.getBoundingClientRect(),T=Yl(S),M=w.left+(S.clientLeft+parseFloat(T.paddingLeft))*x.x,C=w.top+(S.clientTop+parseFloat(T.paddingTop))*x.y;l*=x.x,u*=x.y,h*=x.x,p*=x.y,l+=M,u+=C,_=mo(S),S=TO(_)}}return D1({width:h,height:p,x:l,y:u})}function VE(n,e){const t=HE(n).scrollLeft;return e?e.left+t:cp(Jc(n)).left+t}function AV(n,e){const t=n.getBoundingClientRect(),i=t.left+e.scrollLeft-VE(n,t),r=t.top+e.scrollTop;return{x:i,y:r}}function Lae(n){let{elements:e,rect:t,offsetParent:i,strategy:r}=n;const a=r==="fixed",s=Jc(i),o=e?FE(e.floating):!1;if(i===s||o&&a)return t;let l={scrollLeft:0,scrollTop:0},u=jc(1);const h=jc(0),p=Xc(i);if((p||!p&&!a)&&((qg(i)!=="body"||u_(s))&&(l=HE(i)),Xc(i))){const y=cp(i);u=pg(i),h.x=y.x+i.clientLeft,h.y=y.y+i.clientTop}const g=s&&!p&&!a?AV(s,l):jc(0);return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-l.scrollLeft*u.x+h.x+g.x,y:t.y*u.y-l.scrollTop*u.y+h.y+g.y}}function Iae(n){return Array.from(n.getClientRects())}function Bae(n){const e=Jc(n),t=HE(n),i=n.ownerDocument.body,r=uo(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),a=uo(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let s=-t.scrollLeft+VE(n);const o=-t.scrollTop;return Yl(i).direction==="rtl"&&(s+=uo(e.clientWidth,i.clientWidth)-r),{width:r,height:a,x:s,y:o}}const OI=25;function zae(n,e){const t=mo(n),i=Jc(n),r=t.visualViewport;let a=i.clientWidth,s=i.clientHeight,o=0,l=0;if(r){a=r.width,s=r.height;const h=v3();(!h||h&&e==="fixed")&&(o=r.offsetLeft,l=r.offsetTop)}const u=VE(i);if(u<=0){const h=i.ownerDocument,p=h.body,g=getComputedStyle(p),y=h.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,_=Math.abs(i.clientWidth-p.clientWidth-y);_<=OI&&(a-=_)}else u<=OI&&(a+=u);return{width:a,height:s,x:o,y:l}}const kae=new Set(["absolute","fixed"]);function Fae(n,e){const t=cp(n,!0,e==="fixed"),i=t.top+n.clientTop,r=t.left+n.clientLeft,a=Xc(n)?pg(n):jc(1),s=n.clientWidth*a.x,o=n.clientHeight*a.y,l=r*a.x,u=i*a.y;return{width:s,height:o,x:l,y:u}}function DI(n,e,t){let i;if(e==="viewport")i=zae(n,t);else if(e==="document")i=Bae(Jc(n));else if(Wl(e))i=Fae(e,t);else{const r=MV(n);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return D1(i)}function CV(n,e){const t=yh(n);return t===e||!Wl(t)||wg(t)?!1:Yl(t).position==="fixed"||CV(t,e)}function Hae(n,e){const t=e.get(n);if(t)return t;let i=U0(n,[],!1).filter(o=>Wl(o)&&qg(o)!=="body"),r=null;const a=Yl(n).position==="fixed";let s=a?yh(n):n;for(;Wl(s)&&!wg(s);){const o=Yl(s),l=g3(s);!l&&o.position==="fixed"&&(r=null),(a?!l&&!r:!l&&o.position==="static"&&!!r&&kae.has(r.position)||u_(s)&&!l&&CV(n,s))?i=i.filter(h=>h!==s):r=o,s=yh(s)}return e.set(n,i),i}function Vae(n){let{element:e,boundary:t,rootBoundary:i,strategy:r}=n;const s=[...t==="clippingAncestors"?FE(e)?[]:Hae(e,this._c):[].concat(t),i],o=s[0],l=s.reduce((u,h)=>{const p=DI(e,h,r);return u.top=uo(p.top,u.top),u.right=vh(p.right,u.right),u.bottom=vh(p.bottom,u.bottom),u.left=uo(p.left,u.left),u},DI(e,o,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Gae(n){const{width:e,height:t}=TV(n);return{width:e,height:t}}function jae(n,e,t){const i=Xc(e),r=Jc(e),a=t==="fixed",s=cp(n,!0,a,e);let o={scrollLeft:0,scrollTop:0};const l=jc(0);function u(){l.x=VE(r)}if(i||!i&&!a)if((qg(e)!=="body"||u_(r))&&(o=HE(e)),i){const y=cp(e,!0,a,e);l.x=y.x+e.clientLeft,l.y=y.y+e.clientTop}else r&&u();a&&!i&&r&&u();const h=r&&!i&&!a?AV(r,o):jc(0),p=s.left+o.scrollLeft-l.x-h.x,g=s.top+o.scrollTop-l.y-h.y;return{x:p,y:g,width:s.width,height:s.height}}function AM(n){return Yl(n).position==="static"}function UI(n,e){if(!Xc(n)||Yl(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Jc(n)===t&&(t=t.ownerDocument.body),t}function RV(n,e){const t=mo(n);if(FE(n))return t;if(!Xc(n)){let r=yh(n);for(;r&&!wg(r);){if(Wl(r)&&!AM(r))return r;r=yh(r)}return t}let i=UI(n,e);for(;i&&Mae(i)&&AM(i);)i=UI(i,e);return i&&wg(i)&&AM(i)&&!g3(i)?t:i||Dae(n)||t}const qae=async function(n){const e=this.getOffsetParent||RV,t=this.getDimensions,i=await t(n.floating);return{reference:jae(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Wae(n){return Yl(n).direction==="rtl"}const Yae={convertOffsetParentRelativeRectToViewportRelativeRect:Lae,getDocumentElement:Jc,getClippingRect:Vae,getOffsetParent:RV,getElementRects:qae,getClientRects:Iae,getDimensions:Gae,getScale:pg,isElement:Wl,isRTL:Wae};function OV(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function $ae(n,e){let t=null,i;const r=Jc(n);function a(){var o;clearTimeout(i),(o=t)==null||o.disconnect(),t=null}function s(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),a();const u=n.getBoundingClientRect(),{left:h,top:p,width:g,height:y}=u;if(o||e(),!g||!y)return;const _=ex(p),S=ex(r.clientWidth-(h+g)),x=ex(r.clientHeight-(p+y)),w=ex(h),M={rootMargin:-_+"px "+-S+"px "+-x+"px "+-w+"px",threshold:uo(0,vh(1,l))||1};let C=!0;function N(D){const P=D[0].intersectionRatio;if(P!==l){if(!C)return s();P?s(!1,P):i=setTimeout(()=>{s(!1,1e-7)},1e3)}P===1&&!OV(u,n.getBoundingClientRect())&&s(),C=!1}try{t=new IntersectionObserver(N,{...M,root:r.ownerDocument})}catch{t=new IntersectionObserver(N,M)}t.observe(n)}return s(!0),a}function Xae(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:a=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,u=y3(n),h=r||a?[...u?U0(u):[],...U0(e)]:[];h.forEach(w=>{r&&w.addEventListener("scroll",t,{passive:!0}),a&&w.addEventListener("resize",t)});const p=u&&o?$ae(u,t):null;let g=-1,y=null;s&&(y=new ResizeObserver(w=>{let[T]=w;T&&T.target===u&&y&&(y.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var M;(M=y)==null||M.observe(e)})),t()}),u&&!l&&y.observe(u),y.observe(e));let _,S=l?cp(n):null;l&&x();function x(){const w=cp(n);S&&!OV(S,w)&&t(),S=w,_=requestAnimationFrame(x)}return t(),()=>{var w;h.forEach(T=>{r&&T.removeEventListener("scroll",t),a&&T.removeEventListener("resize",t)}),p==null||p(),(w=y)==null||w.disconnect(),y=null,l&&cancelAnimationFrame(_)}}const Kae=bae,Zae=Sae,Qae=vae,Jae=Eae,ese=yae,NI=gae,tse=xae,nse=(n,e,t)=>{const i=new Map,r={platform:Yae,...t},a={...r.platform,_c:i};return mae(n,e,{...r,platform:a})};var ise=typeof document<"u",rse=function(){},_x=ise?F.useLayoutEffect:rse;function U1(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,i,r;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(i=t;i--!==0;)if(!U1(n[i],e[i]))return!1;return!0}if(r=Object.keys(n),t=r.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=t;i--!==0;){const a=r[i];if(!(a==="_owner"&&n.$$typeof)&&!U1(n[a],e[a]))return!1}return!0}return n!==n&&e!==e}function DV(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function PI(n,e){const t=DV(n);return Math.round(e*t)/t}function CM(n){const e=F.useRef(n);return _x(()=>{e.current=n}),e}function ase(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:i=[],platform:r,elements:{reference:a,floating:s}={},transform:o=!0,whileElementsMounted:l,open:u}=n,[h,p]=F.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[g,y]=F.useState(i);U1(g,i)||y(i);const[_,S]=F.useState(null),[x,w]=F.useState(null),T=F.useCallback(J=>{J!==D.current&&(D.current=J,S(J))},[]),M=F.useCallback(J=>{J!==P.current&&(P.current=J,w(J))},[]),C=a||_,N=s||x,D=F.useRef(null),P=F.useRef(null),z=F.useRef(h),I=l!=null,L=CM(l),H=CM(r),j=CM(u),G=F.useCallback(()=>{if(!D.current||!P.current)return;const J={placement:e,strategy:t,middleware:g};H.current&&(J.platform=H.current),nse(D.current,P.current,J).then(se=>{const q={...se,isPositioned:j.current!==!1};K.current&&!U1(z.current,q)&&(z.current=q,u3.flushSync(()=>{p(q)}))})},[g,e,t,H,j]);_x(()=>{u===!1&&z.current.isPositioned&&(z.current.isPositioned=!1,p(J=>({...J,isPositioned:!1})))},[u]);const K=F.useRef(!1);_x(()=>(K.current=!0,()=>{K.current=!1}),[]),_x(()=>{if(C&&(D.current=C),N&&(P.current=N),C&&N){if(L.current)return L.current(C,N,G);G()}},[C,N,G,L,I]);const ee=F.useMemo(()=>({reference:D,floating:P,setReference:T,setFloating:M}),[T,M]),Y=F.useMemo(()=>({reference:C,floating:N}),[C,N]),re=F.useMemo(()=>{const J={position:t,left:0,top:0};if(!Y.floating)return J;const se=PI(Y.floating,h.x),q=PI(Y.floating,h.y);return o?{...J,transform:"translate("+se+"px, "+q+"px)",...DV(Y.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:se,top:q}},[t,o,Y.floating,h.x,h.y]);return F.useMemo(()=>({...h,update:G,refs:ee,elements:Y,floatingStyles:re}),[h,G,ee,Y,re])}const sse=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:i,padding:r}=typeof n=="function"?n(t):n;return i&&e(i)?i.current!=null?NI({element:i.current,padding:r}).fn(t):{}:i?NI({element:i,padding:r}).fn(t):{}}}},ose=(n,e)=>({...Kae(n),options:[n,e]}),lse=(n,e)=>({...Zae(n),options:[n,e]}),cse=(n,e)=>({...tse(n),options:[n,e]}),use=(n,e)=>({...Qae(n),options:[n,e]}),fse=(n,e)=>({...Jae(n),options:[n,e]}),hse=(n,e)=>({...ese(n),options:[n,e]}),dse=(n,e)=>({...sse(n),options:[n,e]});function pse(n){const e=mse(n),t=F.forwardRef((i,r)=>{const{children:a,...s}=i,o=F.Children.toArray(a),l=o.find(vse);if(l){const u=l.props.children,h=o.map(p=>p===l?F.Children.count(u)>1?F.Children.only(null):F.isValidElement(u)?u.props.children:null:p);return Pt.jsx(e,{...s,ref:r,children:F.isValidElement(u)?F.cloneElement(u,void 0,h):null})}return Pt.jsx(e,{...s,ref:r,children:a})});return t.displayName=`${n}.Slot`,t}function mse(n){const e=F.forwardRef((t,i)=>{const{children:r,...a}=t;if(F.isValidElement(r)){const s=_se(r),o=yse(a,r.props);return r.type!==F.Fragment&&(o.ref=i?wp(i,s):s),F.cloneElement(r,o)}return F.Children.count(r)>1?F.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var gse=Symbol("radix.slottable");function vse(n){return F.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===gse}function yse(n,e){const t={...e};for(const i in e){const r=n[i],a=e[i];/^on[A-Z]/.test(i)?r&&a?t[i]=(...o)=>{const l=a(...o);return r(...o),l}:r&&(t[i]=r):i==="style"?t[i]={...r,...a}:i==="className"&&(t[i]=[r,a].filter(Boolean).join(" "))}return{...n,...t}}function _se(n){var i,r;let e=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var bse=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Sse=bse.reduce((n,e)=>{const t=pse(`Primitive.${e}`),i=F.forwardRef((r,a)=>{const{asChild:s,...o}=r,l=s?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),Pt.jsx(l,{...o,ref:a})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{}),xse="Arrow",UV=F.forwardRef((n,e)=>{const{children:t,width:i=10,height:r=5,...a}=n;return Pt.jsx(Sse.svg,{...a,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:Pt.jsx("polygon",{points:"0,0 30,0 15,10"})})});UV.displayName=xse;var Ese=UV;function wse(n){const e=Tse(n),t=F.forwardRef((i,r)=>{const{children:a,...s}=i,o=F.Children.toArray(a),l=o.find(Ase);if(l){const u=l.props.children,h=o.map(p=>p===l?F.Children.count(u)>1?F.Children.only(null):F.isValidElement(u)?u.props.children:null:p);return Pt.jsx(e,{...s,ref:r,children:F.isValidElement(u)?F.cloneElement(u,void 0,h):null})}return Pt.jsx(e,{...s,ref:r,children:a})});return t.displayName=`${n}.Slot`,t}function Tse(n){const e=F.forwardRef((t,i)=>{const{children:r,...a}=t;if(F.isValidElement(r)){const s=Rse(r),o=Cse(a,r.props);return r.type!==F.Fragment&&(o.ref=i?wp(i,s):s),F.cloneElement(r,o)}return F.Children.count(r)>1?F.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var Mse=Symbol("radix.slottable");function Ase(n){return F.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===Mse}function Cse(n,e){const t={...e};for(const i in e){const r=n[i],a=e[i];/^on[A-Z]/.test(i)?r&&a?t[i]=(...o)=>{const l=a(...o);return r(...o),l}:r&&(t[i]=r):i==="style"?t[i]={...r,...a}:i==="className"&&(t[i]=[r,a].filter(Boolean).join(" "))}return{...n,...t}}function Rse(n){var i,r;let e=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Ose=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],NV=Ose.reduce((n,e)=>{const t=wse(`Primitive.${e}`),i=F.forwardRef((r,a)=>{const{asChild:s,...o}=r,l=s?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),Pt.jsx(l,{...o,ref:a})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{});function Dse(n){const[e,t]=F.useState(void 0);return gh(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const a=r[0];let s,o;if("borderBoxSize"in a){const l=a.borderBoxSize,u=Array.isArray(l)?l[0]:l;s=u.inlineSize,o=u.blockSize}else s=n.offsetWidth,o=n.offsetHeight;t({width:s,height:o})});return i.observe(n,{box:"border-box"}),()=>i.unobserve(n)}else t(void 0)},[n]),e}var _3="Popper",[PV,LV]=gV(_3),[Use,IV]=PV(_3),BV=n=>{const{__scopePopper:e,children:t}=n,[i,r]=F.useState(null);return Pt.jsx(Use,{scope:e,anchor:i,onAnchorChange:r,children:t})};BV.displayName=_3;var zV="PopperAnchor",kV=F.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:i,...r}=n,a=IV(zV,t),s=F.useRef(null),o=Tp(e,s),l=F.useRef(null);return F.useEffect(()=>{const u=l.current;l.current=(i==null?void 0:i.current)||s.current,u!==l.current&&a.onAnchorChange(l.current)}),i?null:Pt.jsx(NV.div,{...r,ref:o})});kV.displayName=zV;var b3="PopperContent",[Nse,Pse]=PV(b3),FV=F.forwardRef((n,e)=>{var de,ve,We,ze,qe,_e;const{__scopePopper:t,side:i="bottom",sideOffset:r=0,align:a="center",alignOffset:s=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:p="partial",hideWhenDetached:g=!1,updatePositionStrategy:y="optimized",onPlaced:_,...S}=n,x=IV(b3,t),[w,T]=F.useState(null),M=Tp(e,Ae=>T(Ae)),[C,N]=F.useState(null),D=Dse(C),P=(D==null?void 0:D.width)??0,z=(D==null?void 0:D.height)??0,I=i+(a!=="center"?"-"+a:""),L=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},H=Array.isArray(u)?u:[u],j=H.length>0,G={padding:L,boundary:H.filter(Ise),altBoundary:j},{refs:K,floatingStyles:ee,placement:Y,isPositioned:re,middlewareData:J}=ase({strategy:"fixed",placement:I,whileElementsMounted:(...Ae)=>Xae(...Ae,{animationFrame:y==="always"}),elements:{reference:x.anchor},middleware:[ose({mainAxis:r+z,alignmentAxis:s}),l&&lse({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?cse():void 0,...G}),l&&use({...G}),fse({...G,apply:({elements:Ae,rects:te,availableWidth:ke,availableHeight:De})=>{const{width:Ie,height:Te}=te.reference,Xe=Ae.floating.style;Xe.setProperty("--radix-popper-available-width",`${ke}px`),Xe.setProperty("--radix-popper-available-height",`${De}px`),Xe.setProperty("--radix-popper-anchor-width",`${Ie}px`),Xe.setProperty("--radix-popper-anchor-height",`${Te}px`)}}),C&&dse({element:C,padding:o}),Bse({arrowWidth:P,arrowHeight:z}),g&&hse({strategy:"referenceHidden",...G})]}),[se,q]=GV(Y),X=zE(_);gh(()=>{re&&(X==null||X())},[re,X]);const oe=(de=J.arrow)==null?void 0:de.x,ue=(ve=J.arrow)==null?void 0:ve.y,Z=((We=J.arrow)==null?void 0:We.centerOffset)!==0,[ce,me]=F.useState();return gh(()=>{w&&me(window.getComputedStyle(w).zIndex)},[w]),Pt.jsx("div",{ref:K.setFloating,"data-radix-popper-content-wrapper":"",style:{...ee,transform:re?ee.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ce,"--radix-popper-transform-origin":[(ze=J.transformOrigin)==null?void 0:ze.x,(qe=J.transformOrigin)==null?void 0:qe.y].join(" "),...((_e=J.hide)==null?void 0:_e.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:Pt.jsx(Nse,{scope:t,placedSide:se,onArrowChange:N,arrowX:oe,arrowY:ue,shouldHideArrow:Z,children:Pt.jsx(NV.div,{"data-side":se,"data-align":q,...S,ref:M,style:{...S.style,animation:re?void 0:"none"}})})})});FV.displayName=b3;var HV="PopperArrow",Lse={top:"bottom",right:"left",bottom:"top",left:"right"},VV=F.forwardRef(function(e,t){const{__scopePopper:i,...r}=e,a=Pse(HV,i),s=Lse[a.placedSide];return Pt.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:Pt.jsx(Ese,{...r,ref:t,style:{...r.style,display:"block"}})})});VV.displayName=HV;function Ise(n){return n!==null}var Bse=n=>({name:"transformOrigin",options:n,fn(e){var x,w,T;const{placement:t,rects:i,middlewareData:r}=e,s=((x=r.arrow)==null?void 0:x.centerOffset)!==0,o=s?0:n.arrowWidth,l=s?0:n.arrowHeight,[u,h]=GV(t),p={start:"0%",center:"50%",end:"100%"}[h],g=(((w=r.arrow)==null?void 0:w.x)??0)+o/2,y=(((T=r.arrow)==null?void 0:T.y)??0)+l/2;let _="",S="";return u==="bottom"?(_=s?p:`${g}px`,S=`${-l}px`):u==="top"?(_=s?p:`${g}px`,S=`${i.floating.height+l}px`):u==="right"?(_=`${-l}px`,S=s?p:`${y}px`):u==="left"&&(_=`${i.floating.width+l}px`,S=s?p:`${y}px`),{data:{x:_,y:S}}}});function GV(n){const[e,t="center"]=n.split("-");return[e,t]}var zse=BV,kse=kV,Fse=FV,Hse=VV;function Vse(n){const e=Gse(n),t=F.forwardRef((i,r)=>{const{children:a,...s}=i,o=F.Children.toArray(a),l=o.find(qse);if(l){const u=l.props.children,h=o.map(p=>p===l?F.Children.count(u)>1?F.Children.only(null):F.isValidElement(u)?u.props.children:null:p);return Pt.jsx(e,{...s,ref:r,children:F.isValidElement(u)?F.cloneElement(u,void 0,h):null})}return Pt.jsx(e,{...s,ref:r,children:a})});return t.displayName=`${n}.Slot`,t}function Gse(n){const e=F.forwardRef((t,i)=>{const{children:r,...a}=t;if(F.isValidElement(r)){const s=Yse(r),o=Wse(a,r.props);return r.type!==F.Fragment&&(o.ref=i?wp(i,s):s),F.cloneElement(r,o)}return F.Children.count(r)>1?F.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var jV=Symbol("radix.slottable");function jse(n){const e=({children:t})=>Pt.jsx(Pt.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=jV,e}function qse(n){return F.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===jV}function Wse(n,e){const t={...e};for(const i in e){const r=n[i],a=e[i];/^on[A-Z]/.test(i)?r&&a?t[i]=(...o)=>{const l=a(...o);return r(...o),l}:r&&(t[i]=r):i==="style"?t[i]={...r,...a}:i==="className"&&(t[i]=[r,a].filter(Boolean).join(" "))}return{...n,...t}}function Yse(n){var i,r;let e=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var $se=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Xse=$se.reduce((n,e)=>{const t=Vse(`Primitive.${e}`),i=F.forwardRef((r,a)=>{const{asChild:s,...o}=r,l=s?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),Pt.jsx(l,{...o,ref:a})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{});function Kse(n,e){return F.useReducer((t,i)=>e[t][i]??t,n)}var qV=n=>{const{present:e,children:t}=n,i=Zse(e),r=typeof t=="function"?t({present:i.isPresent}):F.Children.only(t),a=Tp(i.ref,Qse(r));return typeof t=="function"||i.isPresent?F.cloneElement(r,{ref:a}):null};qV.displayName="Presence";function Zse(n){const[e,t]=F.useState(),i=F.useRef(null),r=F.useRef(n),a=F.useRef("none"),s=n?"mounted":"unmounted",[o,l]=Kse(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return F.useEffect(()=>{const u=tx(i.current);a.current=o==="mounted"?u:"none"},[o]),gh(()=>{const u=i.current,h=r.current;if(h!==n){const g=a.current,y=tx(u);n?l("MOUNT"):y==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(h&&g!==y?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,l]),gh(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,p=y=>{const S=tx(i.current).includes(CSS.escape(y.animationName));if(y.target===e&&S&&(l("ANIMATION_END"),!r.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},g=y=>{y.target===e&&(a.current=tx(i.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:F.useCallback(u=>{i.current=u?getComputedStyle(u):null,t(u)},[])}}function tx(n){return(n==null?void 0:n.animationName)||"none"}function Qse(n){var i,r;let e=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Jse=tD[" useInsertionEffect ".trim().toString()]||gh;function eoe({prop:n,defaultProp:e,onChange:t=()=>{},caller:i}){const[r,a,s]=toe({defaultProp:e,onChange:t}),o=n!==void 0,l=o?n:r;{const h=F.useRef(n!==void 0);F.useEffect(()=>{const p=h.current;p!==o&&console.warn(`${i} is changing from ${p?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=o},[o,i])}const u=F.useCallback(h=>{var p;if(o){const g=noe(h)?h(n):h;g!==n&&((p=s.current)==null||p.call(s,g))}else a(h)},[o,n,a,s]);return[l,u]}function toe({defaultProp:n,onChange:e}){const[t,i]=F.useState(n),r=F.useRef(t),a=F.useRef(e);return Jse(()=>{a.current=e},[e]),F.useEffect(()=>{var s;r.current!==t&&((s=a.current)==null||s.call(a,t),r.current=t)},[t,r]),[t,i,a]}function noe(n){return typeof n=="function"}function ioe(n){const e=roe(n),t=F.forwardRef((i,r)=>{const{children:a,...s}=i,o=F.Children.toArray(a),l=o.find(soe);if(l){const u=l.props.children,h=o.map(p=>p===l?F.Children.count(u)>1?F.Children.only(null):F.isValidElement(u)?u.props.children:null:p);return Pt.jsx(e,{...s,ref:r,children:F.isValidElement(u)?F.cloneElement(u,void 0,h):null})}return Pt.jsx(e,{...s,ref:r,children:a})});return t.displayName=`${n}.Slot`,t}function roe(n){const e=F.forwardRef((t,i)=>{const{children:r,...a}=t;if(F.isValidElement(r)){const s=loe(r),o=ooe(a,r.props);return r.type!==F.Fragment&&(o.ref=i?wp(i,s):s),F.cloneElement(r,o)}return F.Children.count(r)>1?F.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var aoe=Symbol("radix.slottable");function soe(n){return F.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===aoe}function ooe(n,e){const t={...e};for(const i in e){const r=n[i],a=e[i];/^on[A-Z]/.test(i)?r&&a?t[i]=(...o)=>{const l=a(...o);return r(...o),l}:r&&(t[i]=r):i==="style"?t[i]={...r,...a}:i==="className"&&(t[i]=[r,a].filter(Boolean).join(" "))}return{...n,...t}}function loe(n){var i,r;let e=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var coe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],uoe=coe.reduce((n,e)=>{const t=ioe(`Primitive.${e}`),i=F.forwardRef((r,a)=>{const{asChild:s,...o}=r,l=s?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),Pt.jsx(l,{...o,ref:a})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{}),foe=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),hoe="VisuallyHidden",WV=F.forwardRef((n,e)=>Pt.jsx(uoe.span,{...n,ref:e,style:{...foe,...n.style}}));WV.displayName=hoe;var doe=WV,[GE]=gV("Tooltip",[LV]),jE=LV(),YV="TooltipProvider",poe=700,MO="tooltip.open",[moe,S3]=GE(YV),$V=n=>{const{__scopeTooltip:e,delayDuration:t=poe,skipDelayDuration:i=300,disableHoverableContent:r=!1,children:a}=n,s=F.useRef(!0),o=F.useRef(!1),l=F.useRef(0);return F.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),Pt.jsx(moe,{scope:e,isOpenDelayedRef:s,delayDuration:t,onOpen:F.useCallback(()=>{window.clearTimeout(l.current),s.current=!1},[]),onClose:F.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.current=!0,i)},[i]),isPointerInTransitRef:o,onPointerInTransitChange:F.useCallback(u=>{o.current=u},[]),disableHoverableContent:r,children:a})};$V.displayName=YV;var N0="Tooltip",[goe,qE]=GE(N0),XV=n=>{const{__scopeTooltip:e,children:t,open:i,defaultOpen:r,onOpenChange:a,disableHoverableContent:s,delayDuration:o}=n,l=S3(N0,n.__scopeTooltip),u=jE(e),[h,p]=F.useState(null),g=iae(),y=F.useRef(0),_=s??l.disableHoverableContent,S=o??l.delayDuration,x=F.useRef(!1),[w,T]=eoe({prop:i,defaultProp:r??!1,onChange:P=>{P?(l.onOpen(),document.dispatchEvent(new CustomEvent(MO))):l.onClose(),a==null||a(P)},caller:N0}),M=F.useMemo(()=>w?x.current?"delayed-open":"instant-open":"closed",[w]),C=F.useCallback(()=>{window.clearTimeout(y.current),y.current=0,x.current=!1,T(!0)},[T]),N=F.useCallback(()=>{window.clearTimeout(y.current),y.current=0,T(!1)},[T]),D=F.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{x.current=!0,T(!0),y.current=0},S)},[S,T]);return F.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),Pt.jsx(zse,{...u,children:Pt.jsx(goe,{scope:e,contentId:g,open:w,stateAttribute:M,trigger:h,onTriggerChange:p,onTriggerEnter:F.useCallback(()=>{l.isOpenDelayedRef.current?D():C()},[l.isOpenDelayedRef,D,C]),onTriggerLeave:F.useCallback(()=>{_?N():(window.clearTimeout(y.current),y.current=0)},[N,_]),onOpen:C,onClose:N,disableHoverableContent:_,children:t})})};XV.displayName=N0;var AO="TooltipTrigger",KV=F.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,r=qE(AO,t),a=S3(AO,t),s=jE(t),o=F.useRef(null),l=Tp(e,o,r.onTriggerChange),u=F.useRef(!1),h=F.useRef(!1),p=F.useCallback(()=>u.current=!1,[]);return F.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),Pt.jsx(kse,{asChild:!0,...s,children:Pt.jsx(Xse.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...i,ref:l,onPointerMove:Gu(n.onPointerMove,g=>{g.pointerType!=="touch"&&!h.current&&!a.isPointerInTransitRef.current&&(r.onTriggerEnter(),h.current=!0)}),onPointerLeave:Gu(n.onPointerLeave,()=>{r.onTriggerLeave(),h.current=!1}),onPointerDown:Gu(n.onPointerDown,()=>{r.open&&r.onClose(),u.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:Gu(n.onFocus,()=>{u.current||r.onOpen()}),onBlur:Gu(n.onBlur,r.onClose),onClick:Gu(n.onClick,r.onClose)})})});KV.displayName=AO;var voe="TooltipPortal",[dbe,yoe]=GE(voe,{forceMount:void 0}),Tg="TooltipContent",ZV=F.forwardRef((n,e)=>{const t=yoe(Tg,n.__scopeTooltip),{forceMount:i=t.forceMount,side:r="top",...a}=n,s=qE(Tg,n.__scopeTooltip);return Pt.jsx(qV,{present:i||s.open,children:s.disableHoverableContent?Pt.jsx(QV,{side:r,...a,ref:e}):Pt.jsx(_oe,{side:r,...a,ref:e})})}),_oe=F.forwardRef((n,e)=>{const t=qE(Tg,n.__scopeTooltip),i=S3(Tg,n.__scopeTooltip),r=F.useRef(null),a=Tp(e,r),[s,o]=F.useState(null),{trigger:l,onClose:u}=t,h=r.current,{onPointerInTransitChange:p}=i,g=F.useCallback(()=>{o(null),p(!1)},[p]),y=F.useCallback((_,S)=>{const x=_.currentTarget,w={x:_.clientX,y:_.clientY},T=Eoe(w,x.getBoundingClientRect()),M=woe(w,T),C=Toe(S.getBoundingClientRect()),N=Aoe([...M,...C]);o(N),p(!0)},[p]);return F.useEffect(()=>()=>g(),[g]),F.useEffect(()=>{if(l&&h){const _=x=>y(x,h),S=x=>y(x,l);return l.addEventListener("pointerleave",_),h.addEventListener("pointerleave",S),()=>{l.removeEventListener("pointerleave",_),h.removeEventListener("pointerleave",S)}}},[l,h,y,g]),F.useEffect(()=>{if(s){const _=S=>{const x=S.target,w={x:S.clientX,y:S.clientY},T=(l==null?void 0:l.contains(x))||(h==null?void 0:h.contains(x)),M=!Moe(w,s);T?g():M&&(g(),u())};return document.addEventListener("pointermove",_),()=>document.removeEventListener("pointermove",_)}},[l,h,s,u,g]),Pt.jsx(QV,{...n,ref:a})}),[boe,Soe]=GE(N0,{isInside:!1}),xoe=jse("TooltipContent"),QV=F.forwardRef((n,e)=>{const{__scopeTooltip:t,children:i,"aria-label":r,onEscapeKeyDown:a,onPointerDownOutside:s,...o}=n,l=qE(Tg,t),u=jE(t),{onClose:h}=l;return F.useEffect(()=>(document.addEventListener(MO,h),()=>document.removeEventListener(MO,h)),[h]),F.useEffect(()=>{if(l.trigger){const p=g=>{const y=g.target;y!=null&&y.contains(l.trigger)&&h()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[l.trigger,h]),Pt.jsx(_V,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:p=>p.preventDefault(),onDismiss:h,children:Pt.jsxs(Fse,{"data-state":l.stateAttribute,...u,...o,ref:e,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[Pt.jsx(xoe,{children:i}),Pt.jsx(boe,{scope:t,isInside:!0,children:Pt.jsx(doe,{id:l.contentId,role:"tooltip",children:r||i})})]})})});ZV.displayName=Tg;var JV="TooltipArrow",eG=F.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,r=jE(t);return Soe(JV,t).isInside?null:Pt.jsx(Hse,{...r,...i,ref:e})});eG.displayName=JV;function Eoe(n,e){const t=Math.abs(e.top-n.y),i=Math.abs(e.bottom-n.y),r=Math.abs(e.right-n.x),a=Math.abs(e.left-n.x);switch(Math.min(t,i,r,a)){case a:return"left";case r:return"right";case t:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function woe(n,e,t=5){const i=[];switch(e){case"top":i.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":i.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":i.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":i.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return i}function Toe(n){const{top:e,right:t,bottom:i,left:r}=n;return[{x:r,y:e},{x:t,y:e},{x:t,y:i},{x:r,y:i}]}function Moe(n,e){const{x:t,y:i}=n;let r=!1;for(let a=0,s=e.length-1;a<e.length;s=a++){const o=e[a],l=e[s],u=o.x,h=o.y,p=l.x,g=l.y;h>i!=g>i&&t<(p-u)*(i-h)/(g-h)+u&&(r=!r)}return r}function Aoe(n){const e=n.slice();return e.sort((t,i)=>t.x<i.x?-1:t.x>i.x?1:t.y<i.y?-1:t.y>i.y?1:0),Coe(e)}function Coe(n){if(n.length<=1)return n.slice();const e=[];for(let i=0;i<n.length;i++){const r=n[i];for(;e.length>=2;){const a=e[e.length-1],s=e[e.length-2];if((a.x-s.x)*(r.y-s.y)>=(a.y-s.y)*(r.x-s.x))e.pop();else break}e.push(r)}e.pop();const t=[];for(let i=n.length-1;i>=0;i--){const r=n[i];for(;t.length>=2;){const a=t[t.length-1],s=t[t.length-2];if((a.x-s.x)*(r.y-s.y)>=(a.y-s.y)*(r.x-s.x))t.pop();else break}t.push(r)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var Roe=$V,Ooe=XV,Doe=KV,Uoe=ZV,Noe=eG;function Poe(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function li(n,e){if(n==null)return{};var t,i,r=Poe(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}let Ar=(function(n){return n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY",n})({});const Loe={[Ar.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[Ar.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[Ar.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[Ar.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[Ar.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[Ar.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[Ar.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[Ar.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[Ar.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[Ar.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function tG(n,e,...t){const i=Loe[e],[r,...a]=i(...t);console[n]("LEVA: "+r,...a)}const Wu=tG.bind(null,"warn"),Ioe=tG.bind(null,"log"),Boe=["value"],zoe=["schema"],koe=["value"],nG=[],up={};function LI(n){let{value:e}=n,t=li(n,Boe);for(let i of nG){const r=i(e,t);if(r)return r}}function uf(n,e){let{schema:t}=e,i=li(e,zoe);if(n in up){Wu(Ar.ALREADY_REGISTERED_TYPE,n);return}nG.push((r,a)=>t(r,a)&&n),up[n]=i}function RM(n,e,t,i){const{normalize:r}=up[n];if(r)return r(e,t,i);if(typeof e!="object"||!("value"in e))return{value:e};const{value:a}=e,s=li(e,koe);return{value:a,settings:s}}function Foe(n,e,t,i,r,a){const{sanitize:s}=up[n];return s?s(e,t,i,r,a):e}function II(n,e,t){const{format:i}=up[n];return i?i(e,t):e}function Hoe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Voe(n){var e=Hoe(n,"string");return typeof e=="symbol"?e:e+""}function Goe(n,e,t){return(e=Voe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function BI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function un(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?BI(Object(t),!0).forEach(function(i){Goe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):BI(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const _h=(n,e,t)=>n>t?t:n<e?e:n,joe=n=>{if(n===""||typeof n=="number")return n;try{const e=tg(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},qoe=Math.log(10);function zI(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/qoe)+1,i=Math.floor(Math.log10(Math.abs(n))),r=Math.pow(10,i-t);return Math.max(r,.001)}const N1=(n,e,t)=>t===e?0:(_h(n,e,t)-e)/(t-e),P1=(n,e,t)=>n*(t-e)+e,Woe=()=>"_"+Math.random().toString(36).substr(2,9),kI=/\(([^\(\)]+)\)/,FI=/(-?\d+(?:\.\d+)?)\s*\^\s*(-?\d+(?:\.\d+)?)/,HI=/(-?\d+(?:\.\d+)?)\s*([*/])\s*(-?\d+(?:\.\d+)?)/,VI=/(-?\d+(?:\.\d+)?)\s*([+-])\s*(-?\d+(?:\.\d+)?)/;function tg(n){return n=n.replace(/\s+/g,""),kI.test(n)?tg(n.replace(kI,(e,t)=>tg(t).toString())):FI.test(n)?tg(n.replace(FI,(e,t,i)=>Math.pow(Number(t),Number(i)).toString())):HI.test(n)?tg(n.replace(HI,(e,t,i,r)=>i==="*"?(Number(t)*Number(r)).toString():Number(r)===0?(()=>{throw new Error("Division by zero")})():(Number(t)/Number(r)).toString())):VI.test(n)?tg(n.replace(VI,(e,t,i,r)=>i==="+"?(Number(t)+Number(r)).toString():(Number(t)-Number(r)).toString())):Number(n)}function Yoe(n,e){const t=un({},n);return e.forEach(i=>i in n&&delete t[i]),t}function $oe(n,e){return n.reduce((t,i,r)=>Object.assign(t,{[e[r]]:i}),{})}function iG(n){return Object.prototype.toString.call(n)==="[object Object]"}const Xoe=n=>iG(n)&&Object.keys(n).length===0;let dh=(function(n){return n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER",n})({}),ff=(function(n){return n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D",n})({});const Koe=["type","__customInput"],Zoe=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],Qoe=["type"];function rG(n,e,t={},i){var r,a;if(typeof n!="object"||Array.isArray(n))return{type:i,input:n,options:un({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in n){const{type:N,__customInput:D}=n,P=li(n,Koe);return rG(D,e,P,N)}const{render:s,label:o,optional:l,order:u=0,disabled:h,hint:p,onChange:g,onEditStart:y,onEditEnd:_,transient:S}=n,x=li(n,Zoe),w=un({render:s,key:e,label:o??e,hint:p,transient:S??!!g,onEditStart:y,onEditEnd:_,disabled:h,optional:l,order:u},t);let{type:T}=x,M=li(x,Qoe);if(T=i??T,T in dh)return{type:T,input:M,options:w};let C;return i&&iG(M)&&"value"in M?C=M.value:C=Xoe(M)?void 0:M,{type:T,input:C,options:un(un({},w),{},{onChange:g,optional:(r=w.optional)!==null&&r!==void 0?r:!1,disabled:(a=w.disabled)!==null&&a!==void 0?a:!1})}}function Joe(n,e,t,i){const r=rG(n,e),{type:a,input:s,options:o}=r;if(a)return a in dh?r:{type:a,input:RM(a,s,t,i),options:o};let l=LI(s);return l?{type:l,input:RM(l,s,t,i),options:o}:(l=LI({value:s}),l?{type:l,input:RM(l,{value:s},t,i),options:o}:!1)}function GI(n,e,t,i,r){const{value:a,type:s,settings:o}=n;n.value=aG({type:s,value:a,settings:o},e,t,i),n.fromPanel=r}const ele=function(e,t,i){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=i};function aG({type:n,value:e,settings:t},i,r,a){const s=n!=="SELECT"&&typeof i=="function"?i(e):i;let o;try{o=Foe(n,s,t,e,r,a)}catch(l){throw new ele(`The value \`${i}\` did not result in a correct value.`,e,l)}return R0(o,e)?e:o}const sG=(n,e,t=!1)=>{let i=0;return function(){const r=arguments,a=t&&!i,s=()=>n.apply(this,r);window.clearTimeout(i),i=window.setTimeout(s,e),a&&s()}},oG=n=>n.shiftKey?5:n.altKey?1/5:1,tle=["value"],nle=["min","max"],ile=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},lG=(n,{min:e=-1/0,max:t=1/0,suffix:i})=>{const r=parseFloat(n);if(n===""||isNaN(r))throw Error("Invalid number");const a=_h(r,e,t);return i?a+i:a},rle=(n,{pad:e=0,suffix:t})=>{const i=parseFloat(n).toFixed(e);return t?i+t:i},cG=n=>{let{value:e}=n,t=li(n,tle);const{min:i=-1/0,max:r=1/0}=t,a=li(t,nle);let s=parseFloat(e);const o=typeof e=="string"?e.substring((""+s).length):void 0;s=_h(s,i,r);let l=t.step;l||(Number.isFinite(i)?Number.isFinite(r)?l=+(Math.abs(r-i)/100).toPrecision(1):l=+(Math.abs(s-i)/100).toPrecision(1):Number.isFinite(r)&&(l=+(Math.abs(r-s)/100).toPrecision(1)));const u=l?zI(l)*10:zI(s);l=l||u/10;const h=Math.round(_h(Math.log10(1/u),0,2));return{value:o?s+o:s,settings:un({initialValue:s,step:l,pad:h,min:i,max:r,suffix:o},a)}},uG=(n,{step:e,initialValue:t})=>{const i=Math.round((n-t)/e);return t+i*e};var fG=Object.freeze({__proto__:null,schema:ile,sanitize:lG,format:rle,normalize:cG,sanitizeStep:uG});function hr(){return hr=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},hr.apply(null,arguments)}const hG=F.createContext({});function Va(){return F.useContext(hG)}const x3=F.createContext(null),dG=F.createContext(null),pG=F.createContext(null);function f_(){return F.useContext(dG)}function ale(){return F.useContext(pG)}const mG=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function nx(n,e){const[t,i]=n.split(" "),r={};return t!=="none"&&(r.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),i&&(r.backgroundColor=i),r}const My={$inputStyle:()=>n=>nx(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>nx(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>nx(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>nx(n,{key:"$active",borderColor:"$accent1",inset:!0})},h_=Ote({prefix:"leva",theme:mG(),utils:un(un({},My),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":My.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":My.$focusStyle()(n)}),$hover:n=>({"&:hover":My.$hoverStyle()(n)}),$active:n=>({"&:active":My.$activeStyle()(n)})})}),Gt=h_.styled;h_.css;const sle=h_.createTheme,ole=h_.globalCss;h_.keyframes;const lle=ole({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function cle(n){const e=mG();if(!n)return{theme:e,className:""};Object.keys(n).forEach(i=>{Object.assign(e[i],n[i])});const t=sle(e);return{theme:e,className:t.className}}function Ku(n,e){const{theme:t}=F.useContext(x3);if(!(n in t)||!(e in t[n]))return Wu(Ar.THEME_ERROR,n,e),"";let i=e;for(;;){let r=t[n][i];if(typeof r=="string"&&r.charAt(0)==="$")i=r.substr(1);else return r}}const gG=Gt("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),vG=Gt("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${gG}`]:{paddingLeft:0}}),ule=Gt(vG,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),fle=Gt("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),hle=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],dle=["onUpdate"];function E3(n){let{innerLabel:e,value:t,onUpdate:i,onChange:r,onKeyDown:a,type:s,id:o,inputType:l="text",rows:u=0}=n,h=li(n,hle);const{id:p,emitOnEditStart:g,emitOnEditEnd:y,disabled:_}=Va(),S=o||p,x=F.useRef(null),w=u>0,T=w?"textarea":"input",M=F.useCallback(D=>P=>{const z=P.currentTarget.value;D(z)},[]);B.useEffect(()=>{const D=x.current,P=M(z=>{i(z),y()});return D==null||D.addEventListener("blur",P),()=>D==null?void 0:D.removeEventListener("blur",P)},[M,i,y]);const C=F.useCallback(D=>{D.key==="Enter"&&M(i)(D)},[M,i]),N=Object.assign({as:T},w?{rows:u}:{},h);return B.createElement(fle,{textArea:w},e&&typeof e=="string"?B.createElement(vG,null,e):e,B.createElement(gG,hr({levaType:s,ref:x,id:S,type:l,autoComplete:"off",spellCheck:"false",value:t,onChange:M(r),onFocus:()=>g(),onKeyPress:C,onKeyDown:a,disabled:_},N)))}function ple(n){let{onUpdate:e}=n,t=li(n,dle);const i=F.useCallback(a=>e(joe(a)),[e]),r=F.useCallback(a=>{const s=a.key==="ArrowUp"?1:a.key==="ArrowDown"?-1:0;if(s){a.preventDefault();const o=a.altKey?.1:a.shiftKey?10:1;e(l=>parseFloat(l)+s*o)}},[e]);return B.createElement(E3,hr({},t,{onUpdate:i,onKeyDown:r,type:"number"}))}const L1=Gt("div",{}),CO=Gt("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),mle=Gt("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${CO}::after`]:{opacity:.6},[`${L1}:hover > & + ${CO}::after`]:{opacity:.6},[`${L1}:hover > & > svg`]:{opacity:1}}),yG=Gt("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${L1}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),_G=Gt("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${yG} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),bG=Gt(_G,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),gle=Gt("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),vle=Gt("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),RO=Gt("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),yle=Gt("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${RO}`]:{pointerEvents:"auto"}}}}}),SG=Gt("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),_le=Gt("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),ble=Gt(Noe,{fill:"$toolTipBackground"});function w3({children:n,container:e=(t=>globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body)()}){const{className:t}=F.useContext(x3);return B.createElement(Nre,{className:t,container:e},n)}const Sle=["align"];function xle(){const{id:n,disable:e,disabled:t}=Va();return B.createElement(B.Fragment,null,B.createElement(vle,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),B.createElement("label",{htmlFor:n+"__disable"}))}function Ele(n){const{id:e,optional:t,hint:i}=Va(),r=n.htmlFor||e||void 0,a=!i&&typeof n.children=="string"?n.children:void 0;return B.createElement(B.Fragment,null,t&&B.createElement(xle,null),i!==void 0?B.createElement(Ooe,null,B.createElement(Doe,{asChild:!0},B.createElement(RO,hr({htmlFor:r},n))),B.createElement(Uoe,{side:"top",sideOffset:2},B.createElement(_le,null,i,B.createElement(ble,null)))):B.createElement(RO,hr({htmlFor:r,title:a},n)))}function Kl(n){let{align:e}=n,t=li(n,Sle);const{value:i,label:r,key:a,disabled:s}=Va(),{hideCopyButton:o}=ale(),l=!o&&a!==void 0,[u,h]=F.useState(!1),p=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[a]:i??""})),h(!0)}catch{Wu(Ar.CLIPBOARD_ERROR,{[a]:i})}};return B.createElement(gle,{align:e,onPointerLeave:()=>h(!1)},B.createElement(Ele,t),l&&!s&&B.createElement("div",{title:`Click to copy ${typeof r=="string"?r:a} value`},u?B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},B.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),B.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):B.createElement("svg",{onClick:p,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},B.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),B.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const wle=["toggled"],Tle=Gt("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function T3(n){let{toggled:e}=n,t=li(n,wle);return B.createElement(Tle,hr({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),B.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const Mle=["input"];function Vo(n){let{input:e}=n,t=li(n,Mle);return e?B.createElement(bG,t):B.createElement(_G,t)}function xG({value:n,type:e,settings:t,setValue:i}){const[r,a]=F.useState(II(e,n,t)),s=F.useRef(n),o=F.useRef(t);o.current=t;const l=F.useCallback(h=>a(II(e,h,o.current)),[e]),u=F.useCallback(h=>{try{i(h)}catch(p){const{type:g,previousValue:y}=p;if(g!=="LEVA_ERROR")throw p;l(y)}},[l,i]);return F.useEffect(()=>{R0(n,s.current)||l(n),s.current=n},[n,l]),{displayValue:r,onChange:a,onUpdate:u}}function d_(n,e){const{emitOnEditStart:t,emitOnEditEnd:i}=Va();return YJ(r=>{r.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const a=n(r);return r.last&&(document.body.classList.remove("leva__panel__dragged"),i==null||i()),a},e)}function Ale(n){const e=F.useRef(null),t=F.useRef(null),i=F.useRef(!1);return F.useEffect(()=>{const r=sG(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",r),i.current||(r(),i.current=!0),()=>window.removeEventListener("resize",r)},[n]),F.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function EG(){const n=F.useRef(null),e=F.useRef({x:0,y:0}),t=F.useCallback(i=>{Object.assign(e.current,i),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const Cle=["__refCount"],OM=(n,e)=>{if(!n[e])return null;const t=n[e];return li(t,Cle)};function Rle(n){const e=f_(),[t,i]=F.useState(OM(e.getData(),n)),r=F.useCallback(u=>e.setValueAtPath(n,u,!0),[n,e]),a=F.useCallback(u=>e.setSettingsAtPath(n,u),[n,e]),s=F.useCallback(u=>e.disableInputAtPath(n,u),[n,e]),o=F.useCallback(()=>e.emitOnEditStart(n),[n,e]),l=F.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return F.useEffect(()=>{i(OM(e.getData(),n));const u=e.useStore.subscribe(h=>OM(h.data,n),i,{equalityFn:fV});return()=>u()},[e,n]),[t,{set:r,setSettings:a,disable:s,storeId:e.storeId,emitOnEditStart:o,emitOnEditEnd:l}]}const Ole=Gt("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),wG=Gt("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),OO=Gt("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),TG=Gt("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),MG=Gt("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function Dle({value:n,min:e,max:t,onDrag:i,step:r,initialValue:a}){const s=F.useRef(null),o=F.useRef(null),l=F.useRef(0),u=Ku("sizes","scrubberWidth"),h=d_(({event:g,first:y,xy:[_],movement:[S],memo:x})=>{if(y){const{width:T,left:M}=s.current.getBoundingClientRect();l.current=T-parseFloat(u),x=(g==null?void 0:g.target)===o.current?n:P1((_-M)/T,e,t)}const w=x+P1(S/l.current,0,t-e);return i(uG(w,{step:r,initialValue:a})),x}),p=N1(n,e,t);return B.createElement(TG,hr({ref:s},h()),B.createElement(wG,null,B.createElement(MG,{style:{left:0,right:`${(1-p)*100}%`}})),B.createElement(OO,{ref:o,style:{left:`calc(${p} * (100% - ${u}))`}}))}const Ule=B.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:i})=>{const[r,a]=F.useState(!1),s=d_(({active:o,delta:[l],event:u,memo:h=0,first:p,last:g,target:y})=>(p&&y.requestPointerLock(),g&&document.exitPointerLock(),a(o),h+=l/2,Math.abs(h)>=1&&(e(_=>parseFloat(_)+Math.floor(h)*t*oG(u)),h=0),h));return B.createElement(ule,hr({dragging:r,title:n.length>1?n:""},s()),n.slice(0,i))});function AG({label:n,id:e,displayValue:t,onUpdate:i,onChange:r,settings:a,innerLabelTrim:s=1}){const o=s>0&&B.createElement(Ule,{label:n,step:a.step,onUpdate:i,innerLabelTrim:s});return B.createElement(ple,{id:e,value:String(t),onUpdate:i,onChange:r,innerLabel:o})}function Nle(){const n=Va(),{label:e,value:t,onUpdate:i,settings:r,id:a}=n,{min:s,max:o}=r,l=o!==1/0&&s!==-1/0;return B.createElement(Vo,{input:!0},B.createElement(Kl,null,e),B.createElement(Ole,{hasRange:l},l&&B.createElement(Dle,hr({value:parseFloat(t),onDrag:i},r)),B.createElement(AG,hr({},n,{id:a,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:Ple}=fG,Lle=li(fG,["sanitizeStep"]);var Ile=un({component:Nle},Lle);const Ble=(n,e)=>Hs().schema({options:Hs().passesAnyOf(Hs().object(),Hs().array())}).test(e),zle=(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},kle=(n,{values:e})=>e.indexOf(n),Fle=n=>{let{value:e,options:t}=n,i,r;return Array.isArray(t)?(r=t,i=t.map(a=>String(a))):(r=Object.values(t),i=Object.keys(t)),"value"in n?r.includes(e)||(i.unshift(String(e)),r.unshift(e)):e=r[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:i,values:r}}};var Hle=Object.freeze({__proto__:null,schema:Ble,sanitize:zle,format:kle,normalize:Fle});const Vle=Gt("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),DO=Gt("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),Gle=Gt("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${DO}:focus + &`]:{$focusStyle:""},[`${DO}:hover + &`]:{$hoverStyle:""}});function jle({displayValue:n,value:e,onUpdate:t,id:i,settings:r,disabled:a}){const{keys:s,values:o}=r,l=F.useRef();return e===o[n]&&(l.current=s[n]),B.createElement(Vle,null,B.createElement(DO,{id:i,value:n,onChange:u=>t(o[Number(u.currentTarget.value)]),disabled:a},s.map((u,h)=>B.createElement("option",{key:u,value:h},u))),B.createElement(Gle,null,l.current),B.createElement(T3,{toggled:!0}))}function qle(){const{label:n,value:e,displayValue:t,onUpdate:i,id:r,disabled:a,settings:s}=Va();return B.createElement(Vo,{input:!0},B.createElement(Kl,null,n),B.createElement(jle,{id:r,value:e,displayValue:t,onUpdate:i,settings:s,disabled:a}))}var Wle=un({component:qle},Hle);const Yle=n=>Hs().string().test(n),$le=n=>{if(typeof n!="string")throw Error("Invalid string");return n},Xle=({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var Kle=Object.freeze({__proto__:null,schema:Yle,sanitize:$le,normalize:Xle});const Zle=["displayValue","onUpdate","onChange","editable"],Qle=Gt("div",{whiteSpace:"pre-wrap"});function Jle(n){let{displayValue:e,onUpdate:t,onChange:i,editable:r=!0}=n,a=li(n,Zle);return r?B.createElement(E3,hr({value:e,onUpdate:t,onChange:i},a)):B.createElement(Qle,null,e)}function ece(){const{label:n,settings:e,displayValue:t,onUpdate:i,onChange:r}=Va();return B.createElement(Vo,{input:!0},B.createElement(Kl,null,n),B.createElement(Jle,hr({displayValue:t,onUpdate:i,onChange:r},e)))}var tce=un({component:ece},Kle);const nce=n=>Hs().boolean().test(n),ice=n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n};var rce=Object.freeze({__proto__:null,schema:nce,sanitize:ice});const ace=Gt("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function sce({value:n,onUpdate:e,id:t,disabled:i}){return B.createElement(ace,null,B.createElement("input",{id:t,type:"checkbox",checked:n,onChange:r=>e(r.currentTarget.checked),disabled:i}),B.createElement("label",{htmlFor:t},B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function oce(){const{label:n,value:e,onUpdate:t,disabled:i,id:r}=Va();return B.createElement(Vo,{input:!0},B.createElement(Kl,null,n),B.createElement(sce,{value:e,onUpdate:t,id:r,disabled:i}))}var lce=un({component:oce},rce);const cce=["locked"];function uce({value:n,id:e,valueKey:t,settings:i,onUpdate:r,innerLabelTrim:a}){const s=F.useRef(n[t]);s.current=n[t];const o=F.useCallback(u=>r({[t]:aG({type:"NUMBER",value:s.current,settings:i},u)}),[r,i,t]),l=xG({type:"NUMBER",value:n[t],settings:i,setValue:o});return B.createElement(AG,{id:e,label:t,value:n[t],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:i,innerLabelTrim:a})}const fce=Gt("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function hce(n){let{locked:e}=n,t=li(n,cce);return B.createElement("svg",hr({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?B.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):B.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function M3({value:n,onUpdate:e,settings:t,innerLabelTrim:i}){const{id:r,setSettings:a}=Va(),{lock:s,locked:o}=t;return B.createElement(fce,{withLock:s},s&&B.createElement(hce,{locked:o,onClick:()=>a({locked:!o})}),Object.keys(n).map((l,u)=>B.createElement(uce,{id:u===0?r:`${r}.${l}`,key:l,valueKey:l,value:n,settings:t[l],onUpdate:e,innerLabelTrim:i})))}const CG=(n,e)=>{const t={};let i=0,r=1/0;Object.entries(n).forEach(([a,s])=>{t[a]=cG(un({value:s},e[a])).settings,i=Math.max(i,t[a].step),r=Math.min(r,t[a].pad)});for(let a in t){const{step:s,min:o,max:l}=e[a]||{};!isFinite(s)&&(!isFinite(o)||!isFinite(l))&&(t[a].step=i,t[a].pad=r)}return t},dce=["lock"],pce=["value"];function mce(n){const e=Hs().array().length(n).every.number(),t=i=>{if(!i||typeof i!="object")return!1;const r=Object.values(i);return r.length===n&&r.every(a=>isFinite(a))};return i=>e.test(i)||t(i)}function gce(n){return Array.isArray(n)?"array":"object"}function n0(n,e,t){return gce(n)===e?n:e==="array"?Object.values(n):$oe(n,t)}const vce=(n,e,t)=>{const i=n0(n,"object",e.keys);for(let s in i)i[s]=lG(i[s],e[s]);const r=Object.keys(i);let a={};if(r.length===e.keys.length)a=i;else{const s=n0(t,"object",e.keys);if(r.length===1&&e.locked){const o=r[0],l=i[o],u=s[o],h=u!==0?l/u:1;for(let p in s)p===o?a[o]=l:a[p]=s[p]*h}else a=un(un({},s),i)}return n0(a,e.format,e.keys)},yce=(n,e)=>n0(n,"object",e.keys),_ce=n=>!!n&&("step"in n||"min"in n||"max"in n);function bce(n,e,t=[]){const{lock:i=!1}=e,r=li(e,dce),a=Array.isArray(n)?"array":"object",s=a==="object"?Object.keys(n):t,o=n0(n,"object",s),l=_ce(r)?s.reduce((h,p)=>Object.assign(h,{[p]:r}),{}):r,u=CG(o,l);return{value:a==="array"?n:o,settings:un(un({},u),{},{format:a,keys:s,lock:i,locked:!1})}}function RG(n){return{schema:mce(n.length),normalize:e=>{let{value:t}=e,i=li(e,pce);return bce(t,i,n)},format:(e,t)=>yce(e,t),sanitize:(e,t,i)=>vce(e,t,i)}}var Sce={grad:.9,turn:360,rad:360/(2*Math.PI)},Fu=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},ea=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},zo=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},OG=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},jI=function(n){return{r:zo(n.r,0,255),g:zo(n.g,0,255),b:zo(n.b,0,255),a:zo(n.a)}},DM=function(n){return{r:ea(n.r),g:ea(n.g),b:ea(n.b),a:ea(n.a,3)}},xce=/^#([0-9a-f]{3,8})$/i,ix=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},DG=function(n){var e=n.r,t=n.g,i=n.b,r=n.a,a=Math.max(e,t,i),s=a-Math.min(e,t,i),o=s?a===e?(t-i)/s:a===t?2+(i-e)/s:4+(e-t)/s:0;return{h:60*(o<0?o+6:o),s:a?s/a*100:0,v:a/255*100,a:r}},UG=function(n){var e=n.h,t=n.s,i=n.v,r=n.a;e=e/360*6,t/=100,i/=100;var a=Math.floor(e),s=i*(1-t),o=i*(1-(e-a)*t),l=i*(1-(1-e+a)*t),u=a%6;return{r:255*[i,o,s,s,l,i][u],g:255*[l,i,i,o,s,s][u],b:255*[s,s,l,i,i,o][u],a:r}},qI=function(n){return{h:OG(n.h),s:zo(n.s,0,100),l:zo(n.l,0,100),a:zo(n.a)}},WI=function(n){return{h:ea(n.h),s:ea(n.s),l:ea(n.l),a:ea(n.a,3)}},YI=function(n){return UG((t=(e=n).s,{h:e.h,s:(t*=((i=e.l)<50?i:100-i)/100)>0?2*t/(i+t)*100:0,v:i+t,a:e.a}));var e,t,i},i0=function(n){return{h:(e=DG(n)).h,s:(r=(200-(t=e.s))*(i=e.v)/100)>0&&r<200?t*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,t,i,r},Ece=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,wce=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Tce=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Mce=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,UO={string:[[function(n){var e=xce.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?ea(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?ea(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=Tce.exec(n)||Mce.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:jI({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=Ece.exec(n)||wce.exec(n);if(!e)return null;var t,i,r=qI({h:(t=e[1],i=e[2],i===void 0&&(i="deg"),Number(t)*(Sce[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return YI(r)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,i=n.b,r=n.a,a=r===void 0?1:r;return Fu(e)&&Fu(t)&&Fu(i)?jI({r:Number(e),g:Number(t),b:Number(i),a:Number(a)}):null},"rgb"],[function(n){var e=n.h,t=n.s,i=n.l,r=n.a,a=r===void 0?1:r;if(!Fu(e)||!Fu(t)||!Fu(i))return null;var s=qI({h:Number(e),s:Number(t),l:Number(i),a:Number(a)});return YI(s)},"hsl"],[function(n){var e=n.h,t=n.s,i=n.v,r=n.a,a=r===void 0?1:r;if(!Fu(e)||!Fu(t)||!Fu(i))return null;var s=(function(o){return{h:OG(o.h),s:zo(o.s,0,100),v:zo(o.v,0,100),a:zo(o.a)}})({h:Number(e),s:Number(t),v:Number(i),a:Number(a)});return UG(s)},"hsv"]]},$I=function(n,e){for(var t=0;t<e.length;t++){var i=e[t][0](n);if(i)return[i,e[t][1]]}return[null,void 0]},NG=function(n){return typeof n=="string"?$I(n.trim(),UO.string):typeof n=="object"&&n!==null?$I(n,UO.object):[null,void 0]},Ace=function(n){return NG(n)[1]},UM=function(n,e){var t=i0(n);return{h:t.h,s:zo(t.s+100*e,0,100),l:t.l,a:t.a}},NM=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},XI=function(n,e){var t=i0(n);return{h:t.h,s:t.s,l:zo(t.l+100*e,0,100),a:t.a}},NO=(function(){function n(e){this.parsed=NG(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return ea(NM(this.rgba),2)},n.prototype.isDark=function(){return NM(this.rgba)<.5},n.prototype.isLight=function(){return NM(this.rgba)>=.5},n.prototype.toHex=function(){return e=DM(this.rgba),t=e.r,i=e.g,r=e.b,s=(a=e.a)<1?ix(ea(255*a)):"","#"+ix(t)+ix(i)+ix(r)+s;var e,t,i,r,a,s},n.prototype.toRgb=function(){return DM(this.rgba)},n.prototype.toRgbString=function(){return e=DM(this.rgba),t=e.r,i=e.g,r=e.b,(a=e.a)<1?"rgba("+t+", "+i+", "+r+", "+a+")":"rgb("+t+", "+i+", "+r+")";var e,t,i,r,a},n.prototype.toHsl=function(){return WI(i0(this.rgba))},n.prototype.toHslString=function(){return e=WI(i0(this.rgba)),t=e.h,i=e.s,r=e.l,(a=e.a)<1?"hsla("+t+", "+i+"%, "+r+"%, "+a+")":"hsl("+t+", "+i+"%, "+r+"%)";var e,t,i,r,a},n.prototype.toHsv=function(){return e=DG(this.rgba),{h:ea(e.h),s:ea(e.s),v:ea(e.v),a:ea(e.a,3)};var e},n.prototype.invert=function(){return os({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),os(UM(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),os(UM(this.rgba,-e))},n.prototype.grayscale=function(){return os(UM(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),os(XI(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),os(XI(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?os({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):ea(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=i0(this.rgba);return typeof e=="number"?os({h:e,s:t.s,l:t.l,a:t.a}):ea(t.h)},n.prototype.isEqual=function(e){return this.toHex()===os(e).toHex()},n})(),os=function(n){return n instanceof NO?n:new NO(n)},KI=[],Cce=function(n){n.forEach(function(e){KI.indexOf(e)<0&&(e(NO,UO),KI.push(e))})};function Rce(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var r in t)i[t[r]]=r;var a={};n.prototype.toName=function(s){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var o,l,u=i[this.toHex()];if(u)return u;if(s!=null&&s.closest){var h=this.toRgb(),p=1/0,g="black";if(!a.length)for(var y in t)a[y]=new n(t[y]).toRgb();for(var _ in t){var S=(o=h,l=a[_],Math.pow(o.r-l.r,2)+Math.pow(o.g-l.g,2)+Math.pow(o.b-l.b,2));S<p&&(p=S,g=_)}return g}},e.string.push([function(s){var o=s.toLowerCase(),l=o==="transparent"?"#0000":t[o];return l?new n(l).toRgb():null},"name"])}function Wg(){return(Wg=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}).apply(this,arguments)}function A3(n,e){if(n==null)return{};var t,i,r={},a=Object.keys(n);for(i=0;i<a.length;i++)e.indexOf(t=a[i])>=0||(r[t]=n[t]);return r}function PO(n){var e=F.useRef(n),t=F.useRef(function(i){e.current&&e.current(i)});return e.current=n,t.current}var Mg=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},r0=function(n){return"touches"in n},LO=function(n){return n&&n.ownerDocument.defaultView||self},ZI=function(n,e,t){var i=n.getBoundingClientRect(),r=r0(e)?(function(a,s){for(var o=0;o<a.length;o++)if(a[o].identifier===s)return a[o];return a[0]})(e.touches,t):e;return{left:Mg((r.pageX-(i.left+LO(n).pageXOffset))/i.width),top:Mg((r.pageY-(i.top+LO(n).pageYOffset))/i.height)}},QI=function(n){!r0(n)&&n.preventDefault()},C3=B.memo(function(n){var e=n.onMove,t=n.onKey,i=A3(n,["onMove","onKey"]),r=F.useRef(null),a=PO(e),s=PO(t),o=F.useRef(null),l=F.useRef(!1),u=F.useMemo(function(){var y=function(x){QI(x),(r0(x)?x.touches.length>0:x.buttons>0)&&r.current?a(ZI(r.current,x,o.current)):S(!1)},_=function(){return S(!1)};function S(x){var w=l.current,T=LO(r.current),M=x?T.addEventListener:T.removeEventListener;M(w?"touchmove":"mousemove",y),M(w?"touchend":"mouseup",_)}return[function(x){var w=x.nativeEvent,T=r.current;if(T&&(QI(w),!(function(C,N){return N&&!r0(C)})(w,l.current)&&T)){if(r0(w)){l.current=!0;var M=w.changedTouches||[];M.length&&(o.current=M[0].identifier)}T.focus(),a(ZI(T,w,o.current)),S(!0)}},function(x){var w=x.which||x.keyCode;w<37||w>40||(x.preventDefault(),s({left:w===39?.05:w===37?-.05:0,top:w===40?.05:w===38?-.05:0}))},S]},[s,a]),h=u[0],p=u[1],g=u[2];return F.useEffect(function(){return g},[g]),B.createElement("div",Wg({},i,{onTouchStart:h,onMouseDown:h,className:"react-colorful__interactive",ref:r,onKeyDown:p,tabIndex:0,role:"slider"}))}),p_=function(n){return n.filter(Boolean).join(" ")},R3=function(n){var e=n.color,t=n.left,i=n.top,r=i===void 0?.5:i,a=p_(["react-colorful__pointer",n.className]);return B.createElement("div",{className:a,style:{top:100*r+"%",left:100*t+"%"}},B.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},hs=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},PG=function(n){var e=n.s,t=n.v,i=n.a,r=(200-e)*t/100;return{h:hs(n.h),s:hs(r>0&&r<200?e*t/100/(r<=100?r:200-r)*100:0),l:hs(r/2),a:hs(i,2)}},IO=function(n){var e=PG(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},PM=function(n){var e=PG(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},LG=function(n){var e=n.h,t=n.s,i=n.v,r=n.a;e=e/360*6,t/=100,i/=100;var a=Math.floor(e),s=i*(1-t),o=i*(1-(e-a)*t),l=i*(1-(1-e+a)*t),u=a%6;return{r:hs(255*[i,o,s,s,l,i][u]),g:hs(255*[l,i,i,o,s,s][u]),b:hs(255*[s,s,l,i,i,o][u]),a:hs(r,2)}},IG=function(n){var e=n.r,t=n.g,i=n.b,r=n.a,a=Math.max(e,t,i),s=a-Math.min(e,t,i),o=s?a===e?(t-i)/s:a===t?2+(i-e)/s:4+(e-t)/s:0;return{h:hs(60*(o<0?o+6:o)),s:hs(a?s/a*100:0),v:hs(a/255*100),a:r}},BG=B.memo(function(n){var e=n.hue,t=n.onChange,i=p_(["react-colorful__hue",n.className]);return B.createElement("div",{className:i},B.createElement(C3,{onMove:function(r){t({h:360*r.left})},onKey:function(r){t({h:Mg(e+360*r.left,0,360)})},"aria-label":"Hue","aria-valuenow":hs(e),"aria-valuemax":"360","aria-valuemin":"0"},B.createElement(R3,{className:"react-colorful__hue-pointer",left:e/360,color:IO({h:e,s:100,v:100,a:1})})))}),zG=B.memo(function(n){var e=n.hsva,t=n.onChange,i={backgroundColor:IO({h:e.h,s:100,v:100,a:1})};return B.createElement("div",{className:"react-colorful__saturation",style:i},B.createElement(C3,{onMove:function(r){t({s:100*r.left,v:100-100*r.top})},onKey:function(r){t({s:Mg(e.s+100*r.left,0,100),v:Mg(e.v-100*r.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+hs(e.s)+"%, Brightness "+hs(e.v)+"%"},B.createElement(R3,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:IO(e)})))}),O3=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function kG(n,e,t){var i=PO(t),r=F.useState(function(){return n.toHsva(e)}),a=r[0],s=r[1],o=F.useRef({color:e,hsva:a});F.useEffect(function(){if(!n.equal(e,o.current.color)){var u=n.toHsva(e);o.current={hsva:u,color:e},s(u)}},[e,n]),F.useEffect(function(){var u;O3(a,o.current.hsva)||n.equal(u=n.fromHsva(a),o.current.color)||(o.current={hsva:a,color:u},i(u))},[a,n,i]);var l=F.useCallback(function(u){s(function(h){return Object.assign({},h,u)})},[]);return[a,l]}var Oce=typeof window<"u"?F.useLayoutEffect:F.useEffect,Dce=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},JI=new Map,FG=function(n){Oce(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!JI.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,JI.set(e,t);var i=Dce();i&&t.setAttribute("nonce",i),e.head.appendChild(t)}},[])},Uce=function(n){var e=n.className,t=n.colorModel,i=n.color,r=i===void 0?t.defaultColor:i,a=n.onChange,s=A3(n,["className","colorModel","color","onChange"]),o=F.useRef(null);FG(o);var l=kG(t,r,a),u=l[0],h=l[1],p=p_(["react-colorful",e]);return B.createElement("div",Wg({},s,{ref:o,className:p}),B.createElement(zG,{hsva:u,onChange:h}),B.createElement(BG,{hue:u.h,onChange:h,className:"react-colorful__last-control"}))},Nce=function(n){var e=n.className,t=n.hsva,i=n.onChange,r={backgroundImage:"linear-gradient(90deg, "+PM(Object.assign({},t,{a:0}))+", "+PM(Object.assign({},t,{a:1}))+")"},a=p_(["react-colorful__alpha",e]),s=hs(100*t.a);return B.createElement("div",{className:a},B.createElement("div",{className:"react-colorful__alpha-gradient",style:r}),B.createElement(C3,{onMove:function(o){i({a:o.left})},onKey:function(o){i({a:Mg(t.a+o.left)})},"aria-label":"Alpha","aria-valuetext":s+"%","aria-valuenow":s,"aria-valuemin":"0","aria-valuemax":"100"},B.createElement(R3,{className:"react-colorful__alpha-pointer",left:t.a,color:PM(t)})))},Pce=function(n){var e=n.className,t=n.colorModel,i=n.color,r=i===void 0?t.defaultColor:i,a=n.onChange,s=A3(n,["className","colorModel","color","onChange"]),o=F.useRef(null);FG(o);var l=kG(t,r,a),u=l[0],h=l[1],p=p_(["react-colorful",e]);return B.createElement("div",Wg({},s,{ref:o,className:p}),B.createElement(zG,{hsva:u,onChange:h}),B.createElement(BG,{hue:u.h,onChange:h}),B.createElement(Nce,{hsva:u,onChange:h,className:"react-colorful__last-control"}))},Lce={defaultColor:{r:0,g:0,b:0,a:1},toHsva:IG,fromHsva:LG,equal:O3},Ice=function(n){return B.createElement(Pce,Wg({},n,{colorModel:Lce}))},Bce={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return IG({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=LG(n)).r,g:e.g,b:e.b};var e},equal:O3},zce=function(n){return B.createElement(Uce,Wg({},n,{colorModel:Bce}))},kce=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function m_(n,e){var t=Fce(n);if(typeof t.path!="string"){var i=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof i=="string"&&i.length>0?i:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function Fce(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var i=e.split(".").pop().toLowerCase(),r=kce.get(i);r&&Object.defineProperty(n,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return n}var Hce=[".DS_Store","Thumbs.db"];function Vce(n){return xp(this,void 0,void 0,function(){return Gg(this,function(e){return I1(n)&&Gce(n)?[2,Yce(n.dataTransfer,n.type)]:jce(n)?[2,qce(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,Wce(n)]:[2,[]]})})}function Gce(n){return I1(n.dataTransfer)}function jce(n){return I1(n)&&I1(n.target)}function I1(n){return typeof n=="object"&&n!==null}function qce(n){return BO(n.target.files).map(function(e){return m_(e)})}function Wce(n){return xp(this,void 0,void 0,function(){var e;return Gg(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(i){return i.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(i){return m_(i)})]}})})}function Yce(n,e){return xp(this,void 0,void 0,function(){var t,i;return Gg(this,function(r){switch(r.label){case 0:return n===null?[2,[]]:n.items?(t=BO(n.items).filter(function(a){return a.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map($ce))]):[3,2];case 1:return i=r.sent(),[2,eB(HG(i))];case 2:return[2,eB(BO(n.files).map(function(a){return m_(a)}))]}})})}function eB(n){return n.filter(function(e){return Hce.indexOf(e.name)===-1})}function BO(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var i=n[t];e.push(i)}return e}function $ce(n){if(typeof n.webkitGetAsEntry!="function")return tB(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?VG(e):tB(n)}function HG(n){return n.reduce(function(e,t){return Fte(e,Array.isArray(t)?HG(t):[t])},[])}function tB(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=m_(e);return Promise.resolve(t)}function Xce(n){return xp(this,void 0,void 0,function(){return Gg(this,function(e){return[2,n.isDirectory?VG(n):Kce(n)]})})}function VG(n){var e=n.createReader();return new Promise(function(t,i){var r=[];function a(){var s=this;e.readEntries(function(o){return xp(s,void 0,void 0,function(){var l,u,h;return Gg(this,function(p){switch(p.label){case 0:if(o.length)return[3,5];p.label=1;case 1:return p.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return l=p.sent(),t(l),[3,4];case 3:return u=p.sent(),i(u),[3,4];case 4:return[3,6];case 5:h=Promise.all(o.map(Xce)),r.push(h),a(),p.label=6;case 6:return[2]}})})},function(o){i(o)})}a()})}function Kce(n){return xp(this,void 0,void 0,function(){return Gg(this,function(e){return[2,new Promise(function(t,i){n.file(function(r){var a=m_(r,n.fullPath);t(a)},function(r){i(r)})})]})})}var rx={},nB;function Zce(){return nB||(nB=1,rx.__esModule=!0,rx.default=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var i=n.name||"",r=(n.type||"").toLowerCase(),a=r.replace(/\/.*$/,"");return t.some(function(s){var o=s.trim().toLowerCase();return o.charAt(0)==="."?i.toLowerCase().endsWith(o):o.endsWith("/*")?a===o.replace(/\/.*$/,""):r===o})}return!0}),rx}var Qce=Zce();const Jce=kr(Qce);function iB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function rB(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?iB(Object(t),!0).forEach(function(i){GG(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):iB(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function GG(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function aB(n,e){return iue(n)||nue(n,e)||tue(n,e)||eue()}function eue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tue(n,e){if(n){if(typeof n=="string")return sB(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return sB(n,e)}}function sB(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function nue(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,a=!1,s,o;try{for(t=t.call(n);!(r=(s=t.next()).done)&&(i.push(s.value),!(e&&i.length===e));r=!0);}catch(l){a=!0,o=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(a)throw o}}return i}}function iue(n){if(Array.isArray(n))return n}var rue="file-invalid-type",aue="file-too-large",sue="file-too-small",oue="too-many-files",lue=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:rue,message:"File type must be ".concat(t)}},oB=function(e){return{code:aue,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},lB=function(e){return{code:sue,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},cue={code:oue,message:"Too many files"};function jG(n,e){var t=n.type==="application/x-moz-file"||Jce(n,e);return[t,t?null:lue(e)]}function qG(n,e,t){if(Ay(n.size))if(Ay(e)&&Ay(t)){if(n.size>t)return[!1,oB(t)];if(n.size<e)return[!1,lB(e)]}else{if(Ay(e)&&n.size<e)return[!1,lB(e)];if(Ay(t)&&n.size>t)return[!1,oB(t)]}return[!0,null]}function Ay(n){return n!=null}function uue(n){var e=n.files,t=n.accept,i=n.minSize,r=n.maxSize,a=n.multiple,s=n.maxFiles;return!a&&e.length>1||a&&s>=1&&e.length>s?!1:e.every(function(o){var l=jG(o,t),u=aB(l,1),h=u[0],p=qG(o,i,r),g=aB(p,1),y=g[0];return h&&y})}function B1(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function ax(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function cB(n){n.preventDefault()}function fue(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function hue(n){return n.indexOf("Edge/")!==-1}function due(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return fue(n)||hue(n)}function Bc(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return e.some(function(o){return!B1(i)&&o&&o.apply(void 0,[i].concat(a)),B1(i)})}}function pue(){return"showOpenFilePicker"in window}function mue(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return rB(rB({},e),{},GG({},t,[]))},{}):{}}]}function gue(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function vue(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var yue=["children"],_ue=["open"],bue=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Sue=["refKey","onChange","onClick"];function xue(n){return Tue(n)||wue(n)||WG(n)||Eue()}function Eue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wue(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Tue(n){if(Array.isArray(n))return zO(n)}function LM(n,e){return Cue(n)||Aue(n,e)||WG(n,e)||Mue()}function Mue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WG(n,e){if(n){if(typeof n=="string")return zO(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return zO(n,e)}}function zO(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function Aue(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,a=!1,s,o;try{for(t=t.call(n);!(r=(s=t.next()).done)&&(i.push(s.value),!(e&&i.length===e));r=!0);}catch(l){a=!0,o=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(a)throw o}}return i}}function Cue(n){if(Array.isArray(n))return n}function uB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function $i(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?uB(Object(t),!0).forEach(function(i){kO(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):uB(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function kO(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function z1(n,e){if(n==null)return{};var t=Rue(n,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function Rue(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,a;for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var D3=F.forwardRef(function(n,e){var t=n.children,i=z1(n,yue),r=$G(i),a=r.open,s=z1(r,_ue);return F.useImperativeHandle(e,function(){return{open:a}},[a]),B.createElement(F.Fragment,null,t($i($i({},s),{},{open:a})))});D3.displayName="Dropzone";var YG={disabled:!1,getFilesFromEvent:Vce,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};D3.defaultProps=YG;D3.propTypes={children:at.func,accept:at.oneOfType([at.string,at.arrayOf(at.string)]),multiple:at.bool,preventDropOnDocument:at.bool,noClick:at.bool,noKeyboard:at.bool,noDrag:at.bool,noDragEventsBubbling:at.bool,minSize:at.number,maxSize:at.number,maxFiles:at.number,disabled:at.bool,getFilesFromEvent:at.func,onFileDialogCancel:at.func,onFileDialogOpen:at.func,useFsAccessApi:at.bool,onDragEnter:at.func,onDragLeave:at.func,onDragOver:at.func,onDrop:at.func,onDropAccepted:at.func,onDropRejected:at.func,validator:at.func};var FO={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function $G(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=$i($i({},YG),n),t=e.accept,i=e.disabled,r=e.getFilesFromEvent,a=e.maxSize,s=e.minSize,o=e.multiple,l=e.maxFiles,u=e.onDragEnter,h=e.onDragLeave,p=e.onDragOver,g=e.onDrop,y=e.onDropAccepted,_=e.onDropRejected,S=e.onFileDialogCancel,x=e.onFileDialogOpen,w=e.useFsAccessApi,T=e.preventDropOnDocument,M=e.noClick,C=e.noKeyboard,N=e.noDrag,D=e.noDragEventsBubbling,P=e.validator,z=F.useMemo(function(){return typeof x=="function"?x:fB},[x]),I=F.useMemo(function(){return typeof S=="function"?S:fB},[S]),L=F.useRef(null),H=F.useRef(null),j=F.useReducer(Oue,FO),G=LM(j,2),K=G[0],ee=G[1],Y=K.isFocused,re=K.isFileDialogActive,J=K.draggedFiles,se=F.useRef(typeof window<"u"&&window.isSecureContext&&w&&pue()),q=function(){!se.current&&re&&setTimeout(function(){if(H.current){var he=H.current.files;he.length||(ee({type:"closeDialog"}),I())}},300)};F.useEffect(function(){return window.addEventListener("focus",q,!1),function(){window.removeEventListener("focus",q,!1)}},[H,re,I,se]);var X=F.useRef([]),oe=function(he){L.current&&L.current.contains(he.target)||(he.preventDefault(),X.current=[])};F.useEffect(function(){return T&&(document.addEventListener("dragover",cB,!1),document.addEventListener("drop",oe,!1)),function(){T&&(document.removeEventListener("dragover",cB),document.removeEventListener("drop",oe))}},[L,T]);var ue=F.useCallback(function(ae){ae.preventDefault(),ae.persist(),De(ae),X.current=[].concat(xue(X.current),[ae.target]),ax(ae)&&Promise.resolve(r(ae)).then(function(he){B1(ae)&&!D||(ee({draggedFiles:he,isDragActive:!0,type:"setDraggedFiles"}),u&&u(ae))})},[r,u,D]),Z=F.useCallback(function(ae){ae.preventDefault(),ae.persist(),De(ae);var he=ax(ae);if(he&&ae.dataTransfer)try{ae.dataTransfer.dropEffect="copy"}catch{}return he&&p&&p(ae),!1},[p,D]),ce=F.useCallback(function(ae){ae.preventDefault(),ae.persist(),De(ae);var he=X.current.filter(function(Oe){return L.current&&L.current.contains(Oe)}),Se=he.indexOf(ae.target);Se!==-1&&he.splice(Se,1),X.current=he,!(he.length>0)&&(ee({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),ax(ae)&&h&&h(ae))},[L,h,D]),me=F.useCallback(function(ae,he){var Se=[],Oe=[];ae.forEach(function(je){var Ge=jG(je,t),Ke=LM(Ge,2),_t=Ke[0],Ye=Ke[1],ct=qG(je,s,a),it=LM(ct,2),Ze=it[0],$e=it[1],vt=P?P(je):null;if(_t&&Ze&&!vt)Se.push(je);else{var gt=[Ye,$e];vt&&(gt=gt.concat(vt)),Oe.push({file:je,errors:gt.filter(function(jt){return jt})})}}),(!o&&Se.length>1||o&&l>=1&&Se.length>l)&&(Se.forEach(function(je){Oe.push({file:je,errors:[cue]})}),Se.splice(0)),ee({acceptedFiles:Se,fileRejections:Oe,type:"setFiles"}),g&&g(Se,Oe,he),Oe.length>0&&_&&_(Oe,he),Se.length>0&&y&&y(Se,he)},[ee,o,t,s,a,l,g,y,_,P]),de=F.useCallback(function(ae){ae.preventDefault(),ae.persist(),De(ae),X.current=[],ax(ae)&&Promise.resolve(r(ae)).then(function(he){B1(ae)&&!D||me(he,ae)}),ee({type:"reset"})},[r,me,D]),ve=F.useCallback(function(){if(se.current){ee({type:"openDialog"}),z();var ae={multiple:o,types:mue(t)};window.showOpenFilePicker(ae).then(function(he){return r(he)}).then(function(he){me(he,null),ee({type:"closeDialog"})}).catch(function(he){gue(he)?(I(he),ee({type:"closeDialog"})):vue(he)&&(se.current=!1,H.current&&(H.current.value=null,H.current.click()))});return}H.current&&(ee({type:"openDialog"}),z(),H.current.value=null,H.current.click())},[ee,z,I,w,me,t,o]),We=F.useCallback(function(ae){!L.current||!L.current.isEqualNode(ae.target)||(ae.key===" "||ae.key==="Enter"||ae.keyCode===32||ae.keyCode===13)&&(ae.preventDefault(),ve())},[L,ve]),ze=F.useCallback(function(){ee({type:"focus"})},[]),qe=F.useCallback(function(){ee({type:"blur"})},[]),_e=F.useCallback(function(){M||(due()?setTimeout(ve,0):ve())},[M,ve]),Ae=function(he){return i?null:he},te=function(he){return C?null:Ae(he)},ke=function(he){return N?null:Ae(he)},De=function(he){D&&he.stopPropagation()},Ie=F.useMemo(function(){return function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},he=ae.refKey,Se=he===void 0?"ref":he,Oe=ae.role,je=ae.onKeyDown,Ge=ae.onFocus,Ke=ae.onBlur,_t=ae.onClick,Ye=ae.onDragEnter,ct=ae.onDragOver,it=ae.onDragLeave,Ze=ae.onDrop,$e=z1(ae,bue);return $i($i(kO({onKeyDown:te(Bc(je,We)),onFocus:te(Bc(Ge,ze)),onBlur:te(Bc(Ke,qe)),onClick:Ae(Bc(_t,_e)),onDragEnter:ke(Bc(Ye,ue)),onDragOver:ke(Bc(ct,Z)),onDragLeave:ke(Bc(it,ce)),onDrop:ke(Bc(Ze,de)),role:typeof Oe=="string"&&Oe!==""?Oe:"button"},Se,L),!i&&!C?{tabIndex:0}:{}),$e)}},[L,We,ze,qe,_e,ue,Z,ce,de,C,N,i]),Te=F.useCallback(function(ae){ae.stopPropagation()},[]),Xe=F.useMemo(function(){return function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},he=ae.refKey,Se=he===void 0?"ref":he,Oe=ae.onChange,je=ae.onClick,Ge=z1(ae,Sue),Ke=kO({accept:t,multiple:o,type:"file",style:{display:"none"},onChange:Ae(Bc(Oe,de)),onClick:Ae(Bc(je,Te)),tabIndex:-1},Se,H);return $i($i({},Ke),Ge)}},[H,t,o,de,i]),Pe=J.length,$=Pe>0&&uue({files:J,accept:t,minSize:s,maxSize:a,multiple:o,maxFiles:l}),W=Pe>0&&!$;return $i($i({},K),{},{isDragAccept:$,isDragReject:W,isFocused:Y&&!i,getRootProps:Ie,getInputProps:Xe,rootRef:L,inputRef:H,open:Ae(ve)})}function Oue(n,e){switch(e.type){case"focus":return $i($i({},n),{},{isFocused:!0});case"blur":return $i($i({},n),{},{isFocused:!1});case"openDialog":return $i($i({},FO),{},{isFileDialogActive:!0});case"closeDialog":return $i($i({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,i=e.draggedFiles;return $i($i({},n),{},{draggedFiles:i,isDragActive:t});case"setFiles":return $i($i({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return $i({},FO);default:return n}}function fB(){}function Due(n){let e;const t=new Set,i=(u,h)=>{const p=typeof u=="function"?u(e):u;if(p!==e){const g=e;e=h?p:Object.assign({},e,p),t.forEach(y=>y(e,g))}},r=()=>e,a=(u,h=r,p=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let g=h(e);function y(){const _=h(e);if(!p(g,_)){const S=g;u(g=_,S)}}return t.add(y),()=>t.delete(y)},l={setState:i,getState:r,subscribe:(u,h,p)=>h||p?a(u,h,p):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(i,r,l),l}const Uue=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),hB=Uue?F.useEffect:F.useLayoutEffect;function Nue(n){const e=typeof n=="function"?Due(n):n,t=(i=e.getState,r=Object.is)=>{const[,a]=F.useReducer(x=>x+1,0),s=e.getState(),o=F.useRef(s),l=F.useRef(i),u=F.useRef(r),h=F.useRef(!1),p=F.useRef();p.current===void 0&&(p.current=i(s));let g,y=!1;(o.current!==s||l.current!==i||u.current!==r||h.current)&&(g=i(s),y=!r(p.current,g)),hB(()=>{y&&(p.current=g),o.current=s,l.current=i,u.current=r,h.current=!1});const _=F.useRef(s);hB(()=>{const x=()=>{try{const T=e.getState(),M=l.current(T);u.current(p.current,M)||(o.current=T,p.current=M,a())}catch{h.current=!0,a()}},w=e.subscribe(x);return e.getState()!==_.current&&x(),w},[]);const S=y?g:p.current;return F.useDebugValue(S),S};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}const Pue=n=>(e,t,i)=>{const r=i.subscribe;return i.subscribe=(s,o,l)=>{let u=s;if(o){const h=(l==null?void 0:l.equalityFn)||Object.is;let p=s(i.getState());u=g=>{const y=s(g);if(!h(p,y)){const _=p;o(p=y,_)}},l!=null&&l.fireImmediately&&o(p,p)}return r(u)},n(e,t,i)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var IM,dB;function Lue(){return dB||(dB=1,IM=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1}),IM}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var BM,pB;function XG(){if(pB)return BM;pB=1;var n=Lue();function e(t){return n(t)===!0&&Object.prototype.toString.call(t)==="[object Object]"}return BM=function(i){var r,a;return!(e(i)===!1||(r=i.constructor,typeof r!="function")||(a=r.prototype,e(a)===!1)||a.hasOwnProperty("isPrototypeOf")===!1)},BM}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var zM,mB;function U3(){if(mB)return zM;mB=1;var n=XG();return zM=function(t){return n(t)||typeof t=="function"||Array.isArray(t)},zM}/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var kM,gB;function Iue(){return gB||(gB=1,kM=function(e,t,i){for(var r in e)if(t.call(i,e[r],r,e)===!1)break}),kM}var FM,vB;function Bue(){if(vB)return FM;vB=1;var n=U3(),e=Iue();function t(s,o){for(var l=arguments.length,u=0;++u<l;){var h=arguments[u];r(h)&&e(h,i,s)}return s}function i(s,o){if(a(o)){var l=this[o];r(s)&&r(l)?t(l,s):this[o]=s}}function r(s){return n(s)&&!Array.isArray(s)}function a(s){return s!=="__proto__"&&s!=="constructor"&&s!=="prototype"}return FM=t,FM}/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var HM,yB;function zue(){if(yB)return HM;yB=1,HM=function(t,i,r,a,s){if(!n(t)||!i)return t;if(i=e(i),r&&(i+="."+e(r)),a&&(i+="."+e(a)),s&&(i+="."+e(s)),i in t)return t[i];for(var o=i.split("."),l=o.length,u=-1;t&&++u<l;){for(var h=o[u];h[h.length-1]==="\\";)h=h.slice(0,-1)+"."+o[++u];t=t[h]}return t};function n(t){return t!==null&&(typeof t=="object"||typeof t=="function")}function e(t){return t?Array.isArray(t)?t.join("."):t:""}return HM}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var VM,_B;function kue(){return _B||(_B=1,VM=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,i=Object(n),r=arguments.length,a=0;++a<r;)for(var s=Object(arguments[a]),o=Object.getOwnPropertySymbols(s),l=0;l<o.length;l++){var u=o[l];t.call(s,u)&&(i[u]=s[u])}return i}),VM}var GM,bB;function Fue(){if(bB)return GM;bB=1;var n=U3(),e=kue();GM=Object.assign||function(o){if(o===null||typeof o>"u")throw new TypeError("Cannot convert undefined or null to object");a(o)||(o={});for(var l=1;l<arguments.length;l++){var u=arguments[l];i(u)&&(u=r(u)),a(u)&&(t(o,u),e(o,u))}return o};function t(o,l){for(var u in l)s(l,u)&&(o[u]=l[u])}function i(o){return o&&typeof o=="string"}function r(o){var l={};for(var u in o)l[u]=o[u];return l}function a(o){return o&&typeof o=="object"||n(o)}function s(o,l){return Object.prototype.hasOwnProperty.call(o,l)}return GM}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var jM,SB;function Hue(){if(SB)return jM;SB=1;var n=Fue();jM=function(r,a,s){if(typeof r!="string")throw new TypeError("expected a string");typeof a=="function"&&(s=a,a=null),typeof a=="string"&&(a={sep:a});var o=n({sep:"."},a),l=o.quotes||['"',"'","`"],u;o.brackets===!0?u={"<":">","(":")","[":"]","{":"}"}:o.brackets&&(u=o.brackets);var h=[],p=[],g=[""],y=o.sep,_=r.length,S=-1,x;function w(){if(u&&p.length)return u[p[p.length-1]]}for(;++S<_;){var T=r[S],M=r[S+1],C={val:T,idx:S,arr:g,str:r};if(h.push(C),T==="\\"){C.val=i(o,r,S)===!0?T+M:M,C.escaped=!0,typeof s=="function"&&s(C),g[g.length-1]+=C.val,S++;continue}if(u&&u[T]){p.push(T);var N=w(),D=S+1;if(r.indexOf(N,D+1)!==-1)for(;p.length&&D<_;){var P=r[++D];if(P==="\\"){P++;continue}if(l.indexOf(P)!==-1){D=e(r,P,D+1);continue}if(N=w(),p.length&&r.indexOf(N,D+1)===-1)break;if(u[P]){p.push(P);continue}N===P&&p.pop()}if(x=D,x===-1){g[g.length-1]+=T;continue}T=r.slice(S,x+1),C.val=T,C.idx=S=x}if(l.indexOf(T)!==-1){if(x=e(r,T,S+1),x===-1){g[g.length-1]+=T;continue}t(T,o)===!0?T=r.slice(S,x+1):T=r.slice(S+1,x),C.val=T,C.idx=S=x}if(typeof s=="function"&&(s(C,h),T=C.val,S=C.idx),C.val===y&&C.split!==!1){g.push("");continue}g[g.length-1]+=C.val}return g};function e(r,a,s,o){var l=r.indexOf(a,s);return r.charAt(l-1)==="\\"?e(r,a,l+1):l}function t(r,a){return a.keepDoubleQuotes===!0&&r==='"'||a.keepSingleQuotes===!0&&r==="'"?!0:a.keepQuotes}function i(r,a,s){return typeof r.keepEscaping=="function"?r.keepEscaping(a,s):r.keepEscaping===!0||a[s+1]==="\\"}return jM}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var qM,xB;function Vue(){return xB||(xB=1,qM=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),qM}var WM,EB;function Gue(){if(EB)return WM;EB=1;var n=Vue();WM=function(r){n(r)||(r={});for(var a=arguments.length,s=1;s<a;s++){var o=arguments[s];n(o)&&e(r,o)}return r};function e(i,r){for(var a in r)t(r,a)&&(i[a]=r[a])}function t(i,r){return Object.prototype.hasOwnProperty.call(i,r)}return WM}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var YM,wB;function jue(){return wB||(wB=1,YM=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),YM}/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var $M,TB;function que(){if(TB)return $M;TB=1;var n=Hue(),e=Gue(),t=XG(),i=jue();$M=function(a,s,o){if(!i(a)||(Array.isArray(s)&&(s=[].concat.apply([],s).join(".")),typeof s!="string"))return a;for(var l=n(s,{sep:".",brackets:!0}).filter(r),u=l.length,h=-1,p=a;++h<u;){var g=l[h];if(h!==u-1){i(p[g])||(p[g]={}),p=p[g];continue}t(p[g])&&t(o)?p[g]=e({},p[g],o):p[g]=o}return a};function r(a){return a!=="__proto__"&&a!=="constructor"&&a!=="prototype"}return $M}var XM,MB;function Wue(){if(MB)return XM;MB=1;var n=U3(),e=Bue(),t=zue(),i=que();return XM=function(a,s,o){if(!n(a))throw new TypeError("expected an object");if(typeof s!="string"||o==null)return e.apply(null,arguments);if(typeof o=="string")return i(a,s,o),a;var l=t(a,s);return n(o)&&n(l)&&(o=e({},l,o)),i(a,s,o),a},XM}var Yue=Wue();const $ue=kr(Yue),N3=(...n)=>n.filter(Boolean).join(".");function Xue(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function Kue(n,e){const t=F.useRef();return R0(n,t.current)||(t.current=n),t.current}function Zue(n,e){var t;return F.useMemo(n,(t=Kue(e))!==null&&t!==void 0?t:[])}function Que(n){const e=F.useRef(null),t=F.useRef(null),i=F.useRef(!0);return F.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),F.useEffect(()=>{if(i.current){i.current=!1;return}let r;const a=e.current,s=()=>{n&&(a.style.removeProperty("height"),a.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};a.addEventListener("transitionend",s,{once:!0});const{height:o}=t.current.getBoundingClientRect();return a.style.height=o+"px",n||(a.style.overflow="hidden",r=window.setTimeout(()=>a.style.height="0px",50)),()=>{a.removeEventListener("transitionend",s),clearTimeout(r)}},[n]),{wrapperRef:e,contentRef:t}}const Jue=n=>{const[e,t]=F.useState(n.getVisiblePaths());return F.useEffect(()=>{t(n.getVisiblePaths());const i=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:fV});return()=>i()},[n]),e};function KG(n=3){const e=F.useRef(null),t=F.useRef(null),[i,r]=F.useState(!1),a=F.useCallback(()=>r(!0),[]),s=F.useCallback(()=>r(!1),[]);return F.useLayoutEffect(()=>{if(i){const{bottom:o,top:l,left:u}=e.current.getBoundingClientRect(),{height:h}=t.current.getBoundingClientRect(),p=o+h>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=u+"px",p==="down"?t.current.style.top=o+n+"px":t.current.style.bottom=window.innerHeight-l+n+"px"}},[n,i]),{popinRef:e,wrapperRef:t,shown:i,show:a,hide:s}}Cce([Rce]);const efe={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};Hs.extend({color:()=>n=>os(n).isValid()});const tfe=n=>Hs().color().test(n);function ZG(n,{format:e,hasAlpha:t,isString:i}){const r=efe[e]+(i&&e!=="hex"?"String":""),a=n[r]();return typeof a=="object"&&!t?Yoe(a,["a"]):a}const QG=(n,e)=>{const t=os(n);if(!t.isValid())throw Error("Invalid color");return ZG(t,e)},nfe=(n,e)=>ZG(os(n),un(un({},e),{},{isString:!0,format:"hex"})),ife=({value:n})=>{const e=Ace(n),t=e==="name"?"hex":e,i=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),r={format:t,hasAlpha:i,isString:typeof n=="string"};return{value:QG(n,r),settings:r}};var rfe=Object.freeze({__proto__:null,schema:tfe,sanitize:QG,format:nfe,normalize:ife});const afe=Gt("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),sfe=Gt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),ofe=Gt("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function AB(n,e){return e!=="rgb"?os(n).toRgb():n}function lfe({value:n,displayValue:e,settings:t,onUpdate:i}){const{emitOnEditStart:r,emitOnEditEnd:a}=Va(),{format:s,hasAlpha:o}=t,{popinRef:l,wrapperRef:u,shown:h,show:p,hide:g}=KG(),y=F.useRef(0),[_,S]=F.useState(()=>AB(n,s)),x=o?Ice:zce,w=()=>{S(AB(n,s)),p(),r()},T=()=>{g(),a(),window.clearTimeout(y.current)},M=()=>{y.current=window.setTimeout(T,500)};return F.useEffect(()=>()=>window.clearTimeout(y.current),[]),B.createElement(B.Fragment,null,B.createElement(afe,{ref:l,active:h,onClick:()=>w(),style:{color:e}}),h&&B.createElement(w3,null,B.createElement(SG,{onPointerUp:T}),B.createElement(ofe,{ref:u,onMouseEnter:()=>window.clearTimeout(y.current),onMouseLeave:C=>C.buttons===0&&M()},B.createElement(x,{color:_,onChange:i}))))}function cfe(){const{value:n,displayValue:e,label:t,onChange:i,onUpdate:r,settings:a}=Va();return B.createElement(Vo,{input:!0},B.createElement(Kl,null,t),B.createElement(sfe,null,B.createElement(lfe,{value:n,displayValue:e,onChange:i,onUpdate:r,settings:a}),B.createElement(E3,{value:e,onChange:i,onUpdate:r})))}var ufe=un({component:cfe},rfe);function ffe(){const{label:n,displayValue:e,onUpdate:t,settings:i}=Va();return B.createElement(Vo,{input:!0},B.createElement(Kl,null,n),B.createElement(M3,{value:e,settings:i,onUpdate:t}))}var hfe=un({component:ffe},RG(["x","y","z"]));const dfe=Gt("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),pfe=Gt("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function mfe({value:n,settings:e,onUpdate:t}){const i=F.useRef(),r=F.useRef(0),a=F.useRef(0),s=F.useRef(1),[o,l]=F.useState(!1),[u,h]=F.useState(!1),[p,g]=EG(),y=F.useRef(null),_=F.useRef(null);F.useLayoutEffect(()=>{if(o){const{top:j,left:G,width:K,height:ee}=y.current.getBoundingClientRect();_.current.style.left=G+K/2+"px",_.current.style.top=j+ee/2+"px"}},[o]);const{keys:[S,x],joystick:w}=e,T=w==="invertY"?1:-1,{[S]:{step:M},[x]:{step:C}}=e,N=Ku("sizes","joystickWidth"),D=Ku("sizes","joystickHeight"),P=parseFloat(N)*.8/2,z=parseFloat(D)*.8/2,I=F.useCallback(()=>{i.current||(h(!0),r.current&&g({x:r.current*P}),a.current&&g({y:a.current*-z}),i.current=window.setInterval(()=>{t(j=>{const G=M*r.current*s.current,K=T*C*a.current*s.current;return Array.isArray(j)?{[S]:j[0]+G,[x]:j[1]+K}:{[S]:j[S]+G,[x]:j[x]+K}})},16))},[P,z,t,g,M,C,S,x,T]),L=F.useCallback(()=>{window.clearTimeout(i.current),i.current=void 0,h(!1)},[]);F.useEffect(()=>{function j(G){s.current=oG(G)}return window.addEventListener("keydown",j),window.addEventListener("keyup",j),()=>{window.clearTimeout(i.current),window.removeEventListener("keydown",j),window.removeEventListener("keyup",j)}},[]);const H=d_(({first:j,active:G,delta:[K,ee],movement:[Y,re]})=>{j&&l(!0);const J=_h(Y,-P,P),se=_h(re,-z,z);r.current=Math.abs(Y)>Math.abs(J)?Math.sign(Y-J):0,a.current=Math.abs(re)>Math.abs(se)?Math.sign(se-re):0;let q=n[S],X=n[x];G?(r.current||(q+=K*M*s.current,g({x:J})),a.current||(X-=T*ee*C*s.current,g({y:se})),r.current||a.current?I():L(),t({[S]:q,[x]:X})):(l(!1),r.current=0,a.current=0,g({x:0,y:0}),L())});return B.createElement(dfe,hr({ref:y},H()),o&&B.createElement(w3,null,B.createElement(pfe,{ref:_,isOutOfBounds:u},B.createElement("div",null),B.createElement("span",{ref:p}))))}const gfe=Gt("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function vfe(){const{label:n,displayValue:e,onUpdate:t,settings:i}=Va();return B.createElement(Vo,{input:!0},B.createElement(Kl,null,n),B.createElement(gfe,{withJoystick:!!i.joystick},i.joystick&&B.createElement(mfe,{value:e,settings:i,onUpdate:t}),B.createElement(M3,{value:e,settings:i,onUpdate:t})))}const yfe=["joystick"],JG=RG(["x","y"]),_fe=n=>{let{joystick:e=!0}=n,t=li(n,yfe);const{value:i,settings:r}=JG.normalize(t);return{value:i,settings:un(un({},r),{},{joystick:e})}};var bfe=un(un({component:vfe},JG),{},{normalize:_fe});const Sfe=n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob |File].")}},xfe=(n,e)=>typeof e=="object"&&"image"in e,Efe=({image:n})=>({value:n});var wfe=Object.freeze({__proto__:null,sanitize:Sfe,schema:xfe,normalize:Efe});const Tfe=Gt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),Mfe=Gt("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),Afe=Gt("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),Cfe=Gt("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),Rfe=Gt("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),Ofe=Gt("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function Dfe(){const{label:n,value:e,onUpdate:t,disabled:i}=Va(),{popinRef:r,wrapperRef:a,shown:s,show:o,hide:l}=KG(),u=F.useCallback(_=>{_.length&&t(_[0])},[t]),h=F.useCallback(_=>{_.stopPropagation(),t(void 0)},[t]),{getRootProps:p,getInputProps:g,isDragAccept:y}=$G({maxFiles:1,accept:"image/*",onDrop:u,disabled:i});return B.createElement(Vo,{input:!0},B.createElement(Kl,null,n),B.createElement(Tfe,null,B.createElement(Afe,{ref:r,hasImage:!!e,onPointerDown:()=>!!e&&o(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),s&&!!e&&B.createElement(w3,null,B.createElement(SG,{onPointerUp:l,style:{cursor:"pointer"}}),B.createElement(Cfe,{ref:a,style:{backgroundImage:`url(${e})`}})),B.createElement(Mfe,p({isDragAccept:y}),B.createElement("input",g()),B.createElement(Rfe,null,y?"drop image":"click or drop")),B.createElement(Ofe,{onClick:h,disabled:!e})))}var Ufe=un({component:Dfe},wfe);const CB=Hs().number(),Nfe=(n,e)=>Hs().array().length(2).every.number().test(n)&&Hs().schema({min:CB,max:CB}).test(e),k1=n=>({min:n[0],max:n[1]}),e8=(n,{bounds:[e,t]},i)=>{const r=Array.isArray(n)?k1(n):n,a={min:i[0],max:i[1]},{min:s,max:o}=un(un({},a),r);return[_h(Number(s),e,Math.max(e,o)),_h(Number(o),Math.min(t,s),t)]},Pfe=({value:n,min:e,max:t})=>{const i={min:e,max:t},r=CG(k1(n),{min:i,max:i}),a=[e,t],s=un(un({},r),{},{bounds:a});return{value:e8(k1(n),s,n),settings:s}};var Lfe=Object.freeze({__proto__:null,schema:Nfe,format:k1,sanitize:e8,normalize:Pfe});const Ife=["value","bounds","onDrag"],Bfe=["bounds"],zfe=Gt("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function kfe(n){let{value:e,bounds:[t,i],onDrag:r}=n,a=li(n,Ife);const s=F.useRef(null),o=F.useRef(null),l=F.useRef(null),u=F.useRef(0),h=Ku("sizes","scrubberWidth"),p=d_(({event:_,first:S,xy:[x],movement:[w],memo:T={}})=>{if(S){const{width:C,left:N}=s.current.getBoundingClientRect();u.current=C-parseFloat(h);const D=(_==null?void 0:_.target)===o.current||(_==null?void 0:_.target)===l.current;T.pos=P1((x-N)/C,t,i);const P=Math.abs(T.pos-e.min)-Math.abs(T.pos-e.max);T.key=P<0||P===0&&T.pos<=e.min?"min":"max",D&&(T.pos=e[T.key])}const M=T.pos+P1(w/u.current,0,i-t);return r({[T.key]:Ple(M,a[T.key])}),T}),g=`calc(${N1(e.min,t,i)} * (100% - ${h} - 8px) + 4px)`,y=`calc(${1-N1(e.max,t,i)} * (100% - ${h} - 8px) + 4px)`;return B.createElement(TG,hr({ref:s},p()),B.createElement(wG,null,B.createElement(MG,{style:{left:g,right:y}})),B.createElement(OO,{position:"left",ref:o,style:{left:g}}),B.createElement(OO,{position:"right",ref:l,style:{right:y}}))}function Ffe(){const{label:n,displayValue:e,onUpdate:t,settings:i}=Va(),r=li(i,Bfe);return B.createElement(B.Fragment,null,B.createElement(Vo,{input:!0},B.createElement(Kl,null,n),B.createElement(zfe,null,B.createElement(kfe,hr({value:e},i,{onDrag:t})),B.createElement(M3,{value:e,settings:r,onUpdate:t,innerLabelTrim:0}))))}var Hfe=un({component:Ffe},Lfe);const Vfe=()=>{const n=new Map;return{on:(e,t)=>{let i=n.get(e);i===void 0&&(i=new Set,n.set(e,i)),i.add(t)},off:(e,t)=>{const i=n.get(e);i!==void 0&&(i.delete(t),i.size===0&&n.delete(e))},emit:(e,...t)=>{const i=n.get(e);if(i!==void 0)for(const r of i)r(...t)}}},Gfe=["type","value"],jfe=["onChange","transient","onEditStart","onEditEnd"],qfe=function(){const e=Nue(Pue(()=>({data:{}}))),t=Vfe();this.storeId=Woe(),this.useStore=e;const i={},r=new Set;this.getVisiblePaths=()=>{const s=this.getData(),o=Object.keys(s),l=[];Object.entries(i).forEach(([h,p])=>{p.render&&o.some(g=>g.indexOf(h)===0)&&!p.render(this.get)&&l.push(h+".")});const u=[];return r.forEach(h=>{h in s&&s[h].__refCount>0&&l.every(p=>h.indexOf(p)===-1)&&(!s[h].render||s[h].render(this.get))&&u.push(h)}),u},this.setOrderedPaths=s=>{s.forEach(o=>r.add(o))},this.orderPaths=s=>(this.setOrderedPaths(s),s),this.disposePaths=s=>{e.setState(o=>{const l=o.data;return s.forEach(u=>{if(u in l){const h=l[u];h.__refCount--,h.__refCount===0&&h.type in dh&&delete l[u]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=s=>i[s]||{},this.getData=()=>e.getState().data,this.addData=(s,o)=>{e.setState(l=>{const u=l.data;return Object.entries(s).forEach(([h,p])=>{let g=u[h];if(g){const{type:y,value:_}=p,S=li(p,Gfe);y!==g.type?Wu(Ar.INPUT_TYPE_OVERRIDE,h,g.type,y):((g.__refCount===0||o)&&Object.assign(g,S),g.__refCount++)}else u[h]=un(un({},p),{},{__refCount:1})}),{data:u}})},this.setValueAtPath=(s,o,l)=>{e.setState(u=>{const h=u.data;return GI(h[s],o,s,this,l),{data:h}})},this.setSettingsAtPath=(s,o)=>{e.setState(l=>{const u=l.data;return u[s].settings=un(un({},u[s].settings),o),{data:u}})},this.disableInputAtPath=(s,o)=>{e.setState(l=>{const u=l.data;return u[s].disabled=o,{data:u}})},this.set=(s,o)=>{e.setState(l=>{const u=l.data;return Object.entries(s).forEach(([h,p])=>{try{GI(u[h],p,void 0,void 0,o)}catch{}}),{data:u}})},this.getInput=s=>{try{return this.getData()[s]}catch{Wu(Ar.PATH_DOESNT_EXIST,s)}},this.get=s=>{var o;return(o=this.getInput(s))===null||o===void 0?void 0:o.value},this.emitOnEditStart=s=>{t.emit(`onEditStart:${s}`,this.get(s),s,un(un({},this.getInput(s)),{},{get:this.get}))},this.emitOnEditEnd=s=>{t.emit(`onEditEnd:${s}`,this.get(s),s,un(un({},this.getInput(s)),{},{get:this.get}))},this.subscribeToEditStart=(s,o)=>{const l=`onEditStart:${s}`;return t.on(l,o),()=>t.off(l,o)},this.subscribeToEditEnd=(s,o)=>{const l=`onEditEnd:${s}`;return t.on(l,o),()=>t.off(l,o)};const a=(s,o,l)=>{const u={};return Object.entries(s).forEach(([h,p])=>{if(h==="")return Wu(Ar.EMPTY_KEY);let g=N3(o,h);if(p.type===dh.FOLDER){const y=a(p.schema,g,l);Object.assign(u,y),g in i||(i[g]=p.settings)}else if(h in l)Wu(Ar.DUPLICATE_KEYS,h,g,l[h].path);else{const y=Joe(p,h,g,u);if(y){const{type:_,options:S,input:x}=y,{onChange:w,transient:T,onEditStart:M,onEditEnd:C}=S,N=li(S,jfe);u[g]=un(un(un({type:_},N),x),{},{fromPanel:!0}),l[h]={path:g,onChange:w,transient:T,onEditStart:M,onEditEnd:C}}else Wu(Ar.UNKNOWN_INPUT,g,p)}}),u};this.getDataFromSchema=s=>{const o={};return[a(s,"",o),o]}},Wfe=new qfe,RB=n=>"__levaInput"in n,Yfe=(n,e)=>{const t={},i=e?e.toLowerCase():null;return n.forEach(r=>{const[a,s]=Xue(r);(!i||a.toLowerCase().indexOf(i)>-1)&&$ue(t,s,{[a]:{__levaInput:!0,path:r}})}),t},$fe=["type","label","path","valueKey","value","settings","setValue","disabled"];function Xfe(n){let{type:e,label:t,path:i,valueKey:r,value:a,settings:s,setValue:o,disabled:l}=n,u=li(n,$fe);const{displayValue:h,onChange:p,onUpdate:g}=xG({type:e,value:a,settings:s,setValue:o}),y=up[e].component;return y?B.createElement(hG.Provider,{value:un({key:r,path:i,id:""+i,label:t,displayValue:h,value:a,onChange:p,onUpdate:g,settings:s,setValue:o,disabled:l},u)},B.createElement(yle,{disabled:l},B.createElement(y,null))):(Wu(Ar.NO_COMPONENT_FOR_TYPE,e,i),null)}const Kfe=Gt("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function Zfe({onClick:n,settings:e,label:t}){const i=f_();return B.createElement(Vo,null,B.createElement(Kfe,{disabled:e.disabled,onClick:()=>n(i.get)},t))}const Qfe=Gt("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),Jfe=Gt("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),ehe=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,i=e;return typeof e.opts=="object"&&(i.label!==void 0&&(t=e.label),i=e.opts),{label:t,opts:i}};function the(n){const{label:e,opts:t}=ehe(n),i=f_();return B.createElement(Vo,{input:!!e},e&&B.createElement(Kl,null,e),B.createElement(Qfe,null,Object.entries(t).map(([r,a])=>B.createElement(Jfe,{key:r,onClick:()=>a(i.get)},r))))}const nhe=Gt("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),t8=100;function ihe(n,e){n.push(e),n.length>t8&&n.shift()}const rhe=F.forwardRef(function({initialValue:n},e){const t=Ku("colors","highlight3"),i=Ku("colors","elevation2"),r=Ku("colors","highlight1"),[a,s]=F.useMemo(()=>[os(r).alpha(.4).toRgbString(),os(r).alpha(.1).toRgbString()],[r]),o=F.useRef([n]),l=F.useRef(n),u=F.useRef(n),h=F.useRef(),p=F.useCallback((_,S)=>{if(!_)return;const{width:x,height:w}=_,T=new Path2D,M=x/t8,C=w*.05;for(let P=0;P<o.current.length;P++){const z=N1(o.current[P],l.current,u.current),I=M*P,L=w-z*(w-C*2)-C;T.lineTo(I,L)}S.clearRect(0,0,x,w);const N=new Path2D(T);N.lineTo(M*(o.current.length+1),w),N.lineTo(0,w),N.lineTo(0,0);const D=S.createLinearGradient(0,0,0,w);D.addColorStop(0,a),D.addColorStop(1,s),S.fillStyle=D,S.fill(N),S.strokeStyle=i,S.lineJoin="round",S.lineWidth=14,S.stroke(T),S.strokeStyle=t,S.lineWidth=2,S.stroke(T)},[t,i,a,s]),[g,y]=Ale(p);return F.useImperativeHandle(e,()=>({frame:_=>{(l.current===void 0||_<l.current)&&(l.current=_),(u.current===void 0||_>u.current)&&(u.current=_),ihe(o.current,_),h.current=requestAnimationFrame(()=>p(g.current,y.current))}}),[g,y,p]),F.useEffect(()=>()=>cancelAnimationFrame(h.current),[]),B.createElement(nhe,{ref:g})}),OB=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),ahe=F.forwardRef(function({initialValue:n},e){const[t,i]=F.useState(OB(n));return F.useImperativeHandle(e,()=>({frame:r=>i(OB(r))}),[]),B.createElement("div",null,t)});function DB(n){return typeof n=="function"?n():n.current}function she({label:n,objectOrFn:e,settings:t}){const i=F.useRef(),r=F.useRef(DB(e));return F.useEffect(()=>{const a=window.setInterval(()=>{var s;document.hidden||(s=i.current)===null||s===void 0||s.frame(DB(e))},t.interval);return()=>window.clearInterval(a)},[e,t.interval]),B.createElement(Vo,{input:!0},B.createElement(Kl,{align:"top"},n),t.graph?B.createElement(rhe,{ref:i,initialValue:r.current}):B.createElement(ahe,{ref:i,initialValue:r.current}))}const ohe=["type","label","key"],lhe={[dh.BUTTON]:Zfe,[dh.BUTTON_GROUP]:the,[dh.MONITOR]:she},che=B.memo(({path:n})=>{const[e,{set:t,setSettings:i,disable:r,storeId:a,emitOnEditStart:s,emitOnEditEnd:o}]=Rle(n);if(!e)return null;const{type:l,label:u,key:h}=e,p=li(e,ohe);if(l in dh){const g=lhe[l];return B.createElement(g,hr({label:u,path:n},p))}return l in up?B.createElement(Xfe,hr({key:a+n,type:l,label:u,storeId:a,path:n,valueKey:h,setValue:t,setSettings:i,disable:r,emitOnEditStart:s,emitOnEditEnd:o},p)):(Ioe(Ar.UNSUPPORTED_INPUT,l,n),null)});function uhe({toggle:n,toggled:e,name:t}){return B.createElement(mle,{onClick:()=>n()},B.createElement(T3,{toggled:e}),B.createElement("div",null,t))}const fhe=({name:n,path:e,tree:t})=>{const i=f_(),r=N3(e,n),{collapsed:a,color:s}=i.getFolderSettings(r),[o,l]=F.useState(!a),u=F.useRef(null),h=Ku("colors","folderWidgetColor"),p=Ku("colors","folderTextColor");return F.useLayoutEffect(()=>{u.current.style.setProperty("--leva-colors-folderWidgetColor",s||h),u.current.style.setProperty("--leva-colors-folderTextColor",s||p)},[s,h,p]),B.createElement(L1,{ref:u},B.createElement(uhe,{name:n,toggled:o,toggle:()=>l(g=>!g)}),B.createElement(n8,{parent:r,tree:t,toggled:o}))},n8=B.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:i,tree:r,toggled:a})=>{const{wrapperRef:s,contentRef:o}=Que(a),l=f_(),u=([p,g])=>{var y;return(RB(g)?(y=l.getInput(g.path))===null||y===void 0?void 0:y.order:l.getFolderSettings(N3(i,p)).order)||0},h=Object.entries(r).sort((p,g)=>u(p)-u(g));return B.createElement(CO,{ref:s,isRoot:n,fill:e,flat:t},B.createElement(yG,{ref:o,isRoot:n,toggled:a},h.map(([p,g])=>RB(g)?B.createElement(che,{key:g.path,valueKey:g.valueKey,path:g.path}):B.createElement(fhe,{key:p,name:p,path:i,tree:g}))))}),hhe=Gt("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${bG}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),i8=40,F1=Gt("i",{$flexCenter:"",width:i8,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),dhe=Gt("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),phe=Gt("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${F1}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),mhe=Gt("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),ghe=Gt("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:i8}}}}),vhe=B.forwardRef(({setFilter:n,toggle:e},t)=>{const[i,r]=F.useState(""),a=F.useMemo(()=>sG(n,250),[n]),s=()=>{n(""),r("")},o=l=>{const u=l.currentTarget.value;e(!0),r(u)};return F.useEffect(()=>{a(i)},[i,a]),B.createElement(B.Fragment,null,B.createElement(mhe,{ref:t,value:i,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:o}),B.createElement(F1,{onClick:()=>s(),style:{visibility:i?"visible":"hidden"}},B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},B.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function yhe({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:i,toggle:r,toggled:a,title:s,drag:o,filterEnabled:l,from:u}){const[h,p]=F.useState(!1),g=F.useRef(null);F.useEffect(()=>{var _,S;h?(_=g.current)===null||_===void 0||_.focus():(S=g.current)===null||S===void 0||S.blur()},[h]);const y=d_(({offset:[_,S],first:x,last:w})=>{e({x:_,y:S}),x&&t({x:_,y:S}),w&&i({x:_,y:S})},{filterTaps:!0,from:({offset:[_,S]})=>[(u==null?void 0:u.x)||_,(u==null?void 0:u.y)||S]});return F.useEffect(()=>{const _=S=>{S.key==="L"&&S.shiftKey&&S.metaKey&&p(x=>!x)};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[]),B.createElement(B.Fragment,null,B.createElement(dhe,{mode:o?"drag":void 0},B.createElement(F1,{active:!a,onClick:()=>r()},B.createElement(T3,{toggled:a,width:12,height:8})),B.createElement(ghe,hr({},o?y():{},{drag:o,filterEnabled:l}),s===void 0&&o?B.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},B.createElement("circle",{cx:"2",cy:"2",r:"2"}),B.createElement("circle",{cx:"14",cy:"2",r:"2"}),B.createElement("circle",{cx:"26",cy:"2",r:"2"}),B.createElement("circle",{cx:"2",cy:"12",r:"2"}),B.createElement("circle",{cx:"14",cy:"12",r:"2"}),B.createElement("circle",{cx:"26",cy:"12",r:"2"})):s),l&&B.createElement(F1,{active:h,onClick:()=>p(_=>!_)},B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},B.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),B.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),B.createElement(phe,{toggled:h},B.createElement(vhe,{ref:g,setFilter:n,toggle:r})))}const _he=["store","hidden","theme","collapsed"];function bhe(n){let{store:e,hidden:t=!1,theme:i,collapsed:r=!1}=n,a=li(n,_he);const s=Zue(()=>cle(i),[i]),[o,l]=F.useState(!r),u=typeof r=="object"?!r.collapsed:o,h=F.useMemo(()=>typeof r=="object"?p=>{typeof p=="function"?r.onChange(!p(!r.collapsed)):r.onChange(!p)}:l,[r]);return!e||t?null:B.createElement(x3.Provider,{value:s},B.createElement(She,hr({store:e},a,{toggled:u,setToggle:h,rootClass:s.className})))}const She=B.memo(({store:n,rootClass:e,fill:t=!1,flat:i=!1,neverHide:r=!1,oneLineLabels:a=!1,titleBar:s={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:o=!1,toggled:l,setToggle:u})=>{var h,p;const g=Jue(n),[y,_]=F.useState(""),S=F.useMemo(()=>Yfe(g,y),[g,y]),[x,w]=EG(),T=r||g.length>0,M=typeof s=="object"&&s.title||void 0,C=typeof s=="object"&&(h=s.drag)!==null&&h!==void 0?h:!0,N=typeof s=="object"&&(p=s.filter)!==null&&p!==void 0?p:!0,D=typeof s=="object"&&s.position||void 0,P=typeof s=="object"&&s.onDrag||void 0,z=typeof s=="object"&&s.onDragStart||void 0,I=typeof s=="object"&&s.onDragEnd||void 0;return B.useEffect(()=>{w({x:D==null?void 0:D.x,y:D==null?void 0:D.y})},[D,w]),lle(),B.createElement(Roe,null,B.createElement(pG.Provider,{value:{hideCopyButton:o}},B.createElement(hhe,{ref:x,className:e,fill:t,flat:i,oneLineLabels:a,hideTitleBar:!s,style:{display:T?"block":"none"}},s&&B.createElement(yhe,{onDrag:L=>{w(L),P==null||P(L)},onDragStart:L=>z==null?void 0:z(L),onDragEnd:L=>I==null?void 0:I(L),setFilter:_,toggle:L=>u(H=>L??!H),toggled:l,title:M,drag:C,filterEnabled:N,from:D}),T&&B.createElement(dG.Provider,{value:n},B.createElement(n8,{isRoot:!0,fill:t,flat:i,tree:S,toggled:l})))))}),xhe=["isRoot"];function Ehe(n){let{isRoot:e=!1}=n,t=li(n,xhe);return F.useEffect(()=>()=>{},[e]),B.createElement(bhe,hr({store:Wfe},t))}uf(ff.SELECT,Wle);uf(ff.IMAGE,Ufe);uf(ff.NUMBER,Ile);uf(ff.COLOR,ufe);uf(ff.STRING,tce);uf(ff.BOOLEAN,lce);uf(ff.INTERVAL,Hfe);uf(ff.VECTOR3D,hfe);uf(ff.VECTOR2D,bfe);/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.8.2
*/var Bo=Uint8Array,ug=Uint16Array,whe=Int32Array,r8=new Bo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),a8=new Bo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),The=new Bo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s8=function(n,e){for(var t=new ug(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new whe(t[30]),i=1;i<30;++i)for(var a=t[i];a<t[i+1];++a)r[a]=a-t[i]<<5|i;return{b:t,r}},o8=s8(r8,2),l8=o8.b,Mhe=o8.r;l8[28]=258,Mhe[258]=28;var Ahe=s8(a8,0),Che=Ahe.b,HO=new ug(32768);for(var Ai=0;Ai<32768;++Ai){var ih=(Ai&43690)>>1|(Ai&21845)<<1;ih=(ih&52428)>>2|(ih&13107)<<2,ih=(ih&61680)>>4|(ih&3855)<<4,HO[Ai]=((ih&65280)>>8|(ih&255)<<8)>>1}var a0=(function(n,e,t){for(var i=n.length,r=0,a=new ug(e);r<i;++r)n[r]&&++a[n[r]-1];var s=new ug(e);for(r=1;r<e;++r)s[r]=s[r-1]+a[r-1]<<1;var o;if(t){o=new ug(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var u=r<<4|n[r],h=e-n[r],p=s[n[r]-1]++<<h,g=p|(1<<h)-1;p<=g;++p)o[HO[p]>>l]=u}else for(o=new ug(i),r=0;r<i;++r)n[r]&&(o[r]=HO[s[n[r]-1]++]>>15-n[r]);return o}),g_=new Bo(288);for(var Ai=0;Ai<144;++Ai)g_[Ai]=8;for(var Ai=144;Ai<256;++Ai)g_[Ai]=9;for(var Ai=256;Ai<280;++Ai)g_[Ai]=7;for(var Ai=280;Ai<288;++Ai)g_[Ai]=8;var c8=new Bo(32);for(var Ai=0;Ai<32;++Ai)c8[Ai]=5;var Rhe=a0(g_,9,1),Ohe=a0(c8,5,1),KM=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Ul=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},ZM=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Dhe=function(n){return(n+7)/8|0},Uhe=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Bo(n.subarray(e,t))},Nhe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Bl=function(n,e,t){var i=new Error(e||Nhe[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,Bl),!t)throw i;return i},Phe=function(n,e,t,i){var r=n.length,a=0;if(!r||e.f&&!e.l)return t||new Bo(0);var s=!t,o=s||e.i!=2,l=e.i;s&&(t=new Bo(r*3));var u=function(qe){var _e=t.length;if(qe>_e){var Ae=new Bo(Math.max(_e*2,qe));Ae.set(t),t=Ae}},h=e.f||0,p=e.p||0,g=e.b||0,y=e.l,_=e.d,S=e.m,x=e.n,w=r*8;do{if(!y){h=Ul(n,p,1);var T=Ul(n,p+1,3);if(p+=3,T)if(T==1)y=Rhe,_=Ohe,S=9,x=5;else if(T==2){var D=Ul(n,p,31)+257,P=Ul(n,p+10,15)+4,z=D+Ul(n,p+5,31)+1;p+=14;for(var I=new Bo(z),L=new Bo(19),H=0;H<P;++H)L[The[H]]=Ul(n,p+H*3,7);p+=P*3;for(var j=KM(L),G=(1<<j)-1,K=a0(L,j,1),H=0;H<z;){var ee=K[Ul(n,p,G)];p+=ee&15;var M=ee>>4;if(M<16)I[H++]=M;else{var Y=0,re=0;for(M==16?(re=3+Ul(n,p,3),p+=2,Y=I[H-1]):M==17?(re=3+Ul(n,p,7),p+=3):M==18&&(re=11+Ul(n,p,127),p+=7);re--;)I[H++]=Y}}var J=I.subarray(0,D),se=I.subarray(D);S=KM(J),x=KM(se),y=a0(J,S,1),_=a0(se,x,1)}else Bl(1);else{var M=Dhe(p)+4,C=n[M-4]|n[M-3]<<8,N=M+C;if(N>r){l&&Bl(0);break}o&&u(g+C),t.set(n.subarray(M,N),g),e.b=g+=C,e.p=p=N*8,e.f=h;continue}if(p>w){l&&Bl(0);break}}o&&u(g+131072);for(var q=(1<<S)-1,X=(1<<x)-1,oe=p;;oe=p){var Y=y[ZM(n,p)&q],ue=Y>>4;if(p+=Y&15,p>w){l&&Bl(0);break}if(Y||Bl(2),ue<256)t[g++]=ue;else if(ue==256){oe=p,y=null;break}else{var Z=ue-254;if(ue>264){var H=ue-257,ce=r8[H];Z=Ul(n,p,(1<<ce)-1)+l8[H],p+=ce}var me=_[ZM(n,p)&X],de=me>>4;me||Bl(3),p+=me&15;var se=Che[de];if(de>3){var ce=a8[de];se+=ZM(n,p)&(1<<ce)-1,p+=ce}if(p>w){l&&Bl(0);break}o&&u(g+131072);var ve=g+Z;if(g<se){var We=a-se,ze=Math.min(se,ve);for(We+g<0&&Bl(3);g<ze;++g)t[g]=i[We+g]}for(;g<ve;++g)t[g]=t[g-se]}}e.l=y,e.p=oe,e.b=g,e.f=h,y&&(h=1,e.m=S,e.d=_,e.n=x)}while(!h);return g!=t.length&&s?Uhe(t,0,g):t.subarray(0,g)},Lhe=new Bo(0),Ihe=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Bl(6,"invalid zlib data"),(n[1]>>5&1)==1&&Bl(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function Bhe(n,e){return Phe(n.subarray(Ihe(n),-4),{i:2},e,e)}var zhe=typeof TextDecoder<"u"&&new TextDecoder,khe=0;try{zhe.decode(Lhe,{stream:!0}),khe=1}catch{}function u8(n,e,t){const i=t.length-n-1;if(e>=t[i])return i-1;if(e<=t[n])return n;let r=n,a=i,s=Math.floor((r+a)/2);for(;e<t[s]||e>=t[s+1];)e<t[s]?a=s:r=s,s=Math.floor((r+a)/2);return s}function Fhe(n,e,t,i){const r=[],a=[],s=[];r[0]=1;for(let o=1;o<=t;++o){a[o]=e-i[n+1-o],s[o]=i[n+o]-e;let l=0;for(let u=0;u<o;++u){const h=s[u+1],p=a[o-u],g=r[u]/(h+p);r[u]=l+h*g,l=p*g}r[o]=l}return r}function Hhe(n,e,t,i){const r=u8(n,i,e),a=Fhe(r,i,n,e),s=new yn(0,0,0,0);for(let o=0;o<=n;++o){const l=t[r-n+o],u=a[o],h=l.w*u;s.x+=l.x*h,s.y+=l.y*h,s.z+=l.z*h,s.w+=l.w*u}return s}function Vhe(n,e,t,i,r){const a=[];for(let p=0;p<=t;++p)a[p]=0;const s=[];for(let p=0;p<=i;++p)s[p]=a.slice(0);const o=[];for(let p=0;p<=t;++p)o[p]=a.slice(0);o[0][0]=1;const l=a.slice(0),u=a.slice(0);for(let p=1;p<=t;++p){l[p]=e-r[n+1-p],u[p]=r[n+p]-e;let g=0;for(let y=0;y<p;++y){const _=u[y+1],S=l[p-y];o[p][y]=_+S;const x=o[y][p-1]/o[p][y];o[y][p]=g+_*x,g=S*x}o[p][p]=g}for(let p=0;p<=t;++p)s[0][p]=o[p][t];for(let p=0;p<=t;++p){let g=0,y=1;const _=[];for(let S=0;S<=t;++S)_[S]=a.slice(0);_[0][0]=1;for(let S=1;S<=i;++S){let x=0;const w=p-S,T=t-S;p>=S&&(_[y][0]=_[g][0]/o[T+1][w],x=_[y][0]*o[w][T]);const M=w>=-1?1:-w,C=p-1<=T?S-1:t-p;for(let D=M;D<=C;++D)_[y][D]=(_[g][D]-_[g][D-1])/o[T+1][w+D],x+=_[y][D]*o[w+D][T];p<=T&&(_[y][S]=-_[g][S-1]/o[T+1][p],x+=_[y][S]*o[p][T]),s[S][p]=x;const N=g;g=y,y=N}}let h=t;for(let p=1;p<=i;++p){for(let g=0;g<=t;++g)s[p][g]*=h;h*=t-p}return s}function Ghe(n,e,t,i,r){const a=r<n?r:n,s=[],o=u8(n,i,e),l=Vhe(o,i,n,a,e),u=[];for(let h=0;h<t.length;++h){const p=t[h].clone(),g=p.w;p.x*=g,p.y*=g,p.z*=g,u[h]=p}for(let h=0;h<=a;++h){const p=u[o-n].clone().multiplyScalar(l[h][0]);for(let g=1;g<=n;++g)p.add(u[o-n+g].clone().multiplyScalar(l[h][g]));s[h]=p}for(let h=a+1;h<=r+1;++h)s[h]=new yn(0,0,0);return s}function jhe(n,e){let t=1;for(let r=2;r<=n;++r)t*=r;let i=1;for(let r=2;r<=e;++r)i*=r;for(let r=2;r<=n-e;++r)i*=r;return t/i}function qhe(n){const e=n.length,t=[],i=[];for(let a=0;a<e;++a){const s=n[a];t[a]=new le(s.x,s.y,s.z),i[a]=s.w}const r=[];for(let a=0;a<e;++a){const s=t[a].clone();for(let o=1;o<=a;++o)s.sub(r[a-o].clone().multiplyScalar(jhe(a,o)*i[o]));r[a]=s.divideScalar(i[0])}return r}function Whe(n,e,t,i,r){const a=Ghe(n,e,t,i,r);return qhe(a)}class Yhe extends Ho{constructor(e,t,i,r,a){super();const s=t?t.length-1:0,o=i?i.length:0;this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=a||s;for(let l=0;l<o;++l){const u=i[l];this.controlPoints[l]=new yn(u.x,u.y,u.z,u.w)}}getPoint(e,t=new le){const i=t,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),a=Hhe(this.degree,this.knots,this.controlPoints,r);return a.w!==1&&a.divideScalar(a.w),i.set(a.x,a.y,a.z)}getTangent(e,t=new le){const i=t,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),a=Whe(this.degree,this.knots,this.controlPoints,r,1);return i.copy(a[1]).normalize(),i}toJSON(){const e=super.toJSON();return e.degree=this.degree,e.knots=[...this.knots],e.controlPoints=this.controlPoints.map(t=>t.toArray()),e.startKnot=this.startKnot,e.endKnot=this.endKnot,e}fromJSON(e){return super.fromJSON(e),this.degree=e.degree,this.knots=[...e.knots],this.controlPoints=e.controlPoints.map(t=>new yn(t[0],t[1],t[2],t[3])),this.startKnot=e.startKnot,this.endKnot=e.endKnot,this}}let Mn,br,ss;class $he extends ia{constructor(e){super(e)}load(e,t,i,r){const a=this,s=a.path===""?y1.extractUrlBase(e):a.path,o=new ql(this.manager);o.setPath(a.path),o.setResponseType("arraybuffer"),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(e,function(l){try{t(a.parse(l,s))}catch(u){r?r(u):console.error(u),a.manager.itemError(e)}},i,r)}parse(e,t){if(ede(e))Mn=new Jhe().parse(e);else{const r=d8(e);if(!tde(r))throw new Error("THREE.FBXLoader: Unknown format.");if(NB(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+NB(r));Mn=new Qhe().parse(r)}const i=new NH(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new Xhe(i,this.manager).parse(Mn)}}class Xhe{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){br=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),i=this.parseMaterials(t),r=this.parseDeformers(),a=new Khe().parse(r);return this.parseScene(r,a,i),ss}parseConnections(){const e=new Map;return"Connections"in Mn&&Mn.Connections.connections.forEach(function(i){const r=i[0],a=i[1],s=i[2];e.has(r)||e.set(r,{parents:[],children:[]});const o={ID:a,relationship:s};e.get(r).parents.push(o),e.has(a)||e.set(a,{parents:[],children:[]});const l={ID:r,relationship:s};e.get(a).children.push(l)}),e}parseImages(){const e={},t={};if("Video"in Mn.Objects){const i=Mn.Objects.Video;for(const r in i){const a=i[r],s=parseInt(r);if(e[s]=a.RelativeFilename||a.Filename,"Content"in a){const o=a.Content instanceof ArrayBuffer&&a.Content.byteLength>0,l=typeof a.Content=="string"&&a.Content!=="";if(o||l){const u=this.parseImage(i[r]);t[a.RelativeFilename||a.Filename]=u}}}}for(const i in e){const r=e[i];t[r]!==void 0?e[i]=t[r]:e[i]=e[i].split("\\").pop()}return e}parseImage(e){const t=e.Content,i=e.RelativeFilename||e.Filename,r=i.slice(i.lastIndexOf(".")+1).toLowerCase();let a;switch(r){case"bmp":a="image/bmp";break;case"jpg":case"jpeg":a="image/jpeg";break;case"png":a="image/png";break;case"tif":a="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",i),a="image/tga";break;default:console.warn('FBXLoader: Image type "'+r+'" is not supported.');return}if(typeof t=="string")return"data:"+a+";base64,"+t;{const s=new Uint8Array(t);return window.URL.createObjectURL(new Blob([s],{type:a}))}}parseTextures(e){const t=new Map;if("Texture"in Mn.Objects){const i=Mn.Objects.Texture;for(const r in i){const a=this.parseTexture(i[r],e);t.set(parseInt(r),a)}}return t}parseTexture(e,t){const i=this.loadTexture(e,t);i.ID=e.id,i.name=e.attrName;const r=e.WrapModeU,a=e.WrapModeV,s=r!==void 0?r.value:0,o=a!==void 0?a.value:0;if(i.wrapS=s===0?tp:ks,i.wrapT=o===0?tp:ks,"Scaling"in e){const l=e.Scaling.value;i.repeat.x=l[0],i.repeat.y=l[1]}if("Translation"in e){const l=e.Translation.value;i.offset.x=l[0],i.offset.y=l[1]}return i}loadTexture(e,t){const i=new Set(["tga","tif","tiff","exr","dds","hdr","ktx2"]),r=e.FileName.split(".").pop().toLowerCase(),a=i.has(r)?this.manager.getHandler(`.${r}`):this.textureLoader;if(!a)return console.warn(`FBXLoader: ${r.toUpperCase()} loader not found, creating placeholder texture for`,e.RelativeFilename),new Pi;const s=a.path;s||a.setPath(this.textureLoader.path);const o=br.get(e.id).children;let l;o!==void 0&&o.length>0&&t[o[0].ID]!==void 0&&(l=t[o[0].ID],(l.indexOf("blob:")===0||l.indexOf("data:")===0)&&a.setPath(void 0));const u=a.load(l);return a.setPath(s),u}parseMaterials(e){const t=new Map;if("Material"in Mn.Objects){const i=Mn.Objects.Material;for(const r in i){const a=this.parseMaterial(i[r],e);a!==null&&t.set(parseInt(r),a)}}return t}parseMaterial(e,t){const i=e.id,r=e.attrName;let a=e.ShadingModel;if(typeof a=="object"&&(a=a.value),!br.has(i))return null;const s=this.parseParameters(e,t,i);let o;switch(a.toLowerCase()){case"phong":o=new sg;break;case"lambert":o=new UD;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',a),o=new sg;break}return o.setValues(s),o.name=r,o}parseParameters(e,t,i){const r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=cn.toWorkingColorSpace(new yt().fromArray(e.Diffuse.value),ni):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(r.color=cn.toWorkingColorSpace(new yt().fromArray(e.DiffuseColor.value),ni)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=cn.toWorkingColorSpace(new yt().fromArray(e.Emissive.value),ni):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(r.emissive=cn.toWorkingColorSpace(new yt().fromArray(e.EmissiveColor.value),ni)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),r.opacity=1-(e.TransparencyFactor?parseFloat(e.TransparencyFactor.value):0),(r.opacity===1||r.opacity===0)&&(r.opacity=e.Opacity?parseFloat(e.Opacity.value):null,r.opacity===null&&(r.opacity=1-(e.TransparentColor?parseFloat(e.TransparentColor.value[0]):0))),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=cn.toWorkingColorSpace(new yt().fromArray(e.Specular.value),ni):e.SpecularColor&&e.SpecularColor.type==="Color"&&(r.specular=cn.toWorkingColorSpace(new yt().fromArray(e.SpecularColor.value),ni));const a=this;return br.get(i).children.forEach(function(s){const o=s.relationship;switch(o){case"Bump":r.bumpMap=a.getTexture(t,s.ID);break;case"Maya|TEX_ao_map":r.aoMap=a.getTexture(t,s.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=a.getTexture(t,s.ID),r.map!==void 0&&(r.map.colorSpace=ni);break;case"DisplacementColor":r.displacementMap=a.getTexture(t,s.ID);break;case"EmissiveColor":r.emissiveMap=a.getTexture(t,s.ID),r.emissiveMap!==void 0&&(r.emissiveMap.colorSpace=ni);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=a.getTexture(t,s.ID);break;case"ReflectionColor":r.envMap=a.getTexture(t,s.ID),r.envMap!==void 0&&(r.envMap.mapping=mg,r.envMap.colorSpace=ni);break;case"SpecularColor":r.specularMap=a.getTexture(t,s.ID),r.specularMap!==void 0&&(r.specularMap.colorSpace=ni);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=a.getTexture(t,s.ID),r.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",o);break}}),r}getTexture(e,t){return"LayeredTexture"in Mn.Objects&&t in Mn.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=br.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in Mn.Objects){const i=Mn.Objects.Deformer;for(const r in i){const a=i[r],s=br.get(parseInt(r));if(a.attrType==="Skin"){const o=this.parseSkeleton(s,i);o.ID=r,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),o.geometryID=s.parents[0].ID,e[r]=o}else if(a.attrType==="BlendShape"){const o={id:r};o.rawTargets=this.parseMorphTargets(s,i),o.id=r,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=o}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const i=[];return e.children.forEach(function(r){const a=t[r.ID];if(a.attrType!=="Cluster")return;const s={ID:r.ID,indices:[],weights:[],transformLink:new Mt().fromArray(a.TransformLink.a)};"Indexes"in a&&(s.indices=a.Indexes.a,s.weights=a.Weights.a),i.push(s)}),{rawBones:i,bones:[]}}parseMorphTargets(e,t){const i=[];for(let r=0;r<e.children.length;r++){const a=e.children[r],s=t[a.ID],o={name:s.attrName,initialWeight:s.DeformPercent,id:s.id,fullWeights:s.FullWeights.a};if(s.attrType!=="BlendShapeChannel")return;o.geoID=br.get(parseInt(a.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,i.push(o)}return i}parseScene(e,t,i){ss=new hh;const r=this.parseModels(e.skeletons,t,i),a=Mn.Objects.Model,s=this;r.forEach(function(l){const u=a[l.ID];s.setLookAtProperties(l,u),br.get(l.ID).parents.forEach(function(p){const g=r.get(p.ID);g!==void 0&&g.add(l)}),l.parent===null&&ss.add(l)}),this.bindSkeleton(e.skeletons,t,r),this.addGlobalSceneSettings(),ss.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const u=h8(l.userData.transformData);l.applyMatrix4(u),l.updateWorldMatrix()}});const o=new Zhe().parse();ss.children.length===1&&ss.children[0].isGroup&&(ss.children[0].animations=o,ss=ss.children[0]),ss.animations=o}parseModels(e,t,i){const r=new Map,a=Mn.Objects.Model;for(const s in a){const o=parseInt(s),l=a[s],u=br.get(o);let h=this.buildSkeleton(u,e,o,l.attrName);if(!h){switch(l.attrType){case"Camera":h=this.createCamera(u);break;case"Light":h=this.createLight(u);break;case"Mesh":h=this.createMesh(u,t,i);break;case"NurbsCurve":h=this.createCurve(u,t);break;case"LimbNode":case"Root":h=new g0;break;case"Null":default:h=new hh;break}h.name=l.attrName?Rn.sanitizeNodeName(l.attrName):"",h.userData.originalName=l.attrName,h.ID=o}this.getTransformData(h,l),r.set(o,h)}return r}buildSkeleton(e,t,i,r){let a=null;return e.parents.forEach(function(s){for(const o in t){const l=t[o];l.rawBones.forEach(function(u,h){if(u.ID===s.ID){const p=a;a=new g0,a.matrixWorld.copy(u.transformLink),a.name=r?Rn.sanitizeNodeName(r):"",a.userData.originalName=r,a.ID=i,l.bones[h]=a,p!==null&&a.add(p)}})}}),a}createCamera(e){let t,i;if(e.children.forEach(function(r){const a=Mn.Objects.NodeAttribute[r.ID];a!==void 0&&(i=a)}),i===void 0)t=new On;else{let r=0;i.CameraProjectionType!==void 0&&i.CameraProjectionType.value===1&&(r=1);let a=1;i.NearPlane!==void 0&&(a=i.NearPlane.value/1e3);let s=1e3;i.FarPlane!==void 0&&(s=i.FarPlane.value/1e3);let o=window.innerWidth,l=window.innerHeight;i.AspectWidth!==void 0&&i.AspectHeight!==void 0&&(o=i.AspectWidth.value,l=i.AspectHeight.value);const u=o/l;let h=45;i.FieldOfView!==void 0&&(h=i.FieldOfView.value);const p=i.FocalLength?i.FocalLength.value:null;switch(r){case 0:t=new Ir(h,u,a,s),p!==null&&t.setFocalLength(p);break;case 1:console.warn("THREE.FBXLoader: Orthographic cameras not supported yet."),t=new On;break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),t=new On;break}}return t}createLight(e){let t,i;if(e.children.forEach(function(r){const a=Mn.Objects.NodeAttribute[r.ID];a!==void 0&&(i=a)}),i===void 0)t=new On;else{let r;i.LightType===void 0?r=0:r=i.LightType.value;let a=16777215;i.Color!==void 0&&(a=cn.toWorkingColorSpace(new yt().fromArray(i.Color.value),ni));let s=i.Intensity===void 0?1:i.Intensity.value/100;i.CastLightOnObject!==void 0&&i.CastLightOnObject.value===0&&(s=0);let o=0;i.FarAttenuationEnd!==void 0&&(i.EnableFarAttenuation!==void 0&&i.EnableFarAttenuation.value===0?o=0:o=i.FarAttenuationEnd.value);const l=1;switch(r){case 0:t=new v1(a,s,o,l);break;case 1:t=new kD(a,s);break;case 2:let u=Math.PI/3;i.InnerAngle!==void 0&&(u=Lr.degToRad(i.InnerAngle.value));let h=0;i.OuterAngle!==void 0&&(h=Lr.degToRad(i.OuterAngle.value),h=Math.max(h,1)),t=new zD(a,s,o,u,h,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),t=new v1(a,s);break}i.CastShadows!==void 0&&i.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,i){let r,a=null,s=null;const o=[];if(e.children.forEach(function(l){t.has(l.ID)&&(a=t.get(l.ID)),i.has(l.ID)&&o.push(i.get(l.ID))}),o.length>1?s=o:o.length>0?s=o[0]:(s=new sg({name:ia.DEFAULT_MATERIAL_NAME,color:13421772}),o.push(s)),"color"in a.attributes&&o.forEach(function(l){l.vertexColors=!0}),a.groups.length>0){let l=!1;for(let u=0,h=a.groups.length;u<h;u++){const p=a.groups[u];(p.materialIndex<0||p.materialIndex>=o.length)&&(p.materialIndex=o.length,l=!0)}if(l){const u=new sg;o.push(u)}}return a.FBX_Deformer?(r=new xD(a,s),r.normalizeSkinWeights()):r=new Ni(a,s),r}createCurve(e,t){const i=e.children.reduce(function(a,s){return t.has(s.ID)&&(a=t.get(s.ID)),a},null),r=new Ha({name:ia.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new ef(i,r)}getTransformData(e,t){const i={};"InheritType"in t&&(i.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?i.eulerOrder=P0(t.RotationOrder.value):i.eulerOrder=P0(0),"Lcl_Translation"in t&&(i.translation=t.Lcl_Translation.value),"PreRotation"in t&&(i.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(i.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(i.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(i.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(i.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(i.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(i.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(i.rotationPivot=t.RotationPivot.value),e.userData.transformData=i}setLookAtProperties(e,t){"LookAtProperty"in t&&br.get(e.ID).children.forEach(function(r){if(r.relationship==="LookAtProperty"){const a=Mn.Objects.Model[r.ID];if("Lcl_Translation"in a){const s=a.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(s),ss.add(e.target)):e.lookAt(new le().fromArray(s))}}})}bindSkeleton(e,t,i){const r=this.parsePoseNodes();for(const a in e){const s=e[a];br.get(parseInt(s.ID)).parents.forEach(function(l){if(t.has(l.ID)){const u=l.ID;br.get(u).parents.forEach(function(p){i.has(p.ID)&&i.get(p.ID).bind(new J0(s.bones),r[p.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in Mn.Objects){const t=Mn.Objects.Pose;for(const i in t)if(t[i].attrType==="BindPose"&&t[i].NbPoseNodes>0){const r=t[i].PoseNode;Array.isArray(r)?r.forEach(function(a){e[a.Node]=new Mt().fromArray(a.Matrix.a)}):e[r.Node]=new Mt().fromArray(r.Matrix.a)}}return e}addGlobalSceneSettings(){if("GlobalSettings"in Mn){if("AmbientColor"in Mn.GlobalSettings){const e=Mn.GlobalSettings.AmbientColor.value,t=e[0],i=e[1],r=e[2];if(t!==0||i!==0||r!==0){const a=new yt().setRGB(t,i,r,ni);ss.add(new FD(a,1))}}"UnitScaleFactor"in Mn.GlobalSettings&&(ss.userData.unitScaleFactor=Mn.GlobalSettings.UnitScaleFactor.value)}}}class Khe{constructor(){this.negativeMaterialIndices=!1}parse(e){const t=new Map;if("Geometry"in Mn.Objects){const i=Mn.Objects.Geometry;for(const r in i){const a=br.get(parseInt(r)),s=this.parseGeometry(a,i[r],e);t.set(parseInt(r),s)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,i){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,i);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,i){const r=i.skeletons,a=[],s=e.parents.map(function(p){return Mn.Objects.Model[p.ID]});if(s.length===0)return;const o=e.children.reduce(function(p,g){return r[g.ID]!==void 0&&(p=r[g.ID]),p},null);e.children.forEach(function(p){i.morphTargets[p.ID]!==void 0&&a.push(i.morphTargets[p.ID])});const l=s[0],u={};"RotationOrder"in l&&(u.eulerOrder=P0(l.RotationOrder.value)),"InheritType"in l&&(u.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(u.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(u.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(u.scale=l.GeometricScaling.value);const h=h8(u);return this.genGeometry(t,o,a,h)}genGeometry(e,t,i,r){const a=new on;e.attrName&&(a.name=e.attrName);const s=this.parseGeoNode(e,t),o=this.genBuffers(s),l=new Ct(o.vertex,3);if(l.applyMatrix4(r),a.setAttribute("position",l),o.colors.length>0&&a.setAttribute("color",new Ct(o.colors,3)),t&&(a.setAttribute("skinIndex",new oE(o.weightsIndices,4)),a.setAttribute("skinWeight",new Ct(o.vertexWeights,4)),a.FBX_Deformer=t),o.normal.length>0){const u=new rn().getNormalMatrix(r),h=new Ct(o.normal,3);h.applyNormalMatrix(u),a.setAttribute("normal",h)}if(o.uvs.forEach(function(u,h){const p=h===0?"uv":`uv${h}`;a.setAttribute(p,new Ct(o.uvs[h],2))}),s.material&&s.material.mappingType!=="AllSame"){let u=o.materialIndex[0],h=0;if(o.materialIndex.forEach(function(p,g){p!==u&&(a.addGroup(h,g-h,u),u=p,h=g)}),a.groups.length>0){const p=a.groups[a.groups.length-1],g=p.start+p.count;g!==o.materialIndex.length&&a.addGroup(g,o.materialIndex.length-g,u)}a.groups.length===0&&a.addGroup(0,o.materialIndex.length,o.materialIndex[0])}return this.addMorphTargets(a,e,i,r),a}parseGeoNode(e,t){const i={};if(i.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],i.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];let r=0;for(;e.LayerElementUV[r];)e.LayerElementUV[r].UV&&i.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return i.weightTable={},t!==null&&(i.skeleton=t,t.rawBones.forEach(function(r,a){r.indices.forEach(function(s,o){i.weightTable[s]===void 0&&(i.weightTable[s]=[]),i.weightTable[s].push({id:a,weight:r.weights[o]})})})),i}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let i=0,r=0,a=!1,s=[],o=[],l=[],u=[],h=[],p=[];const g=this;return e.vertexIndices.forEach(function(y,_){let S,x=!1;y<0&&(y=y^-1,x=!0);let w=[],T=[];if(s.push(y*3,y*3+1,y*3+2),e.color){const M=sx(_,i,y,e.color);l.push(M[0],M[1],M[2])}if(e.skeleton){if(e.weightTable[y]!==void 0&&e.weightTable[y].forEach(function(M){T.push(M.weight),w.push(M.id)}),T.length>4){a||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),a=!0);const M=[0,0,0,0],C=[0,0,0,0];T.forEach(function(N,D){let P=N,z=w[D];C.forEach(function(I,L,H){if(P>I){H[L]=P,P=I;const j=M[L];M[L]=z,z=j}})}),w=M,T=C}for(;T.length<4;)T.push(0),w.push(0);for(let M=0;M<4;++M)h.push(T[M]),p.push(w[M])}if(e.normal){const M=sx(_,i,y,e.normal);o.push(M[0],M[1],M[2])}e.material&&e.material.mappingType!=="AllSame"&&(S=sx(_,i,y,e.material)[0],S<0&&(g.negativeMaterialIndices=!0,S=0)),e.uv&&e.uv.forEach(function(M,C){const N=sx(_,i,y,M);u[C]===void 0&&(u[C]=[]),u[C].push(N[0]),u[C].push(N[1])}),r++,x&&(g.genFace(t,e,s,S,o,l,u,h,p,r),i++,r=0,s=[],o=[],l=[],u=[],h=[],p=[])}),t}getNormalNewell(e){const t=new le(0,0,0);for(let i=0;i<e.length;i++){const r=e[i],a=e[(i+1)%e.length];t.x+=(r.y-a.y)*(r.z+a.z),t.y+=(r.z-a.z)*(r.x+a.x),t.z+=(r.x-a.x)*(r.y+a.y)}return t.normalize(),t}getNormalTangentAndBitangent(e){const t=this.getNormalNewell(e),r=(Math.abs(t.z)>.5?new le(0,1,0):new le(0,0,1)).cross(t).normalize(),a=t.clone().cross(r).normalize();return{normal:t,tangent:r,bitangent:a}}flattenVertex(e,t,i){return new st(e.dot(t),e.dot(i))}genFace(e,t,i,r,a,s,o,l,u,h){let p;if(h>3){const g=[],y=t.baseVertexPositions||t.vertexPositions;for(let w=0;w<i.length;w+=3)g.push(new le(y[i[w]],y[i[w+1]],y[i[w+2]]));const{tangent:_,bitangent:S}=this.getNormalTangentAndBitangent(g),x=[];for(const w of g)x.push(this.flattenVertex(w,_,S));p=Vl.triangulateShape(x,[])}else p=[[0,1,2]];for(const[g,y,_]of p)e.vertex.push(t.vertexPositions[i[g*3]]),e.vertex.push(t.vertexPositions[i[g*3+1]]),e.vertex.push(t.vertexPositions[i[g*3+2]]),e.vertex.push(t.vertexPositions[i[y*3]]),e.vertex.push(t.vertexPositions[i[y*3+1]]),e.vertex.push(t.vertexPositions[i[y*3+2]]),e.vertex.push(t.vertexPositions[i[_*3]]),e.vertex.push(t.vertexPositions[i[_*3+1]]),e.vertex.push(t.vertexPositions[i[_*3+2]]),t.skeleton&&(e.vertexWeights.push(l[g*4]),e.vertexWeights.push(l[g*4+1]),e.vertexWeights.push(l[g*4+2]),e.vertexWeights.push(l[g*4+3]),e.vertexWeights.push(l[y*4]),e.vertexWeights.push(l[y*4+1]),e.vertexWeights.push(l[y*4+2]),e.vertexWeights.push(l[y*4+3]),e.vertexWeights.push(l[_*4]),e.vertexWeights.push(l[_*4+1]),e.vertexWeights.push(l[_*4+2]),e.vertexWeights.push(l[_*4+3]),e.weightsIndices.push(u[g*4]),e.weightsIndices.push(u[g*4+1]),e.weightsIndices.push(u[g*4+2]),e.weightsIndices.push(u[g*4+3]),e.weightsIndices.push(u[y*4]),e.weightsIndices.push(u[y*4+1]),e.weightsIndices.push(u[y*4+2]),e.weightsIndices.push(u[y*4+3]),e.weightsIndices.push(u[_*4]),e.weightsIndices.push(u[_*4+1]),e.weightsIndices.push(u[_*4+2]),e.weightsIndices.push(u[_*4+3])),t.color&&(e.colors.push(s[g*3]),e.colors.push(s[g*3+1]),e.colors.push(s[g*3+2]),e.colors.push(s[y*3]),e.colors.push(s[y*3+1]),e.colors.push(s[y*3+2]),e.colors.push(s[_*3]),e.colors.push(s[_*3+1]),e.colors.push(s[_*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(a[g*3]),e.normal.push(a[g*3+1]),e.normal.push(a[g*3+2]),e.normal.push(a[y*3]),e.normal.push(a[y*3+1]),e.normal.push(a[y*3+2]),e.normal.push(a[_*3]),e.normal.push(a[_*3+1]),e.normal.push(a[_*3+2])),t.uv&&t.uv.forEach(function(S,x){e.uvs[x]===void 0&&(e.uvs[x]=[]),e.uvs[x].push(o[x][g*2]),e.uvs[x].push(o[x][g*2+1]),e.uvs[x].push(o[x][y*2]),e.uvs[x].push(o[x][y*2+1]),e.uvs[x].push(o[x][_*2]),e.uvs[x].push(o[x][_*2+1])})}addMorphTargets(e,t,i,r){if(i.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const a=this;i.forEach(function(s){s.rawTargets.forEach(function(o){const l=Mn.Objects.Geometry[o.geoID];l!==void 0&&a.genMorphGeometry(e,t,l,r,o.name)})})}genMorphGeometry(e,t,i,r,a){const s=t.Vertices!==void 0?t.Vertices.a:[],o=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],l=i.Vertices!==void 0?i.Vertices.a:[],u=i.Indexes!==void 0?i.Indexes.a:[],h=e.attributes.position.count*3,p=new Float32Array(h);for(let S=0;S<u.length;S++){const x=u[S]*3;p[x]=l[S*3],p[x+1]=l[S*3+1],p[x+2]=l[S*3+2]}const g={vertexIndices:o,vertexPositions:p,baseVertexPositions:s},y=this.genBuffers(g),_=new Ct(y.vertex,3);_.name=a||i.attrName,_.applyMatrix4(r),e.morphAttributes.position.push(_)}parseNormals(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Normals.a;let a=[];return i==="IndexToDirect"&&("NormalIndex"in e?a=e.NormalIndex.a:"NormalsIndex"in e&&(a=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:a,mappingType:t,referenceType:i}}parseUVs(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.UV.a;let a=[];return i==="IndexToDirect"&&(a=e.UVIndex.a),{dataSize:2,buffer:r,indices:a,mappingType:t,referenceType:i}}parseVertexColors(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Colors.a;let a=[];i==="IndexToDirect"&&(a=e.ColorIndex.a);for(let s=0,o=new yt;s<r.length;s+=4)o.fromArray(r,s),cn.toWorkingColorSpace(o,ni),o.toArray(r,s);return{dataSize:4,buffer:r,indices:a,mappingType:t,referenceType:i}}parseMaterialIndices(e){const t=e.MappingInformationType,i=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};const r=e.Materials.a,a=[];for(let s=0;s<r.length;++s)a.push(s);return{dataSize:1,buffer:r,indices:a,mappingType:t,referenceType:i}}parseNurbsGeometry(e){const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new on;const i=t-1,r=e.KnotVector.a,a=[],s=e.Points.a;for(let p=0,g=s.length;p<g;p+=4)a.push(new yn().fromArray(s,p));let o,l;if(e.Form==="Closed")a.push(a[0]);else if(e.Form==="Periodic"){o=i,l=r.length-1-o;for(let p=0;p<i;++p)a.push(a[p])}const h=new Yhe(i,r,a,o,l).getPoints(a.length*12);return new on().setFromPoints(h)}}class Zhe{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const i in t){const r=t[i],a=this.addClip(r);e.push(a)}return e}parseClips(){if(Mn.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=Mn.Objects.AnimationCurveNode,t=new Map;for(const i in e){const r=e[i];if(r.attrName.match(/S|R|T|DeformPercent/)!==null){const a={id:r.id,attr:r.attrName,curves:{}};t.set(a.id,a)}}return t}parseAnimationCurves(e){const t=Mn.Objects.AnimationCurve;for(const i in t){const r={id:t[i].id,times:t[i].KeyTime.a.map(nde),values:t[i].KeyValueFloat.a},a=br.get(r.id);if(a!==void 0){const s=a.parents[0].ID,o=a.parents[0].relationship;o.match(/X/)?e.get(s).curves.x=r:o.match(/Y/)?e.get(s).curves.y=r:o.match(/Z/)?e.get(s).curves.z=r:o.match(/DeformPercent/)&&e.has(s)&&(e.get(s).curves.morph=r)}}}parseAnimationLayers(e){const t=Mn.Objects.AnimationLayer,i=new Map;for(const r in t){const a=[],s=br.get(parseInt(r));s!==void 0&&(s.children.forEach(function(l,u){if(e.has(l.ID)){const h=e.get(l.ID);if(h.curves.x!==void 0||h.curves.y!==void 0||h.curves.z!==void 0){if(a[u]===void 0){const p=br.get(l.ID).parents.filter(function(g){return g.relationship!==void 0})[0].ID;if(p!==void 0){const g=Mn.Objects.Model[p.toString()];if(g===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const y={modelName:g.attrName?Rn.sanitizeNodeName(g.attrName):"",ID:g.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};ss.traverse(function(_){_.ID===g.id&&(y.transform=_.matrix,_.userData.transformData&&(y.eulerOrder=_.userData.transformData.eulerOrder))}),y.transform||(y.transform=new Mt),"PreRotation"in g&&(y.preRotation=g.PreRotation.value),"PostRotation"in g&&(y.postRotation=g.PostRotation.value),a[u]=y}}a[u]&&(a[u][h.attr]=h)}else if(h.curves.morph!==void 0){if(a[u]===void 0){const p=br.get(l.ID).parents.filter(function(w){return w.relationship!==void 0})[0].ID,g=br.get(p).parents[0].ID,y=br.get(g).parents[0].ID,_=br.get(y).parents[0].ID,S=Mn.Objects.Model[_],x={modelName:S.attrName?Rn.sanitizeNodeName(S.attrName):"",morphName:Mn.Objects.Deformer[p].attrName};a[u]=x}a[u][h.attr]=h}}}),i.set(parseInt(r),a))}return i}parseAnimStacks(e){const t=Mn.Objects.AnimationStack,i={};for(const r in t){const a=br.get(parseInt(r)).children;a.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const s=e.get(a[0].ID);i[r]={name:t[r].attrName,layer:s}}return i}addClip(e){let t=[];const i=this;return e.layer.forEach(function(r){t=t.concat(i.generateTracks(r))}),new xg(e.name,-1,t)}generateTracks(e){const t=[];let i=new le,r=new le;if(e.transform&&e.transform.decompose(i,new Ki,r),i=i.toArray(),r=r.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const a=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");a!==void 0&&t.push(a)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const a=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);a!==void 0&&t.push(a)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const a=this.generateVectorTrack(e.modelName,e.S.curves,r,"scale");a!==void 0&&t.push(a)}if(e.DeformPercent!==void 0){const a=this.generateMorphTrack(e);a!==void 0&&t.push(a)}return t}generateVectorTrack(e,t,i,r){const a=this.getTimesForAllAxes(t),s=this.getKeyframeTrackValues(a,t,i);return new Sg(e+"."+r,a,s)}generateRotationTrack(e,t,i,r,a){let s,o;if(t.x!==void 0&&t.y!==void 0&&t.z!==void 0){const g=this.interpolateRotations(t.x,t.y,t.z,a);s=g[0],o=g[1]}const l=P0(0);i!==void 0&&(i=i.map(Lr.degToRad),i.push(l),i=new Cr().fromArray(i),i=new Ki().setFromEuler(i)),r!==void 0&&(r=r.map(Lr.degToRad),r.push(l),r=new Cr().fromArray(r),r=new Ki().setFromEuler(r).invert());const u=new Ki,h=new Cr,p=[];if(!o||!s)return new op(e+".quaternion",[0],[0]);for(let g=0;g<o.length;g+=3)h.set(o[g],o[g+1],o[g+2],a),u.setFromEuler(h),i!==void 0&&u.premultiply(i),r!==void 0&&u.multiply(r),g>2&&new Ki().fromArray(p,(g-3)/3*4).dot(u)<0&&u.set(-u.x,-u.y,-u.z,-u.w),u.toArray(p,g/3*4);return new op(e+".quaternion",s,p)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,i=t.values.map(function(a){return a/100}),r=ss.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new bg(e.modelName+".morphTargetInfluences["+r+"]",t.times,i)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(i,r){return i-r}),t.length>1){let i=1,r=t[0];for(let a=1;a<t.length;a++){const s=t[a];s!==r&&(t[i]=s,r=s,i++)}t=t.slice(0,i)}return t}getKeyframeTrackValues(e,t,i){const r=i,a=[];let s=-1,o=-1,l=-1;return e.forEach(function(u){if(t.x&&(s=t.x.times.indexOf(u)),t.y&&(o=t.y.times.indexOf(u)),t.z&&(l=t.z.times.indexOf(u)),s!==-1){const h=t.x.values[s];a.push(h),r[0]=h}else a.push(r[0]);if(o!==-1){const h=t.y.values[o];a.push(h),r[1]=h}else a.push(r[1]);if(l!==-1){const h=t.z.values[l];a.push(h),r[2]=h}else a.push(r[2])}),a}interpolateRotations(e,t,i,r){const a=[],s=[];a.push(e.times[0]),s.push(Lr.degToRad(e.values[0])),s.push(Lr.degToRad(t.values[0])),s.push(Lr.degToRad(i.values[0]));for(let o=1;o<e.values.length;o++){const l=[e.values[o-1],t.values[o-1],i.values[o-1]];if(isNaN(l[0])||isNaN(l[1])||isNaN(l[2]))continue;const u=l.map(Lr.degToRad),h=[e.values[o],t.values[o],i.values[o]];if(isNaN(h[0])||isNaN(h[1])||isNaN(h[2]))continue;const p=h.map(Lr.degToRad),g=[h[0]-l[0],h[1]-l[1],h[2]-l[2]],y=[Math.abs(g[0]),Math.abs(g[1]),Math.abs(g[2])];if(y[0]>=180||y[1]>=180||y[2]>=180){const S=Math.max(...y)/180,x=new Cr(...u,r),w=new Cr(...p,r),T=new Ki().setFromEuler(x),M=new Ki().setFromEuler(w);T.dot(M)&&M.set(-M.x,-M.y,-M.z,-M.w);const C=e.times[o-1],N=e.times[o]-C,D=new Ki,P=new Cr;for(let z=0;z<1;z+=1/S)D.copy(T.clone().slerp(M.clone(),z)),a.push(C+z*N),P.setFromQuaternion(D,r),s.push(P.x),s.push(P.y),s.push(P.z)}else a.push(e.times[o]),s.push(Lr.degToRad(e.values[o])),s.push(Lr.degToRad(t.values[o])),s.push(Lr.degToRad(i.values[o]))}return[a,s]}}class Qhe{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new f8,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,i=e.split(/[\r\n]+/);return i.forEach(function(r,a){const s=r.match(/^[\s\t]*;/),o=r.match(/^[\s\t]*$/);if(s||o)return;const l=r.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),u=r.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),h=r.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(r,l):u?t.parseNodeProperty(r,u,i[++a]):h?t.popStack():r.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(r)}),this.allNodes}parseNodeBegin(e,t){const i=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),a={name:i},s=this.parseNodeAttr(r),o=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(i,a):i in o?(i==="PoseNode"?o.PoseNode.push(a):o[i].id!==void 0&&(o[i]={},o[i][o[i].id]=o[i]),s.id!==""&&(o[i][s.id]=a)):typeof s.id=="number"?(o[i]={},o[i][s.id]=a):i!=="Properties70"&&(i==="PoseNode"?o[i]=[a]:o[i]=a),typeof s.id=="number"&&(a.id=s.id),s.name!==""&&(a.attrName=s.name),s.type!==""&&(a.attrType=s.type),this.pushStack(a)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let i="",r="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:i,type:r}}parseNodeProperty(e,t,i){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),a=t[2].replace(/^"/,"").replace(/"$/,"").trim();r==="Content"&&a===","&&(a=i.replace(/"/g,"").replace(/,$/,"").trim());const s=this.getCurrentNode();if(s.name==="Properties70"){this.parseNodeSpecialProperty(e,r,a);return}if(r==="C"){const l=a.split(",").slice(1),u=parseInt(l[0]),h=parseInt(l[1]);let p=a.split(",").slice(3);p=p.map(function(g){return g.trim().replace(/^"/,"")}),r="connections",a=[u,h],rde(a,p),s[r]===void 0&&(s[r]=[])}r==="Node"&&(s.id=a),r in s&&Array.isArray(s[r])?s[r].push(a):r!=="a"?s[r]=a:s.a=a,this.setCurrentProp(s,r),r==="a"&&a.slice(-1)!==","&&(s.a=JM(a))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=JM(t.a))}parseNodeSpecialProperty(e,t,i){const r=i.split('",').map(function(h){return h.trim().replace(/^\"/,"").replace(/\s/,"_")}),a=r[0],s=r[1],o=r[2],l=r[3];let u=r[4];switch(s){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":u=parseFloat(u);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":u=JM(u);break}this.getPrevNode()[a]={type:s,type2:o,flag:l,value:u},this.setCurrentProp(this.getPrevNode(),a)}}class Jhe{parse(e){const t=new UB(e);t.skip(23);const i=t.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);const r=new f8;for(;!this.endOfContent(t);){const a=this.parseNode(t,i);a!==null&&r.add(a.name,a)}return r}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const i={},r=t>=7500?e.getUint64():e.getUint32(),a=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const s=e.getUint8(),o=e.getString(s);if(r===0)return null;const l=[];for(let g=0;g<a;g++)l.push(this.parseProperty(e));const u=l.length>0?l[0]:"",h=l.length>1?l[1]:"",p=l.length>2?l[2]:"";for(i.singleProperty=a===1&&e.getOffset()===r;r>e.getOffset();){const g=this.parseNode(e,t);g!==null&&this.parseSubNode(o,i,g)}return i.propertyList=l,typeof u=="number"&&(i.id=u),h!==""&&(i.attrName=h),p!==""&&(i.attrType=p),o!==""&&(i.name=o),i}parseSubNode(e,t,i){if(i.singleProperty===!0){const r=i.propertyList[0];Array.isArray(r)?(t[i.name]=i,i.a=r):t[i.name]=r}else if(e==="Connections"&&i.name==="C"){const r=[];i.propertyList.forEach(function(a,s){s!==0&&r.push(a)}),t.connections===void 0&&(t.connections=[]),t.connections.push(r)}else if(i.name==="Properties70")Object.keys(i).forEach(function(a){t[a]=i[a]});else if(e==="Properties70"&&i.name==="P"){let r=i.propertyList[0],a=i.propertyList[1];const s=i.propertyList[2],o=i.propertyList[3];let l;r.indexOf("Lcl ")===0&&(r=r.replace("Lcl ","Lcl_")),a.indexOf("Lcl ")===0&&(a=a.replace("Lcl ","Lcl_")),a==="Color"||a==="ColorRGB"||a==="Vector"||a==="Vector3D"||a.indexOf("Lcl_")===0?l=[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:l=i.propertyList[4],t[r]={type:a,type2:s,flag:o,value:l}}else t[i.name]===void 0?typeof i.id=="number"?(t[i.name]={},t[i.name][i.id]=i):t[i.name]=i:i.name==="PoseNode"?(Array.isArray(t[i.name])||(t[i.name]=[t[i.name]]),t[i.name].push(i)):t[i.name][i.id]===void 0&&(t[i.name][i.id]=i)}parseProperty(e){const t=e.getString(1);let i;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return i=e.getUint32(),e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),a=e.getUint32(),s=e.getUint32();if(a===0)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}const o=Bhe(new Uint8Array(e.getArrayBuffer(s))),l=new UB(o.buffer);switch(t){case"b":case"c":return l.getBooleanArray(r);case"d":return l.getFloat64Array(r);case"f":return l.getFloat32Array(r);case"i":return l.getInt32Array(r);case"l":return l.getInt64Array(r)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class UB{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let i=0;i<e;i++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){const t=this.offset;let i=new Uint8Array(this.dv.buffer,t,e);this.skip(e);const r=i.indexOf(0);return r>=0&&(i=new Uint8Array(this.dv.buffer,t,r)),this._textDecoder.decode(i)}}class f8{add(e,t){this[e]=t}}function ede(n){const e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===d8(n,0,e.length)}function tde(n){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function i(r){const a=n[r-1];return n=n.slice(t+r),t++,a}for(let r=0;r<e.length;++r)if(i(1)===e[r])return!1;return!0}function NB(n){const e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function nde(n){return n/46186158e3}const ide=[];function sx(n,e,t,i){let r;switch(i.mappingType){case"ByPolygonVertex":r=n;break;case"ByPolygon":r=e;break;case"ByVertice":r=t;break;case"AllSame":r=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}i.referenceType==="IndexToDirect"&&(r=i.indices[r]);const a=r*i.dataSize,s=a+i.dataSize;return ade(ide,i.buffer,a,s)}const QM=new Cr,Km=new le;function h8(n){const e=new Mt,t=new Mt,i=new Mt,r=new Mt,a=new Mt,s=new Mt,o=new Mt,l=new Mt,u=new Mt,h=new Mt,p=new Mt,g=new Mt,y=n.inheritType?n.inheritType:0;n.translation&&e.setPosition(Km.fromArray(n.translation));const _=P0(0);if(n.preRotation){const H=n.preRotation.map(Lr.degToRad);H.push(_),t.makeRotationFromEuler(QM.fromArray(H))}if(n.rotation){const H=n.rotation.map(Lr.degToRad);H.push(n.eulerOrder||_),i.makeRotationFromEuler(QM.fromArray(H))}if(n.postRotation){const H=n.postRotation.map(Lr.degToRad);H.push(_),r.makeRotationFromEuler(QM.fromArray(H)),r.invert()}n.scale&&a.scale(Km.fromArray(n.scale)),n.scalingOffset&&o.setPosition(Km.fromArray(n.scalingOffset)),n.scalingPivot&&s.setPosition(Km.fromArray(n.scalingPivot)),n.rotationOffset&&l.setPosition(Km.fromArray(n.rotationOffset)),n.rotationPivot&&u.setPosition(Km.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(p.copy(n.parentMatrix),h.copy(n.parentMatrixWorld));const S=t.clone().multiply(i).multiply(r),x=new Mt;x.extractRotation(h);const w=new Mt;w.copyPosition(h);const T=w.clone().invert().multiply(h),M=x.clone().invert().multiply(T),C=a,N=new Mt;if(y===0)N.copy(x).multiply(S).multiply(M).multiply(C);else if(y===1)N.copy(x).multiply(M).multiply(S).multiply(C);else{const j=new Mt().scale(new le().setFromMatrixScale(p)).clone().invert(),G=M.clone().multiply(j);N.copy(x).multiply(S).multiply(G).multiply(C)}const D=u.clone().invert(),P=s.clone().invert();let z=e.clone().multiply(l).multiply(u).multiply(t).multiply(i).multiply(r).multiply(D).multiply(o).multiply(s).multiply(a).multiply(P);const I=new Mt().copyPosition(z),L=h.clone().multiply(I);return g.copyPosition(L),z=g.clone().multiply(N),z.premultiply(h.invert()),z}function P0(n){n=n||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function JM(n){return n.split(",").map(function(t){return parseFloat(t)})}function d8(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),new TextDecoder().decode(new Uint8Array(n,e,t))}function rde(n,e){for(let t=0,i=n.length,r=e.length;t<r;t++,i++)n[i]=e[t]}function ade(n,e,t,i){for(let r=t,a=0;r<i;r++,a++)n[a]=e[r];return n}function sde(){const n=e3($he,"./School.fbx");return B.createElement("primitive",{object:n,scale:.01,"position-y":0,"position-x":6})}const p8=6048e5,ode=864e5,PB=Symbol.for("constructDateFrom");function bh(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&PB in n?n[PB](e):n instanceof Date?new n.constructor(e):new Date(e)}function Go(n,e){return bh(e||n,n)}let lde={};function WE(){return lde}function Ag(n,e){var o,l,u,h;const t=WE(),i=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((h=(u=t.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??0,r=Go(n,e==null?void 0:e.in),a=r.getDay(),s=(a<i?7:0)+a-i;return r.setDate(r.getDate()-s),r.setHours(0,0,0,0),r}function H1(n,e){return Ag(n,{...e,weekStartsOn:1})}function m8(n,e){const t=Go(n,e==null?void 0:e.in),i=t.getFullYear(),r=bh(t,0);r.setFullYear(i+1,0,4),r.setHours(0,0,0,0);const a=H1(r),s=bh(t,0);s.setFullYear(i,0,4),s.setHours(0,0,0,0);const o=H1(s);return t.getTime()>=a.getTime()?i+1:t.getTime()>=o.getTime()?i:i-1}function LB(n){const e=Go(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function cde(n,...e){const t=bh.bind(null,e.find(i=>typeof i=="object"));return e.map(t)}function IB(n,e){const t=Go(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function ude(n,e,t){const[i,r]=cde(t==null?void 0:t.in,n,e),a=IB(i),s=IB(r),o=+a-LB(a),l=+s-LB(s);return Math.round((o-l)/ode)}function fde(n,e){const t=m8(n,e),i=bh(n,0);return i.setFullYear(t,0,4),i.setHours(0,0,0,0),H1(i)}function hde(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function dde(n){return!(!hde(n)&&typeof n!="number"||isNaN(+Go(n)))}function pde(n,e){const t=Go(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const mde={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},gde=(n,e,t)=>{let i;const r=mde[n];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+i:i+" ago":i};function eA(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const vde={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},yde={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},_de={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},bde={date:eA({formats:vde,defaultWidth:"full"}),time:eA({formats:yde,defaultWidth:"full"}),dateTime:eA({formats:_de,defaultWidth:"full"})},Sde={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},xde=(n,e,t,i)=>Sde[n];function Cy(n){return(e,t)=>{const i=t!=null&&t.context?String(t.context):"standalone";let r;if(i==="formatting"&&n.formattingValues){const s=n.defaultFormattingWidth||n.defaultWidth,o=t!=null&&t.width?String(t.width):s;r=n.formattingValues[o]||n.formattingValues[s]}else{const s=n.defaultWidth,o=t!=null&&t.width?String(t.width):n.defaultWidth;r=n.values[o]||n.values[s]}const a=n.argumentCallback?n.argumentCallback(e):e;return r[a]}}const Ede={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},wde={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Tde={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Mde={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ade={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Cde={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Rde=(n,e)=>{const t=Number(n),i=t%100;if(i>20||i<10)switch(i%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Ode={ordinalNumber:Rde,era:Cy({values:Ede,defaultWidth:"wide"}),quarter:Cy({values:wde,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Cy({values:Tde,defaultWidth:"wide"}),day:Cy({values:Mde,defaultWidth:"wide"}),dayPeriod:Cy({values:Ade,defaultWidth:"wide",formattingValues:Cde,defaultFormattingWidth:"wide"})};function Ry(n){return(e,t={})=>{const i=t.width,r=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],a=e.match(r);if(!a)return null;const s=a[0],o=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(o)?Ude(o,p=>p.test(s)):Dde(o,p=>p.test(s));let u;u=n.valueCallback?n.valueCallback(l):l,u=t.valueCallback?t.valueCallback(u):u;const h=e.slice(s.length);return{value:u,rest:h}}}function Dde(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function Ude(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function Nde(n){return(e,t={})=>{const i=e.match(n.matchPattern);if(!i)return null;const r=i[0],a=e.match(n.parsePattern);if(!a)return null;let s=n.valueCallback?n.valueCallback(a[0]):a[0];s=t.valueCallback?t.valueCallback(s):s;const o=e.slice(r.length);return{value:s,rest:o}}}const Pde=/^(\d+)(th|st|nd|rd)?/i,Lde=/\d+/i,Ide={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Bde={any:[/^b/i,/^(a|c)/i]},zde={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},kde={any:[/1/i,/2/i,/3/i,/4/i]},Fde={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Hde={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Vde={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Gde={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},jde={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},qde={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Wde={ordinalNumber:Nde({matchPattern:Pde,parsePattern:Lde,valueCallback:n=>parseInt(n,10)}),era:Ry({matchPatterns:Ide,defaultMatchWidth:"wide",parsePatterns:Bde,defaultParseWidth:"any"}),quarter:Ry({matchPatterns:zde,defaultMatchWidth:"wide",parsePatterns:kde,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Ry({matchPatterns:Fde,defaultMatchWidth:"wide",parsePatterns:Hde,defaultParseWidth:"any"}),day:Ry({matchPatterns:Vde,defaultMatchWidth:"wide",parsePatterns:Gde,defaultParseWidth:"any"}),dayPeriod:Ry({matchPatterns:jde,defaultMatchWidth:"any",parsePatterns:qde,defaultParseWidth:"any"})},g8={code:"en-US",formatDistance:gde,formatLong:bde,formatRelative:xde,localize:Ode,match:Wde,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Yde(n,e){const t=Go(n,e==null?void 0:e.in);return ude(t,pde(t))+1}function $de(n,e){const t=Go(n,e==null?void 0:e.in),i=+H1(t)-+fde(t);return Math.round(i/p8)+1}function v8(n,e){var h,p,g,y;const t=Go(n,e==null?void 0:e.in),i=t.getFullYear(),r=WE(),a=(e==null?void 0:e.firstWeekContainsDate)??((p=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((y=(g=r.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??1,s=bh((e==null?void 0:e.in)||n,0);s.setFullYear(i+1,0,a),s.setHours(0,0,0,0);const o=Ag(s,e),l=bh((e==null?void 0:e.in)||n,0);l.setFullYear(i,0,a),l.setHours(0,0,0,0);const u=Ag(l,e);return+t>=+o?i+1:+t>=+u?i:i-1}function Xde(n,e){var o,l,u,h;const t=WE(),i=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((h=(u=t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,r=v8(n,e),a=bh((e==null?void 0:e.in)||n,0);return a.setFullYear(r,0,i),a.setHours(0,0,0,0),Ag(a,e)}function Kde(n,e){const t=Go(n,e==null?void 0:e.in),i=+Ag(t,e)-+Xde(t,e);return Math.round(i/p8)+1}function ti(n,e){const t=n<0?"-":"",i=Math.abs(n).toString().padStart(e,"0");return t+i}const rh={y(n,e){const t=n.getFullYear(),i=t>0?t:1-t;return ti(e==="yy"?i%100:i,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):ti(t+1,2)},d(n,e){return ti(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return ti(n.getHours()%12||12,e.length)},H(n,e){return ti(n.getHours(),e.length)},m(n,e){return ti(n.getMinutes(),e.length)},s(n,e){return ti(n.getSeconds(),e.length)},S(n,e){const t=e.length,i=n.getMilliseconds(),r=Math.trunc(i*Math.pow(10,t-3));return ti(r,e.length)}},Zm={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},BB={G:function(n,e,t){const i=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(i,{width:"abbreviated"});case"GGGGG":return t.era(i,{width:"narrow"});case"GGGG":default:return t.era(i,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const i=n.getFullYear(),r=i>0?i:1-i;return t.ordinalNumber(r,{unit:"year"})}return rh.y(n,e)},Y:function(n,e,t,i){const r=v8(n,i),a=r>0?r:1-r;if(e==="YY"){const s=a%100;return ti(s,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):ti(a,e.length)},R:function(n,e){const t=m8(n);return ti(t,e.length)},u:function(n,e){const t=n.getFullYear();return ti(t,e.length)},Q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return ti(i,2);case"Qo":return t.ordinalNumber(i,{unit:"quarter"});case"QQQ":return t.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return ti(i,2);case"qo":return t.ordinalNumber(i,{unit:"quarter"});case"qqq":return t.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,e,t){const i=n.getMonth();switch(e){case"M":case"MM":return rh.M(n,e);case"Mo":return t.ordinalNumber(i+1,{unit:"month"});case"MMM":return t.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(i,{width:"wide",context:"formatting"})}},L:function(n,e,t){const i=n.getMonth();switch(e){case"L":return String(i+1);case"LL":return ti(i+1,2);case"Lo":return t.ordinalNumber(i+1,{unit:"month"});case"LLL":return t.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(i,{width:"wide",context:"standalone"})}},w:function(n,e,t,i){const r=Kde(n,i);return e==="wo"?t.ordinalNumber(r,{unit:"week"}):ti(r,e.length)},I:function(n,e,t){const i=$de(n);return e==="Io"?t.ordinalNumber(i,{unit:"week"}):ti(i,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):rh.d(n,e)},D:function(n,e,t){const i=Yde(n);return e==="Do"?t.ordinalNumber(i,{unit:"dayOfYear"}):ti(i,e.length)},E:function(n,e,t){const i=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(i,{width:"short",context:"formatting"});case"EEEE":default:return t.day(i,{width:"wide",context:"formatting"})}},e:function(n,e,t,i){const r=n.getDay(),a=(r-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return ti(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(r,{width:"short",context:"formatting"});case"eeee":default:return t.day(r,{width:"wide",context:"formatting"})}},c:function(n,e,t,i){const r=n.getDay(),a=(r-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return ti(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(r,{width:"narrow",context:"standalone"});case"cccccc":return t.day(r,{width:"short",context:"standalone"});case"cccc":default:return t.day(r,{width:"wide",context:"standalone"})}},i:function(n,e,t){const i=n.getDay(),r=i===0?7:i;switch(e){case"i":return String(r);case"ii":return ti(r,e.length);case"io":return t.ordinalNumber(r,{unit:"day"});case"iii":return t.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(i,{width:"short",context:"formatting"});case"iiii":default:return t.day(i,{width:"wide",context:"formatting"})}},a:function(n,e,t){const r=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(n,e,t){const i=n.getHours();let r;switch(i===12?r=Zm.noon:i===0?r=Zm.midnight:r=i/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(n,e,t){const i=n.getHours();let r;switch(i>=17?r=Zm.evening:i>=12?r=Zm.afternoon:i>=4?r=Zm.morning:r=Zm.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let i=n.getHours()%12;return i===0&&(i=12),t.ordinalNumber(i,{unit:"hour"})}return rh.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):rh.H(n,e)},K:function(n,e,t){const i=n.getHours()%12;return e==="Ko"?t.ordinalNumber(i,{unit:"hour"}):ti(i,e.length)},k:function(n,e,t){let i=n.getHours();return i===0&&(i=24),e==="ko"?t.ordinalNumber(i,{unit:"hour"}):ti(i,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):rh.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):rh.s(n,e)},S:function(n,e){return rh.S(n,e)},X:function(n,e,t){const i=n.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return kB(i);case"XXXX":case"XX":return Ld(i);case"XXXXX":case"XXX":default:return Ld(i,":")}},x:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"x":return kB(i);case"xxxx":case"xx":return Ld(i);case"xxxxx":case"xxx":default:return Ld(i,":")}},O:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+zB(i,":");case"OOOO":default:return"GMT"+Ld(i,":")}},z:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+zB(i,":");case"zzzz":default:return"GMT"+Ld(i,":")}},t:function(n,e,t){const i=Math.trunc(+n/1e3);return ti(i,e.length)},T:function(n,e,t){return ti(+n,e.length)}};function zB(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),r=Math.trunc(i/60),a=i%60;return a===0?t+String(r):t+String(r)+e+ti(a,2)}function kB(n,e){return n%60===0?(n>0?"-":"+")+ti(Math.abs(n)/60,2):Ld(n,e)}function Ld(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),r=ti(Math.trunc(i/60),2),a=ti(i%60,2);return t+r+e+a}const FB=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},y8=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Zde=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],i=t[1],r=t[2];if(!r)return FB(n,e);let a;switch(i){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",FB(i,e)).replace("{{time}}",y8(r,e))},Qde={p:y8,P:Zde},Jde=/^D+$/,epe=/^Y+$/,tpe=["D","DD","YY","YYYY"];function npe(n){return Jde.test(n)}function ipe(n){return epe.test(n)}function rpe(n,e,t){const i=ape(n,e,t);if(console.warn(i),tpe.includes(n))throw new RangeError(i)}function ape(n,e,t){const i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${i} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const spe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ope=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,lpe=/^'([^]*?)'?$/,cpe=/''/g,upe=/[a-zA-Z]/;function cs(n,e,t){var h,p,g,y,_,S,x,w;const i=WE(),r=(t==null?void 0:t.locale)??i.locale??g8,a=(t==null?void 0:t.firstWeekContainsDate)??((p=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((y=(g=i.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??1,s=(t==null?void 0:t.weekStartsOn)??((S=(_=t==null?void 0:t.locale)==null?void 0:_.options)==null?void 0:S.weekStartsOn)??i.weekStartsOn??((w=(x=i.locale)==null?void 0:x.options)==null?void 0:w.weekStartsOn)??0,o=Go(n,t==null?void 0:t.in);if(!dde(o))throw new RangeError("Invalid time value");let l=e.match(ope).map(T=>{const M=T[0];if(M==="p"||M==="P"){const C=Qde[M];return C(T,r.formatLong)}return T}).join("").match(spe).map(T=>{if(T==="''")return{isToken:!1,value:"'"};const M=T[0];if(M==="'")return{isToken:!1,value:fpe(T)};if(BB[M])return{isToken:!0,value:T};if(M.match(upe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+M+"`");return{isToken:!1,value:T}});r.localize.preprocessor&&(l=r.localize.preprocessor(o,l));const u={firstWeekContainsDate:a,weekStartsOn:s,locale:r};return l.map(T=>{if(!T.isToken)return T.value;const M=T.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&ipe(M)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&npe(M))&&rpe(M,e,String(n));const C=BB[M[0]];return C(o,M,r.localize,u)}).join("")}function fpe(n){const e=n.match(lpe);return e?e[1].replace(cpe,"'"):n}function hpe(n,e){return Go(n,e==null?void 0:e.in).getDay()}const dpe=[{value:"student",label:"Student"},{value:"parent",label:"Parent"},{value:"teacher",label:"Teacher"}];function v_({initialMode:n="login",initialRole:e="student"}){const{signInWithPassword:t,signUpWithPassword:i,authError:r,loading:a}=Ep()||{},[s,o]=F.useState(n),[l,u]=F.useState(""),[h,p]=F.useState(""),[g,y]=F.useState(e),[_,S]=F.useState(!1),[x,w]=F.useState(""),T=F.useMemo(()=>a||_,[a,_]),M=async C=>{C.preventDefault(),w(""),S(!0);try{if(s==="login")await t(l,h);else{const N=await i(l,h,g);N!=null&&N.needsEmailConfirmation?w("Check your inbox to confirm your email. After confirming, return here and log in to access your dashboard."):w("Account created. You can now continue.")}}finally{S(!1)}};return B.createElement("div",{className:"w-full max-w-md"},B.createElement("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 overflow-hidden"},B.createElement("div",{className:"px-6 py-5 bg-gradient-to-r from-indigo-600 to-blue-500"},B.createElement("h2",{className:"text-xl font-semibold text-white"},s==="login"?"Welcome back":"Create your account"),B.createElement("p",{className:"text-sm text-indigo-100 mt-1"},s==="login"?"Sign in to view your dashboard.":"Choose a role request. An admin must approve it before dashboards unlock.")),B.createElement("form",{onSubmit:M,className:"p-6 space-y-4"},B.createElement("div",null,B.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Email"),B.createElement("input",{type:"email",required:!0,value:l,onChange:C=>u(C.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"you@example.com",autoComplete:"email",disabled:T})),B.createElement("div",null,B.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Password"),B.createElement("input",{type:"password",required:!0,value:h,onChange:C=>p(C.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter password",autoComplete:s==="login"?"current-password":"new-password",disabled:T})),s==="signup"&&B.createElement("div",null,B.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Requested role"),B.createElement("select",{value:g,onChange:C=>y(C.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500",disabled:T},dpe.map(C=>B.createElement("option",{key:C.value,value:C.value},C.label))),B.createElement("p",{className:"text-xs text-gray-500 mt-1"},"Teachers usually require verification. This value is stored as a request, not an assigned permission.")),r&&B.createElement("div",{className:"text-sm text-red-600 bg-red-50 border border-red-100 rounded-lg p-3"},r.message),x&&B.createElement("div",{className:"text-sm text-indigo-700 bg-indigo-50 border border-indigo-100 rounded-lg p-3"},x),B.createElement("button",{type:"submit",disabled:T,className:"w-full py-2.5 rounded-lg bg-indigo-600 text-white font-semibold hover:bg-indigo-700 disabled:bg-indigo-300"},s==="login"?_?"Signing in...":"Sign in":_?"Creating...":"Create account"),B.createElement("div",{className:"flex items-center justify-between text-sm"},B.createElement("span",{className:"text-gray-600"},s==="login"?"Don't have an account?":"Already have an account?"),B.createElement("button",{type:"button",onClick:()=>{w(""),o(s==="login"?"signup":"login")},className:"text-indigo-600 hover:text-indigo-700 font-semibold",disabled:T},s==="login"?"Sign up":"Sign in")))))}function af(n){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},af(n)}function ppe(n,e){if(af(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(af(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function _8(n){var e=ppe(n,"string");return af(e)=="symbol"?e:e+""}function kd(n,e,t){return(e=_8(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function HB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function pi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?HB(Object(t),!0).forEach(function(i){kd(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):HB(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function YE(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function Kc(n,e){if(n==null)return{};var t,i,r=YE(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(r[t]=n[t])}return r}function Fr(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function VB(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,_8(i.key),i)}}function Hr(n,e,t){return e&&VB(n.prototype,e),t&&VB(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function V1(n){return V1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V1(n)}function b8(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(b8=function(){return!!n})()}function mpe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function gpe(n,e){if(e&&(af(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mpe(n)}function Ga(n,e,t){return e=V1(e),gpe(n,b8()?Reflect.construct(e,t||[],V1(n).constructor):e.apply(n,t))}function G1(n,e){return G1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},G1(n,e)}function ja(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&G1(n,e)}function S8(n){if(Array.isArray(n))return n}function vpe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i,r,a,s,o=[],l=!0,u=!1;try{if(a=(t=t.call(n)).next,e!==0)for(;!(l=(i=a.call(t)).done)&&(o.push(i.value),o.length!==e);l=!0);}catch(h){u=!0,r=h}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}function VO(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=Array(e);t<e;t++)i[t]=n[t];return i}function P3(n,e){if(n){if(typeof n=="string")return VO(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?VO(n,e):void 0}}function x8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fp(n,e){return S8(n)||vpe(n,e)||P3(n,e)||x8()}function E8(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(t=E8(n[e]))&&(i&&(i+=" "),i+=t);else for(e in n)n[e]&&(i&&(i+=" "),i+=e);return i}function fr(){for(var n,e,t=0,i="";t<arguments.length;)(n=arguments[t++])&&(e=E8(n))&&(i&&(i+=" "),i+=e);return i}var tA,GB;function ype(){if(GB)return tA;GB=1;var n=function(e,t,i,r,a,s,o,l){if(!e){var u;if(t===void 0)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var h=[i,r,a,s,o,l],p=0;u=new Error(t.replace(/%s/g,function(){return h[p++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};return tA=n,tA}var _pe=ype();const L0=kr(_pe);var bpe=function(){};function Spe(n,e){var t={};return Object.keys(n).forEach(function(i){t[bx(i)]=bpe}),t}function jB(n,e){return n[e]!==void 0}function bx(n){return"default"+n.charAt(0).toUpperCase()+n.substr(1)}function xpe(n){return!!n&&(typeof n!="function"||n.prototype&&n.prototype.isReactComponent)}function Epe(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,G1(n,e)}function w8(){var n=this.constructor.getDerivedStateFromProps(this.props,this.state);n!=null&&this.setState(n)}function T8(n){function e(t){var i=this.constructor.getDerivedStateFromProps(n,t);return i??null}this.setState(e.bind(this))}function M8(n,e){try{var t=this.props,i=this.state;this.props=n,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(t,i)}finally{this.props=t,this.state=i}}w8.__suppressDeprecationWarning=!0;T8.__suppressDeprecationWarning=!0;M8.__suppressDeprecationWarning=!0;function wpe(n){var e=n.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof n.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return n;var t=null,i=null,r=null;if(typeof e.componentWillMount=="function"?t="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(t="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?i="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(i="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?r="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(r="UNSAFE_componentWillUpdate"),t!==null||i!==null||r!==null){var a=n.displayName||n.name,s=typeof n.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+a+" uses "+s+" but also contains the following legacy lifecycles:"+(t!==null?`
  `+t:"")+(i!==null?`
  `+i:"")+(r!==null?`
  `+r:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof n.getDerivedStateFromProps=="function"&&(e.componentWillMount=w8,e.componentWillReceiveProps=T8),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=M8;var o=e.componentDidUpdate;e.componentDidUpdate=function(u,h,p){var g=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:p;o.call(this,u,h,g)}}return n}var Tpe="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function A8(n,e,t){t===void 0&&(t=[]);var i=n.displayName||n.name||"Component",r=xpe(n),a=Object.keys(e),s=a.map(bx);r||!t.length||L0(!1);var o=(function(u){Epe(h,u);function h(){for(var g,y=arguments.length,_=new Array(y),S=0;S<y;S++)_[S]=arguments[S];g=u.call.apply(u,[this].concat(_))||this,g.handlers=Object.create(null),a.forEach(function(w){var T=e[w],M=function(N){if(g.props[T]){var D;g._notifying=!0;for(var P=arguments.length,z=new Array(P>1?P-1:0),I=1;I<P;I++)z[I-1]=arguments[I];(D=g.props)[T].apply(D,[N].concat(z)),g._notifying=!1}g.unmounted||g.setState(function(L){var H,j=L.values;return{values:Ui(Object.create(null),j,(H={},H[w]=N,H))}})};g.handlers[T]=M}),t.length&&(g.attachRef=function(w){g.inner=w});var x=Object.create(null);return a.forEach(function(w){x[w]=g.props[bx(w)]}),g.state={values:x,prevProps:{}},g}var p=h.prototype;return p.shouldComponentUpdate=function(){return!this._notifying},h.getDerivedStateFromProps=function(y,_){var S=_.values,x=_.prevProps,w={values:Ui(Object.create(null),S),prevProps:{}};return a.forEach(function(T){w.prevProps[T]=y[T],!jB(y,T)&&jB(x,T)&&(w.values[T]=y[bx(T)])}),w},p.componentWillUnmount=function(){this.unmounted=!0},p.render=function(){var y=this,_=this.props,S=_.innerRef,x=YE(_,["innerRef"]);s.forEach(function(T){delete x[T]});var w={};return a.forEach(function(T){var M=y.props[T];w[T]=M!==void 0?M:y.state.values[T]}),B.createElement(n,Ui({},x,w,this.handlers,{ref:S||this.attachRef}))},h})(B.Component);wpe(o),o.displayName="Uncontrolled("+i+")",o.propTypes=Ui({innerRef:function(){}},Spe(e)),t.forEach(function(u){o.prototype[u]=function(){var p;return(p=this.inner)[u].apply(p,arguments)}});var l=o;return B.forwardRef&&(l=B.forwardRef(function(u,h){return B.createElement(o,Ui({},u,{innerRef:h,__source:{fileName:Tpe,lineNumber:128},__self:this}))}),l.propTypes=o.propTypes),l.ControlledComponent=n,l.deferControlTo=function(u,h,p){return h===void 0&&(h={}),A8(u,Ui({},e,h),p)},l}var j1="milliseconds",I0="seconds",B0="minutes",z0="hours",hp="day",Cg="week",k0="month",dp="year",pp="decade",mp="century",C8={milliseconds:1,seconds:1e3,minutes:60*1e3,hours:3600*1e3,day:1440*60*1e3,week:10080*60*1e3},Mpe={month:1,year:12,decade:120,century:1200};function Ape(n){return[31,Cpe(n),31,30,31,30,31,31,30,31,30,31]}function Cpe(n){return n%4===0&&n%100!==0||n%400===0?29:28}function $l(n,e,t){switch(n=new Date(n),t){case j1:case I0:case B0:case z0:case hp:case Cg:return Rpe(n,e*C8[t]);case k0:case dp:case pp:case mp:return Ope(n,e*Mpe[t])}throw new TypeError('Invalid units: "'+t+'"')}function Rpe(n,e){var t=new Date(+n+e);return Dpe(n,t)}function Ope(n,e){var t=n.getFullYear(),i=n.getMonth(),r=n.getDate(),a=t*12+i+e,s=Math.trunc(a/12),o=a%12,l=Math.min(r,Ape(s)[o]),u=new Date(n);return u.setFullYear(s),u.setDate(1),u.setMonth(o),u.setDate(l),u}function Dpe(n,e){var t=n.getTimezoneOffset(),i=e.getTimezoneOffset(),r=i-t;return new Date(+e+r*C8.minutes)}function F0(n,e,t){return $l(n,-e,t)}function ya(n,e,t){switch(n=new Date(n),e){case mp:case pp:case dp:n=W1(n,0);case k0:n=N8(n,1);case Cg:case hp:n=G0(n,0);case z0:n=Rg(n,0);case B0:n=V0(n,0);case I0:n=H0(n,0)}return e===pp&&(n=F0(n,gp(n)%10,"year")),e===mp&&(n=F0(n,gp(n)%100,"year")),e===Cg&&(n=P8(n,0,t)),n}function q1(n,e,t){switch(n=new Date(n),n=ya(n,e,t),e){case mp:case pp:case dp:case k0:case Cg:n=$l(n,1,e),n=F0(n,1,hp),n.setHours(23,59,59,999);break;case hp:n.setHours(23,59,59,999);break;case z0:case B0:case I0:n=$l(n,1,e),n=F0(n,1,j1)}return n}var Yg=Xg(function(n,e){return n===e}),L3=Xg(function(n,e){return n!==e}),$E=Xg(function(n,e){return n>e}),y_=Xg(function(n,e){return n>=e}),I3=Xg(function(n,e){return n<e}),$g=Xg(function(n,e){return n<=e});function R8(){return new Date(Math.min.apply(Math,arguments))}function O8(){return new Date(Math.max.apply(Math,arguments))}function D8(n,e,t,i){return i=i||"day",(!e||y_(n,e,i))&&(!t||$g(n,t,i))}var H0=Mh("Milliseconds"),V0=Mh("Seconds"),Rg=Mh("Minutes"),G0=Mh("Hours"),U8=Mh("Day"),N8=Mh("Date"),W1=Mh("Month"),gp=Mh("FullYear");function Upe(n,e){return e===void 0?gp(ya(n,pp)):$l(n,e+10,dp)}function Npe(n,e){return e===void 0?gp(ya(n,mp)):$l(n,e+100,dp)}function P8(n,e,t){var i=(U8(n)+7-(t||0))%7;return e===void 0?i:$l(n,e-i,hp)}function Ppe(n,e,t,i){var r,a,s;switch(t){case j1:case I0:case B0:case z0:case hp:case Cg:r=e.getTime()-n.getTime();break;case k0:case dp:case pp:case mp:r=(gp(e)-gp(n))*12+W1(e)-W1(n);break;default:throw new TypeError('Invalid units: "'+t+'"')}switch(t){case j1:a=1;break;case I0:a=1e3;break;case B0:a=1e3*60;break;case z0:a=1e3*60*60;break;case hp:a=1e3*60*60*24;break;case Cg:a=1e3*60*60*24*7;break;case k0:a=1;break;case dp:a=12;break;case pp:a=120;break;case mp:a=1200;break;default:throw new TypeError('Invalid units: "'+t+'"')}return s=r/a,i?s:Math.round(s)}function Mh(n){var e=(function(t){switch(t){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}})(n);return function(t,i){if(i===void 0)return t["get"+n]();var r=new Date(t);return r["set"+n](i),e&&r["get"+n]()!=i&&(n==="Hours"||i>=e&&r.getHours()-t.getHours()<Math.floor(i/e))&&r["set"+n](i+e),r}}function Xg(n){return function(e,t,i){return n(+ya(e,i),+ya(t,i))}}const qB=Object.freeze(Object.defineProperty({__proto__:null,add:$l,century:Npe,date:N8,day:U8,decade:Upe,diff:Ppe,endOf:q1,eq:Yg,gt:$E,gte:y_,hours:G0,inRange:D8,lt:I3,lte:$g,max:O8,milliseconds:H0,min:R8,minutes:Rg,month:W1,neq:L3,seconds:V0,startOf:ya,subtract:F0,weekday:P8,year:gp},Symbol.toStringTag,{value:"Module"}));function Lpe(n){if(Array.isArray(n))return VO(n)}function L8(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Ipe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sx(n){return Lpe(n)||L8(n)||P3(n)||Ipe()}var nA,WB;function I8(){if(WB)return nA;WB=1;function n(e,t,i){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),i=i>a?a:i,i<0&&(i+=a),a=t>i?0:i-t>>>0,t>>>=0;for(var s=Array(a);++r<a;)s[r]=e[r+t];return s}return nA=n,nA}var iA,YB;function __(){if(YB)return iA;YB=1;function n(e,t){return e===t||e!==e&&t!==t}return iA=n,iA}var rA,$B;function B8(){if($B)return rA;$B=1;var n=typeof Xb=="object"&&Xb&&Xb.Object===Object&&Xb;return rA=n,rA}var aA,XB;function eu(){if(XB)return aA;XB=1;var n=B8(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return aA=t,aA}var sA,KB;function Kg(){if(KB)return sA;KB=1;var n=eu(),e=n.Symbol;return sA=e,sA}var oA,ZB;function Bpe(){if(ZB)return oA;ZB=1;var n=Kg(),e=Object.prototype,t=e.hasOwnProperty,i=e.toString,r=n?n.toStringTag:void 0;function a(s){var o=t.call(s,r),l=s[r];try{s[r]=void 0;var u=!0}catch{}var h=i.call(s);return u&&(o?s[r]=l:delete s[r]),h}return oA=a,oA}var lA,QB;function zpe(){if(QB)return lA;QB=1;var n=Object.prototype,e=n.toString;function t(i){return e.call(i)}return lA=t,lA}var cA,JB;function Zg(){if(JB)return cA;JB=1;var n=Kg(),e=Bpe(),t=zpe(),i="[object Null]",r="[object Undefined]",a=n?n.toStringTag:void 0;function s(o){return o==null?o===void 0?r:i:a&&a in Object(o)?e(o):t(o)}return cA=s,cA}var uA,ez;function hf(){if(ez)return uA;ez=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return uA=n,uA}var fA,tz;function B3(){if(tz)return fA;tz=1;var n=Zg(),e=hf(),t="[object AsyncFunction]",i="[object Function]",r="[object GeneratorFunction]",a="[object Proxy]";function s(o){if(!e(o))return!1;var l=n(o);return l==i||l==r||l==t||l==a}return fA=s,fA}var hA,nz;function z3(){if(nz)return hA;nz=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return hA=e,hA}var dA,iz;function b_(){if(iz)return dA;iz=1;var n=B3(),e=z3();function t(i){return i!=null&&e(i.length)&&!n(i)}return dA=t,dA}var pA,rz;function k3(){if(rz)return pA;rz=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(i,r){var a=typeof i;return r=r??n,!!r&&(a=="number"||a!="symbol"&&e.test(i))&&i>-1&&i%1==0&&i<r}return pA=t,pA}var mA,az;function XE(){if(az)return mA;az=1;var n=__(),e=b_(),t=k3(),i=hf();function r(a,s,o){if(!i(o))return!1;var l=typeof s;return(l=="number"?e(o)&&t(s,o.length):l=="string"&&s in o)?n(o[s],a):!1}return mA=r,mA}var gA,sz;function kpe(){if(sz)return gA;sz=1;var n=/\s/;function e(t){for(var i=t.length;i--&&n.test(t.charAt(i)););return i}return gA=e,gA}var vA,oz;function Fpe(){if(oz)return vA;oz=1;var n=kpe(),e=/^\s+/;function t(i){return i&&i.slice(0,n(i)+1).replace(e,"")}return vA=t,vA}var yA,lz;function Ah(){if(lz)return yA;lz=1;function n(e){return e!=null&&typeof e=="object"}return yA=n,yA}var _A,cz;function S_(){if(cz)return _A;cz=1;var n=Zg(),e=Ah(),t="[object Symbol]";function i(r){return typeof r=="symbol"||e(r)&&n(r)==t}return _A=i,_A}var bA,uz;function Hpe(){if(uz)return bA;uz=1;var n=Fpe(),e=hf(),t=S_(),i=NaN,r=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function l(u){if(typeof u=="number")return u;if(t(u))return i;if(e(u)){var h=typeof u.valueOf=="function"?u.valueOf():u;u=e(h)?h+"":h}if(typeof u!="string")return u===0?u:+u;u=n(u);var p=a.test(u);return p||s.test(u)?o(u.slice(2),p?2:8):r.test(u)?i:+u}return bA=l,bA}var SA,fz;function z8(){if(fz)return SA;fz=1;var n=Hpe(),e=1/0,t=17976931348623157e292;function i(r){if(!r)return r===0?r:0;if(r=n(r),r===e||r===-e){var a=r<0?-1:1;return a*t}return r===r?r:0}return SA=i,SA}var xA,hz;function k8(){if(hz)return xA;hz=1;var n=z8();function e(t){var i=n(t),r=i%1;return i===i?r?i-r:i:0}return xA=e,xA}var EA,dz;function Vpe(){if(dz)return EA;dz=1;var n=I8(),e=XE(),t=k8(),i=Math.ceil,r=Math.max;function a(s,o,l){(l?e(s,o,l):o===void 0)?o=1:o=r(t(o),0);var u=s==null?0:s.length;if(!u||o<1)return[];for(var h=0,p=0,g=Array(i(u/o));h<u;)g[p++]=n(s,h,h+=o);return g}return EA=a,EA}var Gpe=Vpe();const jpe=kr(Gpe);function x_(n){return n&&n.ownerDocument||document}function qpe(n){var e=x_(n);return e&&e.defaultView||window}function Wpe(n,e){return qpe(n).getComputedStyle(n,e)}var Ype=/([A-Z])/g;function $pe(n){return n.replace(Ype,"-$1").toLowerCase()}var Xpe=/^ms-/;function ox(n){return $pe(n).replace(Xpe,"-ms-")}var Kpe=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function Zpe(n){return!!(n&&Kpe.test(n))}function ng(n,e){var t="",i="";if(typeof e=="string")return n.style.getPropertyValue(ox(e))||Wpe(n).getPropertyValue(ox(e));Object.keys(e).forEach(function(r){var a=e[r];!a&&a!==0?n.style.removeProperty(ox(r)):Zpe(r)?i+=r+"("+a+") ":t+=ox(r)+": "+a+";"}),i&&(t+="transform: "+i+";"),n.style.cssText+=";"+t}function j0(n,e){if(n.contains)return n.contains(e);if(n.compareDocumentPosition)return n===e||!!(n.compareDocumentPosition(e)&16)}function Qpe(n){return"nodeType"in n&&n.nodeType===document.DOCUMENT_NODE}function F3(n){return"window"in n&&n.window===n?n:Qpe(n)&&n.defaultView||!1}function F8(n){var e=n==="pageXOffset"?"scrollLeft":"scrollTop";function t(i,r){var a=F3(i);if(r===void 0)return a?a[n]:i[e];a?a.scrollTo(a[n],r):i[e]=r}return t}const H8=F8("pageXOffset"),V8=F8("pageYOffset");function Qd(n){var e=x_(n),t={top:0,left:0,height:0,width:0},i=e&&e.documentElement;return!i||!j0(i,n)||(n.getBoundingClientRect!==void 0&&(t=n.getBoundingClientRect()),t={top:t.top+V8(i)-(i.clientTop||0),left:t.left+H8(i)-(i.clientLeft||0),width:t.width,height:t.height}),t}var Jpe=function(e){return!!e&&"offsetParent"in e};function eme(n){for(var e=x_(n),t=n&&n.offsetParent;Jpe(t)&&t.nodeName!=="HTML"&&ng(t,"position")==="static";)t=t.offsetParent;return t||e.documentElement}var tme=function(e){return e.nodeName&&e.nodeName.toLowerCase()};function G8(n,e){var t={top:0,left:0},i;if(ng(n,"position")==="fixed")i=n.getBoundingClientRect();else{var r=e||eme(n);i=Qd(n),tme(r)!=="html"&&(t=Qd(r));var a=String(ng(r,"borderTopWidth")||0);t.top+=parseInt(a,10)-V8(r)||0;var s=String(ng(r,"borderLeftWidth")||0);t.left+=parseInt(s,10)-H8(r)||0}var o=String(ng(n,"marginTop")||0),l=String(ng(n,"marginLeft")||0);return Ui({},i,{top:i.top-t.top-(parseInt(o,10)||0),left:i.left-t.left-(parseInt(l,10)||0)})}const H3=!!(typeof window<"u"&&window.document&&window.document.createElement);var pz=new Date().getTime();function nme(n){var e=new Date().getTime(),t=Math.max(0,16-(e-pz)),i=setTimeout(n,t);return pz=e,i}var ime=["","webkit","moz","o","ms"],GO="clearTimeout",jO=nme,mz=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};H3&&ime.some(function(n){var e=mz(n,"request");return e in window&&(GO=mz(n,"cancel"),jO=function(i){return window[e](i)}),!!jO});var gz=function(e){typeof window[GO]=="function"&&window[GO](e)},j8=jO,wA;function rme(n,e){if(!wA){var t=document.body,i=t.matches||t.matchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;wA=function(a,s){return i.call(a,s)}}return wA(n,e)}var ame=Function.prototype.bind.call(Function.prototype.call,[].slice);function sme(n,e){return ame(n.querySelectorAll(e))}var qO=!1,WO=!1;try{var TA={get passive(){return qO=!0},get once(){return WO=qO=!0}};H3&&(window.addEventListener("test",TA,TA),window.removeEventListener("test",TA,!0))}catch{}function ome(n,e,t,i){if(i&&typeof i!="boolean"&&!WO){var r=i.once,a=i.capture,s=t;!WO&&r&&(s=t.__once||function o(l){this.removeEventListener(e,o,a),t.call(this,l)},t.__once=s),n.addEventListener(e,s,qO?i:a)}n.addEventListener(e,t,i)}function lme(n){const e=F.useRef(n);return F.useEffect(()=>{e.current=n},[n]),e}function vz(n){const e=lme(n);return F.useCallback(function(...t){return e.current&&e.current(...t)},[e])}function yz(){return F.useState(null)}function cme(){const n=F.useRef(!0),e=F.useRef(()=>n.current);return F.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[]),e.current}function ume(n){const e=cme();return[n[0],F.useCallback(t=>{if(e())return n[1](t)},[e,n[1]])]}var Vs="top",ko="bottom",Fo="right",Gs="left",V3="auto",E_=[Vs,ko,Fo,Gs],Og="start",q0="end",fme="clippingParents",q8="viewport",Oy="popper",hme="reference",_z=E_.reduce(function(n,e){return n.concat([e+"-"+Og,e+"-"+q0])},[]),G3=[].concat(E_,[V3]).reduce(function(n,e){return n.concat([e,e+"-"+Og,e+"-"+q0])},[]),dme="beforeRead",pme="read",mme="afterRead",gme="beforeMain",vme="main",yme="afterMain",_me="beforeWrite",bme="write",Sme="afterWrite",xme=[dme,pme,mme,gme,vme,yme,_me,bme,Sme];function qc(n){return n.split("-")[0]}function go(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function vp(n){var e=go(n).Element;return n instanceof e||n instanceof Element}function Wc(n){var e=go(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function j3(n){if(typeof ShadowRoot>"u")return!1;var e=go(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}var Jd=Math.max,Y1=Math.min,Dg=Math.round;function YO(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function W8(){return!/^((?!chrome|android).)*safari/i.test(YO())}function Ug(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var i=n.getBoundingClientRect(),r=1,a=1;e&&Wc(n)&&(r=n.offsetWidth>0&&Dg(i.width)/n.offsetWidth||1,a=n.offsetHeight>0&&Dg(i.height)/n.offsetHeight||1);var s=vp(n)?go(n):window,o=s.visualViewport,l=!W8()&&t,u=(i.left+(l&&o?o.offsetLeft:0))/r,h=(i.top+(l&&o?o.offsetTop:0))/a,p=i.width/r,g=i.height/a;return{width:p,height:g,top:h,right:u+p,bottom:h+g,left:u,x:u,y:h}}function q3(n){var e=Ug(n),t=n.offsetWidth,i=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:i}}function Y8(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&j3(t)){var i=e;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Sh(n){return n?(n.nodeName||"").toLowerCase():null}function sf(n){return go(n).getComputedStyle(n)}function Eme(n){return["table","td","th"].indexOf(Sh(n))>=0}function Ch(n){return((vp(n)?n.ownerDocument:n.document)||window.document).documentElement}function KE(n){return Sh(n)==="html"?n:n.assignedSlot||n.parentNode||(j3(n)?n.host:null)||Ch(n)}function bz(n){return!Wc(n)||sf(n).position==="fixed"?null:n.offsetParent}function wme(n){var e=/firefox/i.test(YO()),t=/Trident/i.test(YO());if(t&&Wc(n)){var i=sf(n);if(i.position==="fixed")return null}var r=KE(n);for(j3(r)&&(r=r.host);Wc(r)&&["html","body"].indexOf(Sh(r))<0;){var a=sf(r);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return r;r=r.parentNode}return null}function w_(n){for(var e=go(n),t=bz(n);t&&Eme(t)&&sf(t).position==="static";)t=bz(t);return t&&(Sh(t)==="html"||Sh(t)==="body"&&sf(t).position==="static")?e:t||wme(n)||e}function W3(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function s0(n,e,t){return Jd(n,Y1(e,t))}function Tme(n,e,t){var i=s0(n,e,t);return i>t?t:i}function $8(){return{top:0,right:0,bottom:0,left:0}}function X8(n){return Object.assign({},$8(),n)}function K8(n,e){return e.reduce(function(t,i){return t[i]=n,t},{})}var Mme=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,X8(typeof e!="number"?e:K8(e,E_))};function Ame(n){var e,t=n.state,i=n.name,r=n.options,a=t.elements.arrow,s=t.modifiersData.popperOffsets,o=qc(t.placement),l=W3(o),u=[Gs,Fo].indexOf(o)>=0,h=u?"height":"width";if(!(!a||!s)){var p=Mme(r.padding,t),g=q3(a),y=l==="y"?Vs:Gs,_=l==="y"?ko:Fo,S=t.rects.reference[h]+t.rects.reference[l]-s[l]-t.rects.popper[h],x=s[l]-t.rects.reference[l],w=w_(a),T=w?l==="y"?w.clientHeight||0:w.clientWidth||0:0,M=S/2-x/2,C=p[y],N=T-g[h]-p[_],D=T/2-g[h]/2+M,P=s0(C,D,N),z=l;t.modifiersData[i]=(e={},e[z]=P,e.centerOffset=P-D,e)}}function Cme(n){var e=n.state,t=n.options,i=t.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||Y8(e.elements.popper,r)&&(e.elements.arrow=r))}const Rme={name:"arrow",enabled:!0,phase:"main",fn:Ame,effect:Cme,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ng(n){return n.split("-")[1]}var Ome={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Dme(n,e){var t=n.x,i=n.y,r=e.devicePixelRatio||1;return{x:Dg(t*r)/r||0,y:Dg(i*r)/r||0}}function Sz(n){var e,t=n.popper,i=n.popperRect,r=n.placement,a=n.variation,s=n.offsets,o=n.position,l=n.gpuAcceleration,u=n.adaptive,h=n.roundOffsets,p=n.isFixed,g=s.x,y=g===void 0?0:g,_=s.y,S=_===void 0?0:_,x=typeof h=="function"?h({x:y,y:S}):{x:y,y:S};y=x.x,S=x.y;var w=s.hasOwnProperty("x"),T=s.hasOwnProperty("y"),M=Gs,C=Vs,N=window;if(u){var D=w_(t),P="clientHeight",z="clientWidth";if(D===go(t)&&(D=Ch(t),sf(D).position!=="static"&&o==="absolute"&&(P="scrollHeight",z="scrollWidth")),D=D,r===Vs||(r===Gs||r===Fo)&&a===q0){C=ko;var I=p&&D===N&&N.visualViewport?N.visualViewport.height:D[P];S-=I-i.height,S*=l?1:-1}if(r===Gs||(r===Vs||r===ko)&&a===q0){M=Fo;var L=p&&D===N&&N.visualViewport?N.visualViewport.width:D[z];y-=L-i.width,y*=l?1:-1}}var H=Object.assign({position:o},u&&Ome),j=h===!0?Dme({x:y,y:S},go(t)):{x:y,y:S};if(y=j.x,S=j.y,l){var G;return Object.assign({},H,(G={},G[C]=T?"0":"",G[M]=w?"0":"",G.transform=(N.devicePixelRatio||1)<=1?"translate("+y+"px, "+S+"px)":"translate3d("+y+"px, "+S+"px, 0)",G))}return Object.assign({},H,(e={},e[C]=T?S+"px":"",e[M]=w?y+"px":"",e.transform="",e))}function Ume(n){var e=n.state,t=n.options,i=t.gpuAcceleration,r=i===void 0?!0:i,a=t.adaptive,s=a===void 0?!0:a,o=t.roundOffsets,l=o===void 0?!0:o,u={placement:qc(e.placement),variation:Ng(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Sz(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Sz(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Nme={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Ume,data:{}};var lx={passive:!0};function Pme(n){var e=n.state,t=n.instance,i=n.options,r=i.scroll,a=r===void 0?!0:r,s=i.resize,o=s===void 0?!0:s,l=go(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&u.forEach(function(h){h.addEventListener("scroll",t.update,lx)}),o&&l.addEventListener("resize",t.update,lx),function(){a&&u.forEach(function(h){h.removeEventListener("scroll",t.update,lx)}),o&&l.removeEventListener("resize",t.update,lx)}}const Lme={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Pme,data:{}};var Ime={left:"right",right:"left",bottom:"top",top:"bottom"};function xx(n){return n.replace(/left|right|bottom|top/g,function(e){return Ime[e]})}var Bme={start:"end",end:"start"};function xz(n){return n.replace(/start|end/g,function(e){return Bme[e]})}function Y3(n){var e=go(n),t=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:t,scrollTop:i}}function $3(n){return Ug(Ch(n)).left+Y3(n).scrollLeft}function zme(n,e){var t=go(n),i=Ch(n),r=t.visualViewport,a=i.clientWidth,s=i.clientHeight,o=0,l=0;if(r){a=r.width,s=r.height;var u=W8();(u||!u&&e==="fixed")&&(o=r.offsetLeft,l=r.offsetTop)}return{width:a,height:s,x:o+$3(n),y:l}}function kme(n){var e,t=Ch(n),i=Y3(n),r=(e=n.ownerDocument)==null?void 0:e.body,a=Jd(t.scrollWidth,t.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),s=Jd(t.scrollHeight,t.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),o=-i.scrollLeft+$3(n),l=-i.scrollTop;return sf(r||t).direction==="rtl"&&(o+=Jd(t.clientWidth,r?r.clientWidth:0)-a),{width:a,height:s,x:o,y:l}}function X3(n){var e=sf(n),t=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+r+i)}function Z8(n){return["html","body","#document"].indexOf(Sh(n))>=0?n.ownerDocument.body:Wc(n)&&X3(n)?n:Z8(KE(n))}function o0(n,e){var t;e===void 0&&(e=[]);var i=Z8(n),r=i===((t=n.ownerDocument)==null?void 0:t.body),a=go(i),s=r?[a].concat(a.visualViewport||[],X3(i)?i:[]):i,o=e.concat(s);return r?o:o.concat(o0(KE(s)))}function $O(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function Fme(n,e){var t=Ug(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function Ez(n,e,t){return e===q8?$O(zme(n,t)):vp(e)?Fme(e,t):$O(kme(Ch(n)))}function Hme(n){var e=o0(KE(n)),t=["absolute","fixed"].indexOf(sf(n).position)>=0,i=t&&Wc(n)?w_(n):n;return vp(i)?e.filter(function(r){return vp(r)&&Y8(r,i)&&Sh(r)!=="body"}):[]}function Vme(n,e,t,i){var r=e==="clippingParents"?Hme(n):[].concat(e),a=[].concat(r,[t]),s=a[0],o=a.reduce(function(l,u){var h=Ez(n,u,i);return l.top=Jd(h.top,l.top),l.right=Y1(h.right,l.right),l.bottom=Y1(h.bottom,l.bottom),l.left=Jd(h.left,l.left),l},Ez(n,s,i));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Q8(n){var e=n.reference,t=n.element,i=n.placement,r=i?qc(i):null,a=i?Ng(i):null,s=e.x+e.width/2-t.width/2,o=e.y+e.height/2-t.height/2,l;switch(r){case Vs:l={x:s,y:e.y-t.height};break;case ko:l={x:s,y:e.y+e.height};break;case Fo:l={x:e.x+e.width,y:o};break;case Gs:l={x:e.x-t.width,y:o};break;default:l={x:e.x,y:e.y}}var u=r?W3(r):null;if(u!=null){var h=u==="y"?"height":"width";switch(a){case Og:l[u]=l[u]-(e[h]/2-t[h]/2);break;case q0:l[u]=l[u]+(e[h]/2-t[h]/2);break}}return l}function W0(n,e){e===void 0&&(e={});var t=e,i=t.placement,r=i===void 0?n.placement:i,a=t.strategy,s=a===void 0?n.strategy:a,o=t.boundary,l=o===void 0?fme:o,u=t.rootBoundary,h=u===void 0?q8:u,p=t.elementContext,g=p===void 0?Oy:p,y=t.altBoundary,_=y===void 0?!1:y,S=t.padding,x=S===void 0?0:S,w=X8(typeof x!="number"?x:K8(x,E_)),T=g===Oy?hme:Oy,M=n.rects.popper,C=n.elements[_?T:g],N=Vme(vp(C)?C:C.contextElement||Ch(n.elements.popper),l,h,s),D=Ug(n.elements.reference),P=Q8({reference:D,element:M,placement:r}),z=$O(Object.assign({},M,P)),I=g===Oy?z:D,L={top:N.top-I.top+w.top,bottom:I.bottom-N.bottom+w.bottom,left:N.left-I.left+w.left,right:I.right-N.right+w.right},H=n.modifiersData.offset;if(g===Oy&&H){var j=H[r];Object.keys(L).forEach(function(G){var K=[Fo,ko].indexOf(G)>=0?1:-1,ee=[Vs,ko].indexOf(G)>=0?"y":"x";L[G]+=j[ee]*K})}return L}function Gme(n,e){e===void 0&&(e={});var t=e,i=t.placement,r=t.boundary,a=t.rootBoundary,s=t.padding,o=t.flipVariations,l=t.allowedAutoPlacements,u=l===void 0?G3:l,h=Ng(i),p=h?o?_z:_z.filter(function(_){return Ng(_)===h}):E_,g=p.filter(function(_){return u.indexOf(_)>=0});g.length===0&&(g=p);var y=g.reduce(function(_,S){return _[S]=W0(n,{placement:S,boundary:r,rootBoundary:a,padding:s})[qc(S)],_},{});return Object.keys(y).sort(function(_,S){return y[_]-y[S]})}function jme(n){if(qc(n)===V3)return[];var e=xx(n);return[xz(n),e,xz(e)]}function qme(n){var e=n.state,t=n.options,i=n.name;if(!e.modifiersData[i]._skip){for(var r=t.mainAxis,a=r===void 0?!0:r,s=t.altAxis,o=s===void 0?!0:s,l=t.fallbackPlacements,u=t.padding,h=t.boundary,p=t.rootBoundary,g=t.altBoundary,y=t.flipVariations,_=y===void 0?!0:y,S=t.allowedAutoPlacements,x=e.options.placement,w=qc(x),T=w===x,M=l||(T||!_?[xx(x)]:jme(x)),C=[x].concat(M).reduce(function(Z,ce){return Z.concat(qc(ce)===V3?Gme(e,{placement:ce,boundary:h,rootBoundary:p,padding:u,flipVariations:_,allowedAutoPlacements:S}):ce)},[]),N=e.rects.reference,D=e.rects.popper,P=new Map,z=!0,I=C[0],L=0;L<C.length;L++){var H=C[L],j=qc(H),G=Ng(H)===Og,K=[Vs,ko].indexOf(j)>=0,ee=K?"width":"height",Y=W0(e,{placement:H,boundary:h,rootBoundary:p,altBoundary:g,padding:u}),re=K?G?Fo:Gs:G?ko:Vs;N[ee]>D[ee]&&(re=xx(re));var J=xx(re),se=[];if(a&&se.push(Y[j]<=0),o&&se.push(Y[re]<=0,Y[J]<=0),se.every(function(Z){return Z})){I=H,z=!1;break}P.set(H,se)}if(z)for(var q=_?3:1,X=function(ce){var me=C.find(function(de){var ve=P.get(de);if(ve)return ve.slice(0,ce).every(function(We){return We})});if(me)return I=me,"break"},oe=q;oe>0;oe--){var ue=X(oe);if(ue==="break")break}e.placement!==I&&(e.modifiersData[i]._skip=!0,e.placement=I,e.reset=!0)}}const Wme={name:"flip",enabled:!0,phase:"main",fn:qme,requiresIfExists:["offset"],data:{_skip:!1}};function wz(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function Tz(n){return[Vs,Fo,ko,Gs].some(function(e){return n[e]>=0})}function Yme(n){var e=n.state,t=n.name,i=e.rects.reference,r=e.rects.popper,a=e.modifiersData.preventOverflow,s=W0(e,{elementContext:"reference"}),o=W0(e,{altBoundary:!0}),l=wz(s,i),u=wz(o,r,a),h=Tz(l),p=Tz(u);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:h,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":p})}const $me={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Yme};function Xme(n,e,t){var i=qc(n),r=[Gs,Vs].indexOf(i)>=0?-1:1,a=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,s=a[0],o=a[1];return s=s||0,o=(o||0)*r,[Gs,Fo].indexOf(i)>=0?{x:o,y:s}:{x:s,y:o}}function Kme(n){var e=n.state,t=n.options,i=n.name,r=t.offset,a=r===void 0?[0,0]:r,s=G3.reduce(function(h,p){return h[p]=Xme(p,e.rects,a),h},{}),o=s[e.placement],l=o.x,u=o.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[i]=s}const Zme={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Kme};function Qme(n){var e=n.state,t=n.name;e.modifiersData[t]=Q8({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const Jme={name:"popperOffsets",enabled:!0,phase:"read",fn:Qme,data:{}};function ege(n){return n==="x"?"y":"x"}function tge(n){var e=n.state,t=n.options,i=n.name,r=t.mainAxis,a=r===void 0?!0:r,s=t.altAxis,o=s===void 0?!1:s,l=t.boundary,u=t.rootBoundary,h=t.altBoundary,p=t.padding,g=t.tether,y=g===void 0?!0:g,_=t.tetherOffset,S=_===void 0?0:_,x=W0(e,{boundary:l,rootBoundary:u,padding:p,altBoundary:h}),w=qc(e.placement),T=Ng(e.placement),M=!T,C=W3(w),N=ege(C),D=e.modifiersData.popperOffsets,P=e.rects.reference,z=e.rects.popper,I=typeof S=="function"?S(Object.assign({},e.rects,{placement:e.placement})):S,L=typeof I=="number"?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),H=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,j={x:0,y:0};if(D){if(a){var G,K=C==="y"?Vs:Gs,ee=C==="y"?ko:Fo,Y=C==="y"?"height":"width",re=D[C],J=re+x[K],se=re-x[ee],q=y?-z[Y]/2:0,X=T===Og?P[Y]:z[Y],oe=T===Og?-z[Y]:-P[Y],ue=e.elements.arrow,Z=y&&ue?q3(ue):{width:0,height:0},ce=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:$8(),me=ce[K],de=ce[ee],ve=s0(0,P[Y],Z[Y]),We=M?P[Y]/2-q-ve-me-L.mainAxis:X-ve-me-L.mainAxis,ze=M?-P[Y]/2+q+ve+de+L.mainAxis:oe+ve+de+L.mainAxis,qe=e.elements.arrow&&w_(e.elements.arrow),_e=qe?C==="y"?qe.clientTop||0:qe.clientLeft||0:0,Ae=(G=H==null?void 0:H[C])!=null?G:0,te=re+We-Ae-_e,ke=re+ze-Ae,De=s0(y?Y1(J,te):J,re,y?Jd(se,ke):se);D[C]=De,j[C]=De-re}if(o){var Ie,Te=C==="x"?Vs:Gs,Xe=C==="x"?ko:Fo,Pe=D[N],$=N==="y"?"height":"width",W=Pe+x[Te],ae=Pe-x[Xe],he=[Vs,Gs].indexOf(w)!==-1,Se=(Ie=H==null?void 0:H[N])!=null?Ie:0,Oe=he?W:Pe-P[$]-z[$]-Se+L.altAxis,je=he?Pe+P[$]+z[$]-Se-L.altAxis:ae,Ge=y&&he?Tme(Oe,Pe,je):s0(y?Oe:W,Pe,y?je:ae);D[N]=Ge,j[N]=Ge-Pe}e.modifiersData[i]=j}}const nge={name:"preventOverflow",enabled:!0,phase:"main",fn:tge,requiresIfExists:["offset"]};function ige(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function rge(n){return n===go(n)||!Wc(n)?Y3(n):ige(n)}function age(n){var e=n.getBoundingClientRect(),t=Dg(e.width)/n.offsetWidth||1,i=Dg(e.height)/n.offsetHeight||1;return t!==1||i!==1}function sge(n,e,t){t===void 0&&(t=!1);var i=Wc(e),r=Wc(e)&&age(e),a=Ch(e),s=Ug(n,r,t),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!t)&&((Sh(e)!=="body"||X3(a))&&(o=rge(e)),Wc(e)?(l=Ug(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):a&&(l.x=$3(a))),{x:s.left+o.scrollLeft-l.x,y:s.top+o.scrollTop-l.y,width:s.width,height:s.height}}function oge(n){var e=new Map,t=new Set,i=[];n.forEach(function(a){e.set(a.name,a)});function r(a){t.add(a.name);var s=[].concat(a.requires||[],a.requiresIfExists||[]);s.forEach(function(o){if(!t.has(o)){var l=e.get(o);l&&r(l)}}),i.push(a)}return n.forEach(function(a){t.has(a.name)||r(a)}),i}function lge(n){var e=oge(n);return xme.reduce(function(t,i){return t.concat(e.filter(function(r){return r.phase===i}))},[])}function cge(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function uge(n){var e=n.reduce(function(t,i){var r=t[i.name];return t[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,t},{});return Object.keys(e).map(function(t){return e[t]})}var Mz={placement:"bottom",modifiers:[],strategy:"absolute"};function Az(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function fge(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,i=t===void 0?[]:t,r=e.defaultOptions,a=r===void 0?Mz:r;return function(o,l,u){u===void 0&&(u=a);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},Mz,a),modifiersData:{},elements:{reference:o,popper:l},attributes:{},styles:{}},p=[],g=!1,y={state:h,setOptions:function(w){var T=typeof w=="function"?w(h.options):w;S(),h.options=Object.assign({},a,h.options,T),h.scrollParents={reference:vp(o)?o0(o):o.contextElement?o0(o.contextElement):[],popper:o0(l)};var M=lge(uge([].concat(i,h.options.modifiers)));return h.orderedModifiers=M.filter(function(C){return C.enabled}),_(),y.update()},forceUpdate:function(){if(!g){var w=h.elements,T=w.reference,M=w.popper;if(Az(T,M)){h.rects={reference:sge(T,w_(M),h.options.strategy==="fixed"),popper:q3(M)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(L){return h.modifiersData[L.name]=Object.assign({},L.data)});for(var C=0;C<h.orderedModifiers.length;C++){if(h.reset===!0){h.reset=!1,C=-1;continue}var N=h.orderedModifiers[C],D=N.fn,P=N.options,z=P===void 0?{}:P,I=N.name;typeof D=="function"&&(h=D({state:h,options:z,name:I,instance:y})||h)}}}},update:cge(function(){return new Promise(function(x){y.forceUpdate(),x(h)})}),destroy:function(){S(),g=!0}};if(!Az(o,l))return y;y.setOptions(u).then(function(x){!g&&u.onFirstUpdate&&u.onFirstUpdate(x)});function _(){h.orderedModifiers.forEach(function(x){var w=x.name,T=x.options,M=T===void 0?{}:T,C=x.effect;if(typeof C=="function"){var N=C({state:h,name:w,instance:y,options:M}),D=function(){};p.push(N||D)}})}function S(){p.forEach(function(x){return x()}),p=[]}return y}}var hge=fge({defaultModifiers:[$me,Jme,Nme,Lme,Zme,Wme,nge,Rme]}),Cz=function(e){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},dge={name:"applyStyles",enabled:!1},pge={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(e){var t=e.state;return function(){var i=t.elements,r=i.reference,a=i.popper;if("removeAttribute"in r){var s=(r.getAttribute("aria-describedby")||"").split(",").filter(function(o){return o.trim()!==a.id});s.length?r.setAttribute("aria-describedby",s.join(",")):r.removeAttribute("aria-describedby")}}},fn:function(e){var t,i=e.state,r=i.elements,a=r.popper,s=r.reference,o=(t=a.getAttribute("role"))==null?void 0:t.toLowerCase();if(a.id&&o==="tooltip"&&"setAttribute"in s){var l=s.getAttribute("aria-describedby");if(l&&l.split(",").indexOf(a.id)!==-1)return;s.setAttribute("aria-describedby",l?l+","+a.id:a.id)}}},mge=[];function gge(n,e,t){var i=t===void 0?{}:t,r=i.enabled,a=r===void 0?!0:r,s=i.placement,o=s===void 0?"bottom":s,l=i.strategy,u=l===void 0?"absolute":l,h=i.modifiers,p=h===void 0?mge:h,g=YE(i,["enabled","placement","strategy","modifiers"]),y=F.useRef(),_=F.useCallback(function(){var C;(C=y.current)==null||C.update()},[]),S=F.useCallback(function(){var C;(C=y.current)==null||C.forceUpdate()},[]),x=ume(F.useState({placement:o,update:_,forceUpdate:S,attributes:{},styles:{popper:Cz(u),arrow:{}}})),w=x[0],T=x[1],M=F.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(N){var D=N.state,P={},z={};Object.keys(D.elements).forEach(function(I){P[I]=D.styles[I],z[I]=D.attributes[I]}),T({state:D,styles:P,attributes:z,update:_,forceUpdate:S,placement:D.placement})}}},[_,S,T]);return F.useEffect(function(){!y.current||!a||y.current.setOptions({placement:o,strategy:u,modifiers:[].concat(p,[M,dge])})},[u,o,M,a]),F.useEffect(function(){if(!(!a||n==null||e==null))return y.current=hge(n,e,Ui({},g,{placement:o,strategy:u,modifiers:[].concat(p,[pge,M])})),function(){y.current!=null&&(y.current.destroy(),y.current=void 0,T(function(C){return Ui({},C,{attributes:{},styles:{popper:Cz(u)}})}))}},[a,n,e]),w}function vge(n,e,t,i){var r=i&&typeof i!="boolean"?i.capture:i;n.removeEventListener(e,t,r),t.__once&&n.removeEventListener(e,t.__once,r)}function By(n,e,t,i){return ome(n,e,t,i),function(){vge(n,e,t,i)}}var MA,Rz;function yge(){if(Rz)return MA;Rz=1;var n=function(){};return MA=n,MA}var _ge=yge();const bge=kr(_ge);function Sge(n){return n&&"setState"in n?f3.findDOMNode(n):n??null}const xge=(function(n){return x_(Sge(n))});var Ege=27,Oz=function(){};function wge(n){return n.button===0}function Tge(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}var Dz=function(e){return e&&("current"in e?e.current:e)};function Mge(n,e,t){var i=t===void 0?{}:t,r=i.disabled,a=i.clickTrigger,s=a===void 0?"click":a,o=F.useRef(!1),l=e||Oz,u=F.useCallback(function(g){var y,_=Dz(n);bge(!!_,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),o.current=!_||Tge(g)||!wge(g)||!!j0(_,(y=g.composedPath==null?void 0:g.composedPath()[0])!=null?y:g.target)},[n]),h=vz(function(g){o.current||l(g)}),p=vz(function(g){g.keyCode===Ege&&l(g)});F.useEffect(function(){if(!(r||n==null)){var g=window.event,y=xge(Dz(n)),_=By(y,s,u,!0),S=By(y,s,function(T){if(T===g){g=void 0;return}h(T)}),x=By(y,"keyup",function(T){if(T===g){g=void 0;return}p(T)}),w=[];return"ontouchstart"in y.documentElement&&(w=[].slice.call(y.body.children).map(function(T){return By(T,"mousemove",Oz)})),function(){_(),S(),x(),w.forEach(function(T){return T()})}}},[n,r,s,u,h,p])}function Age(n){var e={};return Array.isArray(n)?(n==null||n.forEach(function(t){e[t.name]=t}),e):n||e}function Cge(n){return n===void 0&&(n={}),Array.isArray(n)?n:Object.keys(n).map(function(e){return n[e].name=e,n[e]})}function Rge(n){var e,t,i,r,a=n.enabled,s=n.enableEvents,o=n.placement,l=n.flip,u=n.offset,h=n.fixed,p=n.containerPadding,g=n.arrowElement,y=n.popperConfig,_=y===void 0?{}:y,S=Age(_.modifiers);return Ui({},_,{placement:o,enabled:a,strategy:h?"fixed":_.strategy,modifiers:Cge(Ui({},S,{eventListeners:{enabled:s},preventOverflow:Ui({},S.preventOverflow,{options:p?Ui({padding:p},(e=S.preventOverflow)==null?void 0:e.options):(t=S.preventOverflow)==null?void 0:t.options}),offset:{options:Ui({offset:u},(i=S.offset)==null?void 0:i.options)},arrow:Ui({},S.arrow,{enabled:!!g,options:Ui({},(r=S.arrow)==null?void 0:r.options,{element:g})}),flip:Ui({enabled:!!l},S.flip)}))})}function Oge(n,e){return n.classList?n.classList.contains(e):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+e+" ")!==-1}function Dge(n,e){n.classList?n.classList.add(e):Oge(n,e)||(typeof n.className=="string"?n.className=n.className+" "+e:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+e))}function Uz(n,e){return n.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Uge(n,e){n.classList?n.classList.remove(e):typeof n.className=="string"?n.className=Uz(n.className,e):n.setAttribute("class",Uz(n.className&&n.className.baseVal||"",e))}var cx;function K3(n){if((!cx&&cx!==0||n)&&H3){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),cx=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return cx}var AA=function(e){var t;return typeof document>"u"?null:e==null?x_().body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),(t=e)!=null&&t.nodeType&&e||null)};function Nz(n,e){var t=F.useState(function(){return AA(n)}),i=t[0],r=t[1];if(!i){var a=AA(n);a&&r(a)}return F.useEffect(function(){},[e,i]),F.useEffect(function(){var s=AA(n);s!==i&&r(s)},[n,i]),i}const Pz=n=>!n||typeof n=="function"?n:e=>{n.current=e};function Nge(n,e){const t=Pz(n),i=Pz(e);return r=>{t&&t(r),i&&i(r)}}function Pge(n,e){return F.useMemo(()=>Nge(n,e),[n,e])}var Z3=B.forwardRef(function(n,e){var t=n.flip,i=n.offset,r=n.placement,a=n.containerPadding,s=a===void 0?5:a,o=n.popperConfig,l=o===void 0?{}:o,u=n.transition,h=yz(),p=h[0],g=h[1],y=yz(),_=y[0],S=y[1],x=Pge(g,e),w=Nz(n.container),T=Nz(n.target),M=F.useState(!n.show),C=M[0],N=M[1],D=gge(T,p,Rge({placement:r,enableEvents:!!n.show,containerPadding:s||5,flip:t,offset:i,arrowElement:_,popperConfig:l})),P=D.styles,z=D.attributes,I=YE(D,["styles","attributes"]);n.show?C&&N(!1):!n.transition&&!C&&N(!0);var L=function(){N(!0),n.onExited&&n.onExited.apply(n,arguments)},H=n.show||u&&!C;if(Mge(p,n.onHide,{disabled:!n.rootClose||n.rootCloseDisabled,clickTrigger:n.rootCloseEvent}),!H)return null;var j=n.children(Ui({},I,{show:!!n.show,props:Ui({},z.popper,{style:P.popper,ref:x}),arrowProps:Ui({},z.arrow,{style:P.arrow,ref:S})}));if(u){var G=n.onExit,K=n.onExiting,ee=n.onEnter,Y=n.onEntering,re=n.onEntered;j=B.createElement(u,{in:n.show,appear:!0,onExit:G,onExiting:K,onExited:L,onEnter:ee,onEntering:Y,onEntered:re},j)}return w?f3.createPortal(j,w):null});Z3.displayName="Overlay";Z3.propTypes={show:at.bool,placement:at.oneOf(G3),target:at.any,container:at.any,flip:at.bool,children:at.func.isRequired,containerPadding:at.number,popperConfig:at.object,rootClose:at.bool,rootCloseEvent:at.oneOf(["click","mousedown"]),rootCloseDisabled:at.bool,onHide:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];if(e.rootClose){var a;return(a=at.func).isRequired.apply(a,[e].concat(i))}return at.func.apply(at,[e].concat(i))},transition:at.elementType,onEnter:at.func,onEntering:at.func,onEntered:at.func,onExit:at.func,onExiting:at.func,onExited:at.func};var CA,Lz;function Lge(){if(Lz)return CA;Lz=1;function n(){this.__data__=[],this.size=0}return CA=n,CA}var RA,Iz;function ZE(){if(Iz)return RA;Iz=1;var n=__();function e(t,i){for(var r=t.length;r--;)if(n(t[r][0],i))return r;return-1}return RA=e,RA}var OA,Bz;function Ige(){if(Bz)return OA;Bz=1;var n=ZE(),e=Array.prototype,t=e.splice;function i(r){var a=this.__data__,s=n(a,r);if(s<0)return!1;var o=a.length-1;return s==o?a.pop():t.call(a,s,1),--this.size,!0}return OA=i,OA}var DA,zz;function Bge(){if(zz)return DA;zz=1;var n=ZE();function e(t){var i=this.__data__,r=n(i,t);return r<0?void 0:i[r][1]}return DA=e,DA}var UA,kz;function zge(){if(kz)return UA;kz=1;var n=ZE();function e(t){return n(this.__data__,t)>-1}return UA=e,UA}var NA,Fz;function kge(){if(Fz)return NA;Fz=1;var n=ZE();function e(t,i){var r=this.__data__,a=n(r,t);return a<0?(++this.size,r.push([t,i])):r[a][1]=i,this}return NA=e,NA}var PA,Hz;function QE(){if(Hz)return PA;Hz=1;var n=Lge(),e=Ige(),t=Bge(),i=zge(),r=kge();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=i,a.prototype.set=r,PA=a,PA}var LA,Vz;function Fge(){if(Vz)return LA;Vz=1;var n=QE();function e(){this.__data__=new n,this.size=0}return LA=e,LA}var IA,Gz;function Hge(){if(Gz)return IA;Gz=1;function n(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}return IA=n,IA}var BA,jz;function Vge(){if(jz)return BA;jz=1;function n(e){return this.__data__.get(e)}return BA=n,BA}var zA,qz;function Gge(){if(qz)return zA;qz=1;function n(e){return this.__data__.has(e)}return zA=n,zA}var kA,Wz;function jge(){if(Wz)return kA;Wz=1;var n=eu(),e=n["__core-js_shared__"];return kA=e,kA}var FA,Yz;function qge(){if(Yz)return FA;Yz=1;var n=jge(),e=(function(){var i=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})();function t(i){return!!e&&e in i}return FA=t,FA}var HA,$z;function J8(){if($z)return HA;$z=1;var n=Function.prototype,e=n.toString;function t(i){if(i!=null){try{return e.call(i)}catch{}try{return i+""}catch{}}return""}return HA=t,HA}var VA,Xz;function Wge(){if(Xz)return VA;Xz=1;var n=B3(),e=qge(),t=hf(),i=J8(),r=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,l=s.toString,u=o.hasOwnProperty,h=RegExp("^"+l.call(u).replace(r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(g){if(!t(g)||e(g))return!1;var y=n(g)?h:a;return y.test(i(g))}return VA=p,VA}var GA,Kz;function Yge(){if(Kz)return GA;Kz=1;function n(e,t){return e==null?void 0:e[t]}return GA=n,GA}var jA,Zz;function Mp(){if(Zz)return jA;Zz=1;var n=Wge(),e=Yge();function t(i,r){var a=e(i,r);return n(a)?a:void 0}return jA=t,jA}var qA,Qz;function Q3(){if(Qz)return qA;Qz=1;var n=Mp(),e=eu(),t=n(e,"Map");return qA=t,qA}var WA,Jz;function JE(){if(Jz)return WA;Jz=1;var n=Mp(),e=n(Object,"create");return WA=e,WA}var YA,ek;function $ge(){if(ek)return YA;ek=1;var n=JE();function e(){this.__data__=n?n(null):{},this.size=0}return YA=e,YA}var $A,tk;function Xge(){if(tk)return $A;tk=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return $A=n,$A}var XA,nk;function Kge(){if(nk)return XA;nk=1;var n=JE(),e="__lodash_hash_undefined__",t=Object.prototype,i=t.hasOwnProperty;function r(a){var s=this.__data__;if(n){var o=s[a];return o===e?void 0:o}return i.call(s,a)?s[a]:void 0}return XA=r,XA}var KA,ik;function Zge(){if(ik)return KA;ik=1;var n=JE(),e=Object.prototype,t=e.hasOwnProperty;function i(r){var a=this.__data__;return n?a[r]!==void 0:t.call(a,r)}return KA=i,KA}var ZA,rk;function Qge(){if(rk)return ZA;rk=1;var n=JE(),e="__lodash_hash_undefined__";function t(i,r){var a=this.__data__;return this.size+=this.has(i)?0:1,a[i]=n&&r===void 0?e:r,this}return ZA=t,ZA}var QA,ak;function Jge(){if(ak)return QA;ak=1;var n=$ge(),e=Xge(),t=Kge(),i=Zge(),r=Qge();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=i,a.prototype.set=r,QA=a,QA}var JA,sk;function eve(){if(sk)return JA;sk=1;var n=Jge(),e=QE(),t=Q3();function i(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return JA=i,JA}var eC,ok;function tve(){if(ok)return eC;ok=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return eC=n,eC}var tC,lk;function ew(){if(lk)return tC;lk=1;var n=tve();function e(t,i){var r=t.__data__;return n(i)?r[typeof i=="string"?"string":"hash"]:r.map}return tC=e,tC}var nC,ck;function nve(){if(ck)return nC;ck=1;var n=ew();function e(t){var i=n(this,t).delete(t);return this.size-=i?1:0,i}return nC=e,nC}var iC,uk;function ive(){if(uk)return iC;uk=1;var n=ew();function e(t){return n(this,t).get(t)}return iC=e,iC}var rC,fk;function rve(){if(fk)return rC;fk=1;var n=ew();function e(t){return n(this,t).has(t)}return rC=e,rC}var aC,hk;function ave(){if(hk)return aC;hk=1;var n=ew();function e(t,i){var r=n(this,t),a=r.size;return r.set(t,i),this.size+=r.size==a?0:1,this}return aC=e,aC}var sC,dk;function J3(){if(dk)return sC;dk=1;var n=eve(),e=nve(),t=ive(),i=rve(),r=ave();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=n,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=i,a.prototype.set=r,sC=a,sC}var oC,pk;function sve(){if(pk)return oC;pk=1;var n=QE(),e=Q3(),t=J3(),i=200;function r(a,s){var o=this.__data__;if(o instanceof n){var l=o.__data__;if(!e||l.length<i-1)return l.push([a,s]),this.size=++o.size,this;o=this.__data__=new t(l)}return o.set(a,s),this.size=o.size,this}return oC=r,oC}var lC,mk;function eU(){if(mk)return lC;mk=1;var n=QE(),e=Fge(),t=Hge(),i=Vge(),r=Gge(),a=sve();function s(o){var l=this.__data__=new n(o);this.size=l.size}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=i,s.prototype.has=r,s.prototype.set=a,lC=s,lC}var cC,gk;function ove(){if(gk)return cC;gk=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return cC=e,cC}var uC,vk;function lve(){if(vk)return uC;vk=1;function n(e){return this.__data__.has(e)}return uC=n,uC}var fC,yk;function cve(){if(yk)return fC;yk=1;var n=J3(),e=ove(),t=lve();function i(r){var a=-1,s=r==null?0:r.length;for(this.__data__=new n;++a<s;)this.add(r[a])}return i.prototype.add=i.prototype.push=e,i.prototype.has=t,fC=i,fC}var hC,_k;function uve(){if(_k)return hC;_k=1;function n(e,t){for(var i=-1,r=e==null?0:e.length;++i<r;)if(t(e[i],i,e))return!0;return!1}return hC=n,hC}var dC,bk;function fve(){if(bk)return dC;bk=1;function n(e,t){return e.has(t)}return dC=n,dC}var pC,Sk;function ej(){if(Sk)return pC;Sk=1;var n=cve(),e=uve(),t=fve(),i=1,r=2;function a(s,o,l,u,h,p){var g=l&i,y=s.length,_=o.length;if(y!=_&&!(g&&_>y))return!1;var S=p.get(s),x=p.get(o);if(S&&x)return S==o&&x==s;var w=-1,T=!0,M=l&r?new n:void 0;for(p.set(s,o),p.set(o,s);++w<y;){var C=s[w],N=o[w];if(u)var D=g?u(N,C,w,o,s,p):u(C,N,w,s,o,p);if(D!==void 0){if(D)continue;T=!1;break}if(M){if(!e(o,function(P,z){if(!t(M,z)&&(C===P||h(C,P,l,u,p)))return M.push(z)})){T=!1;break}}else if(!(C===N||h(C,N,l,u,p))){T=!1;break}}return p.delete(s),p.delete(o),T}return pC=a,pC}var mC,xk;function tj(){if(xk)return mC;xk=1;var n=eu(),e=n.Uint8Array;return mC=e,mC}var gC,Ek;function hve(){if(Ek)return gC;Ek=1;function n(e){var t=-1,i=Array(e.size);return e.forEach(function(r,a){i[++t]=[a,r]}),i}return gC=n,gC}var vC,wk;function dve(){if(wk)return vC;wk=1;function n(e){var t=-1,i=Array(e.size);return e.forEach(function(r){i[++t]=r}),i}return vC=n,vC}var yC,Tk;function pve(){if(Tk)return yC;Tk=1;var n=Kg(),e=tj(),t=__(),i=ej(),r=hve(),a=dve(),s=1,o=2,l="[object Boolean]",u="[object Date]",h="[object Error]",p="[object Map]",g="[object Number]",y="[object RegExp]",_="[object Set]",S="[object String]",x="[object Symbol]",w="[object ArrayBuffer]",T="[object DataView]",M=n?n.prototype:void 0,C=M?M.valueOf:void 0;function N(D,P,z,I,L,H,j){switch(z){case T:if(D.byteLength!=P.byteLength||D.byteOffset!=P.byteOffset)return!1;D=D.buffer,P=P.buffer;case w:return!(D.byteLength!=P.byteLength||!H(new e(D),new e(P)));case l:case u:case g:return t(+D,+P);case h:return D.name==P.name&&D.message==P.message;case y:case S:return D==P+"";case p:var G=r;case _:var K=I&s;if(G||(G=a),D.size!=P.size&&!K)return!1;var ee=j.get(D);if(ee)return ee==P;I|=o,j.set(D,P);var Y=i(G(D),G(P),I,L,H,j);return j.delete(D),Y;case x:if(C)return C.call(D)==C.call(P)}return!1}return yC=N,yC}var _C,Mk;function tU(){if(Mk)return _C;Mk=1;function n(e,t){for(var i=-1,r=t.length,a=e.length;++i<r;)e[a+i]=t[i];return e}return _C=n,_C}var bC,Ak;function jo(){if(Ak)return bC;Ak=1;var n=Array.isArray;return bC=n,bC}var SC,Ck;function nj(){if(Ck)return SC;Ck=1;var n=tU(),e=jo();function t(i,r,a){var s=r(i);return e(i)?s:n(s,a(i))}return SC=t,SC}var xC,Rk;function mve(){if(Rk)return xC;Rk=1;function n(e,t){for(var i=-1,r=e==null?0:e.length,a=0,s=[];++i<r;){var o=e[i];t(o,i,e)&&(s[a++]=o)}return s}return xC=n,xC}var EC,Ok;function ij(){if(Ok)return EC;Ok=1;function n(){return[]}return EC=n,EC}var wC,Dk;function nU(){if(Dk)return wC;Dk=1;var n=mve(),e=ij(),t=Object.prototype,i=t.propertyIsEnumerable,r=Object.getOwnPropertySymbols,a=r?function(s){return s==null?[]:(s=Object(s),n(r(s),function(o){return i.call(s,o)}))}:e;return wC=a,wC}var TC,Uk;function gve(){if(Uk)return TC;Uk=1;function n(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}return TC=n,TC}var MC,Nk;function vve(){if(Nk)return MC;Nk=1;var n=Zg(),e=Ah(),t="[object Arguments]";function i(r){return e(r)&&n(r)==t}return MC=i,MC}var AC,Pk;function iU(){if(Pk)return AC;Pk=1;var n=vve(),e=Ah(),t=Object.prototype,i=t.hasOwnProperty,r=t.propertyIsEnumerable,a=n((function(){return arguments})())?n:function(s){return e(s)&&i.call(s,"callee")&&!r.call(s,"callee")};return AC=a,AC}var zy={exports:{}},CC,Lk;function yve(){if(Lk)return CC;Lk=1;function n(){return!1}return CC=n,CC}zy.exports;var Ik;function tw(){return Ik||(Ik=1,(function(n,e){var t=eu(),i=yve(),r=e&&!e.nodeType&&e,a=r&&!0&&n&&!n.nodeType&&n,s=a&&a.exports===r,o=s?t.Buffer:void 0,l=o?o.isBuffer:void 0,u=l||i;n.exports=u})(zy,zy.exports)),zy.exports}var RC,Bk;function _ve(){if(Bk)return RC;Bk=1;var n=Zg(),e=z3(),t=Ah(),i="[object Arguments]",r="[object Array]",a="[object Boolean]",s="[object Date]",o="[object Error]",l="[object Function]",u="[object Map]",h="[object Number]",p="[object Object]",g="[object RegExp]",y="[object Set]",_="[object String]",S="[object WeakMap]",x="[object ArrayBuffer]",w="[object DataView]",T="[object Float32Array]",M="[object Float64Array]",C="[object Int8Array]",N="[object Int16Array]",D="[object Int32Array]",P="[object Uint8Array]",z="[object Uint8ClampedArray]",I="[object Uint16Array]",L="[object Uint32Array]",H={};H[T]=H[M]=H[C]=H[N]=H[D]=H[P]=H[z]=H[I]=H[L]=!0,H[i]=H[r]=H[x]=H[a]=H[w]=H[s]=H[o]=H[l]=H[u]=H[h]=H[p]=H[g]=H[y]=H[_]=H[S]=!1;function j(G){return t(G)&&e(G.length)&&!!H[n(G)]}return RC=j,RC}var OC,zk;function nw(){if(zk)return OC;zk=1;function n(e){return function(t){return e(t)}}return OC=n,OC}var ky={exports:{}};ky.exports;var kk;function rU(){return kk||(kk=1,(function(n,e){var t=B8(),i=e&&!e.nodeType&&e,r=i&&!0&&n&&!n.nodeType&&n,a=r&&r.exports===i,s=a&&t.process,o=(function(){try{var l=r&&r.require&&r.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}})();n.exports=o})(ky,ky.exports)),ky.exports}var DC,Fk;function aU(){if(Fk)return DC;Fk=1;var n=_ve(),e=nw(),t=rU(),i=t&&t.isTypedArray,r=i?e(i):n;return DC=r,DC}var UC,Hk;function rj(){if(Hk)return UC;Hk=1;var n=gve(),e=iU(),t=jo(),i=tw(),r=k3(),a=aU(),s=Object.prototype,o=s.hasOwnProperty;function l(u,h){var p=t(u),g=!p&&e(u),y=!p&&!g&&i(u),_=!p&&!g&&!y&&a(u),S=p||g||y||_,x=S?n(u.length,String):[],w=x.length;for(var T in u)(h||o.call(u,T))&&!(S&&(T=="length"||y&&(T=="offset"||T=="parent")||_&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||r(T,w)))&&x.push(T);return x}return UC=l,UC}var NC,Vk;function sU(){if(Vk)return NC;Vk=1;var n=Object.prototype;function e(t){var i=t&&t.constructor,r=typeof i=="function"&&i.prototype||n;return t===r}return NC=e,NC}var PC,Gk;function aj(){if(Gk)return PC;Gk=1;function n(e,t){return function(i){return e(t(i))}}return PC=n,PC}var LC,jk;function bve(){if(jk)return LC;jk=1;var n=aj(),e=n(Object.keys,Object);return LC=e,LC}var IC,qk;function Sve(){if(qk)return IC;qk=1;var n=sU(),e=bve(),t=Object.prototype,i=t.hasOwnProperty;function r(a){if(!n(a))return e(a);var s=[];for(var o in Object(a))i.call(a,o)&&o!="constructor"&&s.push(o);return s}return IC=r,IC}var BC,Wk;function T_(){if(Wk)return BC;Wk=1;var n=rj(),e=Sve(),t=b_();function i(r){return t(r)?n(r):e(r)}return BC=i,BC}var zC,Yk;function sj(){if(Yk)return zC;Yk=1;var n=nj(),e=nU(),t=T_();function i(r){return n(r,t,e)}return zC=i,zC}var kC,$k;function xve(){if($k)return kC;$k=1;var n=sj(),e=1,t=Object.prototype,i=t.hasOwnProperty;function r(a,s,o,l,u,h){var p=o&e,g=n(a),y=g.length,_=n(s),S=_.length;if(y!=S&&!p)return!1;for(var x=y;x--;){var w=g[x];if(!(p?w in s:i.call(s,w)))return!1}var T=h.get(a),M=h.get(s);if(T&&M)return T==s&&M==a;var C=!0;h.set(a,s),h.set(s,a);for(var N=p;++x<y;){w=g[x];var D=a[w],P=s[w];if(l)var z=p?l(P,D,w,s,a,h):l(D,P,w,a,s,h);if(!(z===void 0?D===P||u(D,P,o,l,h):z)){C=!1;break}N||(N=w=="constructor")}if(C&&!N){var I=a.constructor,L=s.constructor;I!=L&&"constructor"in a&&"constructor"in s&&!(typeof I=="function"&&I instanceof I&&typeof L=="function"&&L instanceof L)&&(C=!1)}return h.delete(a),h.delete(s),C}return kC=r,kC}var FC,Xk;function Eve(){if(Xk)return FC;Xk=1;var n=Mp(),e=eu(),t=n(e,"DataView");return FC=t,FC}var HC,Kk;function wve(){if(Kk)return HC;Kk=1;var n=Mp(),e=eu(),t=n(e,"Promise");return HC=t,HC}var VC,Zk;function Tve(){if(Zk)return VC;Zk=1;var n=Mp(),e=eu(),t=n(e,"Set");return VC=t,VC}var GC,Qk;function Mve(){if(Qk)return GC;Qk=1;var n=Mp(),e=eu(),t=n(e,"WeakMap");return GC=t,GC}var jC,Jk;function iw(){if(Jk)return jC;Jk=1;var n=Eve(),e=Q3(),t=wve(),i=Tve(),r=Mve(),a=Zg(),s=J8(),o="[object Map]",l="[object Object]",u="[object Promise]",h="[object Set]",p="[object WeakMap]",g="[object DataView]",y=s(n),_=s(e),S=s(t),x=s(i),w=s(r),T=a;return(n&&T(new n(new ArrayBuffer(1)))!=g||e&&T(new e)!=o||t&&T(t.resolve())!=u||i&&T(new i)!=h||r&&T(new r)!=p)&&(T=function(M){var C=a(M),N=C==l?M.constructor:void 0,D=N?s(N):"";if(D)switch(D){case y:return g;case _:return o;case S:return u;case x:return h;case w:return p}return C}),jC=T,jC}var qC,e4;function Ave(){if(e4)return qC;e4=1;var n=eU(),e=ej(),t=pve(),i=xve(),r=iw(),a=jo(),s=tw(),o=aU(),l=1,u="[object Arguments]",h="[object Array]",p="[object Object]",g=Object.prototype,y=g.hasOwnProperty;function _(S,x,w,T,M,C){var N=a(S),D=a(x),P=N?h:r(S),z=D?h:r(x);P=P==u?p:P,z=z==u?p:z;var I=P==p,L=z==p,H=P==z;if(H&&s(S)){if(!s(x))return!1;N=!0,I=!1}if(H&&!I)return C||(C=new n),N||o(S)?e(S,x,w,T,M,C):t(S,x,P,w,T,M,C);if(!(w&l)){var j=I&&y.call(S,"__wrapped__"),G=L&&y.call(x,"__wrapped__");if(j||G){var K=j?S.value():S,ee=G?x.value():x;return C||(C=new n),M(K,ee,w,T,C)}}return H?(C||(C=new n),i(S,x,w,T,M,C)):!1}return qC=_,qC}var WC,t4;function oU(){if(t4)return WC;t4=1;var n=Ave(),e=Ah();function t(i,r,a,s,o){return i===r?!0:i==null||r==null||!e(i)&&!e(r)?i!==i&&r!==r:n(i,r,a,s,t,o)}return WC=t,WC}var YC,n4;function Cve(){if(n4)return YC;n4=1;var n=oU();function e(t,i){return n(t,i)}return YC=e,YC}var Rve=Cve();const Ove=kr(Rve);function $C(n,e){var t=F3(n);return t?t.innerHeight:Qd(n).height}function oj(n,e,t){n.closest&&!t&&n.closest(e);var i=n;do{if(rme(i,e))return i;i=i.parentElement}while(i&&i!==t&&i.nodeType===document.ELEMENT_NODE);return null}var XC,i4;function Dve(){if(i4)return XC;i4=1;function n(e,t,i,r){for(var a=e.length,s=i+(r?1:-1);r?s--:++s<a;)if(t(e[s],s,e))return s;return-1}return XC=n,XC}var KC,r4;function Uve(){if(r4)return KC;r4=1;var n=eU(),e=oU(),t=1,i=2;function r(a,s,o,l){var u=o.length,h=u,p=!l;if(a==null)return!h;for(a=Object(a);u--;){var g=o[u];if(p&&g[2]?g[1]!==a[g[0]]:!(g[0]in a))return!1}for(;++u<h;){g=o[u];var y=g[0],_=a[y],S=g[1];if(p&&g[2]){if(_===void 0&&!(y in a))return!1}else{var x=new n;if(l)var w=l(_,S,y,a,s,x);if(!(w===void 0?e(S,_,t|i,l,x):w))return!1}}return!0}return KC=r,KC}var ZC,a4;function lj(){if(a4)return ZC;a4=1;var n=hf();function e(t){return t===t&&!n(t)}return ZC=e,ZC}var QC,s4;function Nve(){if(s4)return QC;s4=1;var n=lj(),e=T_();function t(i){for(var r=e(i),a=r.length;a--;){var s=r[a],o=i[s];r[a]=[s,o,n(o)]}return r}return QC=t,QC}var JC,o4;function cj(){if(o4)return JC;o4=1;function n(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==void 0||e in Object(i))}}return JC=n,JC}var e2,l4;function Pve(){if(l4)return e2;l4=1;var n=Uve(),e=Nve(),t=cj();function i(r){var a=e(r);return a.length==1&&a[0][2]?t(a[0][0],a[0][1]):function(s){return s===r||n(s,r,a)}}return e2=i,e2}var t2,c4;function lU(){if(c4)return t2;c4=1;var n=jo(),e=S_(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(a,s){if(n(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||e(a)?!0:i.test(a)||!t.test(a)||s!=null&&a in Object(s)}return t2=r,t2}var n2,u4;function Lve(){if(u4)return n2;u4=1;var n=J3(),e="Expected a function";function t(i,r){if(typeof i!="function"||r!=null&&typeof r!="function")throw new TypeError(e);var a=function(){var s=arguments,o=r?r.apply(this,s):s[0],l=a.cache;if(l.has(o))return l.get(o);var u=i.apply(this,s);return a.cache=l.set(o,u)||l,u};return a.cache=new(t.Cache||n),a}return t.Cache=n,n2=t,n2}var i2,f4;function Ive(){if(f4)return i2;f4=1;var n=Lve(),e=500;function t(i){var r=n(i,function(s){return a.size===e&&a.clear(),s}),a=r.cache;return r}return i2=t,i2}var r2,h4;function Bve(){if(h4)return r2;h4=1;var n=Ive(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,i=n(function(r){var a=[];return r.charCodeAt(0)===46&&a.push(""),r.replace(e,function(s,o,l,u){a.push(l?u.replace(t,"$1"):o||s)}),a});return r2=i,r2}var a2,d4;function cU(){if(d4)return a2;d4=1;function n(e,t){for(var i=-1,r=e==null?0:e.length,a=Array(r);++i<r;)a[i]=t(e[i],i,e);return a}return a2=n,a2}var s2,p4;function zve(){if(p4)return s2;p4=1;var n=Kg(),e=cU(),t=jo(),i=S_(),r=n?n.prototype:void 0,a=r?r.toString:void 0;function s(o){if(typeof o=="string")return o;if(t(o))return e(o,s)+"";if(i(o))return a?a.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return s2=s,s2}var o2,m4;function kve(){if(m4)return o2;m4=1;var n=zve();function e(t){return t==null?"":n(t)}return o2=e,o2}var l2,g4;function rw(){if(g4)return l2;g4=1;var n=jo(),e=lU(),t=Bve(),i=kve();function r(a,s){return n(a)?a:e(a,s)?[a]:t(i(a))}return l2=r,l2}var c2,v4;function M_(){if(v4)return c2;v4=1;var n=S_();function e(t){if(typeof t=="string"||n(t))return t;var i=t+"";return i=="0"&&1/t==-1/0?"-0":i}return c2=e,c2}var u2,y4;function aw(){if(y4)return u2;y4=1;var n=rw(),e=M_();function t(i,r){r=n(r,i);for(var a=0,s=r.length;i!=null&&a<s;)i=i[e(r[a++])];return a&&a==s?i:void 0}return u2=t,u2}var f2,_4;function Fve(){if(_4)return f2;_4=1;var n=aw();function e(t,i,r){var a=t==null?void 0:n(t,i);return a===void 0?r:a}return f2=e,f2}var h2,b4;function Hve(){if(b4)return h2;b4=1;function n(e,t){return e!=null&&t in Object(e)}return h2=n,h2}var d2,S4;function Vve(){if(S4)return d2;S4=1;var n=rw(),e=iU(),t=jo(),i=k3(),r=z3(),a=M_();function s(o,l,u){l=n(l,o);for(var h=-1,p=l.length,g=!1;++h<p;){var y=a(l[h]);if(!(g=o!=null&&u(o,y)))break;o=o[y]}return g||++h!=p?g:(p=o==null?0:o.length,!!p&&r(p)&&i(y,p)&&(t(o)||e(o)))}return d2=s,d2}var p2,x4;function Gve(){if(x4)return p2;x4=1;var n=Hve(),e=Vve();function t(i,r){return i!=null&&e(i,r,n)}return p2=t,p2}var m2,E4;function jve(){if(E4)return m2;E4=1;var n=oU(),e=Fve(),t=Gve(),i=lU(),r=lj(),a=cj(),s=M_(),o=1,l=2;function u(h,p){return i(h)&&r(p)?a(s(h),p):function(g){var y=e(g,h);return y===void 0&&y===p?t(g,h):n(p,y,o|l)}}return m2=u,m2}var g2,w4;function sw(){if(w4)return g2;w4=1;function n(e){return e}return g2=n,g2}var v2,T4;function qve(){if(T4)return v2;T4=1;function n(e){return function(t){return t==null?void 0:t[e]}}return v2=n,v2}var y2,M4;function Wve(){if(M4)return y2;M4=1;var n=aw();function e(t){return function(i){return n(i,t)}}return y2=e,y2}var _2,A4;function Yve(){if(A4)return _2;A4=1;var n=qve(),e=Wve(),t=lU(),i=M_();function r(a){return t(a)?n(i(a)):e(a)}return _2=r,_2}var b2,C4;function ow(){if(C4)return b2;C4=1;var n=Pve(),e=jve(),t=sw(),i=jo(),r=Yve();function a(s){return typeof s=="function"?s:s==null?t:typeof s=="object"?i(s)?e(s[0],s[1]):n(s):r(s)}return b2=a,b2}var S2,R4;function $ve(){if(R4)return S2;R4=1;var n=Dve(),e=ow(),t=k8(),i=Math.max;function r(a,s,o){var l=a==null?0:a.length;if(!l)return-1;var u=o==null?0:t(o);return u<0&&(u=i(l+u,0)),n(a,e(s,3),u)}return S2=r,S2}var Xve=$ve();const Kve=kr(Xve);var x2,O4;function Zve(){if(O4)return x2;O4=1;var n=Math.ceil,e=Math.max;function t(i,r,a,s){for(var o=-1,l=e(n((r-i)/(a||1)),0),u=Array(l);l--;)u[s?l:++o]=i,i+=a;return u}return x2=t,x2}var E2,D4;function Qve(){if(D4)return E2;D4=1;var n=Zve(),e=XE(),t=z8();function i(r){return function(a,s,o){return o&&typeof o!="number"&&e(a,s,o)&&(s=o=void 0),a=t(a),s===void 0?(s=a,a=0):s=t(s),o=o===void 0?a<s?1:-1:t(o),n(a,s,o,r)}}return E2=i,E2}var w2,U4;function Jve(){if(U4)return w2;U4=1;var n=Qve(),e=n();return w2=e,w2}var eye=Jve();const tye=kr(eye);var N4=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function nye(n,e){return!!(n===e||N4(n)&&N4(e))}function iye(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!nye(n[t],e[t]))return!1;return!0}function uj(n,e){e===void 0&&(e=iye);var t=null;function i(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];if(t&&t.lastThis===this&&e(r,t.lastArgs))return t.lastResult;var s=n.apply(this,r);return t={lastResult:s,lastArgs:r,lastThis:this},s}return i.clear=function(){t=null},i}function XO(n,e){var t=F3(n);return t?t.innerWidth:Qd(n).width}var T2,P4;function rye(){if(P4)return T2;P4=1;var n=Kg(),e=iU(),t=jo(),i=n?n.isConcatSpreadable:void 0;function r(a){return t(a)||e(a)||!!(i&&a&&a[i])}return T2=r,T2}var M2,L4;function fj(){if(L4)return M2;L4=1;var n=tU(),e=rye();function t(i,r,a,s,o){var l=-1,u=i.length;for(a||(a=e),o||(o=[]);++l<u;){var h=i[l];r>0&&a(h)?r>1?t(h,r-1,a,s,o):n(o,h):s||(o[o.length]=h)}return o}return M2=t,M2}var A2,I4;function aye(){if(I4)return A2;I4=1;function n(e){return function(t,i,r){for(var a=-1,s=Object(t),o=r(t),l=o.length;l--;){var u=o[e?l:++a];if(i(s[u],u,s)===!1)break}return t}}return A2=n,A2}var C2,B4;function sye(){if(B4)return C2;B4=1;var n=aye(),e=n();return C2=e,C2}var R2,z4;function uU(){if(z4)return R2;z4=1;var n=sye(),e=T_();function t(i,r){return i&&n(i,r,e)}return R2=t,R2}var O2,k4;function oye(){if(k4)return O2;k4=1;var n=b_();function e(t,i){return function(r,a){if(r==null)return r;if(!n(r))return t(r,a);for(var s=r.length,o=i?s:-1,l=Object(r);(i?o--:++o<s)&&a(l[o],o,l)!==!1;);return r}}return O2=e,O2}var D2,F4;function lye(){if(F4)return D2;F4=1;var n=uU(),e=oye(),t=e(n);return D2=t,D2}var U2,H4;function cye(){if(H4)return U2;H4=1;var n=lye(),e=b_();function t(i,r){var a=-1,s=e(i)?Array(i.length):[];return n(i,function(o,l,u){s[++a]=r(o,l,u)}),s}return U2=t,U2}var N2,V4;function uye(){if(V4)return N2;V4=1;function n(e,t){var i=e.length;for(e.sort(t);i--;)e[i]=e[i].value;return e}return N2=n,N2}var P2,G4;function fye(){if(G4)return P2;G4=1;var n=S_();function e(t,i){if(t!==i){var r=t!==void 0,a=t===null,s=t===t,o=n(t),l=i!==void 0,u=i===null,h=i===i,p=n(i);if(!u&&!p&&!o&&t>i||o&&l&&h&&!u&&!p||a&&l&&h||!r&&h||!s)return 1;if(!a&&!o&&!p&&t<i||p&&r&&s&&!a&&!o||u&&r&&s||!l&&s||!h)return-1}return 0}return P2=e,P2}var L2,j4;function hye(){if(j4)return L2;j4=1;var n=fye();function e(t,i,r){for(var a=-1,s=t.criteria,o=i.criteria,l=s.length,u=r.length;++a<l;){var h=n(s[a],o[a]);if(h){if(a>=u)return h;var p=r[a];return h*(p=="desc"?-1:1)}}return t.index-i.index}return L2=e,L2}var I2,q4;function dye(){if(q4)return I2;q4=1;var n=cU(),e=aw(),t=ow(),i=cye(),r=uye(),a=nw(),s=hye(),o=sw(),l=jo();function u(h,p,g){p.length?p=n(p,function(S){return l(S)?function(x){return e(x,S.length===1?S[0]:S)}:S}):p=[o];var y=-1;p=n(p,a(t));var _=i(h,function(S,x,w){var T=n(p,function(M){return M(S)});return{criteria:T,index:++y,value:S}});return r(_,function(S,x){return s(S,x,g)})}return I2=u,I2}var B2,W4;function pye(){if(W4)return B2;W4=1;function n(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}return B2=n,B2}var z2,Y4;function hj(){if(Y4)return z2;Y4=1;var n=pye(),e=Math.max;function t(i,r,a){return r=e(r===void 0?i.length-1:r,0),function(){for(var s=arguments,o=-1,l=e(s.length-r,0),u=Array(l);++o<l;)u[o]=s[r+o];o=-1;for(var h=Array(r+1);++o<r;)h[o]=s[o];return h[r]=a(u),n(i,this,h)}}return z2=t,z2}var k2,$4;function mye(){if($4)return k2;$4=1;function n(e){return function(){return e}}return k2=n,k2}var F2,X4;function dj(){if(X4)return F2;X4=1;var n=Mp(),e=(function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch{}})();return F2=e,F2}var H2,K4;function gye(){if(K4)return H2;K4=1;var n=mye(),e=dj(),t=sw(),i=e?function(r,a){return e(r,"toString",{configurable:!0,enumerable:!1,value:n(a),writable:!0})}:t;return H2=i,H2}var V2,Z4;function vye(){if(Z4)return V2;Z4=1;var n=800,e=16,t=Date.now;function i(r){var a=0,s=0;return function(){var o=t(),l=e-(o-s);if(s=o,l>0){if(++a>=n)return arguments[0]}else a=0;return r.apply(void 0,arguments)}}return V2=i,V2}var G2,Q4;function pj(){if(Q4)return G2;Q4=1;var n=gye(),e=vye(),t=e(n);return G2=t,G2}var j2,J4;function mj(){if(J4)return j2;J4=1;var n=sw(),e=hj(),t=pj();function i(r,a){return t(e(r,a,n),r+"")}return j2=i,j2}var q2,eF;function yye(){if(eF)return q2;eF=1;var n=fj(),e=dye(),t=mj(),i=XE(),r=t(function(a,s){if(a==null)return[];var o=s.length;return o>1&&i(a,s[0],s[1])?s=[]:o>2&&i(s[0],s[1],s[2])&&(s=[s[0]]),e(a,n(s,1),[])});return q2=r,q2}var _ye=yye();const bye=kr(_ye);function gj(n){return S8(n)||L8(n)||P3(n)||x8()}var W2,tF;function Sye(){if(tF)return W2;tF=1;function n(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}return W2=n,W2}var Y2,nF;function xye(){if(nF)return Y2;nF=1;var n=hf(),e=sU(),t=Sye(),i=Object.prototype,r=i.hasOwnProperty;function a(s){if(!n(s))return t(s);var o=e(s),l=[];for(var u in s)u=="constructor"&&(o||!r.call(s,u))||l.push(u);return l}return Y2=a,Y2}var $2,iF;function lw(){if(iF)return $2;iF=1;var n=rj(),e=xye(),t=b_();function i(r){return t(r)?n(r,!0):e(r)}return $2=i,$2}var X2,rF;function Eye(){if(rF)return X2;rF=1;var n=mj(),e=__(),t=XE(),i=lw(),r=Object.prototype,a=r.hasOwnProperty,s=n(function(o,l){o=Object(o);var u=-1,h=l.length,p=h>2?l[2]:void 0;for(p&&t(l[0],l[1],p)&&(h=1);++u<h;)for(var g=l[u],y=i(g),_=-1,S=y.length;++_<S;){var x=y[_],w=o[x];(w===void 0||e(w,r[x])&&!a.call(o,x))&&(o[x]=g[x])}return o});return X2=s,X2}var wye=Eye();const Tye=kr(wye);var K2,aF;function fU(){if(aF)return K2;aF=1;var n=dj();function e(t,i,r){i=="__proto__"&&n?n(t,i,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[i]=r}return K2=e,K2}var Z2,sF;function Mye(){if(sF)return Z2;sF=1;var n=fU(),e=uU(),t=ow();function i(r,a){var s={};return a=t(a,3),e(r,function(o,l,u){n(s,l,a(o,l,u))}),s}return Z2=i,Z2}var Aye=Mye();const Cye=kr(Aye);var Q2,oF;function vj(){if(oF)return Q2;oF=1;function n(e,t){for(var i=-1,r=e==null?0:e.length;++i<r&&t(e[i],i,e)!==!1;);return e}return Q2=n,Q2}var J2,lF;function yj(){if(lF)return J2;lF=1;var n=fU(),e=__(),t=Object.prototype,i=t.hasOwnProperty;function r(a,s,o){var l=a[s];(!(i.call(a,s)&&e(l,o))||o===void 0&&!(s in a))&&n(a,s,o)}return J2=r,J2}var eR,cF;function A_(){if(cF)return eR;cF=1;var n=yj(),e=fU();function t(i,r,a,s){var o=!a;a||(a={});for(var l=-1,u=r.length;++l<u;){var h=r[l],p=s?s(a[h],i[h],h,a,i):void 0;p===void 0&&(p=i[h]),o?e(a,h,p):n(a,h,p)}return a}return eR=t,eR}var tR,uF;function Rye(){if(uF)return tR;uF=1;var n=A_(),e=T_();function t(i,r){return i&&n(r,e(r),i)}return tR=t,tR}var nR,fF;function Oye(){if(fF)return nR;fF=1;var n=A_(),e=lw();function t(i,r){return i&&n(r,e(r),i)}return nR=t,nR}var Fy={exports:{}};Fy.exports;var hF;function Dye(){return hF||(hF=1,(function(n,e){var t=eu(),i=e&&!e.nodeType&&e,r=i&&!0&&n&&!n.nodeType&&n,a=r&&r.exports===i,s=a?t.Buffer:void 0,o=s?s.allocUnsafe:void 0;function l(u,h){if(h)return u.slice();var p=u.length,g=o?o(p):new u.constructor(p);return u.copy(g),g}n.exports=l})(Fy,Fy.exports)),Fy.exports}var iR,dF;function Uye(){if(dF)return iR;dF=1;function n(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}return iR=n,iR}var rR,pF;function Nye(){if(pF)return rR;pF=1;var n=A_(),e=nU();function t(i,r){return n(i,e(i),r)}return rR=t,rR}var aR,mF;function cw(){if(mF)return aR;mF=1;var n=aj(),e=n(Object.getPrototypeOf,Object);return aR=e,aR}var sR,gF;function _j(){if(gF)return sR;gF=1;var n=tU(),e=cw(),t=nU(),i=ij(),r=Object.getOwnPropertySymbols,a=r?function(s){for(var o=[];s;)n(o,t(s)),s=e(s);return o}:i;return sR=a,sR}var oR,vF;function Pye(){if(vF)return oR;vF=1;var n=A_(),e=_j();function t(i,r){return n(i,e(i),r)}return oR=t,oR}var lR,yF;function bj(){if(yF)return lR;yF=1;var n=nj(),e=_j(),t=lw();function i(r){return n(r,t,e)}return lR=i,lR}var cR,_F;function Lye(){if(_F)return cR;_F=1;var n=Object.prototype,e=n.hasOwnProperty;function t(i){var r=i.length,a=new i.constructor(r);return r&&typeof i[0]=="string"&&e.call(i,"index")&&(a.index=i.index,a.input=i.input),a}return cR=t,cR}var uR,bF;function hU(){if(bF)return uR;bF=1;var n=tj();function e(t){var i=new t.constructor(t.byteLength);return new n(i).set(new n(t)),i}return uR=e,uR}var fR,SF;function Iye(){if(SF)return fR;SF=1;var n=hU();function e(t,i){var r=i?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}return fR=e,fR}var hR,xF;function Bye(){if(xF)return hR;xF=1;var n=/\w*$/;function e(t){var i=new t.constructor(t.source,n.exec(t));return i.lastIndex=t.lastIndex,i}return hR=e,hR}var dR,EF;function zye(){if(EF)return dR;EF=1;var n=Kg(),e=n?n.prototype:void 0,t=e?e.valueOf:void 0;function i(r){return t?Object(t.call(r)):{}}return dR=i,dR}var pR,wF;function kye(){if(wF)return pR;wF=1;var n=hU();function e(t,i){var r=i?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}return pR=e,pR}var mR,TF;function Fye(){if(TF)return mR;TF=1;var n=hU(),e=Iye(),t=Bye(),i=zye(),r=kye(),a="[object Boolean]",s="[object Date]",o="[object Map]",l="[object Number]",u="[object RegExp]",h="[object Set]",p="[object String]",g="[object Symbol]",y="[object ArrayBuffer]",_="[object DataView]",S="[object Float32Array]",x="[object Float64Array]",w="[object Int8Array]",T="[object Int16Array]",M="[object Int32Array]",C="[object Uint8Array]",N="[object Uint8ClampedArray]",D="[object Uint16Array]",P="[object Uint32Array]";function z(I,L,H){var j=I.constructor;switch(L){case y:return n(I);case a:case s:return new j(+I);case _:return e(I,H);case S:case x:case w:case T:case M:case C:case N:case D:case P:return r(I,H);case o:return new j;case l:case p:return new j(I);case u:return t(I);case h:return new j;case g:return i(I)}}return mR=z,mR}var gR,MF;function Sj(){if(MF)return gR;MF=1;var n=hf(),e=Object.create,t=(function(){function i(){}return function(r){if(!n(r))return{};if(e)return e(r);i.prototype=r;var a=new i;return i.prototype=void 0,a}})();return gR=t,gR}var vR,AF;function Hye(){if(AF)return vR;AF=1;var n=Sj(),e=cw(),t=sU();function i(r){return typeof r.constructor=="function"&&!t(r)?n(e(r)):{}}return vR=i,vR}var yR,CF;function Vye(){if(CF)return yR;CF=1;var n=iw(),e=Ah(),t="[object Map]";function i(r){return e(r)&&n(r)==t}return yR=i,yR}var _R,RF;function Gye(){if(RF)return _R;RF=1;var n=Vye(),e=nw(),t=rU(),i=t&&t.isMap,r=i?e(i):n;return _R=r,_R}var bR,OF;function jye(){if(OF)return bR;OF=1;var n=iw(),e=Ah(),t="[object Set]";function i(r){return e(r)&&n(r)==t}return bR=i,bR}var SR,DF;function qye(){if(DF)return SR;DF=1;var n=jye(),e=nw(),t=rU(),i=t&&t.isSet,r=i?e(i):n;return SR=r,SR}var xR,UF;function Wye(){if(UF)return xR;UF=1;var n=eU(),e=vj(),t=yj(),i=Rye(),r=Oye(),a=Dye(),s=Uye(),o=Nye(),l=Pye(),u=sj(),h=bj(),p=iw(),g=Lye(),y=Fye(),_=Hye(),S=jo(),x=tw(),w=Gye(),T=hf(),M=qye(),C=T_(),N=lw(),D=1,P=2,z=4,I="[object Arguments]",L="[object Array]",H="[object Boolean]",j="[object Date]",G="[object Error]",K="[object Function]",ee="[object GeneratorFunction]",Y="[object Map]",re="[object Number]",J="[object Object]",se="[object RegExp]",q="[object Set]",X="[object String]",oe="[object Symbol]",ue="[object WeakMap]",Z="[object ArrayBuffer]",ce="[object DataView]",me="[object Float32Array]",de="[object Float64Array]",ve="[object Int8Array]",We="[object Int16Array]",ze="[object Int32Array]",qe="[object Uint8Array]",_e="[object Uint8ClampedArray]",Ae="[object Uint16Array]",te="[object Uint32Array]",ke={};ke[I]=ke[L]=ke[Z]=ke[ce]=ke[H]=ke[j]=ke[me]=ke[de]=ke[ve]=ke[We]=ke[ze]=ke[Y]=ke[re]=ke[J]=ke[se]=ke[q]=ke[X]=ke[oe]=ke[qe]=ke[_e]=ke[Ae]=ke[te]=!0,ke[G]=ke[K]=ke[ue]=!1;function De(Ie,Te,Xe,Pe,$,W){var ae,he=Te&D,Se=Te&P,Oe=Te&z;if(Xe&&(ae=$?Xe(Ie,Pe,$,W):Xe(Ie)),ae!==void 0)return ae;if(!T(Ie))return Ie;var je=S(Ie);if(je){if(ae=g(Ie),!he)return s(Ie,ae)}else{var Ge=p(Ie),Ke=Ge==K||Ge==ee;if(x(Ie))return a(Ie,he);if(Ge==J||Ge==I||Ke&&!$){if(ae=Se||Ke?{}:_(Ie),!he)return Se?l(Ie,r(ae,Ie)):o(Ie,i(ae,Ie))}else{if(!ke[Ge])return $?Ie:{};ae=y(Ie,Ge,he)}}W||(W=new n);var _t=W.get(Ie);if(_t)return _t;W.set(Ie,ae),M(Ie)?Ie.forEach(function(it){ae.add(De(it,Te,Xe,it,Ie,W))}):w(Ie)&&Ie.forEach(function(it,Ze){ae.set(Ze,De(it,Te,Xe,Ze,Ie,W))});var Ye=Oe?Se?h:u:Se?N:C,ct=je?void 0:Ye(Ie);return e(ct||Ie,function(it,Ze){ct&&(Ze=it,it=Ie[Ze]),t(ae,Ze,De(it,Te,Xe,Ze,Ie,W))}),ae}return xR=De,xR}var ER,NF;function Yye(){if(NF)return ER;NF=1;function n(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}return ER=n,ER}var wR,PF;function $ye(){if(PF)return wR;PF=1;var n=aw(),e=I8();function t(i,r){return r.length<2?i:n(i,e(r,0,-1))}return wR=t,wR}var TR,LF;function Xye(){if(LF)return TR;LF=1;var n=rw(),e=Yye(),t=$ye(),i=M_();function r(a,s){return s=n(s,a),a=t(a,s),a==null||delete a[i(e(s))]}return TR=r,TR}var MR,IF;function Kye(){if(IF)return MR;IF=1;var n=Zg(),e=cw(),t=Ah(),i="[object Object]",r=Function.prototype,a=Object.prototype,s=r.toString,o=a.hasOwnProperty,l=s.call(Object);function u(h){if(!t(h)||n(h)!=i)return!1;var p=e(h);if(p===null)return!0;var g=o.call(p,"constructor")&&p.constructor;return typeof g=="function"&&g instanceof g&&s.call(g)==l}return MR=u,MR}var AR,BF;function Zye(){if(BF)return AR;BF=1;var n=Kye();function e(t){return n(t)?void 0:t}return AR=e,AR}var CR,zF;function Qye(){if(zF)return CR;zF=1;var n=fj();function e(t){var i=t==null?0:t.length;return i?n(t,1):[]}return CR=e,CR}var RR,kF;function Jye(){if(kF)return RR;kF=1;var n=Qye(),e=hj(),t=pj();function i(r){return t(e(r,void 0,n),r+"")}return RR=i,RR}var OR,FF;function e0e(){if(FF)return OR;FF=1;var n=cU(),e=Wye(),t=Xye(),i=rw(),r=A_(),a=Zye(),s=Jye(),o=bj(),l=1,u=2,h=4,p=s(function(g,y){var _={};if(g==null)return _;var S=!1;y=n(y,function(w){return w=i(w,g),S||(S=w.length>1),w}),r(g,o(g),_),S&&(_=e(_,l|u|h,a));for(var x=y.length;x--;)t(_,y[x]);return _});return OR=p,OR}var t0e=e0e();const n0e=kr(t0e);var DR,HF;function i0e(){if(HF)return DR;HF=1;var n=vj(),e=Sj(),t=uU(),i=ow(),r=cw(),a=jo(),s=tw(),o=B3(),l=hf(),u=aU();function h(p,g,y){var _=a(p),S=_||s(p)||u(p);if(g=i(g,4),y==null){var x=p&&p.constructor;S?y=_?new x:[]:l(p)?y=o(x)?e(r(p)):{}:y={}}return(S?n:t)(p,function(w,T,M){return g(y,w,T,M)}),y}return DR=h,DR}var r0e=i0e();const a0e=kr(r0e);var Ex={exports:{}},s0e=Ex.exports,VF;function o0e(){return VF||(VF=1,(function(n,e){(function(t,i){n.exports=i()})(s0e,(function(){return function(t,i,r){i.prototype.isBetween=function(a,s,o,l){var u=r(a),h=r(s),p=(l=l||"()")[0]==="(",g=l[1]===")";return(p?this.isAfter(u,o):!this.isBefore(u,o))&&(g?this.isBefore(h,o):!this.isAfter(h,o))||(p?this.isBefore(u,o):!this.isAfter(u,o))&&(g?this.isAfter(h,o):!this.isBefore(h,o))}}}))})(Ex)),Ex.exports}o0e();var wx={exports:{}},l0e=wx.exports,GF;function c0e(){return GF||(GF=1,(function(n,e){(function(t,i){n.exports=i()})(l0e,(function(){return function(t,i){i.prototype.isSameOrAfter=function(r,a){return this.isSame(r,a)||this.isAfter(r,a)}}}))})(wx)),wx.exports}c0e();var Tx={exports:{}},u0e=Tx.exports,jF;function f0e(){return jF||(jF=1,(function(n,e){(function(t,i){n.exports=i()})(u0e,(function(){return function(t,i){i.prototype.isSameOrBefore=function(r,a){return this.isSame(r,a)||this.isBefore(r,a)}}}))})(Tx)),Tx.exports}f0e();var Mx={exports:{}},h0e=Mx.exports,qF;function d0e(){return qF||(qF=1,(function(n,e){(function(t,i){n.exports=i()})(h0e,(function(){return function(t,i,r){var a=i.prototype,s=function(p){return p&&(p.indexOf?p:p.s)},o=function(p,g,y,_,S){var x=p.name?p:p.$locale(),w=s(x[g]),T=s(x[y]),M=w||T.map((function(N){return N.slice(0,_)}));if(!S)return M;var C=x.weekStart;return M.map((function(N,D){return M[(D+(C||0))%7]}))},l=function(){return r.Ls[r.locale()]},u=function(p,g){return p.formats[g]||(function(y){return y.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(_,S,x){return S||x.slice(1)}))})(p.formats[g.toUpperCase()])},h=function(){var p=this;return{months:function(g){return g?g.format("MMMM"):o(p,"months")},monthsShort:function(g){return g?g.format("MMM"):o(p,"monthsShort","months",3)},firstDayOfWeek:function(){return p.$locale().weekStart||0},weekdays:function(g){return g?g.format("dddd"):o(p,"weekdays")},weekdaysMin:function(g){return g?g.format("dd"):o(p,"weekdaysMin","weekdays",2)},weekdaysShort:function(g){return g?g.format("ddd"):o(p,"weekdaysShort","weekdays",3)},longDateFormat:function(g){return u(p.$locale(),g)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};a.localeData=function(){return h.bind(this)()},r.localeData=function(){var p=l();return{firstDayOfWeek:function(){return p.weekStart||0},weekdays:function(){return r.weekdays()},weekdaysShort:function(){return r.weekdaysShort()},weekdaysMin:function(){return r.weekdaysMin()},months:function(){return r.months()},monthsShort:function(){return r.monthsShort()},longDateFormat:function(g){return u(p,g)},meridiem:p.meridiem,ordinal:p.ordinal}},r.months=function(){return o(l(),"months")},r.monthsShort=function(){return o(l(),"monthsShort","months",3)},r.weekdays=function(p){return o(l(),"weekdays",null,null,p)},r.weekdaysShort=function(p){return o(l(),"weekdaysShort","weekdays",3,p)},r.weekdaysMin=function(p){return o(l(),"weekdaysMin","weekdays",2,p)}}}))})(Mx)),Mx.exports}d0e();var Ax={exports:{}},p0e=Ax.exports,WF;function m0e(){return WF||(WF=1,(function(n,e){(function(t,i){n.exports=i()})(p0e,(function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(i,r,a){var s=r.prototype,o=s.format;a.en.formats=t,s.format=function(l){l===void 0&&(l="YYYY-MM-DDTHH:mm:ssZ");var u=this.$locale().formats,h=(function(p,g){return p.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(y,_,S){var x=S&&S.toUpperCase();return _||g[S]||t[S]||g[x].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(w,T,M){return T||M.slice(1)}))}))})(l,u===void 0?{}:u);return o.call(this,h)}}}))})(Ax)),Ax.exports}m0e();var Cx={exports:{}},g0e=Cx.exports,YF;function v0e(){return YF||(YF=1,(function(n,e){(function(t,i){n.exports=i()})(g0e,(function(){return function(t,i,r){var a=function(s,o){if(!o||!o.length||o.length===1&&!o[0]||o.length===1&&Array.isArray(o[0])&&!o[0].length)return null;var l;o.length===1&&o[0].length>0&&(o=o[0]),l=(o=o.filter((function(h){return h})))[0];for(var u=1;u<o.length;u+=1)o[u].isValid()&&!o[u][s](l)||(l=o[u]);return l};r.max=function(){var s=[].slice.call(arguments,0);return a("isAfter",s)},r.min=function(){var s=[].slice.call(arguments,0);return a("isBefore",s)}}}))})(Cx)),Cx.exports}v0e();var Rx={exports:{}},y0e=Rx.exports,$F;function _0e(){return $F||($F=1,(function(n,e){(function(t,i){n.exports=i()})(y0e,(function(){var t="minute",i=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(a,s,o){var l=s.prototype;o.utc=function(S){var x={date:S,utc:!0,args:arguments};return new s(x)},l.utc=function(S){var x=o(this.toDate(),{locale:this.$L,utc:!0});return S?x.add(this.utcOffset(),t):x},l.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var u=l.parse;l.parse=function(S){S.utc&&(this.$u=!0),this.$utils().u(S.$offset)||(this.$offset=S.$offset),u.call(this,S)};var h=l.init;l.init=function(){if(this.$u){var S=this.$d;this.$y=S.getUTCFullYear(),this.$M=S.getUTCMonth(),this.$D=S.getUTCDate(),this.$W=S.getUTCDay(),this.$H=S.getUTCHours(),this.$m=S.getUTCMinutes(),this.$s=S.getUTCSeconds(),this.$ms=S.getUTCMilliseconds()}else h.call(this)};var p=l.utcOffset;l.utcOffset=function(S,x){var w=this.$utils().u;if(w(S))return this.$u?0:w(this.$offset)?p.call(this):this.$offset;if(typeof S=="string"&&(S=(function(N){N===void 0&&(N="");var D=N.match(i);if(!D)return null;var P=(""+D[0]).match(r)||["-",0,0],z=P[0],I=60*+P[1]+ +P[2];return I===0?0:z==="+"?I:-I})(S),S===null))return this;var T=Math.abs(S)<=16?60*S:S;if(T===0)return this.utc(x);var M=this.clone();if(x)return M.$offset=T,M.$u=!1,M;var C=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(M=this.local().add(T+C,t)).$offset=T,M.$x.$localOffset=C,M};var g=l.format;l.format=function(S){var x=S||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return g.call(this,x)},l.valueOf=function(){var S=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*S},l.isUTC=function(){return!!this.$u},l.toISOString=function(){return this.toDate().toISOString()},l.toString=function(){return this.toDate().toUTCString()};var y=l.toDate;l.toDate=function(S){return S==="s"&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():y.call(this)};var _=l.diff;l.diff=function(S,x,w){if(S&&this.$u===S.$u)return _.call(this,S,x,w);var T=this.local(),M=o(S).local();return _.call(T,M,x,w)}}}))})(Rx)),Rx.exports}_0e();var Ox={exports:{}},b0e=Ox.exports,XF;function S0e(){return XF||(XF=1,(function(n,e){(function(t,i){n.exports=i()})(b0e,(function(){return function(t,i){i.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}}))})(Ox)),Ox.exports}S0e();function kc(n){return n.children}var js={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"},us={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},KF=Object.keys(us).map(function(n){return us[n]});at.oneOfType([at.string,at.func]);at.any;at.func;at.oneOfType([at.arrayOf(at.oneOf(KF)),at.objectOf(function(n,e){var t=KF.indexOf(e)!==-1&&typeof n[e]=="boolean";if(t)return null;for(var i=arguments.length,r=new Array(i>2?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];return at.elementType.apply(at,[n,e].concat(r))})]);at.oneOfType([at.oneOf(["overlap","no-overlap"]),at.func]);var ZF={seconds:1e3,minutes:1e3*60,hours:1e3*60*60,day:1e3*60*60*24};function xj(n,e){var t=ya(n,"month");return ya(t,"week",e.startOfWeek())}function Ej(n,e){var t=q1(n,"month");return q1(t,"week",e.startOfWeek())}function x0e(n,e){for(var t=xj(n,e),i=Ej(n,e),r=[];$g(t,i,"day");)r.push(t),t=$l(t,1,"day");return r}function E0e(n,e){var t=ya(n,e);return Yg(t,n)?t:$l(t,1,e)}function w0e(n,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",i=n,r=[];$g(i,e,t);)r.push(i),i=$l(i,1,t);return r}function T0e(n,e){return e==null&&n==null?null:(e==null&&(e=new Date),n==null&&(n=new Date),n=ya(n,"day"),n=G0(n,G0(e)),n=Rg(n,Rg(e)),n=V0(n,V0(e)),H0(n,H0(e)))}function QF(n){return G0(n)===0&&Rg(n)===0&&V0(n)===0&&H0(n)===0}function M0e(n,e,t,i){return t==="day"&&(t="date"),Math.abs(qB[t](n,void 0,i)-qB[t](e,void 0,i))}function dU(n,e,t){return!t||t==="milliseconds"?Math.abs(+n-+e):Math.round(Math.abs(+ya(n,t)/ZF[t]-+ya(e,t)/ZF[t]))}var A0e=at.oneOfType([at.string,at.func]);function C0e(n,e,t,i,r){var a=typeof i=="function"?i(t,r,n):e.call(n,t,i,r);return L0(a==null||typeof a=="string","`localizer format(..)` must return a string, null, or undefined"),a}function R0e(n,e,t){return new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,e+t,0,0)}function pU(n,e){return n.getTimezoneOffset()-e.getTimezoneOffset()}function O0e(n,e){return dU(n,e,"minutes")+pU(n,e)}function D0e(n){var e=ya(n,"day");return dU(e,n,"minutes")+pU(e,n)}function U0e(n,e){return I3(n,e,"day")}function N0e(n,e,t){var i=Yg(n,e,"minutes");return i?y_(e,t,"minutes"):$E(e,t,"minutes")}function KO(n,e){return M0e(n,e,"day")}function P0e(n){var e=n.evtA,t=e.start,i=e.end,r=e.allDay,a=n.evtB,s=a.start,o=a.end,l=a.allDay,u=+ya(t,"day")-+ya(s,"day"),h=KO(t,i),p=KO(s,o);return u||p-h||!!l-!!r||+t-+s||+i-+o}function L0e(n){var e=n.event,t=e.start,i=e.end,r=n.range,a=r.start,s=r.end,o=ya(t,"day"),l=$g(o,s,"day"),u=L3(o,i,"minutes"),h=u?$E(i,a,"minutes"):y_(i,a,"minutes");return l&&h}function I0e(n,e){return Yg(n,e,"day")}function B0e(n,e){return QF(n)&&QF(e)}var z0e=Hr(function n(e){var t=this;Fr(this,n),L0(typeof e.format=="function","date localizer `format(..)` must be a function"),L0(typeof e.firstOfWeek=="function","date localizer `firstOfWeek(..)` must be a function"),this.propType=e.propType||A0e,this.formats=e.formats,this.format=function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return C0e.apply(void 0,[t,e.format].concat(r))},this.startOfWeek=e.firstOfWeek,this.merge=e.merge||T0e,this.inRange=e.inRange||D8,this.lt=e.lt||I3,this.lte=e.lte||$g,this.gt=e.gt||$E,this.gte=e.gte||y_,this.eq=e.eq||Yg,this.neq=e.neq||L3,this.startOf=e.startOf||ya,this.endOf=e.endOf||q1,this.add=e.add||$l,this.range=e.range||w0e,this.diff=e.diff||dU,this.ceil=e.ceil||E0e,this.min=e.min||R8,this.max=e.max||O8,this.minutes=e.minutes||Rg,this.daySpan=e.daySpan||KO,this.firstVisibleDay=e.firstVisibleDay||xj,this.lastVisibleDay=e.lastVisibleDay||Ej,this.visibleDays=e.visibleDays||x0e,this.getSlotDate=e.getSlotDate||R0e,this.getTimezoneOffset=e.getTimezoneOffset||function(i){return i.getTimezoneOffset()},this.getDstOffset=e.getDstOffset||pU,this.getTotalMin=e.getTotalMin||O0e,this.getMinutesFromMidnight=e.getMinutesFromMidnight||D0e,this.continuesPrior=e.continuesPrior||U0e,this.continuesAfter=e.continuesAfter||N0e,this.sortEvents=e.sortEvents||P0e,this.inEventRange=e.inEventRange||L0e,this.isSameDate=e.isSameDate||I0e,this.startAndEndAreDateOnly=e.startAndEndAreDateOnly||B0e,this.segmentOffset=e.browserTZOffset?e.browserTZOffset():0});function k0e(n,e,t,i){var r=pi(pi({},n.formats),t);return pi(pi({},n),{},{messages:i,startOfWeek:function(){return n.startOfWeek(e)},format:function(s,o){return n.format(s,r[o]||o,e)}})}var F0e=(function(n){function e(){var t;Fr(this,e);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=Ga(this,e,[].concat(r)),t.navigate=function(s){t.props.onNavigate(s)},t.view=function(s){t.props.onView(s)},t}return ja(e,n),Hr(e,[{key:"render",value:function(){var i=this.props,r=i.localizer.messages,a=i.label;return B.createElement("div",{className:"rbc-toolbar"},B.createElement("span",{className:"rbc-btn-group"},B.createElement("button",{type:"button",onClick:this.navigate.bind(null,js.TODAY)},r.today),B.createElement("button",{type:"button",onClick:this.navigate.bind(null,js.PREVIOUS)},r.previous),B.createElement("button",{type:"button",onClick:this.navigate.bind(null,js.NEXT)},r.next)),B.createElement("span",{className:"rbc-toolbar-label"},a),B.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(r)))}},{key:"viewNamesGroup",value:function(i){var r=this,a=this.props.views,s=this.props.view;if(a.length>1)return a.map(function(o){return B.createElement("button",{type:"button",key:o,className:fr({"rbc-active":s===o}),onClick:r.view.bind(null,o)},i[o])})}}])})(B.Component);function Mi(n,e){n&&n.apply(null,[].concat(e))}var H0e={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(e){return"+".concat(e," more")}};function V0e(n){return pi(pi({},H0e),n)}function G0e(n){var e=n.ref,t=n.callback;F.useEffect(function(){var i=function(a){e.current&&!e.current.contains(a.target)&&t()};return document.addEventListener("mousedown",i),function(){document.removeEventListener("mousedown",i)}},[e,t])}var j0e=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],wj=(function(n){function e(){return Fr(this,e),Ga(this,e,arguments)}return ja(e,n),Hr(e,[{key:"render",value:function(){var i=this.props,r=i.style,a=i.className,s=i.event,o=i.selected,l=i.isAllDay,u=i.onSelect,h=i.onDoubleClick,p=i.onKeyPress,g=i.localizer,y=i.continuesPrior,_=i.continuesAfter,S=i.accessors,x=i.getters,w=i.children,T=i.components,M=T.event,C=T.eventWrapper,N=i.slotStart,D=i.slotEnd,P=Kc(i,j0e);delete P.resizable;var z=S.title(s),I=S.tooltip(s),L=S.end(s),H=S.start(s),j=S.allDay(s),G=l||j||g.diff(H,g.ceil(L,"day"),"day")>1,K=x.eventProp(s,H,L,o),ee=B.createElement("div",{className:"rbc-event-content",title:I||void 0},M?B.createElement(M,{event:s,continuesPrior:y,continuesAfter:_,title:z,isAllDay:j,localizer:g,slotStart:N,slotEnd:D}):z);return B.createElement(C,Object.assign({},this.props,{type:"date"}),B.createElement("div",Object.assign({},P,{style:pi(pi({},K.style),r),className:fr("rbc-event",a,K.className,{"rbc-selected":o,"rbc-event-allday":G,"rbc-event-continues-prior":y,"rbc-event-continues-after":_}),onClick:function(re){return u&&u(s,re)},onDoubleClick:function(re){return h&&h(s,re)},onKeyDown:function(re){return p&&p(s,re)}}),typeof w=="function"?w(ee):ee))}}])})(B.Component);function uw(n,e){return!n||e==null?!1:Ove(n,e)}function Tj(n,e){var t=n.right-n.left,i=t/e;return i}function Mj(n,e,t,i){var r=Tj(n,i);return t?i-1-Math.floor((e-n.left)/r):Math.floor((e-n.left)/r)}function q0e(n,e){var t=e.x,i=e.y;return i>=n.top&&i<=n.bottom&&t>=n.left&&t<=n.right}function W0e(n,e,t,i,r){var a=-1,s=-1,o=i-1,l=Tj(e,i),u=Mj(e,t.x,r,i),h=e.top<t.y&&e.bottom>t.y,p=e.top<n.y&&e.bottom>n.y,g=n.y>e.bottom,y=e.top>n.y,_=t.top<e.top&&t.bottom>e.bottom;return _&&(a=0,s=o),h&&(y?(a=0,s=u):g&&(a=u,s=o)),p&&(a=s=r?o-Math.floor((n.x-e.left)/l):Math.floor((n.x-e.left)/l),h?u<a?a=u:s=u:n.y<t.y?s=o:a=0),{startIdx:a,endIdx:s}}function Y0e(n){var e=n.target,t=n.offset,i=n.container,r=n.box,a=Qd(e),s=a.top,o=a.left,l=a.width,u=a.height,h=Qd(i),p=h.top,g=h.left,y=h.width,_=h.height,S=Qd(r),x=S.width,w=S.height,T=p+_,M=g+y,C=s+w,N=o+x,D=t.x,P=t.y,z=C>T?s-w-P:s+P+u,I=N>M?o+D-x+l:o+D;return{topOffset:z,leftOffset:I}}function $0e(n){var e=n.containerRef,t=n.accessors,i=n.getters,r=n.selected,a=n.components,s=n.localizer,o=n.position,l=n.show,u=n.events,h=n.slotStart,p=n.slotEnd,g=n.onSelect,y=n.onDoubleClick,_=n.onKeyPress,S=n.handleDragStart,x=n.popperRef,w=n.target,T=n.offset;G0e({ref:x,callback:l}),F.useLayoutEffect(function(){var N=Y0e({target:w,offset:T,container:e.current,box:x.current}),D=N.topOffset,P=N.leftOffset;x.current.style.top="".concat(D,"px"),x.current.style.left="".concat(P,"px")},[T.x,T.y,w]);var M=o.width,C={minWidth:M+M/2};return B.createElement("div",{style:C,className:"rbc-overlay",ref:x},B.createElement("div",{className:"rbc-overlay-header"},s.format(h,"dayHeaderFormat")),u.map(function(N,D){return B.createElement(wj,{key:D,type:"popup",localizer:s,event:N,getters:i,onSelect:g,accessors:t,components:a,onDoubleClick:y,onKeyPress:_,continuesPrior:s.lt(t.end(N),h,"day"),continuesAfter:s.gte(t.start(N),p,"day"),slotStart:h,slotEnd:p,selected:uw(N,r),draggable:!0,onDragStart:function(){return S(N)},onDragEnd:function(){return l()}})}))}var Aj=B.forwardRef(function(n,e){return B.createElement($0e,Object.assign({},n,{popperRef:e}))});Aj.propTypes={accessors:at.object.isRequired,getters:at.object.isRequired,selected:at.object,components:at.object.isRequired,localizer:at.object.isRequired,position:at.object.isRequired,show:at.func.isRequired,events:at.array.isRequired,slotStart:at.instanceOf(Date).isRequired,slotEnd:at.instanceOf(Date),onSelect:at.func,onDoubleClick:at.func,onKeyPress:at.func,handleDragStart:at.func,style:at.object,offset:at.shape({x:at.number,y:at.number})};function X0e(n){var e=n.containerRef,t=n.popupOffset,i=t===void 0?5:t,r=n.overlay,a=n.accessors,s=n.localizer,o=n.components,l=n.getters,u=n.selected,h=n.handleSelectEvent,p=n.handleDoubleClickEvent,g=n.handleKeyPressEvent,y=n.handleDragStart,_=n.onHide,S=n.overlayDisplay,x=F.useRef(null);if(!r.position)return null;var w=i;isNaN(i)||(w={x:i,y:i});var T=r.position,M=r.events,C=r.date,N=r.end;return B.createElement(Z3,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:_,target:r.target},function(D){var P=D.props;return B.createElement(Aj,Object.assign({},P,{containerRef:e,ref:x,target:r.target,offset:w,accessors:a,getters:l,selected:u,components:o,localizer:s,position:T,show:S,events:M,slotStart:C,slotEnd:N,onSelect:h,onDoubleClick:p,onKeyPress:g,handleDragStart:y}))})}var mU=B.forwardRef(function(n,e){return B.createElement(X0e,Object.assign({},n,{containerRef:e}))});mU.propTypes={popupOffset:at.oneOfType([at.number,at.shape({x:at.number,y:at.number})]),overlay:at.shape({position:at.object,events:at.array,date:at.instanceOf(Date),end:at.instanceOf(Date)}),accessors:at.object.isRequired,localizer:at.object.isRequired,components:at.object.isRequired,getters:at.object.isRequired,selected:at.object,handleSelectEvent:at.func,handleDoubleClickEvent:at.func,handleKeyPressEvent:at.func,handleDragStart:at.func,onHide:at.func,overlayDisplay:at.func};function Ba(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return By(t,n,e,{passive:!1})}function K0e(n,e,t){return!n||j0(n,document.elementFromPoint(e,t))}function Z0e(n,e){var t=e.clientX,i=e.clientY,r=document.elementFromPoint(t,i);return oj(r,".rbc-event",n)}function Q0e(n,e){var t=e.clientX,i=e.clientY,r=document.elementFromPoint(t,i);return oj(r,".rbc-show-more",n)}function $1(n,e){return!!Z0e(n,e)}function J0e(n,e){return!!Q0e(n,e)}function Dy(n){var e=n;return n.touches&&n.touches.length&&(e=n.touches[0]),{clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY}}var JF=5,e_e=250,Cj=(function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.global,r=i===void 0?!1:i,a=t.longPressThreshold,s=a===void 0?250:a,o=t.validContainers,l=o===void 0?[]:o;Fr(this,n),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=e,this.globalMouse=!e||r,this.longPressThreshold=s,this.validContainers=l,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=Ba("touchmove",function(){},window),this._removeKeyDownListener=Ba("keydown",this._keyListener),this._removeKeyUpListener=Ba("keyup",this._keyListener),this._removeDropFromOutsideListener=Ba("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=Ba("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return Hr(n,[{key:"on",value:function(t,i){var r=this._listeners[t]||(this._listeners[t]=[]);return r.push(i),{remove:function(){var s=r.indexOf(i);s!==-1&&r.splice(s,1)}}}},{key:"emit",value:function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];var s,o=this._listeners[t]||[];return o.forEach(function(l){s===void 0&&(s=l.apply(void 0,r))}),s}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(t){var i=this._selectRect;return!i||!this.selecting?!1:e5(i,yp(t))}},{key:"filter",value:function(t){var i=this._selectRect;return!i||!this.selecting?[]:t.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(t,i){var r=this,a=null,s=null,o=null,l=function(g){a=setTimeout(function(){h(),t(g)},r.longPressThreshold),s=Ba("touchmove",function(){return h()}),o=Ba("touchend",function(){return h()})},u=Ba("touchstart",l),h=function(){a&&clearTimeout(a),s&&s(),o&&o(),a=null,s=null,o=null};return i&&l(i),function(){h(),u()}}},{key:"_addInitialEventListener",value:function(){var t=this,i=Ba("mousedown",function(a){t._removeInitialEventListener(),t._handleInitialEvent(a),t._removeInitialEventListener=Ba("mousedown",t._handleInitialEvent)}),r=Ba("touchstart",function(a){t._removeInitialEventListener(),t._removeInitialEventListener=t._addLongPressListener(t._handleInitialEvent,a)});this._removeInitialEventListener=function(){i(),r()}}},{key:"_dropFromOutsideListener",value:function(t){var i=Dy(t),r=i.pageX,a=i.pageY,s=i.clientX,o=i.clientY;this.emit("dropFromOutside",{x:r,y:a,clientX:s,clientY:o}),t.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(t){var i=Dy(t),r=i.pageX,a=i.pageY,s=i.clientX,o=i.clientY;this.emit("dragOverFromOutside",{x:r,y:a,clientX:s,clientY:o}),t.preventDefault()}},{key:"_handleInitialEvent",value:function(t){if(this._initialEvent=t,!this.isDetached){var i=Dy(t),r=i.clientX,a=i.clientY,s=i.pageX,o=i.pageY,l=this.container(),u,h;if(!(t.which===3||t.button===2||!K0e(l,r,a))){if(!this.globalMouse&&l&&!j0(l,t.target)){var p=t_e(0),g=p.top,y=p.left,_=p.bottom,S=p.right;if(h=yp(l),u=e5({top:h.top-g,left:h.left-y,bottom:h.bottom+_,right:h.right+S},{top:o,left:s}),!u)return}var x=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(t.type),x:s,y:o,clientX:r,clientY:a});if(x!==!1)switch(t.type){case"mousedown":this._removeEndListener=Ba("mouseup",this._handleTerminatingEvent),this._onEscListener=Ba("keydown",this._handleTerminatingEvent),this._removeMoveListener=Ba("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(t),this._removeEndListener=Ba("touchend",this._handleTerminatingEvent),this._removeMoveListener=Ba("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(t){var i=t.target,r=this.validContainers;return!r||!r.length||!i?!0:r.some(function(a){return!!i.closest(a)})}},{key:"_handleTerminatingEvent",value:function(t){var i=this.selecting,r=this._selectRect;if(!i&&t.type.includes("key")&&(t=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!t){var a=!this.container||j0(this.container(),t.target),s=this._isWithinValidContainer(t);return t.key==="Escape"||!s?this.emit("reset"):!i&&a?this._handleClickEvent(t):i?this.emit("select",r):this.emit("reset")}}},{key:"_handleClickEvent",value:function(t){var i=Dy(t),r=i.pageX,a=i.pageY,s=i.clientX,o=i.clientY,l=new Date().getTime();return this._lastClickData&&l-this._lastClickData.timestamp<e_e?(this._lastClickData=null,this.emit("doubleClick",{x:r,y:a,clientX:s,clientY:o})):(this._lastClickData={timestamp:l},this.emit("click",{x:r,y:a,clientX:s,clientY:o}))}},{key:"_handleMoveEvent",value:function(t){if(!(this._initialEventData===null||this.isDetached)){var i=this._initialEventData,r=i.x,a=i.y,s=Dy(t),o=s.pageX,l=s.pageY,u=Math.abs(r-o),h=Math.abs(a-l),p=Math.min(o,r),g=Math.min(l,a),y=this.selecting,_=this.isClick(o,l);_&&!y&&!(u||h)||(!y&&!_&&this.emit("selectStart",this._initialEventData),_||(this.selecting=!0,this._selectRect={top:g,left:p,x:o,y:l,right:p+u,bottom:g+h},this.emit("selecting",this._selectRect)),t.preventDefault())}}},{key:"_keyListener",value:function(t){this.ctrl=t.metaKey||t.ctrlKey}},{key:"isClick",value:function(t,i){var r=this._initialEventData,a=r.x,s=r.y,o=r.isTouch;return!o&&Math.abs(t-a)<=JF&&Math.abs(i-s)<=JF}}])})();function t_e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return af(n)!=="object"&&(n={top:n,left:n,right:n,bottom:n}),n}function e5(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=yp(n),r=i.top,a=i.left,s=i.right,o=s===void 0?a:s,l=i.bottom,u=l===void 0?r:l,h=yp(e),p=h.top,g=h.left,y=h.right,_=y===void 0?g:y,S=h.bottom,x=S===void 0?p:S;return!(u-t<p||r+t>x||o-t<g||a+t>_)}function yp(n){if(!n.getBoundingClientRect)return n;var e=n.getBoundingClientRect(),t=e.left+t5("left"),i=e.top+t5("top");return{top:i,left:t,right:(n.offsetWidth||0)+t,bottom:(n.offsetHeight||0)+i}}function t5(n){if(n==="left")return window.pageXOffset||document.body.scrollLeft||0;if(n==="top")return window.pageYOffset||document.body.scrollTop||0}var n_e=(function(n){function e(t,i){var r;return Fr(this,e),r=Ga(this,e,[t,i]),r.state={selecting:!1},r.containerRef=F.createRef(),r}return ja(e,n),Hr(e,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(i){!i.selectable&&this.props.selectable&&this._selectable(),i.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var i=this.props,r=i.range,a=i.getNow,s=i.getters,o=i.date,l=i.components.dateCellWrapper,u=i.localizer,h=this.state,p=h.selecting,g=h.startIdx,y=h.endIdx,_=a();return B.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},r.map(function(S,x){var w=p&&x>=g&&x<=y,T=s.dayProp(S),M=T.className,C=T.style;return B.createElement(l,{key:x,value:S,range:r},B.createElement("div",{style:C,className:fr("rbc-day-bg",M,w&&"rbc-selected-cell",u.isSameDate(S,_)&&"rbc-today",o&&u.neq(o,S,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var i=this,r=this.containerRef.current,a=this._selector=new Cj(this.props.container,{longPressThreshold:this.props.longPressThreshold}),s=function(l,u){if(!$1(r,l)&&!J0e(r,l)){var h=yp(r),p=i.props,g=p.range,y=p.rtl;if(q0e(h,l)){var _=Mj(h,l.x,y,g.length);i._selectSlot({startIdx:_,endIdx:_,action:u,box:l})}}i._initial={},i.setState({selecting:!1})};a.on("selecting",function(o){var l=i.props,u=l.range,h=l.rtl,p=-1,g=-1;if(i.state.selecting||(Mi(i.props.onSelectStart,[o]),i._initial={x:o.x,y:o.y}),a.isSelected(r)){var y=yp(r),_=W0e(i._initial,y,o,u.length,h);p=_.startIdx,g=_.endIdx}i.setState({selecting:!0,startIdx:p,endIdx:g})}),a.on("beforeSelect",function(o){if(i.props.selectable==="ignoreEvents")return!$1(i.containerRef.current,o)}),a.on("click",function(o){return s(o,"click")}),a.on("doubleClick",function(o){return s(o,"doubleClick")}),a.on("select",function(o){i._selectSlot(pi(pi({},i.state),{},{action:"select",bounds:o})),i._initial={},i.setState({selecting:!1}),Mi(i.props.onSelectEnd,[i.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(i){var r=i.endIdx,a=i.startIdx,s=i.action,o=i.bounds,l=i.box;r!==-1&&a!==-1&&this.props.onSelectSlot&&this.props.onSelectSlot({start:a,end:r,action:s,bounds:o,box:l,resourceId:this.props.resourceId})}}])})(B.Component),Lo={propTypes:{slotMetrics:at.object.isRequired,selected:at.object,isAllDay:at.bool,accessors:at.object.isRequired,localizer:at.object.isRequired,components:at.object.isRequired,getters:at.object.isRequired,onSelect:at.func,onDoubleClick:at.func,onKeyPress:at.func},defaultProps:{segments:[],selected:{}},renderEvent:function(e,t){var i=e.selected;e.isAllDay;var r=e.accessors,a=e.getters,s=e.onSelect,o=e.onDoubleClick,l=e.onKeyPress,u=e.localizer,h=e.slotMetrics,p=e.components,g=e.resizable,y=h.continuesPrior(t),_=h.continuesAfter(t);return B.createElement(wj,{event:t,getters:a,localizer:u,accessors:r,components:p,onSelect:s,onDoubleClick:o,onKeyPress:l,continuesPrior:y,continuesAfter:_,slotStart:h.first,slotEnd:h.last,selected:uw(t,i),resizable:g})},renderSpan:function(e,t,i){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",a=Math.abs(t)/e*100+"%";return B.createElement("div",{key:i,className:"rbc-row-segment",style:{WebkitFlexBasis:a,flexBasis:a,maxWidth:a}},r)}},Rj=(function(n){function e(){return Fr(this,e),Ga(this,e,arguments)}return ja(e,n),Hr(e,[{key:"render",value:function(){var i=this,r=this.props,a=r.segments,s=r.slotMetrics.slots,o=r.className,l=1;return B.createElement("div",{className:fr(o,"rbc-row")},a.reduce(function(u,h,p){var g=h.event,y=h.left,_=h.right,S=h.span,x="_lvl_"+p,w=y-l,T=Lo.renderEvent(i.props,g);return w&&u.push(Lo.renderSpan(s,w,"".concat(x,"_gap"))),u.push(Lo.renderSpan(s,S,x,T)),l=_+1,u},[]))}}])})(B.Component);Rj.defaultProps=pi({},Lo.defaultProps);function Oj(n){var e=n.dateRange,t=n.unit,i=t===void 0?"day":t,r=n.localizer;return{first:e[0],last:r.add(e[e.length-1],1,i)}}function i_e(n,e,t,i){var r=Oj({dateRange:e,localizer:i}),a=r.first,s=r.last,o=i.diff(a,s,"day"),l=i.max(i.startOf(t.start(n),"day"),a),u=i.min(i.ceil(t.end(n),"day"),s),h=Kve(e,function(g){return i.isSameDate(g,l)}),p=i.diff(l,u,"day");return p=Math.min(p,o),p=Math.max(p-i.segmentOffset,1),{event:n,span:p,left:h+1,right:Math.max(h+p,1)}}function ZO(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,t,i,r,a=[],s=[];for(t=0;t<n.length;t++){for(r=n[t],i=0;i<a.length&&r_e(r,a[i]);i++);i>=e?s.push(r):(a[i]||(a[i]=[])).push(r)}for(t=0;t<a.length;t++)a[t].sort(function(o,l){return o.left-l.left});return{levels:a,extra:s}}function Y0(n,e,t,i,r){var a={start:i.start(n),end:i.end(n)},s={start:e,end:t};return r.inEventRange({event:a,range:s})}function r_e(n,e){return e.some(function(t){return t.left<=n.right&&t.right>=n.left})}function a_e(n,e,t){var i=Sx(n),r=[],a=[];i.forEach(function(l){var u=e.start(l),h=e.end(l);t.daySpan(u,h)>1?r.push(l):a.push(l)});var s=r.sort(function(l,u){return QO(l,u,e,t)}),o=a.sort(function(l,u){return QO(l,u,e,t)});return[].concat(Sx(s),Sx(o))}function QO(n,e,t,i){var r={start:t.start(n),end:t.end(n),allDay:t.allDay(n)},a={start:t.start(e),end:t.end(e),allDay:t.allDay(e)};return i.sortEvents({evtA:r,evtB:a})}var JO=function(e,t){return e.left<=t&&e.right>=t},UR=function(e,t){return e.filter(function(i){return JO(i,t)}).map(function(i){return i.event})},Dj=(function(n){function e(){return Fr(this,e),Ga(this,e,arguments)}return ja(e,n),Hr(e,[{key:"render",value:function(){for(var i=this.props,r=i.segments,a=i.slotMetrics.slots,s=ZO(r).levels[0],o=1,l=1,u=[];o<=a;){var h="_lvl_"+o,p=s.filter(function(C){return JO(C,o)})[0]||{},g=p.event,y=p.left,_=p.right,S=p.span;if(!g){var x=this.getHiddenEventsForSlot(r,o);if(x.length>0){var w=o-l;w&&u.push(Lo.renderSpan(a,w,h+"_gap")),u.push(Lo.renderSpan(a,1,h,this.renderShowMore(r,o))),l=o=o+1;continue}o++;continue}var T=Math.max(0,y-l);if(this.canRenderSlotEvent(y,S)){var M=Lo.renderEvent(this.props,g);T&&u.push(Lo.renderSpan(a,T,h+"_gap")),u.push(Lo.renderSpan(a,S,h,M)),l=o=_+1}else T&&u.push(Lo.renderSpan(a,T,h+"_gap")),u.push(Lo.renderSpan(a,1,h,this.renderShowMore(r,o))),l=o=o+1}return B.createElement("div",{className:"rbc-row"},u)}},{key:"getHiddenEventsForSlot",value:function(i,r){var a=UR(i,r),s=ZO(i).levels[0],o=s.filter(function(l){return JO(l,r)}).map(function(l){return l.event});return a.filter(function(l){return!o.some(function(u){return u===l})})}},{key:"canRenderSlotEvent",value:function(i,r){var a=this.props.segments;return tye(i,i+r).every(function(s){var o=UR(a,s).length;return o===1})}},{key:"renderShowMore",value:function(i,r){var a=this,s=this.props,o=s.localizer,l=s.slotMetrics,u=s.components,h=l.getEventsForSlot(r),p=UR(i,r),g=p.length;if(u!=null&&u.showMore){var y=u.showMore,_=l.getDateForSlot(r-1);return g?B.createElement(y,{localizer:o,slotDate:_,slot:r,count:g,events:h,remainingEvents:p}):!1}return g?B.createElement("button",{type:"button",key:"sm_"+r,className:fr("rbc-button-link","rbc-show-more"),onClick:function(x){return a.showMore(r,x)}},o.messages.showMore(g,p,h)):!1}},{key:"showMore",value:function(i,r){r.preventDefault(),r.stopPropagation(),this.props.onShowMore(i,r.target)}}])})(B.Component);Dj.defaultProps=pi({},Lo.defaultProps);var s_e=function(e){var t=e.children;return B.createElement("div",{className:"rbc-row-content-scroll-container"},t)},o_e=function(e,t){return e.left<=t&&e.right>=t},l_e=function(e,t){return e[0].range===t[0].range&&e[0].events===t[0].events};function Uj(){return uj(function(n){for(var e=n.range,t=n.events,i=n.maxRows,r=n.minRows,a=n.accessors,s=n.localizer,o=Oj({dateRange:e,localizer:s}),l=o.first,u=o.last,h=t.map(function(S){return i_e(S,e,a,s)}),p=ZO(h,Math.max(i-1,1)),g=p.levels,y=p.extra,_=y.length>0?r-1:r;g.length<_;)g.push([]);return{first:l,last:u,levels:g,extra:y,range:e,slots:e.length,clone:function(x){var w=Uj();return w(pi(pi({},n),x))},getDateForSlot:function(x){return e[x]},getSlotForDate:function(x){return e.find(function(w){return s.isSameDate(w,x)})},getEventsForSlot:function(x){return h.filter(function(w){return o_e(w,x)}).map(function(w){return w.event})},continuesPrior:function(x){return s.continuesPrior(a.start(x),l)},continuesAfter:function(x){var w=a.start(x),T=a.end(x);return s.continuesAfter(w,T,u)}}},l_e)}var $0=(function(n){function e(){var t;Fr(this,e);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=Ga(this,e,[].concat(r)),t.handleSelectSlot=function(s){var o=t.props,l=o.range,u=o.onSelectSlot;u(l.slice(s.start,s.end+1),s)},t.handleShowMore=function(s,o){var l=t.props,u=l.range,h=l.onShowMore,p=t.slotMetrics(t.props),g=sme(t.containerRef.current,".rbc-row-bg")[0],y;g&&(y=g.children[s-1]);var _=p.getEventsForSlot(s);h(_,u[s-1],y,s,o)},t.getContainer=function(){var s=t.props.container;return s?s():t.containerRef.current},t.renderHeadingCell=function(s,o){var l=t.props,u=l.renderHeader,h=l.getNow,p=l.localizer;return u({date:s,key:"header_".concat(o),className:fr("rbc-date-cell",p.isSameDate(s,h())&&"rbc-now")})},t.renderDummy=function(){var s=t.props,o=s.className,l=s.range,u=s.renderHeader,h=s.showAllEvents;return B.createElement("div",{className:o,ref:t.containerRef},B.createElement("div",{className:fr("rbc-row-content",h&&"rbc-row-content-scrollable")},u&&B.createElement("div",{className:"rbc-row",ref:t.headingRowRef},l.map(t.renderHeadingCell)),B.createElement("div",{className:"rbc-row",ref:t.eventRowRef},B.createElement("div",{className:"rbc-row-segment"},B.createElement("div",{className:"rbc-event"},B.createElement("div",{className:"rbc-event-content"},""))))))},t.containerRef=F.createRef(),t.headingRowRef=F.createRef(),t.eventRowRef=F.createRef(),t.slotMetrics=Uj(),t}return ja(e,n),Hr(e,[{key:"getRowLimit",value:function(){var i,r=$C(this.eventRowRef.current),a=(i=this.headingRowRef)!==null&&i!==void 0&&i.current?$C(this.headingRowRef.current):0,s=$C(this.containerRef.current)-a;return Math.max(Math.floor(s/r),1)}},{key:"render",value:function(){var i=this.props,r=i.date,a=i.rtl,s=i.range,o=i.className,l=i.selected,u=i.selectable,h=i.renderForMeasure,p=i.accessors,g=i.getters,y=i.components,_=i.getNow,S=i.renderHeader,x=i.onSelect,w=i.localizer,T=i.onSelectStart,M=i.onSelectEnd,C=i.onDoubleClick,N=i.onKeyPress,D=i.resourceId,P=i.longPressThreshold,z=i.isAllDay,I=i.resizable,L=i.showAllEvents;if(h)return this.renderDummy();var H=this.slotMetrics(this.props),j=H.levels,G=H.extra,K=L?s_e:kc,ee=y.weekWrapper,Y={selected:l,accessors:p,getters:g,localizer:w,components:y,onSelect:x,onDoubleClick:C,onKeyPress:N,resourceId:D,slotMetrics:H,resizable:I};return B.createElement("div",{className:o,role:"rowgroup",ref:this.containerRef},B.createElement(n_e,{localizer:w,date:r,getNow:_,rtl:a,range:s,selectable:u,container:this.getContainer,getters:g,onSelectStart:T,onSelectEnd:M,onSelectSlot:this.handleSelectSlot,components:y,longPressThreshold:P,resourceId:D}),B.createElement("div",{className:fr("rbc-row-content",L&&"rbc-row-content-scrollable"),role:"row"},S&&B.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},s.map(this.renderHeadingCell)),B.createElement(K,null,B.createElement(ee,Object.assign({isAllDay:z},Y,{rtl:this.props.rtl}),j.map(function(re,J){return B.createElement(Rj,Object.assign({key:J,segments:re},Y))}),!!G.length&&B.createElement(Dj,Object.assign({segments:G,onShowMore:this.handleShowMore},Y))))))}}])})(B.Component);$0.defaultProps={minRows:0,maxRows:1/0};var gU=function(e){var t=e.label;return B.createElement("span",{role:"columnheader","aria-sort":"none"},t)},c_e=function(e){var t=e.label,i=e.drilldownView,r=e.onDrillDown;return i?B.createElement("button",{type:"button",className:"rbc-button-link",onClick:r},t):B.createElement("span",null,t)},u_e=["date","className"],f_e=function(e,t,i,r,a){return e.filter(function(s){return Y0(s,t,i,r,a)})},fw=(function(n){function e(){var t;Fr(this,e);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=Ga(this,e,[].concat(r)),t.getContainer=function(){return t.containerRef.current},t.renderWeek=function(s,o){var l=t.props,u=l.events,h=l.components,p=l.selectable,g=l.getNow,y=l.selected,_=l.date,S=l.localizer,x=l.longPressThreshold,w=l.accessors,T=l.getters,M=l.showAllEvents,C=t.state,N=C.needLimitMeasure,D=C.rowLimit,P=f_e(Sx(u),s[0],s[s.length-1],w,S),z=a_e(P,w,S);return B.createElement($0,{key:o,ref:o===0?t.slotRowRef:void 0,container:t.getContainer,className:"rbc-month-row",getNow:g,date:_,range:s,events:z,maxRows:M?1/0:D,selected:y,selectable:p,components:h,accessors:w,getters:T,localizer:S,renderHeader:t.readerDateHeading,renderForMeasure:N,onShowMore:t.handleShowMore,onSelect:t.handleSelectEvent,onDoubleClick:t.handleDoubleClickEvent,onKeyPress:t.handleKeyPressEvent,onSelectSlot:t.handleSelectSlot,longPressThreshold:x,rtl:t.props.rtl,resizable:t.props.resizable,showAllEvents:M})},t.readerDateHeading=function(s){var o=s.date,l=s.className,u=Kc(s,u_e),h=t.props,p=h.date,g=h.getDrilldownView,y=h.localizer,_=y.neq(p,o,"month"),S=y.isSameDate(o,p),x=g(o),w=y.format(o,"dateFormat"),T=t.props.components.dateHeader||c_e;return B.createElement("div",Object.assign({},u,{className:fr(l,_&&"rbc-off-range",S&&"rbc-current"),role:"cell"}),B.createElement(T,{label:w,date:o,drilldownView:x,isOffRange:_,onDrillDown:function(C){return t.handleHeadingClick(o,x,C)}}))},t.handleSelectSlot=function(s,o){t._pendingSelection=t._pendingSelection.concat(s),clearTimeout(t._selectTimer),t._selectTimer=setTimeout(function(){return t.selectDates(o)})},t.handleHeadingClick=function(s,o,l){l.preventDefault(),t.clearSelection(),Mi(t.props.onDrillDown,[s,o])},t.handleSelectEvent=function(){t.clearSelection();for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];Mi(t.props.onSelectEvent,o)},t.handleDoubleClickEvent=function(){t.clearSelection();for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];Mi(t.props.onDoubleClickEvent,o)},t.handleKeyPressEvent=function(){t.clearSelection();for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];Mi(t.props.onKeyPressEvent,o)},t.handleShowMore=function(s,o,l,u,h){var p=t.props,g=p.popup,y=p.onDrillDown,_=p.onShowMore,S=p.getDrilldownView,x=p.doShowMoreDrillDown;if(t.clearSelection(),g){var w=G8(l,t.containerRef.current);t.setState({overlay:{date:o,events:s,position:w,target:h}})}else x&&Mi(y,[o,S(o)||us.DAY]);Mi(_,[s,o,u])},t.overlayDisplay=function(){t.setState({overlay:null})},t.state={rowLimit:5,needLimitMeasure:!0,date:null},t.containerRef=F.createRef(),t.slotRowRef=F.createRef(),t._bgRows=[],t._pendingSelection=[],t}return ja(e,n),Hr(e,[{key:"componentDidMount",value:function(){var i=this,r;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){r||j8(function(){r=!1,i.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var i=this.props,r=i.date,a=i.localizer,s=i.className,o=a.visibleDays(r,a),l=jpe(o,7);return this._weekCount=l.length,B.createElement("div",{className:fr("rbc-month-view",s),role:"table","aria-label":"Month View",ref:this.containerRef},B.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(l[0])),l.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(i){var r=this.props,a=r.localizer,s=r.components,o=i[0],l=i[i.length-1],u=s.header||gU;return a.range(o,l,"day").map(function(h,p){return B.createElement("div",{key:"header_"+p,className:"rbc-header"},B.createElement(u,{date:h,localizer:a,label:a.format(h,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var i,r,a=this,s=(i=(r=this.state)===null||r===void 0?void 0:r.overlay)!==null&&i!==void 0?i:{},o=this.props,l=o.accessors,u=o.localizer,h=o.components,p=o.getters,g=o.selected,y=o.popupOffset,_=o.handleDragStart,S=function(){return a.setState({overlay:null})};return B.createElement(mU,{overlay:s,accessors:l,localizer:u,components:h,getters:p,selected:g,popupOffset:y,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:_,show:!!s.position,overlayDisplay:this.overlayDisplay,onHide:S})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(i){var r=this._pendingSelection.slice();this._pendingSelection=[],r.sort(function(o,l){return+o-+l});var a=new Date(r[0]),s=new Date(r[r.length-1]);s.setDate(r[r.length-1].getDate()+1),Mi(this.props.onSelectSlot,{slots:r,start:a,end:s,action:i.action,bounds:i.bounds,box:i.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(i,r){var a=i.date,s=i.localizer;return{date:a,needLimitMeasure:s.neq(a,r.date,"month")}}}])})(B.Component);fw.range=function(n,e){var t=e.localizer,i=t.firstVisibleDay(n,t),r=t.lastVisibleDay(n,t);return{start:i,end:r}};fw.navigate=function(n,e,t){var i=t.localizer;switch(e){case js.PREVIOUS:return i.add(n,-1,"month");case js.NEXT:return i.add(n,1,"month");default:return n}};fw.title=function(n,e){var t=e.localizer;return t.format(n,"monthHeaderFormat")};var n5=function(e){var t=e.min,i=e.max,r=e.step,a=e.slots,s=e.localizer;return"".concat(+s.startOf(t,"minutes"))+"".concat(+s.startOf(i,"minutes"))+"".concat(r,"-").concat(a)};function vU(n){for(var e=n.min,t=n.max,i=n.step,r=n.timeslots,a=n.localizer,s=n5({step:i,localizer:a}),o=1+a.getTotalMin(e,t),l=a.getMinutesFromMidnight(e),u=Math.ceil((o-1)/(i*r)),h=u*r,p=new Array(u),g=new Array(h),y=0;y<u;y++){p[y]=new Array(r);for(var _=0;_<r;_++){var S=y*r+_,x=S*i;g[S]=p[y][_]=a.getSlotDate(e,l,x)}}var w=g.length*i;g.push(a.getSlotDate(e,l,w));function T(M){var C=a.diff(e,M,"minutes")+a.getDstOffset(e,M);return Math.min(C,o)}return{groups:p,update:function(C){return n5(C)!==s?vU(C):this},dateIsInGroup:function(C,N){var D=p[N+1];return a.inRange(C,p[N][0],D?D[0]:t,"minutes")},nextSlot:function(C){var N=g[Math.min(g.findIndex(function(D){return D===C||a.eq(D,C)})+1,g.length-1)];return a.eq(N,C)&&(N=a.add(C,i,"minutes")),N},closestSlotToPosition:function(C){var N=Math.min(g.length-1,Math.max(0,Math.floor(C*h)));return g[N]},closestSlotFromPoint:function(C,N){var D=Math.abs(N.top-N.bottom);return this.closestSlotToPosition((C.y-N.top)/D)},closestSlotFromDate:function(C){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(a.lt(C,e,"minutes"))return g[0];if(a.gt(C,t,"minutes"))return g[g.length-1];var D=a.diff(e,C,"minutes");return g[(D-D%i)/i+N]},startsBeforeDay:function(C){return a.lt(C,e,"day")},startsAfterDay:function(C){return a.gt(C,t,"day")},startsBefore:function(C){return a.lt(a.merge(e,C),e,"minutes")},startsAfter:function(C){return a.gt(a.merge(t,C),t,"minutes")},getRange:function(C,N,D,P){D||(C=a.min(t,a.max(e,C))),P||(N=a.min(t,a.max(e,N)));var z=T(C),I=T(N),L=I>i*h&&!a.eq(t,N)?(z-i)/(i*h)*100:z/(i*h)*100;return{top:L,height:I/(i*h)*100-L,start:T(C),startDate:C,end:T(N),endDate:N}},getCurrentTimePosition:function(C){var N=T(C),D=N/(i*h)*100;return D}}}var h_e=(function(){function n(e,t){var i=t.accessors,r=t.slotMetrics;Fr(this,n);var a=r.getRange(i.start(e),i.end(e)),s=a.start,o=a.startDate,l=a.end,u=a.endDate,h=a.top,p=a.height;this.start=s,this.end=l,this.startMs=+o,this.endMs=+u,this.top=h,this.height=p,this.data=e}return Hr(n,[{key:"_width",get:function(){if(this.rows){var t=this.rows.reduce(function(r,a){return Math.max(r,a.leaves.length+1)},0)+1;return 100/t}if(this.leaves){var i=100-this.container._width;return i/(this.leaves.length+1)}return this.row._width}},{key:"width",get:function(){var t=this._width,i=Math.min(100,this._width*1.7);if(this.rows)return i;if(this.leaves)return this.leaves.length>0?i:t;var r=this.row.leaves,a=r.indexOf(this);return a===r.length-1?t:i}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var t=this.row,i=t.leaves,r=t.xOffset,a=t._width,s=i.indexOf(this)+1;return r+s*a}}])})();function d_e(n,e,t){return Math.abs(e.start-n.start)<t||e.start>n.start&&e.start<n.end}function p_e(n){for(var e=bye(n,["startMs",function(o){return-o.endMs}]),t=[];e.length>0;){var i=e.shift();t.push(i);for(var r=0;r<e.length;r++){var a=e[r];if(!(i.endMs>a.startMs)){if(r>0){var s=e.splice(r,1)[0];t.push(s)}break}}}return t}function Nj(n){for(var e=n.events,t=n.minimumStartDifference,i=n.slotMetrics,r=n.accessors,a=e.map(function(h){return new h_e(h,{slotMetrics:i,accessors:r})}),s=p_e(a),o=[],l=function(){var p=s[u],g=o.find(function(S){return S.end>p.start||Math.abs(p.start-S.start)<t});if(!g)return p.rows=[],o.push(p),1;p.container=g;for(var y=null,_=g.rows.length-1;!y&&_>=0;_--)d_e(g.rows[_],p,t)&&(y=g.rows[_]);y?(y.leaves.push(p),p.row=y):(p.leaves=[],g.rows.push(p))},u=0;u<s.length;u++)l();return s.map(function(h){return{event:h.data,style:{top:h.top,height:h.height,width:h.width,xOffset:Math.max(0,h.xOffset)}}})}function Pj(n,e,t){for(var i=0;i<n.friends.length;++i)if(!(t.indexOf(n.friends[i])>-1)){e=e>n.friends[i].idx?e:n.friends[i].idx,t.push(n.friends[i]);var r=Pj(n.friends[i],e,t);e=e>r?e:r}return e}function m_e(n){var e=n.events,t=n.minimumStartDifference,i=n.slotMetrics,r=n.accessors,a=Nj({events:e,minimumStartDifference:t,slotMetrics:i,accessors:r});a.sort(function(ee,Y){return ee=ee.style,Y=Y.style,ee.top!==Y.top?ee.top>Y.top?1:-1:ee.height!==Y.height?ee.top+ee.height<Y.top+Y.height?1:-1:0});for(var s=0;s<a.length;++s)a[s].friends=[],delete a[s].style.left,delete a[s].style.left,delete a[s].idx,delete a[s].size;for(var o=0;o<a.length-1;++o)for(var l=a[o],u=l.style.top,h=l.style.top+l.style.height,p=o+1;p<a.length;++p){var g=a[p],y=g.style.top,_=g.style.top+g.style.height;(y>=u&&_<=h||_>u&&_<=h||y>=u&&y<h)&&(l.friends.push(g),g.friends.push(l))}for(var S=0;S<a.length;++S){for(var x=a[S],w=[],T=0;T<100;++T)w.push(1);for(var M=0;M<x.friends.length;++M)x.friends[M].idx!==void 0&&(w[x.friends[M].idx]=0);x.idx=w.indexOf(1)}for(var C=0;C<a.length;++C){var N=0;if(!a[C].size){var D=[],P=Pj(a[C],0,D);N=100/(P+1),a[C].size=N;for(var z=0;z<D.length;++z)D[z].size=N}}for(var I=0;I<a.length;++I){var L=a[I];L.style.left=L.idx*L.size;for(var H=0,j=0;j<L.friends.length;++j){var G=L.friends[j].idx;H=H>G?H:G}H<=L.idx&&(L.size=100-L.idx*L.size);var K=L.idx===0?0:3;L.style.width="calc(".concat(L.size,"% - ").concat(K,"px)"),L.style.height="calc(".concat(L.style.height,"% - 2px)"),L.style.xOffset="calc(".concat(L.style.left,"% + ").concat(K,"px)")}return a}var i5={overlap:Nj,"no-overlap":m_e};function g_e(n){return!!(n&&n.constructor&&n.call&&n.apply)}function v_e(n){n.events,n.minimumStartDifference,n.slotMetrics,n.accessors;var e=n.dayLayoutAlgorithm,t=e;return e in i5&&(t=i5[e]),g_e(t)?t.apply(this,arguments):[]}var Lj=(function(n){function e(){return Fr(this,e),Ga(this,e,arguments)}return ja(e,n),Hr(e,[{key:"render",value:function(){var i=this.props,r=i.renderSlot,a=i.resource,s=i.group,o=i.getters,l=i.components,u=l===void 0?{}:l,h=u.timeSlotWrapper,p=h===void 0?kc:h,g=o?o.slotGroupProp(s):{};return B.createElement("div",Object.assign({className:"rbc-timeslot-group"},g),s.map(function(y,_){var S=o?o.slotProp(y,a):{};return B.createElement(p,{key:_,value:y,resource:a},B.createElement("div",Object.assign({},S,{className:fr("rbc-time-slot",S.className)}),r&&r(y,_)))}))}}])})(F.Component);function ux(n){return typeof n=="string"?n:n+"%"}function y_e(n){var e=n.style,t=n.className,i=n.event,r=n.accessors,a=n.rtl,s=n.selected,o=n.label,l=n.continuesPrior,u=n.continuesAfter,h=n.getters,p=n.onClick,g=n.onDoubleClick,y=n.isBackgroundEvent,_=n.onKeyPress,S=n.components,x=S.event,w=S.eventWrapper,T=r.title(i),M=r.tooltip(i),C=r.end(i),N=r.start(i),D=h.eventProp(i,N,C,s),P=[B.createElement("div",{key:"1",className:"rbc-event-label"},o),B.createElement("div",{key:"2",className:"rbc-event-content"},x?B.createElement(x,{event:i,title:T}):T)],z=e.height,I=e.top,L=e.width,H=e.xOffset,j=pi(pi({},D.style),{},kd({top:ux(I),height:ux(z),width:ux(L)},a?"right":"left",ux(H)));return B.createElement(w,Object.assign({type:"time"},n),B.createElement("div",{role:"button",tabIndex:0,onClick:p,onDoubleClick:g,style:j,onKeyDown:_,title:M?(typeof o=="string"?o+": ":"")+M:void 0,className:fr(y?"rbc-background-event":"rbc-event",t,D.className,{"rbc-selected":s,"rbc-event-continues-earlier":l,"rbc-event-continues-later":u})},P))}var __e=function(e){var t=e.children,i=e.className,r=e.style,a=e.innerRef;return B.createElement("div",{className:i,style:r,ref:a},t)},b_e=B.forwardRef(function(n,e){return B.createElement(__e,Object.assign({},n,{innerRef:e}))}),S_e=["dayProp"],x_e=["eventContainerWrapper","timeIndicatorWrapper"],Ij=(function(n){function e(){var t;Fr(this,e);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=Ga(this,e,[].concat(r)),t.state={selecting:!1,timeIndicatorPosition:null},t.intervalTriggered=!1,t.renderEvents=function(s){var o=s.events,l=s.isBackgroundEvent,u=t.props,h=u.rtl,p=u.selected,g=u.accessors,y=u.localizer,_=u.getters,S=u.components,x=u.step,w=u.timeslots,T=u.dayLayoutAlgorithm,M=u.resizable,C=t,N=C.slotMetrics,D=y.messages,P=v_e({events:o,accessors:g,slotMetrics:N,minimumStartDifference:Math.ceil(x*w/2),dayLayoutAlgorithm:T});return P.map(function(z,I){var L,H=z.event,j=z.style,G=g.end(H),K=g.start(H),ee=(L=g.eventId(H))!==null&&L!==void 0?L:"evt_"+I,Y="eventTimeRangeFormat",re,J=N.startsBeforeDay(K),se=N.startsAfterDay(G);J?Y="eventTimeRangeEndFormat":se&&(Y="eventTimeRangeStartFormat"),J&&se?re=D.allDay:re=y.format({start:K,end:G},Y);var q=J||N.startsBefore(K),X=se||N.startsAfter(G);return B.createElement(y_e,{style:j,event:H,label:re,key:ee,getters:_,rtl:h,components:S,continuesPrior:q,continuesAfter:X,accessors:g,resource:t.props.resource,selected:uw(H,p),onClick:function(ue){return t._select(pi(pi(pi({},H),t.props.resource&&{sourceResource:t.props.resource}),l&&{isBackgroundEvent:!0}),ue)},onDoubleClick:function(ue){return t._doubleClick(H,ue)},isBackgroundEvent:l,onKeyPress:function(ue){return t._keyPress(H,ue)},resizable:M})})},t._selectable=function(){var s=t.containerRef.current,o=t.props,l=o.longPressThreshold,u=o.localizer,h=t._selector=new Cj(function(){return s},{longPressThreshold:l}),p=function(S){var x=t.props.onSelecting,w=t.state||{},T=g(S),M=T.startDate,C=T.endDate;x&&(u.eq(w.startDate,M,"minutes")&&u.eq(w.endDate,C,"minutes")||x({start:M,end:C,resourceId:t.props.resource})===!1)||(t.state.start!==T.start||t.state.end!==T.end||t.state.selecting!==T.selecting)&&t.setState(T)},g=function(S){var x=t.slotMetrics.closestSlotFromPoint(S,yp(s));t.state.selecting||(t._initialSlot=x);var w=t._initialSlot;u.lte(w,x)?x=t.slotMetrics.nextSlot(x):u.gt(w,x)&&(w=t.slotMetrics.nextSlot(w));var T=t.slotMetrics.getRange(u.min(w,x),u.max(w,x));return pi(pi({},T),{},{selecting:!0,top:"".concat(T.top,"%"),height:"".concat(T.height,"%")})},y=function(S,x){if(!$1(t.containerRef.current,S)){var w=g(S),T=w.startDate,M=w.endDate;t._selectSlot({startDate:T,endDate:M,action:x,box:S})}t.setState({selecting:!1})};h.on("selecting",p),h.on("selectStart",p),h.on("beforeSelect",function(_){if(t.props.selectable==="ignoreEvents")return!$1(t.containerRef.current,_)}),h.on("click",function(_){return y(_,"click")}),h.on("doubleClick",function(_){return y(_,"doubleClick")}),h.on("select",function(_){t.state.selecting&&(t._selectSlot(pi(pi({},t.state),{},{action:"select",bounds:_})),t.setState({selecting:!1}))}),h.on("reset",function(){t.state.selecting&&t.setState({selecting:!1})})},t._teardownSelectable=function(){t._selector&&(t._selector.teardown(),t._selector=null)},t._selectSlot=function(s){for(var o=s.startDate,l=s.endDate,u=s.action,h=s.bounds,p=s.box,g=o,y=[];t.props.localizer.lte(g,l);)y.push(g),g=new Date(+g+t.props.step*60*1e3);Mi(t.props.onSelectSlot,{slots:y,start:o,end:l,resourceId:t.props.resource,action:u,bounds:h,box:p})},t._select=function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];Mi(t.props.onSelectEvent,o)},t._doubleClick=function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];Mi(t.props.onDoubleClickEvent,o)},t._keyPress=function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];Mi(t.props.onKeyPressEvent,o)},t.slotMetrics=vU(t.props),t.containerRef=F.createRef(),t}return ja(e,n),Hr(e,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(i,r){this.props.selectable&&!i.selectable&&this._selectable(),!this.props.selectable&&i.selectable&&this._teardownSelectable();var a=this.props,s=a.getNow,o=a.isNow,l=a.localizer,u=a.date,h=a.min,p=a.max,g=l.neq(i.getNow(),s(),"minutes");if(i.isNow!==o||g){if(this.clearTimeIndicatorInterval(),o){var y=!g&&l.eq(i.date,u,"minutes")&&r.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(y)}}else o&&(l.neq(i.min,h,"minutes")||l.neq(i.max,p,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var i=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!this.intervalTriggered&&!r&&this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){i.intervalTriggered=!0,i.positionTimeIndicator(),i.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var i=this.props,r=i.min,a=i.max,s=i.getNow,o=s();if(o>=r&&o<=a){var l=this.slotMetrics.getCurrentTimePosition(o);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:l})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var i=this.props,r=i.date,a=i.max,s=i.rtl,o=i.isNow,l=i.resource,u=i.accessors,h=i.localizer,p=i.getters,g=p.dayProp,y=Kc(p,S_e),_=i.components,S=_.eventContainerWrapper,x=_.timeIndicatorWrapper,w=Kc(_,x_e);this.slotMetrics=this.slotMetrics.update(this.props);var T=this.slotMetrics,M=this.state,C=M.selecting,N=M.top,D=M.height,P=M.startDate,z=M.endDate,I={start:P,end:z},L=g(a,l),H=L.className,j=L.style,G={className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}},K=w.dayColumnWrapper||b_e;return B.createElement(K,{ref:this.containerRef,date:r,style:j,className:fr(H,"rbc-day-slot","rbc-time-column",o&&"rbc-now",o&&"rbc-today",C&&"rbc-slot-selecting"),slotMetrics:T,resource:l},T.groups.map(function(ee,Y){return B.createElement(Lj,{key:Y,group:ee,resource:l,getters:y,components:w})}),B.createElement(S,{localizer:h,resource:l,accessors:u,getters:y,components:w,slotMetrics:T},B.createElement("div",{className:fr("rbc-events-container",s&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),C&&B.createElement("div",{className:"rbc-slot-selection",style:{top:N,height:D}},B.createElement("span",null,h.format(I,"selectRangeFormat"))),o&&this.intervalTriggered&&B.createElement(x,G,B.createElement("div",G)))}}])})(B.Component);Ij.defaultProps={dragThroughEvents:!0,timeslots:2};var Bj=function(e){var t=e.label;return B.createElement(B.Fragment,null,t)},E_e=(function(n){function e(){var t;Fr(this,e);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=Ga(this,e,[].concat(r)),t.handleHeaderClick=function(s,o,l){l.preventDefault(),Mi(t.props.onDrillDown,[s,o])},t.renderRow=function(s){var o=t.props,l=o.events,u=o.rtl,h=o.selectable,p=o.getNow,g=o.range,y=o.getters,_=o.localizer,S=o.accessors,x=o.components,w=o.resizable,T=S.resourceId(s),M=s?l.filter(function(C){return S.resource(C)===T}):l;return B.createElement($0,{isAllDay:!0,rtl:u,getNow:p,minRows:2,maxRows:t.props.allDayMaxRows+1,range:g,events:M,resourceId:T,className:"rbc-allday-cell",selectable:h,selected:t.props.selected,components:x,accessors:S,getters:y,localizer:_,onSelect:t.props.onSelectEvent,onShowMore:t.props.onShowMore,onDoubleClick:t.props.onDoubleClickEvent,onKeyPress:t.props.onKeyPressEvent,onSelectSlot:t.props.onSelectSlot,longPressThreshold:t.props.longPressThreshold,resizable:w})},t}return ja(e,n),Hr(e,[{key:"renderHeaderCells",value:function(i){var r=this,a=this.props,s=a.localizer,o=a.getDrilldownView,l=a.getNow,u=a.getters.dayProp,h=a.components.header,p=h===void 0?gU:h,g=l();return i.map(function(y,_){var S=o(y),x=s.format(y,"dayFormat"),w=u(y),T=w.className,M=w.style,C=B.createElement(p,{date:y,label:x,localizer:s});return B.createElement("div",{key:_,style:M,className:fr("rbc-header",T,s.isSameDate(y,g)&&"rbc-today")},S?B.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(D){return r.handleHeaderClick(y,S,D)}},C):B.createElement("span",null,C))})}},{key:"render",value:function(){var i=this,r=this.props,a=r.width,s=r.rtl,o=r.resources,l=r.range,u=r.events,h=r.getNow,p=r.accessors,g=r.selectable,y=r.components,_=r.getters,S=r.scrollRef,x=r.localizer,w=r.isOverflowing,T=r.components,M=T.timeGutterHeader,C=T.resourceHeader,N=C===void 0?Bj:C,D=r.resizable,P={};w&&(P[s?"marginLeft":"marginRight"]="".concat(K3()-1,"px"));var z=o.groupEvents(u);return B.createElement("div",{style:P,ref:S,className:fr("rbc-time-header",w&&"rbc-overflowing")},B.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:a,minWidth:a,maxWidth:a}},M&&B.createElement(M,null)),o.map(function(I,L){var H=fp(I,2),j=H[0],G=H[1];return B.createElement("div",{className:"rbc-time-header-content",key:j||L},G&&B.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(L)},B.createElement("div",{className:"rbc-header"},B.createElement(N,{index:L,label:p.resourceTitle(G),resource:G}))),B.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(l.length<=1?" rbc-time-header-cell-single-day":"")},i.renderHeaderCells(l)),B.createElement($0,{isAllDay:!0,rtl:s,getNow:h,minRows:2,maxRows:i.props.allDayMaxRows+1,range:l,events:z.get(j)||[],resourceId:G&&j,className:"rbc-allday-cell",selectable:g,selected:i.props.selected,components:y,accessors:p,getters:_,localizer:x,onSelect:i.props.onSelectEvent,onShowMore:i.props.onShowMore,onDoubleClick:i.props.onDoubleClickEvent,onKeyDown:i.props.onKeyPressEvent,onSelectSlot:i.props.onSelectSlot,longPressThreshold:i.props.longPressThreshold,resizable:D}))}))}}])})(B.Component),w_e=(function(n){function e(){var t;Fr(this,e);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=Ga(this,e,[].concat(r)),t.handleHeaderClick=function(s,o,l){l.preventDefault(),Mi(t.props.onDrillDown,[s,o])},t}return ja(e,n),Hr(e,[{key:"renderHeaderCells",value:function(i){var r=this,a=this.props,s=a.localizer,o=a.getDrilldownView,l=a.getNow,u=a.getters.dayProp,h=a.components,p=h.header,g=p===void 0?gU:p,y=h.resourceHeader,_=y===void 0?Bj:y,S=a.resources,x=a.accessors,w=a.events,T=a.rtl,M=a.selectable,C=a.components,N=a.getters,D=a.resizable,P=l(),z=S.groupEvents(w);return i.map(function(I,L){var H=o(I),j=s.format(I,"dayFormat"),G=u(I),K=G.className,ee=G.style,Y=B.createElement(g,{date:I,label:j,localizer:s});return B.createElement("div",{key:L,className:"rbc-time-header-content rbc-resource-grouping"},B.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(i.length<=1?" rbc-time-header-cell-single-day":"")},B.createElement("div",{style:ee,className:fr("rbc-header",K,s.isSameDate(I,P)&&"rbc-today")},H?B.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(J){return r.handleHeaderClick(I,H,J)}},Y):B.createElement("span",null,Y))),B.createElement("div",{className:"rbc-row"},S.map(function(re,J){var se=fp(re,2),q=se[0],X=se[1];return B.createElement("div",{key:"resource_".concat(q,"_").concat(J),className:fr("rbc-header",K,s.isSameDate(I,P)&&"rbc-today")},B.createElement(_,{index:J,label:x.resourceTitle(X),resource:X}))})),B.createElement("div",{className:"rbc-row rbc-m-b-negative-3 rbc-h-full"},S.map(function(re,J){var se=fp(re,2),q=se[0],X=se[1],oe=(z.get(q)||[]).filter(function(ue){return s.isSameDate(ue.start,I)||s.isSameDate(ue.end,I)});return B.createElement($0,{key:"resource_".concat(q,"_").concat(J),isAllDay:!0,rtl:T,getNow:l,minRows:2,maxRows:r.props.allDayMaxRows+1,range:[I],events:oe,resourceId:X&&q,className:"rbc-allday-cell",selectable:M,selected:r.props.selected,components:C,accessors:x,getters:N,localizer:s,onSelect:r.props.onSelectEvent,onShowMore:r.props.onShowMore,onDoubleClick:r.props.onDoubleClickEvent,onKeyDown:r.props.onKeyPressEvent,onSelectSlot:r.props.onSelectSlot,longPressThreshold:r.props.longPressThreshold,resizable:D})})))})}},{key:"render",value:function(){var i=this.props,r=i.width,a=i.rtl,s=i.range,o=i.scrollRef,l=i.isOverflowing,u=i.components.timeGutterHeader,h={};return l&&(h[a?"marginLeft":"marginRight"]="".concat(K3()-1,"px")),B.createElement("div",{style:h,ref:o,className:fr("rbc-time-header",l&&"rbc-overflowing")},B.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:r,minWidth:r,maxWidth:r}},u&&B.createElement(u,null)),this.renderHeaderCells(s))}}])})(B.Component);function T_e(n){var e=n.min,t=n.max,i=n.localizer;return i.getTimezoneOffset(e)!==i.getTimezoneOffset(t)?{start:i.add(e,-1,"day"),end:i.add(t,-1,"day")}:{start:e,end:t}}var M_e=function(e){var t=e.min,i=e.max,r=e.timeslots,a=e.step,s=e.localizer,o=e.getNow,l=e.resource,u=e.components,h=e.getters,p=e.gutterRef,g=u.timeGutterWrapper,y=F.useMemo(function(){return T_e({min:t,max:i,localizer:s})},[t==null?void 0:t.toISOString(),i==null?void 0:i.toISOString(),s]),_=y.start,S=y.end,x=F.useState(vU({min:_,max:S,timeslots:r,step:a,localizer:s})),w=fp(x,2),T=w[0],M=w[1];F.useEffect(function(){T&&M(T.update({min:_,max:S,timeslots:r,step:a,localizer:s}))},[_==null?void 0:_.toISOString(),S==null?void 0:S.toISOString(),r,a]);var C=F.useCallback(function(N,D){if(D)return null;var P=T.dateIsInGroup(o(),D);return B.createElement("span",{className:fr("rbc-label",P&&"rbc-now")},s.format(N,"timeGutterFormat"))},[T,s,o]);return B.createElement(g,{slotMetrics:T},B.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:p},T.groups.map(function(N,D){return B.createElement(Lj,{key:D,group:N,resource:l,components:u,renderSlot:C,getters:h})})))},A_e=B.forwardRef(function(n,e){return B.createElement(M_e,Object.assign({gutterRef:e},n))}),NR={};function C_e(n,e){return{map:function(i){return n?n.map(function(r,a){return i([e.resourceId(r),r],a)}):[i([NR,null],0)]},groupEvents:function(i){var r=new Map;return n?(i.forEach(function(a){var s=e.resource(a)||NR;if(Array.isArray(s))s.forEach(function(l){var u=r.get(l)||[];u.push(a),r.set(l,u)});else{var o=r.get(s)||[];o.push(a),r.set(s,o)}}),r):(r.set(NR,i),r)}}}var Qg=(function(n){function e(t){var i;return Fr(this,e),i=Ga(this,e,[t]),i.handleScroll=function(r){i.scrollRef.current&&(i.scrollRef.current.scrollLeft=r.target.scrollLeft)},i.handleResize=function(){gz(i.rafHandle),i.rafHandle=j8(i.checkOverflow)},i.handleKeyPressEvent=function(){i.clearSelection();for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];Mi(i.props.onKeyPressEvent,a)},i.handleSelectEvent=function(){i.clearSelection();for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];Mi(i.props.onSelectEvent,a)},i.handleDoubleClickEvent=function(){i.clearSelection();for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];Mi(i.props.onDoubleClickEvent,a)},i.handleShowMore=function(r,a,s,o,l){var u=i.props,h=u.popup,p=u.onDrillDown,g=u.onShowMore,y=u.getDrilldownView,_=u.doShowMoreDrillDown;if(i.clearSelection(),h){var S=G8(s,i.containerRef.current);i.setState({overlay:{date:a,events:r,position:pi(pi({},S),{},{width:"200px"}),target:l}})}else _&&Mi(p,[a,y(a)||us.DAY]);Mi(g,[r,a,o])},i.handleSelectAllDaySlot=function(r,a){var s=i.props.onSelectSlot,o=new Date(r[0]),l=new Date(r[r.length-1]);l.setDate(r[r.length-1].getDate()+1),Mi(s,{slots:r,start:o,end:l,action:a.action,resourceId:a.resourceId})},i.overlayDisplay=function(){i.setState({overlay:null})},i.checkOverflow=function(){if(!i._updatingOverflow){var r=i.contentRef.current;if(r!=null&&r.scrollHeight){var a=r.scrollHeight>r.clientHeight;i.state.isOverflowing!==a&&(i._updatingOverflow=!0,i.setState({isOverflowing:a},function(){i._updatingOverflow=!1}))}}},i.memoizedResources=uj(function(r,a){return C_e(r,a)}),i.state={gutterWidth:void 0,isOverflowing:null},i.scrollRef=B.createRef(),i.contentRef=B.createRef(),i.containerRef=B.createRef(),i._scrollRatio=null,i.gutterRef=F.createRef(),i}return ja(e,n),Hr(e,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){this.props.width==null&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),gz(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderDayColumn",value:function(i,r,a,s,o,l,u,h,p,g){var y=this.props,_=y.min,S=y.max,x=(s.get(r)||[]).filter(function(T){return l.inRange(i,u.start(T),u.end(T),"day")}),w=(o.get(r)||[]).filter(function(T){return l.inRange(i,u.start(T),u.end(T),"day")});return B.createElement(Ij,Object.assign({},this.props,{localizer:l,min:l.merge(i,_),max:l.merge(i,S),resource:a&&r,components:h,isNow:l.isSameDate(i,g),key:"".concat(r,"-").concat(i),date:i,events:x,backgroundEvents:w,dayLayoutAlgorithm:p}))}},{key:"renderResourcesFirst",value:function(i,r,a,s,o,l,u,h,p){var g=this;return r.map(function(y){var _=fp(y,2),S=_[0],x=_[1];return i.map(function(w){return g.renderDayColumn(w,S,x,a,s,o,l,h,p,u)})})}},{key:"renderRangeFirst",value:function(i,r,a,s,o,l,u,h,p){var g=this;return i.map(function(y){return B.createElement("div",{style:{display:"flex",minHeight:"100%",flex:1},key:y},r.map(function(_){var S=fp(_,2),x=S[0],w=S[1];return B.createElement("div",{style:{flex:1},key:l.resourceId(w)},g.renderDayColumn(y,x,w,a,s,o,l,h,p,u))}))})}},{key:"renderEvents",value:function(i,r,a,s){var o=this.props,l=o.accessors,u=o.localizer,h=o.resourceGroupingLayout,p=o.components,g=o.dayLayoutAlgorithm,y=this.memoizedResources(this.props.resources,l),_=y.groupEvents(r),S=y.groupEvents(a);return h?this.renderRangeFirst(i,y,_,S,u,l,s,p,g):this.renderResourcesFirst(i,y,_,S,u,l,s,p,g)}},{key:"render",value:function(){var i,r=this.props,a=r.events,s=r.backgroundEvents,o=r.range,l=r.width,u=r.rtl,h=r.selected,p=r.getNow,g=r.resources,y=r.components,_=r.accessors,S=r.getters,x=r.localizer,w=r.min,T=r.max,M=r.showMultiDayTimes,C=r.longPressThreshold,N=r.resizable,D=r.resourceGroupingLayout;l=l||this.state.gutterWidth;var P=o[0],z=o[o.length-1];this.slots=o.length;var I=[],L=[],H=[];a.forEach(function(G){if(Y0(G,P,z,_,x)){var K=_.start(G),ee=_.end(G);_.allDay(G)||x.startAndEndAreDateOnly(K,ee)||!M&&!x.isSameDate(K,ee)?I.push(G):L.push(G)}}),s.forEach(function(G){Y0(G,P,z,_,x)&&H.push(G)}),I.sort(function(G,K){return QO(G,K,_,x)});var j={range:o,events:I,width:l,rtl:u,getNow:p,localizer:x,selected:h,allDayMaxRows:this.props.showAllEvents?1/0:(i=this.props.allDayMaxRows)!==null&&i!==void 0?i:1/0,resources:this.memoizedResources(g,_),selectable:this.props.selectable,accessors:_,getters:S,components:y,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:C,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:N};return B.createElement("div",{className:fr("rbc-time-view",g&&"rbc-time-view-resources"),ref:this.containerRef},g&&g.length>1&&D?B.createElement(w_e,j):B.createElement(E_e,j),this.props.popup&&this.renderOverlay(),B.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},B.createElement(A_e,{date:P,ref:this.gutterRef,localizer:x,min:x.merge(P,w),max:x.merge(P,T),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:y,className:"rbc-time-gutter",getters:S}),this.renderEvents(o,L,H,p())))}},{key:"renderOverlay",value:function(){var i,r,a=this,s=(i=(r=this.state)===null||r===void 0?void 0:r.overlay)!==null&&i!==void 0?i:{},o=this.props,l=o.accessors,u=o.localizer,h=o.components,p=o.getters,g=o.selected,y=o.popupOffset,_=o.handleDragStart,S=function(){return a.setState({overlay:null})};return B.createElement(mU,{overlay:s,accessors:l,localizer:u,components:h,getters:p,selected:g,popupOffset:y,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:_,show:!!s.position,overlayDisplay:this.overlayDisplay,onHide:S})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var i=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var r,a=(r=i.gutterRef)!==null&&r!==void 0&&r.current?XO(i.gutterRef.current):void 0;a&&i.state.gutterWidth!==a&&i.setState({gutterWidth:a})})}},{key:"applyScroll",value:function(){if(this._scrollRatio!=null&&this.props.enableAutoScroll===!0){var i=this.contentRef.current;i.scrollTop=i.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,r=i.min,a=i.max,s=i.scrollToTime,o=i.localizer,l=o.diff(o.merge(s,r),s,"milliseconds"),u=o.diff(r,a,"milliseconds");this._scrollRatio=l/u}}])})(F.Component);Qg.defaultProps={step:30,timeslots:2,resourceGroupingLayout:!1};var R_e=["date","localizer","min","max","scrollToTime","enableAutoScroll"],hw=(function(n){function e(){return Fr(this,e),Ga(this,e,arguments)}return ja(e,n),Hr(e,[{key:"render",value:function(){var i=this.props,r=i.date,a=i.localizer,s=i.min,o=s===void 0?a.startOf(new Date,"day"):s,l=i.max,u=l===void 0?a.endOf(new Date,"day"):l,h=i.scrollToTime,p=h===void 0?a.startOf(new Date,"day"):h,g=i.enableAutoScroll,y=g===void 0?!0:g,_=Kc(i,R_e),S=e.range(r,{localizer:a});return B.createElement(Qg,Object.assign({},_,{range:S,eventOffset:10,localizer:a,min:o,max:u,scrollToTime:p,enableAutoScroll:y}))}}])})(B.Component);hw.range=function(n,e){var t=e.localizer;return[t.startOf(n,"day")]};hw.navigate=function(n,e,t){var i=t.localizer;switch(e){case js.PREVIOUS:return i.add(n,-1,"day");case js.NEXT:return i.add(n,1,"day");default:return n}};hw.title=function(n,e){var t=e.localizer;return t.format(n,"dayHeaderFormat")};var O_e=["date","localizer","min","max","scrollToTime","enableAutoScroll"],xh=(function(n){function e(){return Fr(this,e),Ga(this,e,arguments)}return ja(e,n),Hr(e,[{key:"render",value:function(){var i=this.props,r=i.date,a=i.localizer,s=i.min,o=s===void 0?a.startOf(new Date,"day"):s,l=i.max,u=l===void 0?a.endOf(new Date,"day"):l,h=i.scrollToTime,p=h===void 0?a.startOf(new Date,"day"):h,g=i.enableAutoScroll,y=g===void 0?!0:g,_=Kc(i,O_e),S=e.range(r,this.props);return B.createElement(Qg,Object.assign({},_,{range:S,eventOffset:15,localizer:a,min:o,max:u,scrollToTime:p,enableAutoScroll:y}))}}])})(B.Component);xh.defaultProps=Qg.defaultProps;xh.navigate=function(n,e,t){var i=t.localizer;switch(e){case js.PREVIOUS:return i.add(n,-1,"week");case js.NEXT:return i.add(n,1,"week");default:return n}};xh.range=function(n,e){var t=e.localizer,i=t.startOfWeek(),r=t.startOf(n,"week",i),a=t.endOf(n,"week",i);return t.range(r,a)};xh.title=function(n,e){var t=e.localizer,i=xh.range(n,{localizer:t}),r=gj(i),a=r[0],s=r.slice(1);return t.format({start:a,end:s.pop()},"dayRangeHeaderFormat")};var D_e=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function yU(n,e){return xh.range(n,e).filter(function(t){return[6,0].indexOf(t.getDay())===-1})}var C_=(function(n){function e(){return Fr(this,e),Ga(this,e,arguments)}return ja(e,n),Hr(e,[{key:"render",value:function(){var i=this.props,r=i.date,a=i.localizer,s=i.min,o=s===void 0?a.startOf(new Date,"day"):s,l=i.max,u=l===void 0?a.endOf(new Date,"day"):l,h=i.scrollToTime,p=h===void 0?a.startOf(new Date,"day"):h,g=i.enableAutoScroll,y=g===void 0?!0:g,_=Kc(i,D_e),S=yU(r,this.props);return B.createElement(Qg,Object.assign({},_,{range:S,eventOffset:15,localizer:a,min:o,max:u,scrollToTime:p,enableAutoScroll:y}))}}])})(B.Component);C_.defaultProps=Qg.defaultProps;C_.range=yU;C_.navigate=xh.navigate;C_.title=function(n,e){var t=e.localizer,i=yU(n,{localizer:t}),r=gj(i),a=r[0],s=r.slice(1);return t.format({start:a,end:s.pop()},"dayRangeHeaderFormat")};var dw=30;function pw(n){var e=n.accessors,t=n.components,i=n.date,r=n.events,a=n.getters,s=n.length,o=s===void 0?dw:s,l=n.localizer,u=n.onDoubleClickEvent,h=n.onSelectEvent,p=n.selected,g=F.useRef(null),y=F.useRef(null),_=F.useRef(null),S=F.useRef(null),x=F.useRef(null);F.useEffect(function(){M()});var w=function(z,I,L){var H=t.event,j=t.date;return I=I.filter(function(G){return Y0(G,l.startOf(z,"day"),l.endOf(z,"day"),e,l)}),I.map(function(G,K){var ee=e.title(G),Y=e.end(G),re=e.start(G),J=a.eventProp(G,re,Y,uw(G,p)),se=K===0&&l.format(z,"agendaDateFormat"),q=K===0?B.createElement("td",{rowSpan:I.length,className:"rbc-agenda-date-cell"},j?B.createElement(j,{day:z,label:se}):se):!1;return B.createElement("tr",{key:L+"_"+K,className:J.className,style:J.style},q,B.createElement("td",{className:"rbc-agenda-time-cell"},T(z,G)),B.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(oe){return h&&h(G,oe)},onDoubleClick:function(oe){return u&&u(G,oe)}},H?B.createElement(H,{event:G,title:ee}):ee))},[])},T=function(z,I){var L="",H=t.time,j=l.messages.allDay,G=e.end(I),K=e.start(I);return e.allDay(I)||(l.eq(K,G)?j=l.format(K,"agendaTimeFormat"):l.isSameDate(K,G)?j=l.format({start:K,end:G},"agendaTimeRangeFormat"):l.isSameDate(z,K)?j=l.format(K,"agendaTimeFormat"):l.isSameDate(z,G)&&(j=l.format(G,"agendaTimeFormat"))),l.gt(z,K,"day")&&(L="rbc-continues-prior"),l.lt(z,G,"day")&&(L+=" rbc-continues-after"),B.createElement("span",{className:L.trim()},H?B.createElement(H,{event:I,day:z,label:j}):j)},M=function(){if(x.current){var z=g.current,I=x.current.firstChild;if(I){var L=S.current.scrollHeight>S.current.clientHeight,H=[],j=H;H=[XO(I.children[0]),XO(I.children[1])],(j[0]!==H[0]||j[1]!==H[1])&&(y.current.style.width=H[0]+"px",_.current.style.width=H[1]+"px"),L?(Dge(z,"rbc-header-overflowing"),z.style.marginRight=K3()+"px"):Uge(z,"rbc-header-overflowing")}}},C=l.messages,N=l.add(i,o,"day"),D=l.range(i,N,"day");return r=r.filter(function(P){return Y0(P,l.startOf(i,"day"),l.endOf(N,"day"),e,l)}),r.sort(function(P,z){return+e.start(P)-+e.start(z)}),B.createElement("div",{className:"rbc-agenda-view"},r.length!==0?B.createElement(B.Fragment,null,B.createElement("table",{ref:g,className:"rbc-agenda-table"},B.createElement("thead",null,B.createElement("tr",null,B.createElement("th",{className:"rbc-header",ref:y},C.date),B.createElement("th",{className:"rbc-header",ref:_},C.time),B.createElement("th",{className:"rbc-header"},C.event)))),B.createElement("div",{className:"rbc-agenda-content",ref:S},B.createElement("table",{className:"rbc-agenda-table"},B.createElement("tbody",{ref:x},D.map(function(P,z){return w(P,r,z)}))))):B.createElement("span",{className:"rbc-agenda-empty"},C.noEventsInRange))}pw.range=function(n,e){var t=e.length,i=t===void 0?dw:t,r=e.localizer,a=r.add(n,i,"day");return{start:n,end:a}};pw.navigate=function(n,e,t){var i=t.length,r=i===void 0?dw:i,a=t.localizer;switch(e){case js.PREVIOUS:return a.add(n,-r,"day");case js.NEXT:return a.add(n,r,"day");default:return n}};pw.title=function(n,e){var t=e.length,i=t===void 0?dw:t,r=e.localizer,a=r.add(n,i,"day");return r.format({start:n,end:a},"agendaHeaderFormat")};var Dx=kd(kd(kd(kd(kd({},us.MONTH,fw),us.WEEK,xh),us.WORK_WEEK,C_),us.DAY,hw),us.AGENDA,pw),U_e=["action","date","today"];function N_e(n,e){var t=e.action,i=e.date,r=e.today,a=Kc(e,U_e);switch(n=typeof n=="string"?Dx[n]:n,t){case js.TODAY:i=r||new Date;break;case js.DATE:break;default:L0(n&&typeof n.navigate=="function","Calendar View components must implement a static `.navigate(date, action)` method.s"),i=n.navigate(i,t,a)}return i}function P_e(n,e){var t=null;return typeof e=="function"?t=e(n):typeof e=="string"&&af(n)==="object"&&n!=null&&e in n&&(t=n[e]),t}var Hu=function(e){return function(t){return P_e(t,e)}},L_e=["view","date","getNow","onNavigate"],I_e=["view","toolbar","events","backgroundEvents","resourceGroupingLayout","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function zj(n){if(Array.isArray(n))return n;for(var e=[],t=0,i=Object.entries(n);t<i.length;t++){var r=fp(i[t],2),a=r[0],s=r[1];s&&e.push(a)}return e}function B_e(n,e){var t=e.views,i=zj(t);return i.indexOf(n)!==-1}var kj=(function(n){function e(){var t;Fr(this,e);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=Ga(this,e,[].concat(r)),t.getViews=function(){var s=t.props.views;return Array.isArray(s)?a0e(s,function(o,l){return o[l]=Dx[l]},{}):af(s)==="object"?Cye(s,function(o,l){return o===!0?Dx[l]:o}):Dx},t.getView=function(){var s=t.getViews();return s[t.props.view]},t.getDrilldownView=function(s){var o=t.props,l=o.view,u=o.drilldownView,h=o.getDrilldownView;return h?h(s,l,Object.keys(t.getViews())):u},t.handleRangeChange=function(s,o,l){var u=t.props,h=u.onRangeChange,p=u.localizer;h&&o.range&&h(o.range(s,{localizer:p}),l)},t.handleNavigate=function(s,o){var l=t.props,u=l.view,h=l.date,p=l.getNow,g=l.onNavigate,y=Kc(l,L_e),_=t.getView(),S=p();h=N_e(_,pi(pi({},y),{},{action:s,date:o||h||S,today:S})),g(h,u,s),t.handleRangeChange(h,_)},t.handleViewChange=function(s){s!==t.props.view&&B_e(s,t.props)&&t.props.onView(s);var o=t.getViews();t.handleRangeChange(t.props.date||t.props.getNow(),o[s],s)},t.handleSelectEvent=function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];Mi(t.props.onSelectEvent,o)},t.handleDoubleClickEvent=function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];Mi(t.props.onDoubleClickEvent,o)},t.handleKeyPressEvent=function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];Mi(t.props.onKeyPressEvent,o)},t.handleSelectSlot=function(s){Mi(t.props.onSelectSlot,s)},t.handleDrillDown=function(s,o){var l=t.props.onDrillDown;if(l){l(s,o,t.drilldownView);return}o&&t.handleViewChange(o),t.handleNavigate(js.DATE,s)},t.state={context:e.getContext(t.props)},t}return ja(e,n),Hr(e,[{key:"render",value:function(){var i=this.props,r=i.view,a=i.toolbar,s=i.events,o=i.backgroundEvents,l=i.resourceGroupingLayout,u=i.style,h=i.className,p=i.elementProps,g=i.date,y=i.getNow,_=i.length,S=i.showMultiDayTimes,x=i.onShowMore,w=i.doShowMoreDrillDown;i.components,i.formats,i.messages,i.culture;var T=Kc(i,I_e);g=g||y();var M=this.getView(),C=this.state.context,N=C.accessors,D=C.components,P=C.getters,z=C.localizer,I=C.viewNames,L=D.toolbar||F0e,H=M.title(g,{localizer:z,length:_});return B.createElement("div",Object.assign({},p,{className:fr(h,"rbc-calendar",T.rtl&&"rbc-rtl"),style:u}),a&&B.createElement(L,{date:g,view:r,views:I,label:H,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:z}),B.createElement(M,Object.assign({},T,{events:s,backgroundEvents:o,date:g,getNow:y,length:_,localizer:z,getters:P,components:D,accessors:N,showMultiDayTimes:S,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:x,doShowMoreDrillDown:w,resourceGroupingLayout:l})))}}],[{key:"getDerivedStateFromProps",value:function(i){return{context:e.getContext(i)}}},{key:"getContext",value:function(i){var r=i.startAccessor,a=i.endAccessor,s=i.allDayAccessor,o=i.tooltipAccessor,l=i.titleAccessor,u=i.resourceAccessor,h=i.resourceIdAccessor,p=i.resourceTitleAccessor,g=i.eventIdAccessor,y=i.eventPropGetter,_=i.backgroundEventPropGetter,S=i.slotPropGetter,x=i.slotGroupPropGetter,w=i.dayPropGetter,T=i.view,M=i.views,C=i.localizer,N=i.culture,D=i.messages,P=D===void 0?{}:D,z=i.components,I=z===void 0?{}:z,L=i.formats,H=L===void 0?{}:L,j=zj(M),G=V0e(P);return{viewNames:j,localizer:k0e(C,N,H,G),getters:{eventProp:function(){return y&&y.apply(void 0,arguments)||{}},backgroundEventProp:function(){return _&&_.apply(void 0,arguments)||{}},slotProp:function(){return S&&S.apply(void 0,arguments)||{}},slotGroupProp:function(){return x&&x.apply(void 0,arguments)||{}},dayProp:function(){return w&&w.apply(void 0,arguments)||{}}},components:Tye(I[T]||{},n0e(I,j),{eventWrapper:kc,backgroundEventWrapper:kc,eventContainerWrapper:kc,dateCellWrapper:kc,weekWrapper:kc,timeSlotWrapper:kc,timeGutterWrapper:kc,timeIndicatorWrapper:kc}),accessors:{start:Hu(r),end:Hu(a),allDay:Hu(s),tooltip:Hu(o),title:Hu(l),resource:Hu(u),resourceId:Hu(h),resourceTitle:Hu(p),eventId:Hu(g)}}}}])})(B.Component);kj.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:us.MONTH,views:[us.MONTH,us.WEEK,us.DAY,us.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:us.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",eventIdAccessor:"id",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var z_e=A8(kj,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),k_e=function(e,t,i){var r=e.start,a=e.end;return"".concat(i.format(r,"P",t),"  ").concat(i.format(a,"P",t))},PR=function(e,t,i){var r=e.start,a=e.end;return"".concat(i.format(r,"p",t),"  ").concat(i.format(a,"p",t))},F_e=function(e,t,i){var r=e.start;return"".concat(i.format(r,"h:mma",t),"  ")},H_e=function(e,t,i){var r=e.end;return"  ".concat(i.format(r,"h:mma",t))},V_e=function(e,t,i){var r=e.start,a=e.end;return"".concat(i.format(r,"MMMM dd",t),"  ").concat(i.format(a,Yg(r,a,"month")?"dd":"MMMM dd",t))},G_e={dateFormat:"dd",dayFormat:"dd eee",weekdayFormat:"ccc",selectRangeFormat:PR,eventTimeRangeFormat:PR,eventTimeRangeStartFormat:F_e,eventTimeRangeEndFormat:H_e,timeGutterFormat:"p",monthHeaderFormat:"MMMM yyyy",dayHeaderFormat:"cccc MMM dd",dayRangeHeaderFormat:V_e,agendaHeaderFormat:k_e,agendaDateFormat:"ccc MMM dd",agendaTimeFormat:"p",agendaTimeRangeFormat:PR},j_e=function(e){var t=e.startOfWeek,i=e.getDay,r=e.format,a=e.locales;return new z0e({formats:G_e,firstOfWeek:function(o){return i(t(new Date,{locale:a[o]}))},format:function(o,l,u){return r(new Date(o),l,{locale:a[u]})}})};const q_e={"en-US":g8},W_e=j_e({format:cs,startOfWeek:()=>Ag(new Date,{weekStartsOn:1}),getDay:hpe,locales:q_e}),Y_e={class:"#4f46e5",conversation:"#0ea5e9",support:"#22c55e",exam:"#f97316",meeting:"#6366f1",availability:"#6b7280"};function _U({events:n=[],onSelectEvent:e}){const t=F.useMemo(()=>i=>({style:{backgroundColor:Y_e[i.category]||"#334155",color:"#fff",borderRadius:8,border:"none",padding:"2px 6px"}}),[]);return B.createElement("div",{className:"bg-white shadow rounded-lg p-4 border border-gray-100"},B.createElement(z_e,{localizer:W_e,events:n,startAccessor:"start",endAccessor:"end",style:{height:420},views:["week","day"],defaultView:"week",toolbar:!0,popup:!0,showMultiDayTimes:!0,onSelectEvent:e,eventPropGetter:t}))}function bU({title:n="Upcoming",events:e=[]}){return e.length?B.createElement("div",{className:"bg-white shadow rounded-lg p-4"},B.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-3"},n),B.createElement("div",{className:"space-y-3"},e.map(t=>B.createElement("div",{key:t.id,className:"border border-gray-100 rounded-lg p-3"},B.createElement("div",{className:"text-sm font-semibold text-gray-900"},t.title),B.createElement("div",{className:"text-xs text-gray-600"},cs(t.start,"EEE, MMM d - p")," - ",cs(t.end,"p")),t.location&&B.createElement("div",{className:"text-xs text-gray-500 mt-1"},"Location: ",t.location))))):B.createElement("div",{className:"bg-white shadow rounded-lg p-4"},B.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-3"},n),B.createElement("p",{className:"text-sm text-gray-500"},"No upcoming items."))}const $_e=n=>({id:n.id,title:n.title||"Lesson",start:new Date(n.start_at),end:new Date(n.end_at),location:n.location||null,category:"class"});function X_e({onBack:n}){var y;const{user:e,role:t,profile:i,loading:r,signOut:a}=Ep()||{},[s,o]=F.useState([]),[l,u]=F.useState(null),[h,p]=F.useState("");F.useEffect(()=>{let _=!1;return(async()=>{if(!e||t!=="student")return;p("");const{data:x,error:w}=await Bs.from("lessons").select("id,title,start_at,end_at,location").eq("student_id",e.id).order("start_at",{ascending:!0});if(!_){if(w){p(w.message),o([]);return}o((x||[]).map($_e))}})(),()=>{_=!0}},[t,e]);const g=F.useMemo(()=>{const _=new Date;return[...s].filter(S=>S.start>=_).sort((S,x)=>S.start-x.start).slice(0,4)},[s]);return r?B.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-6"},B.createElement("div",{className:"text-sm text-gray-600"},"Loading session...")):e?t?t!=="student"?B.createElement("div",{className:"min-h-screen bg-gray-50 p-6"},B.createElement("div",{className:"max-w-xl mx-auto bg-white border border-gray-100 shadow rounded-2xl p-6"},B.createElement("div",{className:"flex items-start justify-between gap-3"},B.createElement("div",null,B.createElement("h1",{className:"text-xl font-semibold text-gray-900"},"Role mismatch"),B.createElement("p",{className:"text-sm text-gray-600 mt-2"},"You are signed in as ",B.createElement("span",{className:"font-semibold text-indigo-700"},t),". This page is for students.")),B.createElement("button",{onClick:a,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 text-sm"},"Logout")),B.createElement("div",{className:"mt-4"},n&&B.createElement("button",{onClick:n,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 text-sm"},"Back to Home")))):B.createElement("div",{className:"h-screen overflow-y-auto bg-gray-50"},B.createElement("div",{className:"max-w-6xl mx-auto p-6 space-y-6"},B.createElement("div",{className:"flex items-center justify-between gap-4"},B.createElement("div",{className:"flex items-center gap-3"},n&&B.createElement("button",{onClick:n,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 text-sm"},"Back to Home"),B.createElement("div",null,B.createElement("h1",{className:"text-2xl font-semibold text-gray-900"},"Student Dashboard"),B.createElement("p",{className:"text-sm text-gray-600"},"Weekly schedule and upcoming lessons."))),B.createElement("button",{onClick:a,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 text-sm"},"Logout")),h&&B.createElement("div",{className:"text-sm text-red-600 bg-red-50 border border-red-100 rounded-lg p-3"},h),B.createElement("div",{className:"grid lg:grid-cols-3 gap-4"},B.createElement("div",{className:"lg:col-span-2"},B.createElement(_U,{events:s,onSelectEvent:u})),B.createElement("div",{className:"space-y-4"},B.createElement(bU,{title:"Upcoming",events:g}),l&&B.createElement("div",{className:"bg-white shadow rounded-lg p-4 border border-gray-100"},B.createElement("div",{className:"flex items-start justify-between"},B.createElement("div",null,B.createElement("div",{className:"text-sm font-semibold text-gray-900"},l.title),B.createElement("div",{className:"text-xs text-gray-600"},cs(l.start,"EEE, MMM d - p")," - ",cs(l.end,"p")),l.location&&B.createElement("div",{className:"text-xs text-gray-500 mt-1"},"Location: ",l.location)),B.createElement("button",{onClick:()=>u(null),className:"text-xs text-gray-500 hover:text-gray-700"},"Close"))))))):B.createElement("div",{className:"min-h-screen bg-gray-50 p-6"},B.createElement("div",{className:"max-w-xl mx-auto bg-white border border-gray-100 shadow rounded-2xl p-6"},B.createElement("div",{className:"flex items-start justify-between gap-3"},B.createElement("div",null,B.createElement("h1",{className:"text-xl font-semibold text-gray-900"},"Pending approval"),B.createElement("p",{className:"text-sm text-gray-600 mt-2"},"Your requested role must be approved before you can access dashboards."),B.createElement("div",{className:"text-sm text-gray-700 mt-3"},"Requested role:"," ",B.createElement("span",{className:"font-semibold text-indigo-700"},(i==null?void 0:i.requested_role)||((y=e==null?void 0:e.user_metadata)==null?void 0:y.requested_role)||"N/A"))),B.createElement("button",{onClick:a,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 text-sm"},"Logout")))):B.createElement("div",{className:"min-h-screen bg-gray-50 p-6"},B.createElement("div",{className:"max-w-5xl mx-auto space-y-6"},B.createElement("div",{className:"flex items-center justify-between gap-4"},B.createElement("div",{className:"flex items-center gap-3"},n&&B.createElement("button",{onClick:n,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 text-sm"},"Back to Home"),B.createElement("div",null,B.createElement("h1",{className:"text-2xl font-semibold text-gray-900"},"Student Dashboard"),B.createElement("p",{className:"text-sm text-gray-600"},"Sign in to view your schedule.")))),B.createElement("div",{className:"flex justify-center"},B.createElement(v_,{initialMode:"login",initialRole:"student"}))))}const r5=n=>n?String(n).slice(0,8):"",K_e=n=>({id:n.id,title:n.title?`${n.title} - Student ${r5(n.student_id)}`:`Meeting - Student ${r5(n.student_id)}`,start:new Date(n.start_at),end:new Date(n.end_at),location:n.location||null,category:"meeting",student_id:n.student_id});function Z_e({onBack:n}){var y;const{user:e,role:t,profile:i,loading:r,signOut:a}=Ep()||{},[s,o]=F.useState([]),[l,u]=F.useState(null),[h,p]=F.useState("");F.useEffect(()=>{let _=!1;return(async()=>{if(!e||t!=="teacher")return;p("");const{data:x,error:w}=await Bs.from("lessons").select("id,title,start_at,end_at,location,student_id").eq("teacher_id",e.id).order("start_at",{ascending:!0});if(!_){if(w){p(w.message),o([]);return}o((x||[]).map(K_e))}})(),()=>{_=!0}},[t,e]);const g=F.useMemo(()=>{const _=new Date;return[...s].filter(S=>S.start>=_).sort((S,x)=>S.start-x.start).slice(0,5)},[s]);return r?B.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-6"},B.createElement("div",{className:"text-sm text-gray-600"},"Loading session...")):e?t?t!=="teacher"?B.createElement("div",{className:"min-h-screen bg-gray-50 p-6"},B.createElement("div",{className:"max-w-xl mx-auto bg-white border border-gray-100 shadow rounded-2xl p-6"},B.createElement("div",{className:"flex items-start justify-between gap-3"},B.createElement("div",null,B.createElement("h1",{className:"text-xl font-semibold text-gray-900"},"Role mismatch"),B.createElement("p",{className:"text-sm text-gray-600 mt-2"},"You are signed in as ",B.createElement("span",{className:"font-semibold text-indigo-700"},t),". This page is for teachers.")),B.createElement("button",{onClick:a,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 text-sm"},"Logout")),B.createElement("div",{className:"mt-4"},n&&B.createElement("button",{onClick:n,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 text-sm"},"Back to Home")))):B.createElement("div",{className:"h-screen overflow-y-auto bg-gray-50"},B.createElement("div",{className:"max-w-6xl mx-auto p-6 space-y-6"},B.createElement("div",{className:"flex items-center justify-between gap-4"},B.createElement("div",{className:"flex items-center gap-3"},n&&B.createElement("button",{onClick:n,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 text-sm"},"Back to Home"),B.createElement("div",null,B.createElement("h1",{className:"text-2xl font-semibold text-gray-900"},"Teacher Dashboard"),B.createElement("p",{className:"text-sm text-gray-600"},"Your weekly schedule and student meetings."))),B.createElement("button",{onClick:a,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 text-sm"},"Logout")),h&&B.createElement("div",{className:"text-sm text-red-600 bg-red-50 border border-red-100 rounded-lg p-3"},h),B.createElement("div",{className:"grid lg:grid-cols-3 gap-4"},B.createElement("div",{className:"lg:col-span-2"},B.createElement(_U,{events:s,onSelectEvent:u})),B.createElement("div",{className:"space-y-4"},B.createElement(bU,{title:"Upcoming meetings",events:g}),l&&B.createElement("div",{className:"bg-white shadow rounded-lg p-4 border border-gray-100"},B.createElement("div",{className:"flex items-start justify-between"},B.createElement("div",null,B.createElement("div",{className:"text-sm font-semibold text-gray-900"},l.title),B.createElement("div",{className:"text-xs text-gray-600"},cs(l.start,"EEE, MMM d - p")," - ",cs(l.end,"p")),l.student_id&&B.createElement("div",{className:"text-xs text-gray-500 mt-1"},"Student ID: ",l.student_id),l.location&&B.createElement("div",{className:"text-xs text-gray-500 mt-1"},"Location: ",l.location)),B.createElement("button",{onClick:()=>u(null),className:"text-xs text-gray-500 hover:text-gray-700"},"Close"))))))):B.createElement("div",{className:"min-h-screen bg-gray-50 p-6"},B.createElement("div",{className:"max-w-xl mx-auto bg-white border border-gray-100 shadow rounded-2xl p-6"},B.createElement("div",{className:"flex items-start justify-between gap-3"},B.createElement("div",null,B.createElement("h1",{className:"text-xl font-semibold text-gray-900"},"Pending approval"),B.createElement("p",{className:"text-sm text-gray-600 mt-2"},"Your requested role must be approved before you can access dashboards."),B.createElement("div",{className:"text-sm text-gray-700 mt-3"},"Requested role:"," ",B.createElement("span",{className:"font-semibold text-indigo-700"},(i==null?void 0:i.requested_role)||((y=e==null?void 0:e.user_metadata)==null?void 0:y.requested_role)||"N/A"))),B.createElement("button",{onClick:a,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 text-sm"},"Logout")))):B.createElement("div",{className:"min-h-screen bg-gray-50 p-6"},B.createElement("div",{className:"max-w-5xl mx-auto space-y-6"},B.createElement("div",{className:"flex items-center justify-between gap-4"},B.createElement("div",{className:"flex items-center gap-3"},n&&B.createElement("button",{onClick:n,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 text-sm"},"Back to Home"),B.createElement("div",null,B.createElement("h1",{className:"text-2xl font-semibold text-gray-900"},"Teacher Dashboard"),B.createElement("p",{className:"text-sm text-gray-600"},"Sign in to view your schedule.")))),B.createElement("div",{className:"flex justify-center"},B.createElement(v_,{initialMode:"login",initialRole:"teacher"}))))}function Q_e({teachers:n=[],onSelect:e}){return B.createElement("div",{className:"grid md:grid-cols-2 gap-4"},n.map(t=>{const i=typeof t.rating=="number"&&Number.isFinite(t.rating)?`${t.rating.toFixed(1)} stars`:null,r=t.nextSlot?new Date(t.nextSlot):null,a=Array.isArray(t.subjects)?t.subjects:[];return B.createElement("div",{key:t.id,className:"bg-white shadow rounded-lg p-4 border border-gray-100"},B.createElement("div",{className:"flex items-start justify-between gap-3"},B.createElement("div",null,B.createElement("div",{className:"text-lg font-semibold text-gray-900"},t.name),a.length>0&&B.createElement("div",{className:"text-xs text-gray-500"},a.join(", "))),i&&B.createElement("div",{className:"text-xs px-2 py-1 rounded-full bg-indigo-50 text-indigo-700 font-semibold"},i)),t.focus&&B.createElement("p",{className:"text-sm text-gray-700 mt-2"},t.focus),r&&B.createElement("div",{className:"text-xs text-gray-600 mt-3"},"Next availability: ",cs(r,"EEE, MMM d - p")),B.createElement("button",{onClick:()=>e&&e(t),className:"mt-3 inline-flex items-center gap-2 px-3 py-2 rounded bg-indigo-600 text-white text-sm hover:bg-indigo-700"},"View availability"))}))}const eD=n=>n?String(n).slice(0,8):"",J_e=n=>({id:n.id,title:n.student_id?`Student ${eD(n.student_id)} - ${n.title||"Lesson"}`:n.title||"Lesson",start:new Date(n.start_at),end:new Date(n.end_at),location:n.location||null,category:"class",student_id:n.student_id});function ebe({onBack:n}){var ee;const{user:e,role:t,profile:i,loading:r,signOut:a}=Ep()||{},[s,o]=F.useState([]),[l,u]=F.useState(""),[h,p]=F.useState([]),[g,y]=F.useState([]),[_,S]=F.useState(null),[x,w]=F.useState([]),[T,M]=F.useState(null),[C,N]=F.useState(""),[D,P]=F.useState(""),z=F.useMemo(()=>h.map(J_e),[h]),I=F.useMemo(()=>{const Y=new Date;return[...z].filter(re=>re.start>=Y).sort((re,J)=>re.start-J.start).slice(0,4)},[z]),L=async()=>{const{data:Y,error:re}=await Bs.from("parent_students").select("student_id").eq("parent_id",e.id);if(re)throw re;const J=(Y||[]).map(se=>se.student_id).filter(Boolean);return o(J),!l&&J.length&&u(J[0]),J.length||u(""),J},H=async Y=>{if(!Y.length){p([]);return}const{data:re,error:J}=await Bs.from("lessons").select("id,title,start_at,end_at,location,student_id").in("student_id",Y).order("start_at",{ascending:!0});if(J)throw J;p(re||[])},j=async()=>{const{data:Y,error:re}=await Bs.from("profiles").select("id,display_name,email,subjects").eq("role","teacher").order("display_name",{ascending:!0});if(re)throw re;const J=(Y||[]).map(se=>({id:se.id,name:se.display_name||se.email||`Teacher ${eD(se.id)}`,subjects:se.subjects||[],rating:4.8,focus:"Book a slot to schedule a session."}));y(J),!_&&J.length&&S(J[0])},G=async Y=>{if(!Y){w([]);return}const re=new Date().toISOString(),{data:J,error:se}=await Bs.from("teacher_availability").select("id,start_at,end_at,is_booked").eq("teacher_id",Y).eq("is_booked",!1).gte("start_at",re).order("start_at",{ascending:!0});if(se)throw se;w(J||[])};F.useEffect(()=>{let Y=!1;return(async()=>{if(!(!e||t!=="parent")){P("");try{const J=await L();if(Y)return;await Promise.all([H(J),j()])}catch(J){if(Y)return;P(J.message||String(J))}}})(),()=>{Y=!0}},[t,e]),F.useEffect(()=>{let Y=!1;return(async()=>{if(!(!e||t!=="parent")&&_!=null&&_.id)try{await G(_.id)}catch(J){Y||P(J.message||String(J))}})(),()=>{Y=!0}},[t,_,e]);const K=async Y=>{if(!l){N("No linked student selected. Ask an admin to link a student to your parent account.");return}N(""),P("");const{data:re,error:J}=await Bs.rpc("book_slot",{availability_id:Y.id,student_id:l});if(J){P(J.message);return}const se=re!=null&&re.start_at?new Date(re.start_at):null,q=re!=null&&re.end_at?new Date(re.end_at):null;N(se&&q?`Booked: ${cs(se,"PPPp")} - ${cs(q,"p")}`:"Booked successfully."),await Promise.all([H(s),G(_==null?void 0:_.id)])};return r?B.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-6"},B.createElement("div",{className:"text-sm text-gray-600"},"Loading session...")):e?t?t!=="parent"?B.createElement("div",{className:"min-h-screen bg-gray-50 p-6"},B.createElement("div",{className:"max-w-xl mx-auto bg-white border border-gray-100 shadow rounded-2xl p-6"},B.createElement("div",{className:"flex items-start justify-between gap-3"},B.createElement("div",null,B.createElement("h1",{className:"text-xl font-semibold text-gray-900"},"Role mismatch"),B.createElement("p",{className:"text-sm text-gray-600 mt-2"},"You are signed in as ",B.createElement("span",{className:"font-semibold text-indigo-700"},t),". This page is for parents.")),B.createElement("button",{onClick:a,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 text-sm"},"Logout")),B.createElement("div",{className:"mt-4"},n&&B.createElement("button",{onClick:n,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 text-sm"},"Back to Home")))):B.createElement("div",{className:"h-screen overflow-y-auto bg-gray-50"},B.createElement("div",{className:"max-w-6xl mx-auto p-6 space-y-6"},B.createElement("div",{className:"flex items-center justify-between gap-4"},B.createElement("div",{className:"flex items-center gap-3"},n&&B.createElement("button",{onClick:n,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 text-sm"},"Back to Home"),B.createElement("div",null,B.createElement("h1",{className:"text-2xl font-semibold text-gray-900"},"Parents Dashboard"),B.createElement("p",{className:"text-sm text-gray-600"},"Student schedule plus booking for available teachers."))),B.createElement("button",{onClick:a,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 text-sm"},"Logout")),D&&B.createElement("div",{className:"text-sm text-red-600 bg-red-50 border border-red-100 rounded-lg p-3"},D),B.createElement("div",{className:"grid lg:grid-cols-3 gap-4"},B.createElement("div",{className:"lg:col-span-2"},B.createElement(_U,{events:z,onSelectEvent:M})),B.createElement("div",{className:"space-y-4"},B.createElement("div",{className:"bg-white shadow rounded-lg p-4 border border-gray-100"},B.createElement("div",{className:"text-sm font-semibold text-gray-900"},"Linked students"),s.length?B.createElement("select",{value:l,onChange:Y=>u(Y.target.value),className:"mt-2 w-full px-3 py-2 rounded border border-gray-200"},s.map(Y=>B.createElement("option",{key:Y,value:Y},"Student ",eD(Y)))):B.createElement("p",{className:"text-sm text-gray-600 mt-2"},"No linked students. Ask an admin to link a student to your parent account.")),B.createElement(bU,{title:"Student upcoming",events:I}),T&&B.createElement("div",{className:"bg-white shadow rounded-lg p-4 border border-gray-100"},B.createElement("div",{className:"flex items-start justify-between"},B.createElement("div",null,B.createElement("div",{className:"text-sm font-semibold text-gray-900"},T.title),B.createElement("div",{className:"text-xs text-gray-600"},cs(T.start,"EEE, MMM d - p")," - ",cs(T.end,"p")),T.location&&B.createElement("div",{className:"text-xs text-gray-500 mt-1"},"Location: ",T.location)),B.createElement("button",{onClick:()=>M(null),className:"text-xs text-gray-500 hover:text-gray-700"},"Close"))))),B.createElement("div",{className:"space-y-3"},B.createElement("div",{className:"flex items-center justify-between"},B.createElement("div",null,B.createElement("h2",{className:"text-xl font-semibold text-gray-900"},"Teachers available for booking"),B.createElement("p",{className:"text-sm text-gray-600"},"Select a teacher and book an open slot.")),C&&B.createElement("div",{className:"text-sm text-indigo-700 bg-indigo-50 px-3 py-2 rounded"},C)),B.createElement(Q_e,{teachers:g,onSelect:Y=>{S(Y),N("")}}),_&&B.createElement("div",{className:"bg-white shadow rounded-lg p-4 border border-gray-100"},B.createElement("div",{className:"flex items-center justify-between"},B.createElement("div",null,B.createElement("div",{className:"text-lg font-semibold text-gray-900"},_.name),B.createElement("div",{className:"text-xs text-gray-600"},x.length?`${x.length} open slots`:"No open slots"))),B.createElement("div",{className:"grid md:grid-cols-2 gap-3 mt-3"},x.map(Y=>B.createElement("div",{key:Y.id,className:"border border-gray-100 rounded p-3"},B.createElement("div",{className:"text-sm font-semibold text-gray-900"},cs(new Date(Y.start_at),"EEE, MMM d")),B.createElement("div",{className:"text-xs text-gray-600"},cs(new Date(Y.start_at),"p")," - ",cs(new Date(Y.end_at),"p")),B.createElement("button",{onClick:()=>K(Y),className:"mt-2 px-3 py-2 rounded bg-indigo-600 text-white text-sm hover:bg-indigo-700 disabled:bg-indigo-300",disabled:!l},"Book this slot")))),!x.length&&B.createElement("p",{className:"text-sm text-gray-600 mt-3"},"No availability found for this teacher."))))):B.createElement("div",{className:"min-h-screen bg-gray-50 p-6"},B.createElement("div",{className:"max-w-xl mx-auto bg-white border border-gray-100 shadow rounded-2xl p-6"},B.createElement("div",{className:"flex items-start justify-between gap-3"},B.createElement("div",null,B.createElement("h1",{className:"text-xl font-semibold text-gray-900"},"Pending approval"),B.createElement("p",{className:"text-sm text-gray-600 mt-2"},"Your requested role must be approved before you can access dashboards."),B.createElement("div",{className:"text-sm text-gray-700 mt-3"},"Requested role:"," ",B.createElement("span",{className:"font-semibold text-indigo-700"},(i==null?void 0:i.requested_role)||((ee=e==null?void 0:e.user_metadata)==null?void 0:ee.requested_role)||"N/A"))),B.createElement("button",{onClick:a,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 text-sm"},"Logout")))):B.createElement("div",{className:"min-h-screen bg-gray-50 p-6"},B.createElement("div",{className:"max-w-5xl mx-auto space-y-6"},B.createElement("div",{className:"flex items-center justify-between gap-4"},B.createElement("div",{className:"flex items-center gap-3"},n&&B.createElement("button",{onClick:n,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 text-sm"},"Back to Home"),B.createElement("div",null,B.createElement("h1",{className:"text-2xl font-semibold text-gray-900"},"Parents Dashboard"),B.createElement("p",{className:"text-sm text-gray-600"},"Sign in to view schedules and book teachers.")))),B.createElement("div",{className:"flex justify-center"},B.createElement(v_,{initialMode:"login",initialRole:"parent"}))))}function tbe({onBack:n}){var s;const{user:e,profile:t,role:i,loading:r,signOut:a}=Ep()||{};return r?B.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-6"},B.createElement("div",{className:"text-sm text-gray-600"},"Loading session...")):B.createElement("div",{className:"min-h-screen bg-gray-50 p-6"},B.createElement("div",{className:"max-w-5xl mx-auto"},B.createElement("div",{className:"flex items-center justify-between gap-4 mb-6"},B.createElement("div",{className:"flex items-center gap-3"},n&&B.createElement("button",{onClick:n,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 text-sm"},"Back to Home"),B.createElement("div",null,B.createElement("h1",{className:"text-2xl font-semibold text-gray-900"},"Account"),B.createElement("p",{className:"text-sm text-gray-600"},"Login or sign up to access your dashboard."))),e&&B.createElement("button",{onClick:a,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 text-sm"},"Logout")),!e&&B.createElement("div",{className:"flex justify-center"},B.createElement(v_,{initialMode:"login"})),e&&!i&&B.createElement("div",{className:"max-w-xl mx-auto bg-white border border-gray-100 shadow rounded-2xl p-6"},B.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Pending approval"),B.createElement("p",{className:"text-sm text-gray-600 mt-2"},"Your account is created, but an admin must approve your requested role before dashboards unlock."),B.createElement("div",{className:"mt-4 text-sm"},B.createElement("div",{className:"text-gray-700"},"Requested role:"," ",B.createElement("span",{className:"font-semibold text-indigo-700"},(t==null?void 0:t.requested_role)||((s=e==null?void 0:e.user_metadata)==null?void 0:s.requested_role)||"Unknown")),B.createElement("div",{className:"text-gray-700 mt-1"},"Email: ",B.createElement("span",{className:"font-semibold"},e.email)))),e&&i&&B.createElement("div",{className:"max-w-xl mx-auto bg-white border border-gray-100 shadow rounded-2xl p-6"},B.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"You're signed in"),B.createElement("p",{className:"text-sm text-gray-600 mt-2"},"Signed in as ",B.createElement("span",{className:"font-semibold"},e.email)," with role"," ",B.createElement("span",{className:"font-semibold text-indigo-700"},i),"."),B.createElement("p",{className:"text-sm text-gray-600 mt-2"},"Use the Home menu to open your dashboard."))))}function nbe({onBack:n}){const{user:e,loading:t,signOut:i}=Ep()||{};return t?B.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-6"},B.createElement("div",{className:"text-sm text-gray-600"},"Loading session...")):B.createElement("div",{className:"min-h-screen bg-gray-50 p-6"},B.createElement("div",{className:"max-w-5xl mx-auto"},B.createElement("div",{className:"flex items-center justify-between gap-4 mb-6"},B.createElement("div",{className:"flex items-center gap-3"},n&&B.createElement("button",{onClick:n,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 text-sm"},"Back to Home"),B.createElement("div",null,B.createElement("h1",{className:"text-2xl font-semibold text-gray-900"},"Create account"),B.createElement("p",{className:"text-sm text-gray-600"},"Sign up with email/password and request a role."))),e&&B.createElement("button",{onClick:i,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 text-sm"},"Logout")),B.createElement("div",{className:"flex justify-center"},B.createElement(v_,{initialMode:"signup"}))))}const ibe=Uq.createRoot(document.querySelector("#root")),rbe={login:tbe,signup:nbe,students:X_e,teachers:Z_e,parents:ebe};function abe(){const[n,e]=F.useState("canvas"),[t,i]=F.useState(null),[r,a]=F.useState(!0),{user:s,role:o,loading:l}=Ep()||{},u=F.useMemo(()=>t&&rbe[t]||null,[t]),h=y=>{a(!0),i(y),e("loading"),setTimeout(()=>e("content"),600)},p=()=>{a(!1),i(null),e("canvas")},g=y=>y==="student"?"students":y==="parent"?"parents":y==="teacher"?"teachers":null;return F.useEffect(()=>{if(!r||l||!s)return;if(!o){t!=="login"&&(i("login"),e("content"));return}const y=g(o),S=!t||(t==="login"||t==="signup")?y:t;S&&S!==t?(i(S),e("content")):S&&n!=="content"&&e("content")},[r,l,o,t,s,n]),B.createElement(B.Fragment,null,B.createElement(Ehe,{collapsed:!0}),n==="canvas"&&B.createElement(eJ,{camera:{fov:45,near:.2,far:200,position:[-18,22,50]}},B.createElement("color",{attach:"background",args:["#faecbd"]}),B.createElement(zte,{onNavigate:h}),B.createElement(sde,null)),n==="loading"&&B.createElement("div",{style:{position:"fixed",inset:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(255,255,255,0.95)",zIndex:9999}},B.createElement("div",{style:{fontSize:24,color:"#333"}},"Loading...")),n==="content"&&u&&B.createElement(u,{onBack:p}))}function sbe(){return B.createElement(F.StrictMode,null,B.createElement(Sre,null,B.createElement(abe,null)))}ibe.render(B.createElement(sbe,null));
